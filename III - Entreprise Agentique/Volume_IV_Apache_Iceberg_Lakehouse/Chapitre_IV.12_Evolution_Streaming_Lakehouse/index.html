
<!doctype html>
<html lang="fr" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="Corpus encyclopédique francophone — science informatique, interopérabilité et entreprise agentique">
      
      
        <meta name="author" content="André-Guy Bruneau">
      
      
        <link rel="canonical" href="https://agbruneau.github.io/CorpusInformatique/III%20-%20Entreprise%20Agentique/Volume_IV_Apache_Iceberg_Lakehouse/Chapitre_IV.12_Evolution_Streaming_Lakehouse/">
      
      
        <link rel="prev" href="../Chapitre_IV.11_Operationnaliser_Apache_Iceberg/">
      
      
        <link rel="next" href="../Chapitre_IV.13_Securite_Gouvernance_Conformite/">
      
      
        
      
      
      <link rel="icon" href="../../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.7.2">
    
    
      
        <title>IV.12 — Évolution du streaming Lakehouse - Corpus Informatique</title>
      
    
    
      <link rel="stylesheet" href="../../../assets/stylesheets/main.484c7ddc.min.css">
      
        
        <link rel="stylesheet" href="../../../assets/stylesheets/palette.ab4e12ef.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../../css/extra.css">
    
    <script>__md_scope=new URL("../../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#chapitre-iv12-levolution-vers-le-streaming-lakehouse" class="md-skip">
          Aller au contenu
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="En-tête">
    <a href="../../.." title="Corpus Informatique" class="md-header__button md-logo" aria-label="Corpus Informatique" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Corpus Informatique
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              IV.12 — Évolution du streaming Lakehouse
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Passer au mode sombre"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Passer au mode sombre" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a4 4 0 0 0-4 4 4 4 0 0 0 4 4 4 4 0 0 0 4-4 4 4 0 0 0-4-4m0 10a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="slate" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Passer au mode clair"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Passer au mode clair" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12s-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6a6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Rechercher" placeholder="Rechercher" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Recherche">
        
        <button type="reset" class="md-search__icon md-icon" title="Effacer" aria-label="Effacer" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initialisation de la recherche
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
      <div class="md-header__source">
        <a href="https://github.com/agbruneau/CorpusInformatique" title="Aller au dépôt" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg>
  </div>
  <div class="md-source__repository">
    agbruneau/CorpusInformatique
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
            
<nav class="md-tabs" aria-label="Onglets" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../../.." class="md-tabs__link">
        
  
  
    
  
  Accueil

      </a>
    </li>
  

      
        
  
  
  
  
    
    
      
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../I%20-%20Science%20et%20G%C3%A9nie%20Informatique/Volume_I_Fondements_Mathematiques_Theorie/Chapitre_I.1_Fondements_Logiques_Raisonnement/" class="md-tabs__link">
          
  
  
    
  
  I — Science et Génie Informatique

        </a>
      </li>
    
  

    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../II%20-%20Interop%C3%A9rabilit%C3%A9/Chapitre_II.1_Introduction_Problematique/" class="md-tabs__link">
          
  
  
    
  
  II — Interopérabilité

        </a>
      </li>
    
  

      
        
  
  
  
    
  
  
    
    
      
  
  
  
    
  
  
    
    
      <li class="md-tabs__item md-tabs__item--active">
        <a href="../../Volume_I_Fondations_Entreprise_Agentique/Chapitre_I.1_Crise_Integration_Systemique/" class="md-tabs__link">
          
  
  
    
  
  III — Entreprise Agentique

        </a>
      </li>
    
  

    
  

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


  

<nav class="md-nav md-nav--primary md-nav--lifted md-nav--integrated" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../../.." title="Corpus Informatique" class="md-nav__button md-logo" aria-label="Corpus Informatique" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    Corpus Informatique
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/agbruneau/CorpusInformatique" title="Aller au dépôt" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg>
  </div>
  <div class="md-source__repository">
    agbruneau/CorpusInformatique
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../.." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Accueil
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_2" >
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    I — Science et Génie Informatique
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            
  
    I — Science et Génie Informatique
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_2_1" >
        
          
          <label class="md-nav__link" for="__nav_2_1" id="__nav_2_1_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Volume I — Fondements Mathématiques et Théorie de l'Informatique
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_1">
            <span class="md-nav__icon md-icon"></span>
            
  
    Volume I — Fondements Mathématiques et Théorie de l'Informatique
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../I%20-%20Science%20et%20G%C3%A9nie%20Informatique/Volume_I_Fondements_Mathematiques_Theorie/Chapitre_I.1_Fondements_Logiques_Raisonnement/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    I.1 — Fondements logiques et raisonnement
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../I%20-%20Science%20et%20G%C3%A9nie%20Informatique/Volume_I_Fondements_Mathematiques_Theorie/Chapitre_I.2_Structures_Discretes_Combinatoire/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    I.2 — Structures discrètes et combinatoire
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../I%20-%20Science%20et%20G%C3%A9nie%20Informatique/Volume_I_Fondements_Mathematiques_Theorie/Chapitre_I.3_Theorie_Graphes/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    I.3 — Théorie des graphes
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../I%20-%20Science%20et%20G%C3%A9nie%20Informatique/Volume_I_Fondements_Mathematiques_Theorie/Chapitre_I.4_Langages_Formels_Automates/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    I.4 — Langages formels et automates
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../I%20-%20Science%20et%20G%C3%A9nie%20Informatique/Volume_I_Fondements_Mathematiques_Theorie/Chapitre_I.5_Calculabilite_Decidabilite/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    I.5 — Calculabilité et décidabilité
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../I%20-%20Science%20et%20G%C3%A9nie%20Informatique/Volume_I_Fondements_Mathematiques_Theorie/Chapitre_I.6_Theorie_Complexite/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    I.6 — Théorie de la complexité
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_2_2" >
        
          
          <label class="md-nav__link" for="__nav_2_2" id="__nav_2_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Volume II — Architecture des Ordinateurs et Systèmes Numériques
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_2">
            <span class="md-nav__icon md-icon"></span>
            
  
    Volume II — Architecture des Ordinateurs et Systèmes Numériques
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../I%20-%20Science%20et%20G%C3%A9nie%20Informatique/Volume_II_Architecture_Ordinateurs_Systemes_Numeriques/Chapitre_I.7_Systemes_Numeriques_Donnees/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    I.7 — Systèmes numériques et données
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../I%20-%20Science%20et%20G%C3%A9nie%20Informatique/Volume_II_Architecture_Ordinateurs_Systemes_Numeriques/Chapitre_I.8_Circuits_Combinatoires/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    I.8 — Circuits combinatoires
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../I%20-%20Science%20et%20G%C3%A9nie%20Informatique/Volume_II_Architecture_Ordinateurs_Systemes_Numeriques/Chapitre_I.9_Circuits_Sequentiels/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    I.9 — Circuits séquentiels
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../I%20-%20Science%20et%20G%C3%A9nie%20Informatique/Volume_II_Architecture_Ordinateurs_Systemes_Numeriques/Chapitre_I.10_Conception_Systeme_HDL/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    I.10 — Conception système HDL
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../I%20-%20Science%20et%20G%C3%A9nie%20Informatique/Volume_II_Architecture_Ordinateurs_Systemes_Numeriques/Chapitre_I.11_Architecture_ISA/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    I.11 — Architecture ISA
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../I%20-%20Science%20et%20G%C3%A9nie%20Informatique/Volume_II_Architecture_Ordinateurs_Systemes_Numeriques/Chapitre_I.12_Conception_CPU/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    I.12 — Conception CPU
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../I%20-%20Science%20et%20G%C3%A9nie%20Informatique/Volume_II_Architecture_Ordinateurs_Systemes_Numeriques/Chapitre_I.13_Parallelisme_ILP/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    I.13 — Parallélisme ILP
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../I%20-%20Science%20et%20G%C3%A9nie%20Informatique/Volume_II_Architecture_Ordinateurs_Systemes_Numeriques/Chapitre_I.14_Hierarchie_Memoire_Stockage/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    I.14 — Hiérarchie mémoire et stockage
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../I%20-%20Science%20et%20G%C3%A9nie%20Informatique/Volume_II_Architecture_Ordinateurs_Systemes_Numeriques/Chapitre_I.15_Systemes_IO_Accelere/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    I.15 — Systèmes I/O accélérés
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_2_3" >
        
          
          <label class="md-nav__link" for="__nav_2_3" id="__nav_2_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Volume III — Systèmes d'Exploitation, Langages et Environnements
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_3">
            <span class="md-nav__icon md-icon"></span>
            
  
    Volume III — Systèmes d'Exploitation, Langages et Environnements
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../I%20-%20Science%20et%20G%C3%A9nie%20Informatique/Volume_III_Systemes_Exploitation_Langages_Environnements/Chapitre_I.16_Systemes_Exploitation_OS/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    I.16 — Systèmes d'exploitation
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../I%20-%20Science%20et%20G%C3%A9nie%20Informatique/Volume_III_Systemes_Exploitation_Langages_Environnements/Chapitre_I.17_Gestion_Concurrence/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    I.17 — Gestion de la concurrence
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../I%20-%20Science%20et%20G%C3%A9nie%20Informatique/Volume_III_Systemes_Exploitation_Langages_Environnements/Chapitre_I.18_Gestion_Memoire_Fichiers/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    I.18 — Gestion mémoire et fichiers
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../I%20-%20Science%20et%20G%C3%A9nie%20Informatique/Volume_III_Systemes_Exploitation_Langages_Environnements/Chapitre_I.19_Conception_Langages/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    I.19 — Conception des langages
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../I%20-%20Science%20et%20G%C3%A9nie%20Informatique/Volume_III_Systemes_Exploitation_Langages_Environnements/Chapitre_I.20_Compilation_Interpretation/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    I.20 — Compilation et interprétation
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../I%20-%20Science%20et%20G%C3%A9nie%20Informatique/Volume_III_Systemes_Exploitation_Langages_Environnements/Chapitre_I.21_Environnements_Virtualisation/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    I.21 — Environnements et virtualisation
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_2_4" >
        
          
          <label class="md-nav__link" for="__nav_2_4" id="__nav_2_4_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Volume IV — Structures de Données, Algorithmique et Génie Logiciel
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_4">
            <span class="md-nav__icon md-icon"></span>
            
  
    Volume IV — Structures de Données, Algorithmique et Génie Logiciel
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../I%20-%20Science%20et%20G%C3%A9nie%20Informatique/Volume_IV_Structures_Donnees_Algorithmique_Genie_Logiciel/Chapitre_I.22_Structures_Donnees_Fondamentales/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    I.22 — Structures de données fondamentales
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../I%20-%20Science%20et%20G%C3%A9nie%20Informatique/Volume_IV_Structures_Donnees_Algorithmique_Genie_Logiciel/Chapitre_I.23_Structures_Donnees_Avancees/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    I.23 — Structures de données avancées
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../I%20-%20Science%20et%20G%C3%A9nie%20Informatique/Volume_IV_Structures_Donnees_Algorithmique_Genie_Logiciel/Chapitre_I.24_Conception_Analyse_Algorithmes/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    I.24 — Conception et analyse d'algorithmes
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../I%20-%20Science%20et%20G%C3%A9nie%20Informatique/Volume_IV_Structures_Donnees_Algorithmique_Genie_Logiciel/Chapitre_I.25_Algorithmes_Graphes_Avances/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    I.25 — Algorithmes de graphes avancés
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../I%20-%20Science%20et%20G%C3%A9nie%20Informatique/Volume_IV_Structures_Donnees_Algorithmique_Genie_Logiciel/Chapitre_I.26_Processus_Developpement/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    I.26 — Processus de développement
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../I%20-%20Science%20et%20G%C3%A9nie%20Informatique/Volume_IV_Structures_Donnees_Algorithmique_Genie_Logiciel/Chapitre_I.27_Architecture_Logicielle/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    I.27 — Architecture logicielle
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../I%20-%20Science%20et%20G%C3%A9nie%20Informatique/Volume_IV_Structures_Donnees_Algorithmique_Genie_Logiciel/Chapitre_I.28_Qualite_Test_Maintenance/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    I.28 — Qualité, test et maintenance
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../I%20-%20Science%20et%20G%C3%A9nie%20Informatique/Volume_IV_Structures_Donnees_Algorithmique_Genie_Logiciel/Chapitre_I.29_DevOps_SRE/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    I.29 — DevOps et SRE
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_2_5" >
        
          
          <label class="md-nav__link" for="__nav_2_5" id="__nav_2_5_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Volume V — Données, Réseaux, Cloud et Sécurité
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_5">
            <span class="md-nav__icon md-icon"></span>
            
  
    Volume V — Données, Réseaux, Cloud et Sécurité
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../I%20-%20Science%20et%20G%C3%A9nie%20Informatique/Volume_V_Donnees_Reseaux_Cloud_Securite/Chapitre_I.30_SGBD_Fondements/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    I.30 — SGBD fondements
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../I%20-%20Science%20et%20G%C3%A9nie%20Informatique/Volume_V_Donnees_Reseaux_Cloud_Securite/Chapitre_I.31_SGBD_Implementation_Transactions/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    I.31 — SGBD implémentation et transactions
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../I%20-%20Science%20et%20G%C3%A9nie%20Informatique/Volume_V_Donnees_Reseaux_Cloud_Securite/Chapitre_I.32_Donnees_Modernes_BigData/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    I.32 — Données modernes et Big Data
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../I%20-%20Science%20et%20G%C3%A9nie%20Informatique/Volume_V_Donnees_Reseaux_Cloud_Securite/Chapitre_I.33_Fondements_Reseaux/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    I.33 — Fondements des réseaux
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../I%20-%20Science%20et%20G%C3%A9nie%20Informatique/Volume_V_Donnees_Reseaux_Cloud_Securite/Chapitre_I.34_Protocoles_Internetworking/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    I.34 — Protocoles et internetworking
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../I%20-%20Science%20et%20G%C3%A9nie%20Informatique/Volume_V_Donnees_Reseaux_Cloud_Securite/Chapitre_I.35_Systemes_Distribues/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    I.35 — Systèmes distribués
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../I%20-%20Science%20et%20G%C3%A9nie%20Informatique/Volume_V_Donnees_Reseaux_Cloud_Securite/Chapitre_I.36_Cloud_Infrastructures/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    I.36 — Cloud et infrastructures
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../I%20-%20Science%20et%20G%C3%A9nie%20Informatique/Volume_V_Donnees_Reseaux_Cloud_Securite/Chapitre_I.37_Fondements_Securite/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    I.37 — Fondements de la sécurité
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../I%20-%20Science%20et%20G%C3%A9nie%20Informatique/Volume_V_Donnees_Reseaux_Cloud_Securite/Chapitre_I.38_Cryptographie_Appliquee/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    I.38 — Cryptographie appliquée
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../I%20-%20Science%20et%20G%C3%A9nie%20Informatique/Volume_V_Donnees_Reseaux_Cloud_Securite/Chapitre_I.39_Securite_Reseaux/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    I.39 — Sécurité des réseaux
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../I%20-%20Science%20et%20G%C3%A9nie%20Informatique/Volume_V_Donnees_Reseaux_Cloud_Securite/Chapitre_I.40_Securite_Systemes/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    I.40 — Sécurité des systèmes
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_2_6" >
        
          
          <label class="md-nav__link" for="__nav_2_6" id="__nav_2_6_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Volume VI — Intelligence Artificielle et Systèmes Interactifs
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_6">
            <span class="md-nav__icon md-icon"></span>
            
  
    Volume VI — Intelligence Artificielle et Systèmes Interactifs
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../I%20-%20Science%20et%20G%C3%A9nie%20Informatique/Volume_VI_Intelligence_Artificielle_Systemes_Interactifs/Chapitre_I.41_Fondements_IA/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    I.41 — Fondements de l'IA
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../I%20-%20Science%20et%20G%C3%A9nie%20Informatique/Volume_VI_Intelligence_Artificielle_Systemes_Interactifs/Chapitre_I.42_Connaissance_Raisonnement/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    I.42 — Connaissance et raisonnement
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../I%20-%20Science%20et%20G%C3%A9nie%20Informatique/Volume_VI_Intelligence_Artificielle_Systemes_Interactifs/Chapitre_I.43_ML_Fondements/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    I.43 — ML fondements
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../I%20-%20Science%20et%20G%C3%A9nie%20Informatique/Volume_VI_Intelligence_Artificielle_Systemes_Interactifs/Chapitre_I.44_DeepLearning/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    I.44 — Deep Learning
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../I%20-%20Science%20et%20G%C3%A9nie%20Informatique/Volume_VI_Intelligence_Artificielle_Systemes_Interactifs/Chapitre_I.45_Reinforcement_Learning/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    I.45 — Reinforcement Learning
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../I%20-%20Science%20et%20G%C3%A9nie%20Informatique/Volume_VI_Intelligence_Artificielle_Systemes_Interactifs/Chapitre_I.46_TALN_NLP/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    I.46 — TALN / NLP
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../I%20-%20Science%20et%20G%C3%A9nie%20Informatique/Volume_VI_Intelligence_Artificielle_Systemes_Interactifs/Chapitre_I.47_Vision_Ordinateur/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    I.47 — Vision par ordinateur
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../I%20-%20Science%20et%20G%C3%A9nie%20Informatique/Volume_VI_Intelligence_Artificielle_Systemes_Interactifs/Chapitre_I.48_Infographie_Visualisation/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    I.48 — Infographie et visualisation
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../I%20-%20Science%20et%20G%C3%A9nie%20Informatique/Volume_VI_Intelligence_Artificielle_Systemes_Interactifs/Chapitre_I.49_IHM_HCI/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    I.49 — IHM / HCI
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../I%20-%20Science%20et%20G%C3%A9nie%20Informatique/Volume_VI_Intelligence_Artificielle_Systemes_Interactifs/Chapitre_I.50_Robotique_IoT/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    I.50 — Robotique et IoT
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_2_7" >
        
          
          <label class="md-nav__link" for="__nav_2_7" id="__nav_2_7_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Volume VII — Technologies Émergentes et Frontières
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_7_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_7">
            <span class="md-nav__icon md-icon"></span>
            
  
    Volume VII — Technologies Émergentes et Frontières
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../I%20-%20Science%20et%20G%C3%A9nie%20Informatique/Volume_VII_Technologies_Emergentes_Frontieres/Chapitre_I.51_Informatique_Quantique/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    I.51 — Informatique quantique
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../I%20-%20Science%20et%20G%C3%A9nie%20Informatique/Volume_VII_Technologies_Emergentes_Frontieres/Chapitre_I.52_Algorithmes_Cryptographie_Quantiques/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    I.52 — Algorithmes et cryptographie quantiques
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../I%20-%20Science%20et%20G%C3%A9nie%20Informatique/Volume_VII_Technologies_Emergentes_Frontieres/Chapitre_I.53_HPC_Exascale/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    I.53 — HPC et exascale
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../I%20-%20Science%20et%20G%C3%A9nie%20Informatique/Volume_VII_Technologies_Emergentes_Frontieres/Chapitre_I.54_Architectures_Post_Moore/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    I.54 — Architectures post-Moore
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../I%20-%20Science%20et%20G%C3%A9nie%20Informatique/Volume_VII_Technologies_Emergentes_Frontieres/Chapitre_I.55_Modeles_Fondateurs_IA/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    I.55 — Modèles fondateurs IA
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../I%20-%20Science%20et%20G%C3%A9nie%20Informatique/Volume_VII_Technologies_Emergentes_Frontieres/Chapitre_I.56_AGI_Alignement_Securite/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    I.56 — AGI, alignement et sécurité
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../I%20-%20Science%20et%20G%C3%A9nie%20Informatique/Volume_VII_Technologies_Emergentes_Frontieres/Chapitre_I.57_Sciences_Computationnelles/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    I.57 — Sciences computationnelles
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../I%20-%20Science%20et%20G%C3%A9nie%20Informatique/Volume_VII_Technologies_Emergentes_Frontieres/Chapitre_I.58_CyberPhysiques_Jumeaux/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    I.58 — Systèmes cyber-physiques et jumeaux
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../I%20-%20Science%20et%20G%C3%A9nie%20Informatique/Volume_VII_Technologies_Emergentes_Frontieres/Chapitre_I.59_Web3_Decentralise/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    I.59 — Web3 et décentralisé
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../I%20-%20Science%20et%20G%C3%A9nie%20Informatique/Volume_VII_Technologies_Emergentes_Frontieres/Chapitre_I.60_Synthese_Frontieres/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    I.60 — Synthèse et frontières
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_2_8" >
        
          
          <label class="md-nav__link" for="__nav_2_8" id="__nav_2_8_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Volume VIII — Convergence AGI–Quantique : Fondements et Algorithmes
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_8_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_8">
            <span class="md-nav__icon md-icon"></span>
            
  
    Volume VIII — Convergence AGI–Quantique : Fondements et Algorithmes
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../I%20-%20Science%20et%20G%C3%A9nie%20Informatique/Volume_VIII_Convergence_AGI_Quantique_Fondements/Chapitre_I.61_Introduction_Informatique/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    I.61 — Introduction à l'informatique
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../I%20-%20Science%20et%20G%C3%A9nie%20Informatique/Volume_VIII_Convergence_AGI_Quantique_Fondements/Chapitre_I.62_Convergence_AGI_Quantique/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    I.62 — Convergence AGI-quantique
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../I%20-%20Science%20et%20G%C3%A9nie%20Informatique/Volume_VIII_Convergence_AGI_Quantique_Fondements/Chapitre_I.63_Evolution_IA_Quantique/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    I.63 — Évolution IA-quantique
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../I%20-%20Science%20et%20G%C3%A9nie%20Informatique/Volume_VIII_Convergence_AGI_Quantique_Fondements/Chapitre_I.64_Reseaux_Neuronaux_Quantiques/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    I.64 — Réseaux neuronaux quantiques
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../I%20-%20Science%20et%20G%C3%A9nie%20Informatique/Volume_VIII_Convergence_AGI_Quantique_Fondements/Chapitre_I.65_Algorithmes_Evolutionnaires_Quantiques/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    I.65 — Algorithmes évolutionnaires quantiques
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../I%20-%20Science%20et%20G%C3%A9nie%20Informatique/Volume_VIII_Convergence_AGI_Quantique_Fondements/Chapitre_I.66_Renforcement_Quantique/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    I.66 — Renforcement quantique
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../I%20-%20Science%20et%20G%C3%A9nie%20Informatique/Volume_VIII_Convergence_AGI_Quantique_Fondements/Chapitre_I.67_Architectures_Hybrides/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    I.67 — Architectures hybrides
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../I%20-%20Science%20et%20G%C3%A9nie%20Informatique/Volume_VIII_Convergence_AGI_Quantique_Fondements/Chapitre_I.68_SVM_Quantiques/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    I.68 — SVM quantiques
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../I%20-%20Science%20et%20G%C3%A9nie%20Informatique/Volume_VIII_Convergence_AGI_Quantique_Fondements/Chapitre_I.69_Codage_Donnees_Quantiques/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    I.69 — Codage de données quantiques
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../I%20-%20Science%20et%20G%C3%A9nie%20Informatique/Volume_VIII_Convergence_AGI_Quantique_Fondements/Chapitre_I.70_Scalabilite_Correction_Erreurs/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    I.70 — Scalabilité et correction d'erreurs
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_2_9" >
        
          
          <label class="md-nav__link" for="__nav_2_9" id="__nav_2_9_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Volume IX — Convergence AGI–Quantique : Applications et Perspectives
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_9_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_9">
            <span class="md-nav__icon md-icon"></span>
            
  
    Volume IX — Convergence AGI–Quantique : Applications et Perspectives
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../I%20-%20Science%20et%20G%C3%A9nie%20Informatique/Volume_IX_Convergence_AGI_Quantique_Applications/Chapitre_I.71_TALN_Quantique/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    I.71 — TALN quantique
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../I%20-%20Science%20et%20G%C3%A9nie%20Informatique/Volume_IX_Convergence_AGI_Quantique_Applications/Chapitre_I.72_Securite_Confidentialite/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    I.72 — Sécurité et confidentialité
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../I%20-%20Science%20et%20G%C3%A9nie%20Informatique/Volume_IX_Convergence_AGI_Quantique_Applications/Chapitre_I.73_Ethique_Reglementaire/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    I.73 — Éthique et réglementaire
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../I%20-%20Science%20et%20G%C3%A9nie%20Informatique/Volume_IX_Convergence_AGI_Quantique_Applications/Chapitre_I.74_Implementation_Materielle/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    I.74 — Implémentation matérielle
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../I%20-%20Science%20et%20G%C3%A9nie%20Informatique/Volume_IX_Convergence_AGI_Quantique_Applications/Chapitre_I.75_Middleware_Software/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    I.75 — Middleware et software
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../I%20-%20Science%20et%20G%C3%A9nie%20Informatique/Volume_IX_Convergence_AGI_Quantique_Applications/Chapitre_I.76_Etudes_Cas/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    I.76 — Études de cas
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../I%20-%20Science%20et%20G%C3%A9nie%20Informatique/Volume_IX_Convergence_AGI_Quantique_Applications/Chapitre_I.77_Durabilite_Energie/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    I.77 — Durabilité et énergie
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../I%20-%20Science%20et%20G%C3%A9nie%20Informatique/Volume_IX_Convergence_AGI_Quantique_Applications/Chapitre_I.78_Metriques_Bancs/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    I.78 — Métriques et bancs d'essai
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../I%20-%20Science%20et%20G%C3%A9nie%20Informatique/Volume_IX_Convergence_AGI_Quantique_Applications/Chapitre_I.79_Perspectives_Avenir/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    I.79 — Perspectives d'avenir
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../I%20-%20Science%20et%20G%C3%A9nie%20Informatique/Volume_IX_Convergence_AGI_Quantique_Applications/Chapitre_I.80_Infrastructure_Centres_Donnees_IA/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    I.80 — Infrastructure et centres de données IA
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_3" >
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    II — Interopérabilité
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            
  
    II — Interopérabilité
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../II%20-%20Interop%C3%A9rabilit%C3%A9/Chapitre_II.1_Introduction_Problematique/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    II.1 — Introduction et problématique
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../II%20-%20Interop%C3%A9rabilit%C3%A9/Chapitre_II.2_Fondements_Theoriques/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    II.2 — Fondements théoriques
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../II%20-%20Interop%C3%A9rabilit%C3%A9/Chapitre_II.3_Integration_Applications/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    II.3 — Intégration des applications
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../II%20-%20Interop%C3%A9rabilit%C3%A9/Chapitre_II.4_Integration_Donnees/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    II.4 — Intégration des données
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../II%20-%20Interop%C3%A9rabilit%C3%A9/Chapitre_II.5_Integration_Evenements/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    II.5 — Intégration des événements
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../II%20-%20Interop%C3%A9rabilit%C3%A9/Chapitre_II.6_Standards_Contrats/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    II.6 — Standards et contrats
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../II%20-%20Interop%C3%A9rabilit%C3%A9/Chapitre_II.7_Resilience_Observabilite/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    II.7 — Résilience et observabilité
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../II%20-%20Interop%C3%A9rabilit%C3%A9/Chapitre_II.8_Collaboration_Automatisation/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    II.8 — Collaboration et automatisation
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../II%20-%20Interop%C3%A9rabilit%C3%A9/Chapitre_II.9_Architecture_Reference/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    II.9 — Architecture de référence
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../II%20-%20Interop%C3%A9rabilit%C3%A9/Chapitre_II.10_Order_to_Cash/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    II.10 — Order-to-Cash
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../II%20-%20Interop%C3%A9rabilit%C3%A9/Chapitre_II.11_Entreprise_Agentique/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    II.11 — Entreprise agentique
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../II%20-%20Interop%C3%A9rabilit%C3%A9/Chapitre_II.12_Securite_Identite_Conformite/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    II.12 — Sécurité, identité et conformité
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../II%20-%20Interop%C3%A9rabilit%C3%A9/Chapitre_II.A_Annexes/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Annexes
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
        
        
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" checked>
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    
  
    III — Entreprise Agentique
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            
  
    III — Entreprise Agentique
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
        
          
          
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_4_1" >
        
          
          <label class="md-nav__link" for="__nav_4_1" id="__nav_4_1_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    
  
    Volume I — Fondations
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_1">
            <span class="md-nav__icon md-icon"></span>
            
  
    Volume I — Fondations
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Volume_I_Fondations_Entreprise_Agentique/Chapitre_I.1_Crise_Integration_Systemique/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    I.1 — Crise d'intégration systémique
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Volume_I_Fondations_Entreprise_Agentique/Chapitre_I.2_Fondements_Dimensions_Interoperabilite/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    I.2 — Fondements et dimensions de l'interopérabilité
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Volume_I_Fondations_Entreprise_Agentique/Chapitre_I.3_Cadres_Reference_Standards_Maturite/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    I.3 — Cadres de référence, standards et maturité
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Volume_I_Fondations_Entreprise_Agentique/Chapitre_I.4_Principes_Architecture_Reactive/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    I.4 — Principes d'architecture réactive
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Volume_I_Fondations_Entreprise_Agentique/Chapitre_I.5_Ecosysteme_API/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    I.5 — Écosystème API
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Volume_I_Fondations_Entreprise_Agentique/Chapitre_I.6_Architecture_Evenements_EDA/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    I.6 — Architecture événements (EDA)
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Volume_I_Fondations_Entreprise_Agentique/Chapitre_I.7_Contrats_Donnees/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    I.7 — Contrats de données
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Volume_I_Fondations_Entreprise_Agentique/Chapitre_I.8_Conception_Implementation_Observabilite/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    I.8 — Conception et implémentation de l'observabilité
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Volume_I_Fondations_Entreprise_Agentique/Chapitre_I.9_Etudes_Cas_Architecturales/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    I.9 — Études de cas architecturales
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Volume_I_Fondations_Entreprise_Agentique/Chapitre_I.10_Limites_Interoperabilite_Semantique/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    I.10 — Limites de l'interopérabilité sémantique
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Volume_I_Fondations_Entreprise_Agentique/Chapitre_I.11_IA_Moteur_Interoperabilite/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    I.11 — IA moteur d'interopérabilité
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Volume_I_Fondations_Entreprise_Agentique/Chapitre_I.12_Definition_Interoperabilite_Cognitivo_Adaptative/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    I.12 — Définition de l'interopérabilité cognitivo-adaptative
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Volume_I_Fondations_Entreprise_Agentique/Chapitre_I.13_Ere_IA_Agentique_Modele_Travailleur_Numerique/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    I.13 — Ère IA agentique et modèle du travailleur numérique
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Volume_I_Fondations_Entreprise_Agentique/Chapitre_I.14_Maillage_Agentique/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    I.14 — Maillage agentique
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Volume_I_Fondations_Entreprise_Agentique/Chapitre_I.15_Ingenierie_Systemes_Cognitifs_Protocoles_Interaction/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    I.15 — Ingénierie des systèmes cognitifs et protocoles d'interaction
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Volume_I_Fondations_Entreprise_Agentique/Chapitre_I.16_Modele_Operationnel_Symbiose_Humain_Agent/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    I.16 — Modèle opérationnel de symbiose humain-agent
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Volume_I_Fondations_Entreprise_Agentique/Chapitre_I.17_Gouvernance_Constitutionnelle_Alignement_IA/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    I.17 — Gouvernance constitutionnelle et alignement IA
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Volume_I_Fondations_Entreprise_Agentique/Chapitre_I.18_AgentOps_Industrialisation_Securisation/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    I.18 — AgentOps : industrialisation et sécurisation
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Volume_I_Fondations_Entreprise_Agentique/Chapitre_I.19_Architecte_Intentions_Role_Sociotechnique/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    I.19 — Architecte des intentions : rôle sociotechnique
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Volume_I_Fondations_Entreprise_Agentique/Chapitre_I.20_Cockpit_Berger_Intention/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    I.20 — Cockpit du berger d'intention
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Volume_I_Fondations_Entreprise_Agentique/Chapitre_I.21_Feuille_Route_Transformation_Agentique/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    I.21 — Feuille de route de la transformation agentique
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Volume_I_Fondations_Entreprise_Agentique/Chapitre_I.22_Gestion_Strategique_Portefeuille_Applicatif_APM_Cognitif/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    I.22 — Gestion stratégique du portefeuille applicatif (APM cognitif)
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Volume_I_Fondations_Entreprise_Agentique/Chapitre_I.23_Patrons_Modernisation_Agentification/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    I.23 — Patrons de modernisation et agentification
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Volume_I_Fondations_Entreprise_Agentique/Chapitre_I.24_Industrialisation_Ingenierie_Plateforme/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    I.24 — Industrialisation et ingénierie de plateforme
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Volume_I_Fondations_Entreprise_Agentique/Chapitre_I.25_Economie_Cognitive_Diplomatie_Algorithmique/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    I.25 — Économie cognitive et diplomatie algorithmique
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Volume_I_Fondations_Entreprise_Agentique/Chapitre_I.26_Gestion_Risques_Systemiques_Superalignement/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    I.26 — Gestion des risques systémiques et superalignement
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Volume_I_Fondations_Entreprise_Agentique/Chapitre_I.27_Prospective_Agent_Auto_Architecturant_AGI_Entreprise/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    I.27 — Prospective : agent auto-architecturant et AGI d'entreprise
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Volume_I_Fondations_Entreprise_Agentique/Chapitre_I.28_Conclusion_Architecture_Intentionnelle_Sagesse_Collective/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    I.28 — Conclusion : architecture intentionnelle et sagesse collective
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
        
          
          
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_4_2" >
        
          
          <label class="md-nav__link" for="__nav_4_2" id="__nav_4_2_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    
  
    Volume II — Infrastructure Agentique
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_2">
            <span class="md-nav__icon md-icon"></span>
            
  
    Volume II — Infrastructure Agentique
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Volume_II_Infrastructure_Agentique/Chapitre_II.1_Ingenierie_Plateforme/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    II.1 — Ingénierie de plateforme
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Volume_II_Infrastructure_Agentique/Chapitre_II.2_Fondamentaux_Apache_Kafka_Confluent/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    II.2 — Fondamentaux Apache Kafka et Confluent
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Volume_II_Infrastructure_Agentique/Chapitre_II.3_Conception_Modelisation_Flux_Evenements/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    II.3 — Conception et modélisation des flux d'événements
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Volume_II_Infrastructure_Agentique/Chapitre_II.4_Contrats_Donnees_Gouvernance_Semantique/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    II.4 — Contrats de données et gouvernance sémantique
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Volume_II_Infrastructure_Agentique/Chapitre_II.5_Flux_Temps_Reel/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    II.5 — Flux temps réel
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Volume_II_Infrastructure_Agentique/Chapitre_II.6_Google_Cloud_Vertex_AI/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    II.6 — Google Cloud et Vertex AI
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Volume_II_Infrastructure_Agentique/Chapitre_II.7_Ingenierie_Contexte_RAG/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    II.7 — Ingénierie de contexte et RAG
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Volume_II_Infrastructure_Agentique/Chapitre_II.8_Integration_Backbone_Evenementiel_Couche_Cognitive/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    II.8 — Intégration backbone événementiel et couche cognitive
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Volume_II_Infrastructure_Agentique/Chapitre_II.9_Patrons_Architecturaux_Avances_AEM/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    II.9 — Patrons architecturaux avancés (AEM)
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Volume_II_Infrastructure_Agentique/Chapitre_II.10_Pipelines_CI_CD_Deploiement_Agents/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    II.10 — Pipelines CI/CD et déploiement d'agents
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Volume_II_Infrastructure_Agentique/Chapitre_II.11_Observabilite_Comportementale_Monitoring/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    II.11 — Observabilité comportementale et monitoring
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Volume_II_Infrastructure_Agentique/Chapitre_II.12_Tests_Evaluation_Simulation_Systemes_Multi_Agents/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    II.12 — Tests, évaluation et simulation de systèmes multi-agents
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Volume_II_Infrastructure_Agentique/Chapitre_II.13_Paysage_Menaces_Securite_Systemes_Agentiques/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    II.13 — Paysage des menaces et sécurité des systèmes agentiques
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Volume_II_Infrastructure_Agentique/Chapitre_II.14_Securisation_Infrastructure/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    II.14 — Sécurisation de l'infrastructure
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Volume_II_Infrastructure_Agentique/Chapitre_II.15_Conformite_Reglementaire_Gestion_Confidentialite/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    II.15 — Conformité réglementaire et gestion de la confidentialité
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
        
          
          
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_4_3" >
        
          
          <label class="md-nav__link" for="__nav_4_3" id="__nav_4_3_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    
  
    Volume III — Apache Kafka : Guide de l'Architecte
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_3">
            <span class="md-nav__icon md-icon"></span>
            
  
    Volume III — Apache Kafka : Guide de l'Architecte
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Volume_III_Apache_Kafka_Guide_Architecte/Chapitre_III.1_Decouvrir_Kafka/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    III.1 — Découvrir Kafka
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Volume_III_Apache_Kafka_Guide_Architecte/Chapitre_III.2_Architecture_Cluster_Kafka/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    III.2 — Architecture du cluster Kafka
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Volume_III_Apache_Kafka_Guide_Architecte/Chapitre_III.3_Clients_Kafka_Production/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    III.3 — Clients Kafka en production
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Volume_III_Apache_Kafka_Guide_Architecte/Chapitre_III.4_Applications_Consommatrices/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    III.4 — Applications consommatrices
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Volume_III_Apache_Kafka_Guide_Architecte/Chapitre_III.5_Cas_Utilisation_Kafka/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    III.5 — Cas d'utilisation Kafka
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Volume_III_Apache_Kafka_Guide_Architecte/Chapitre_III.6_Contrats_Donnees/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    III.6 — Contrats de données
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Volume_III_Apache_Kafka_Guide_Architecte/Chapitre_III.7_Patrons_Interaction_Kafka/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    III.7 — Patrons d'interaction Kafka
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Volume_III_Apache_Kafka_Guide_Architecte/Chapitre_III.8_Conception_Application_Streaming/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    III.8 — Conception d'application streaming
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Volume_III_Apache_Kafka_Guide_Architecte/Chapitre_III.9_Gestion_Kafka_Entreprise/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    III.9 — Gestion Kafka en entreprise
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Volume_III_Apache_Kafka_Guide_Architecte/Chapitre_III.10_Organisation_Projet_Kafka/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    III.10 — Organisation d'un projet Kafka
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Volume_III_Apache_Kafka_Guide_Architecte/Chapitre_III.11_Operer_Kafka/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    III.11 — Opérer Kafka
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Volume_III_Apache_Kafka_Guide_Architecte/Chapitre_III.12_Avenir_Kafka/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    III.12 — L'avenir de Kafka
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
    
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
        
          
          
        
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_4" checked>
        
          
          <label class="md-nav__link" for="__nav_4_4" id="__nav_4_4_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    
  
    Volume IV — Apache Iceberg et Lakehouse
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_4_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_4_4">
            <span class="md-nav__icon md-icon"></span>
            
  
    Volume IV — Apache Iceberg et Lakehouse
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Chapitre_IV.1_Monde_Lakehouse_Iceberg/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    IV.1 — Le monde Lakehouse et Iceberg
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Chapitre_IV.2_Anatomie_Technique/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    IV.2 — Anatomie technique
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Chapitre_IV.3_Mise_Pratique/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    IV.3 — Mise en pratique
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Chapitre_IV.4_Preparer_Passage_Iceberg/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    IV.4 — Préparer le passage à Iceberg
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Chapitre_IV.5_Selection_Couche_Stockage/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    IV.5 — Sélection de la couche de stockage
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Chapitre_IV.6_Architecture_Couche_Ingestion/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    IV.6 — Architecture de la couche d'ingestion
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Chapitre_IV.7_Implementation_Couche_Catalogue/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    IV.7 — Implémentation de la couche catalogue
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Chapitre_IV.8_Conception_Couche_Federation/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    IV.8 — Conception de la couche de fédération
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Chapitre_IV.9_Comprendre_Couche_Consommation/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    IV.9 — Comprendre la couche de consommation
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Chapitre_IV.10_Maintenir_Lakehouse_Production/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    IV.10 — Maintenir le Lakehouse en production
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Chapitre_IV.11_Operationnaliser_Apache_Iceberg/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    IV.11 — Opérationnaliser Apache Iceberg
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    
  
    IV.12 — Évolution du streaming Lakehouse
  

    
  </span>
  
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    
  
    IV.12 — Évolution du streaming Lakehouse
  

    
  </span>
  
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table des matières">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table des matières
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#introduction" class="md-nav__link">
    <span class="md-ellipsis">
      
        Introduction
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#iv121-de-larchitecture-lambda-au-streaming-lakehouse" class="md-nav__link">
    <span class="md-ellipsis">
      
        IV.12.1 De l'Architecture Lambda au Streaming Lakehouse
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="IV.12.1 De l&#39;Architecture Lambda au Streaming Lakehouse">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#les-origines-le-defi-du-big-data" class="md-nav__link">
    <span class="md-ellipsis">
      
        Les Origines : Le Défi du Big Data
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#larchitecture-lambda-une-reconciliation-imparfaite" class="md-nav__link">
    <span class="md-ellipsis">
      
        L'Architecture Lambda : Une Réconciliation Imparfaite
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#les-limites-fondamentales-de-lambda" class="md-nav__link">
    <span class="md-ellipsis">
      
        Les Limites Fondamentales de Lambda
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#larchitecture-kappa-la-simplification-par-le-flux" class="md-nav__link">
    <span class="md-ellipsis">
      
        L'Architecture Kappa : La Simplification par le Flux
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lemergence-du-data-lakehouse" class="md-nav__link">
    <span class="md-ellipsis">
      
        L'Émergence du Data Lakehouse
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#le-streaming-lakehouse-la-convergence" class="md-nav__link">
    <span class="md-ellipsis">
      
        Le Streaming Lakehouse : La Convergence
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#comparaison-des-architectures" class="md-nav__link">
    <span class="md-ellipsis">
      
        Comparaison des Architectures
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#le-pattern-shift-left" class="md-nav__link">
    <span class="md-ellipsis">
      
        Le Pattern « Shift Left »
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#couches-bronze-silver-gold-dans-le-streaming-lakehouse" class="md-nav__link">
    <span class="md-ellipsis">
      
        Couches Bronze, Silver, Gold dans le Streaming Lakehouse
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#gestion-du-change-data-capture-cdc" class="md-nav__link">
    <span class="md-ellipsis">
      
        Gestion du Change Data Capture (CDC)
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#architecture-delta-et-streamhouse" class="md-nav__link">
    <span class="md-ellipsis">
      
        Architecture Delta et Streamhouse
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#iv122-le-role-de-confluent-et-kafka" class="md-nav__link">
    <span class="md-ellipsis">
      
        IV.12.2 Le Rôle de Confluent et Kafka
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="IV.12.2 Le Rôle de Confluent et Kafka">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#apache-kafka-comme-systeme-nerveux-central" class="md-nav__link">
    <span class="md-ellipsis">
      
        Apache Kafka comme Système Nerveux Central
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lecosysteme-confluent" class="md-nav__link">
    <span class="md-ellipsis">
      
        L'Écosystème Confluent
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#tableflow-la-passerelle-vers-le-lakehouse" class="md-nav__link">
    <span class="md-ellipsis">
      
        Tableflow : La Passerelle vers le Lakehouse
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#patterns-dintegration-kafka-iceberg" class="md-nav__link">
    <span class="md-ellipsis">
      
        Patterns d'Intégration Kafka-Iceberg
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#le-flink-dynamic-iceberg-sink" class="md-nav__link">
    <span class="md-ellipsis">
      
        Le Flink Dynamic Iceberg Sink
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#integration-avec-le-schema-registry" class="md-nav__link">
    <span class="md-ellipsis">
      
        Intégration avec le Schema Registry
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#gestion-de-levolution-de-schema" class="md-nav__link">
    <span class="md-ellipsis">
      
        Gestion de l'Évolution de Schéma
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#integration-avec-les-catalogues-externes" class="md-nav__link">
    <span class="md-ellipsis">
      
        Intégration avec les Catalogues Externes
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#traitement-pre-lakehouse-avec-flink" class="md-nav__link">
    <span class="md-ellipsis">
      
        Traitement Pré-Lakehouse avec Flink
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#garanties-de-livraison-et-exactly-once" class="md-nav__link">
    <span class="md-ellipsis">
      
        Garanties de Livraison et Exactly-Once
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#considerations-de-couts" class="md-nav__link">
    <span class="md-ellipsis">
      
        Considérations de Coûts
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#considerations-de-performance" class="md-nav__link">
    <span class="md-ellipsis">
      
        Considérations de Performance
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#observabilite-du-pipeline-streaming-lakehouse" class="md-nav__link">
    <span class="md-ellipsis">
      
        Observabilité du Pipeline Streaming-Lakehouse
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lapproche-lakehouse-native-avec-ursa" class="md-nav__link">
    <span class="md-ellipsis">
      
        L'Approche Lakehouse-Native avec Ursa
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#considerations-pour-le-contexte-canadien" class="md-nav__link">
    <span class="md-ellipsis">
      
        Considérations pour le Contexte Canadien
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#architecture-de-reference-pour-le-canada" class="md-nav__link">
    <span class="md-ellipsis">
      
        Architecture de Référence pour le Canada
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#feuille-de-route-pour-la-migration" class="md-nav__link">
    <span class="md-ellipsis">
      
        Feuille de Route pour la Migration
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#resolution-des-problemes-courants" class="md-nav__link">
    <span class="md-ellipsis">
      
        Résolution des Problèmes Courants
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#gestion-des-donnees-tardives" class="md-nav__link">
    <span class="md-ellipsis">
      
        Gestion des Données Tardives
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#architecture-de-reference-du-streaming-lakehouse" class="md-nav__link">
    <span class="md-ellipsis">
      
        Architecture de référence du Streaming Lakehouse
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#patrons-de-connecteurs-kafka-iceberg" class="md-nav__link">
    <span class="md-ellipsis">
      
        Patrons de connecteurs Kafka-Iceberg
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#gestion-des-schemas-entre-kafka-et-iceberg" class="md-nav__link">
    <span class="md-ellipsis">
      
        Gestion des schémas entre Kafka et Iceberg
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#cas-dusage-en-contexte-dentreprise-agentique" class="md-nav__link">
    <span class="md-ellipsis">
      
        Cas d'usage en contexte d'entreprise agentique
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#iv123-resume" class="md-nav__link">
    <span class="md-ellipsis">
      
        IV.12.3 Résumé
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="IV.12.3 Résumé">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#levolution-architecturale" class="md-nav__link">
    <span class="md-ellipsis">
      
        L'Évolution Architecturale
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#le-role-central-de-kafka-et-confluent" class="md-nav__link">
    <span class="md-ellipsis">
      
        Le Rôle Central de Kafka et Confluent
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#patterns-dimplementation" class="md-nav__link">
    <span class="md-ellipsis">
      
        Patterns d'Implémentation
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#considerations-operationnelles" class="md-nav__link">
    <span class="md-ellipsis">
      
        Considérations Opérationnelles
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#recommandations-strategiques" class="md-nav__link">
    <span class="md-ellipsis">
      
        Recommandations Stratégiques
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#references" class="md-nav__link">
    <span class="md-ellipsis">
      
        Références
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Références">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#references-croisees" class="md-nav__link">
    <span class="md-ellipsis">
      
        Références croisées
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Chapitre_IV.13_Securite_Gouvernance_Conformite/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    IV.13 — Sécurité, gouvernance et conformité
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Chapitre_IV.14_Integration_Microsoft_Fabric_PowerBI/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    IV.14 — Intégration Microsoft Fabric et Power BI
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Chapitre_IV.15_Contexte_Canadien_Etudes_Cas/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    IV.15 — Contexte canadien et études de cas
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Chapitre_IV.16_Conclusion_Perspectives_2026_2030/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    IV.16 — Conclusion et perspectives 2026-2030
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Chapitre_IV.Annexe_A_Specification_Apache_Iceberg/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Annexe A — Spécification Apache Iceberg
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Chapitre_IV.Annexe_B_Glossaire/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Annexe B — Glossaire
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
        
          
          
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_4_5" >
        
          
          <label class="md-nav__link" for="__nav_4_5" id="__nav_4_5_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    
  
    Volume V — Développeur Renaissance
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_5">
            <span class="md-nav__icon md-icon"></span>
            
  
    Volume V — Développeur Renaissance
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Volume_V_Developpeur_Renaissance/Chapitre_V.0_Introduction/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    V.0 — Introduction
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Volume_V_Developpeur_Renaissance/Chapitre_V.1_Convergence_Ages_Or/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    V.1 — Convergence des âges d'or
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Volume_V_Developpeur_Renaissance/Chapitre_V.2_Curiosite_Appliquee/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    V.2 — Curiosité appliquée
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Volume_V_Developpeur_Renaissance/Chapitre_V.3_Pensee_Systemique/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    V.3 — Pensée systémique
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Volume_V_Developpeur_Renaissance/Chapitre_V.4_Nouvelle_Communication/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    V.4 — Nouvelle communication
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Volume_V_Developpeur_Renaissance/Chapitre_V.5_Imperatif_Qualite_Responsabilite/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    V.5 — Impératif qualité et responsabilité
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Volume_V_Developpeur_Renaissance/Chapitre_V.6_Capital_Humain_Profil_Polymathe/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    V.6 — Capital humain et profil polymathe
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Volume_V_Developpeur_Renaissance/Chapitre_V.7_Art_Batir_Futur/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    V.7 — L'art de bâtir le futur
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Volume_V_Developpeur_Renaissance/Chapitre_V.8_Bibliotheque_Developpeur_Renaissance/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    V.8 — Bibliothèque du développeur Renaissance
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Volume_V_Developpeur_Renaissance/Chapitre_V.9_Mandat/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    V.9 — Mandat
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Volume_V_Developpeur_Renaissance/Chapitre_V.10_Spec_Driven_Development/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    V.10 — Spec-Driven Development
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
          
          
            <div class="md-content" data-md-component="content">
              
              <article class="md-content__inner md-typeset">
                
                  


  
  


<h1 id="chapitre-iv12-levolution-vers-le-streaming-lakehouse">Chapitre IV.12 - L'ÉVOLUTION VERS LE STREAMING LAKEHOUSE<a class="headerlink" href="#chapitre-iv12-levolution-vers-le-streaming-lakehouse" title="Permanent link">&para;</a></h1>
<hr />
<h2 id="introduction">Introduction<a class="headerlink" href="#introduction" title="Permanent link">&para;</a></h2>
<p>L'histoire des architectures de données est jalonnée de compromis entre latence et complétude, entre fraîcheur et fiabilité. Pendant plus d'une décennie, les organisations ont jonglé avec des systèmes parallèles : d'un côté, les pipelines de traitement par lots (batch) offrant une vue complète mais décalée des données; de l'autre, les flux en temps réel capturant l'immédiateté au prix de la complexité. L'architecture Lambda, proposée par Nathan Marz en 2011, a tenté de réconcilier ces deux mondes en les faisant coexister. Mais cette cohabitation forcée a engendré une dette technique considérable : duplication de code, divergence des résultats, et coûts opérationnels exponentiels.</p>
<p>Le Streaming Lakehouse représente l'aboutissement d'une quête de plus de quinze ans vers l'unification des données en mouvement et au repos. En combinant Apache Kafka comme colonne vertébrale événementielle avec Apache Iceberg comme format de table ouvert, les organisations peuvent enfin construire une architecture où chaque événement capturé devient instantanément disponible pour l'analyse, l'intelligence artificielle et les applications opérationnelles, sans duplication ni transformation redondante.</p>
<p>Ce chapitre retrace l'évolution architecturale qui a conduit au Streaming Lakehouse moderne. Nous examinerons d'abord les limites des architectures Lambda et Kappa qui ont dominé la dernière décennie. Puis nous explorerons le rôle central de Confluent et Apache Kafka dans cette convergence, avec une attention particulière portée à Tableflow, la fonctionnalité qui matérialise les topics Kafka directement en tables Iceberg. Enfin, nous présenterons les patterns d'implémentation et les considérations pratiques pour les organisations canadiennes qui entreprennent cette transformation.</p>
<hr />
<h2 id="iv121-de-larchitecture-lambda-au-streaming-lakehouse">IV.12.1 De l'Architecture Lambda au Streaming Lakehouse<a class="headerlink" href="#iv121-de-larchitecture-lambda-au-streaming-lakehouse" title="Permanent link">&para;</a></h2>
<h3 id="les-origines-le-defi-du-big-data">Les Origines : Le Défi du Big Data<a class="headerlink" href="#les-origines-le-defi-du-big-data" title="Permanent link">&para;</a></h3>
<p>Au tournant des années 2010, l'explosion des volumes de données a confronté les architectes à un dilemme fondamental. Les systèmes traditionnels de traitement par lots, hérités de l'ère MapReduce et Hadoop, excellaient dans le traitement exhaustif de grands volumes historiques. Ils offraient des garanties de complétude et de cohérence que les systèmes transactionnels ne pouvaient égaler à grande échelle. Cependant, leur latence intrinsèque, mesurée en heures voire en jours, les rendait inadaptés aux exigences croissantes de réactivité.</p>
<p>Parallèlement, les premiers systèmes de traitement de flux comme Storm (développé chez Twitter) et S4 (Yahoo) démontraient qu'il était possible de traiter des événements avec des latences de l'ordre de la milliseconde. Mais ces systèmes sacrifiaient souvent les garanties de cohérence et la capacité de retraitement historique qui caractérisaient le batch.</p>
<h3 id="larchitecture-lambda-une-reconciliation-imparfaite">L'Architecture Lambda : Une Réconciliation Imparfaite<a class="headerlink" href="#larchitecture-lambda-une-reconciliation-imparfaite" title="Permanent link">&para;</a></h3>
<p>Face à ce dilemme, Nathan Marz a proposé en 2011 l'architecture Lambda, une approche hybride qui fait coexister deux chemins de traitement parallèles :</p>
<p><strong>La couche batch (Batch Layer)</strong> traite l'intégralité des données historiques selon des cycles réguliers (typiquement journaliers ou horaires). Elle utilise des technologies comme Hadoop MapReduce ou Apache Spark pour produire des « vues batch » exhaustives et cohérentes. Cette couche constitue la source de vérité, capable de corriger toute erreur introduite par la couche temps réel.</p>
<p><strong>La couche vitesse (Speed Layer)</strong> traite les données en temps réel à mesure de leur arrivée. Elle produit des « vues temps réel » qui compensent la latence de la couche batch. Ces vues sont approximatives et temporaires, destinées à être remplacées par les résultats batch une fois disponibles.</p>
<p><strong>La couche de service (Serving Layer)</strong> fusionne les vues batch et temps réel pour présenter une vue unifiée aux consommateurs. Elle gère la complexité de la réconciliation entre des résultats potentiellement divergents.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a>┌─────────────────────────────────────────────────────────────────┐
<a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a>│                    ARCHITECTURE LAMBDA                          │
<a id="__codelineno-0-3" name="__codelineno-0-3" href="#__codelineno-0-3"></a>├─────────────────────────────────────────────────────────────────┤
<a id="__codelineno-0-4" name="__codelineno-0-4" href="#__codelineno-0-4"></a>│                                                                 │
<a id="__codelineno-0-5" name="__codelineno-0-5" href="#__codelineno-0-5"></a>│   ┌─────────────┐                                               │
<a id="__codelineno-0-6" name="__codelineno-0-6" href="#__codelineno-0-6"></a>│   │   Sources   │                                               │
<a id="__codelineno-0-7" name="__codelineno-0-7" href="#__codelineno-0-7"></a>│   │  de Données │                                               │
<a id="__codelineno-0-8" name="__codelineno-0-8" href="#__codelineno-0-8"></a>│   └──────┬──────┘                                               │
<a id="__codelineno-0-9" name="__codelineno-0-9" href="#__codelineno-0-9"></a>│          │                                                      │
<a id="__codelineno-0-10" name="__codelineno-0-10" href="#__codelineno-0-10"></a>│          ▼                                                      │
<a id="__codelineno-0-11" name="__codelineno-0-11" href="#__codelineno-0-11"></a>│   ┌──────────────┐                                              │
<a id="__codelineno-0-12" name="__codelineno-0-12" href="#__codelineno-0-12"></a>│   │  Master      │                                              │
<a id="__codelineno-0-13" name="__codelineno-0-13" href="#__codelineno-0-13"></a>│   │  Dataset     │                                              │
<a id="__codelineno-0-14" name="__codelineno-0-14" href="#__codelineno-0-14"></a>│   └──────┬───────┘                                              │
<a id="__codelineno-0-15" name="__codelineno-0-15" href="#__codelineno-0-15"></a>│          │                                                      │
<a id="__codelineno-0-16" name="__codelineno-0-16" href="#__codelineno-0-16"></a>│    ┌─────┴─────┐                                                │
<a id="__codelineno-0-17" name="__codelineno-0-17" href="#__codelineno-0-17"></a>│    │           │                                                │
<a id="__codelineno-0-18" name="__codelineno-0-18" href="#__codelineno-0-18"></a>│    ▼           ▼                                                │
<a id="__codelineno-0-19" name="__codelineno-0-19" href="#__codelineno-0-19"></a>│ ┌──────────┐ ┌──────────┐                                       │
<a id="__codelineno-0-20" name="__codelineno-0-20" href="#__codelineno-0-20"></a>│ │  Batch   │ │  Speed   │                                       │
<a id="__codelineno-0-21" name="__codelineno-0-21" href="#__codelineno-0-21"></a>│ │  Layer   │ │  Layer   │                                       │
<a id="__codelineno-0-22" name="__codelineno-0-22" href="#__codelineno-0-22"></a>│ │(Hadoop/  │ │(Storm/   │                                       │
<a id="__codelineno-0-23" name="__codelineno-0-23" href="#__codelineno-0-23"></a>│ │ Spark)   │ │ Samza)   │                                       │
<a id="__codelineno-0-24" name="__codelineno-0-24" href="#__codelineno-0-24"></a>│ └────┬─────┘ └────┬─────┘                                       │
<a id="__codelineno-0-25" name="__codelineno-0-25" href="#__codelineno-0-25"></a>│      │            │                                             │
<a id="__codelineno-0-26" name="__codelineno-0-26" href="#__codelineno-0-26"></a>│      ▼            ▼                                             │
<a id="__codelineno-0-27" name="__codelineno-0-27" href="#__codelineno-0-27"></a>│ ┌──────────┐ ┌──────────┐                                       │
<a id="__codelineno-0-28" name="__codelineno-0-28" href="#__codelineno-0-28"></a>│ │  Batch   │ │Real-time │                                       │
<a id="__codelineno-0-29" name="__codelineno-0-29" href="#__codelineno-0-29"></a>│ │  Views   │ │  Views   │                                       │
<a id="__codelineno-0-30" name="__codelineno-0-30" href="#__codelineno-0-30"></a>│ └────┬─────┘ └────┬─────┘                                       │
<a id="__codelineno-0-31" name="__codelineno-0-31" href="#__codelineno-0-31"></a>│      │            │                                             │
<a id="__codelineno-0-32" name="__codelineno-0-32" href="#__codelineno-0-32"></a>│      └─────┬──────┘                                             │
<a id="__codelineno-0-33" name="__codelineno-0-33" href="#__codelineno-0-33"></a>│            ▼                                                    │
<a id="__codelineno-0-34" name="__codelineno-0-34" href="#__codelineno-0-34"></a>│     ┌─────────────┐                                             │
<a id="__codelineno-0-35" name="__codelineno-0-35" href="#__codelineno-0-35"></a>│     │   Serving   │                                             │
<a id="__codelineno-0-36" name="__codelineno-0-36" href="#__codelineno-0-36"></a>│     │    Layer    │                                             │
<a id="__codelineno-0-37" name="__codelineno-0-37" href="#__codelineno-0-37"></a>│     └─────────────┘                                             │
<a id="__codelineno-0-38" name="__codelineno-0-38" href="#__codelineno-0-38"></a>│                                                                 │
<a id="__codelineno-0-39" name="__codelineno-0-39" href="#__codelineno-0-39"></a>└─────────────────────────────────────────────────────────────────┘
</code></pre></div>
<h3 id="les-limites-fondamentales-de-lambda">Les Limites Fondamentales de Lambda<a class="headerlink" href="#les-limites-fondamentales-de-lambda" title="Permanent link">&para;</a></h3>
<p>Malgré son élégance conceptuelle, l'architecture Lambda souffre de limitations profondes qui ont progressivement conduit à son abandon par les organisations les plus avancées.</p>
<p><strong>La duplication du code</strong> constitue le problème le plus immédiat. La même logique métier doit être implémentée deux fois : une version batch (souvent en Scala/Spark) et une version streaming (Storm, Samza, ou autre). Ces implémentations divergent inévitablement au fil du temps, introduisant des incohérences subtiles entre les résultats batch et temps réel.</p>
<p><strong>La divergence des résultats</strong> découle de cette duplication. Les vues batch et temps réel peuvent produire des résultats différents pour les mêmes données, créant des situations où les utilisateurs observent des « sauts » dans les métriques lors de la réconciliation.</p>
<p><strong>La complexité opérationnelle</strong> est considérable. L'équipe doit maîtriser et opérer deux écosystèmes technologiques distincts, chacun avec ses propres modes de défaillance, patterns de déploiement et exigences de monitoring.</p>
<p><strong>Les coûts d'infrastructure</strong> sont doublés. Les données sont stockées et traitées deux fois, multipliant les besoins en calcul et en stockage.</p>
<blockquote>
<p><strong>Migration</strong><br />
<em>De</em> : Architecture Lambda avec Hadoop + Storm<br />
<em>Vers</em> : Streaming Lakehouse unifié<br />
<em>Stratégie</em> : Migration incrémentale en commençant par les cas d'usage les plus critiques en latence. Maintenir Lambda en parallèle pendant la transition, puis décommissionner progressivement la couche batch.</p>
</blockquote>
<h3 id="larchitecture-kappa-la-simplification-par-le-flux">L'Architecture Kappa : La Simplification par le Flux<a class="headerlink" href="#larchitecture-kappa-la-simplification-par-le-flux" title="Permanent link">&para;</a></h3>
<p>En 2014, Jay Kreps, cofondateur d'Apache Kafka, a proposé l'architecture Kappa comme alternative radicale à Lambda. Son principe fondateur est simple : traiter toutes les données comme un flux, éliminant ainsi la distinction entre batch et temps réel.</p>
<p>Dans Kappa, le journal d'événements immuable (typiquement un cluster Kafka) devient la source de vérité unique. Toutes les transformations sont exprimées comme des applications de traitement de flux. Lorsqu'une correction ou une évolution de la logique est nécessaire, l'application est simplement rejouée depuis le début du journal pour reconstruire l'état correct.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-1-1" name="__codelineno-1-1" href="#__codelineno-1-1"></a>┌─────────────────────────────────────────────────────────────────┐
<a id="__codelineno-1-2" name="__codelineno-1-2" href="#__codelineno-1-2"></a>│                    ARCHITECTURE KAPPA                           │
<a id="__codelineno-1-3" name="__codelineno-1-3" href="#__codelineno-1-3"></a>├─────────────────────────────────────────────────────────────────┤
<a id="__codelineno-1-4" name="__codelineno-1-4" href="#__codelineno-1-4"></a>│                                                                 │
<a id="__codelineno-1-5" name="__codelineno-1-5" href="#__codelineno-1-5"></a>│   ┌─────────────┐                                               │
<a id="__codelineno-1-6" name="__codelineno-1-6" href="#__codelineno-1-6"></a>│   │   Sources   │                                               │
<a id="__codelineno-1-7" name="__codelineno-1-7" href="#__codelineno-1-7"></a>│   │  de Données │                                               │
<a id="__codelineno-1-8" name="__codelineno-1-8" href="#__codelineno-1-8"></a>│   └──────┬──────┘                                               │
<a id="__codelineno-1-9" name="__codelineno-1-9" href="#__codelineno-1-9"></a>│          │                                                      │
<a id="__codelineno-1-10" name="__codelineno-1-10" href="#__codelineno-1-10"></a>│          ▼                                                      │
<a id="__codelineno-1-11" name="__codelineno-1-11" href="#__codelineno-1-11"></a>│   ┌──────────────────────────────────────────┐                  │
<a id="__codelineno-1-12" name="__codelineno-1-12" href="#__codelineno-1-12"></a>│   │         Journal Immuable (Kafka)         │                  │
<a id="__codelineno-1-13" name="__codelineno-1-13" href="#__codelineno-1-13"></a>│   │    Source de Vérité Unique               │                  │
<a id="__codelineno-1-14" name="__codelineno-1-14" href="#__codelineno-1-14"></a>│   └──────────────────┬───────────────────────┘                  │
<a id="__codelineno-1-15" name="__codelineno-1-15" href="#__codelineno-1-15"></a>│                      │                                          │
<a id="__codelineno-1-16" name="__codelineno-1-16" href="#__codelineno-1-16"></a>│                      ▼                                          │
<a id="__codelineno-1-17" name="__codelineno-1-17" href="#__codelineno-1-17"></a>│   ┌──────────────────────────────────────────┐                  │
<a id="__codelineno-1-18" name="__codelineno-1-18" href="#__codelineno-1-18"></a>│   │      Traitement de Flux Unifié           │                  │
<a id="__codelineno-1-19" name="__codelineno-1-19" href="#__codelineno-1-19"></a>│   │      (Kafka Streams / Flink)             │                  │
<a id="__codelineno-1-20" name="__codelineno-1-20" href="#__codelineno-1-20"></a>│   └──────────────────┬───────────────────────┘                  │
<a id="__codelineno-1-21" name="__codelineno-1-21" href="#__codelineno-1-21"></a>│                      │                                          │
<a id="__codelineno-1-22" name="__codelineno-1-22" href="#__codelineno-1-22"></a>│                      ▼                                          │
<a id="__codelineno-1-23" name="__codelineno-1-23" href="#__codelineno-1-23"></a>│   ┌──────────────────────────────────────────┐                  │
<a id="__codelineno-1-24" name="__codelineno-1-24" href="#__codelineno-1-24"></a>│   │         Vues Matérialisées               │                  │
<a id="__codelineno-1-25" name="__codelineno-1-25" href="#__codelineno-1-25"></a>│   │    (Tables, Caches, Index)               │                  │
<a id="__codelineno-1-26" name="__codelineno-1-26" href="#__codelineno-1-26"></a>│   └──────────────────────────────────────────┘                  │
<a id="__codelineno-1-27" name="__codelineno-1-27" href="#__codelineno-1-27"></a>│                                                                 │
<a id="__codelineno-1-28" name="__codelineno-1-28" href="#__codelineno-1-28"></a>│   Retraitement = Rejouer depuis le début du journal             │
<a id="__codelineno-1-29" name="__codelineno-1-29" href="#__codelineno-1-29"></a>│                                                                 │
<a id="__codelineno-1-30" name="__codelineno-1-30" href="#__codelineno-1-30"></a>└─────────────────────────────────────────────────────────────────┘
</code></pre></div>
<p>L'architecture Kappa offre des avantages significatifs par rapport à Lambda. L'élimination de la duplication de code simplifie drastiquement le développement et la maintenance. La source de vérité unique garantit la cohérence des résultats. Les coûts opérationnels sont réduits par l'utilisation d'une seule pile technologique.</p>
<p>Cependant, Kappa présente ses propres limitations. Le retraitement depuis le début du journal peut s'avérer coûteux en temps et en ressources pour des historiques volumineux. Les résultats intermédiaires stockés dans Kafka ne sont pas directement interrogeables par SQL, limitant l'accès aux analystes et aux outils d'intelligence d'affaires. Enfin, le stockage prolongé dans Kafka peut devenir onéreux comparé aux solutions de stockage objet.</p>
<h3 id="lemergence-du-data-lakehouse">L'Émergence du Data Lakehouse<a class="headerlink" href="#lemergence-du-data-lakehouse" title="Permanent link">&para;</a></h3>
<p>Le concept de Data Lakehouse, introduit vers 2017, a apporté une réponse partielle à ces limitations. En combinant la scalabilité économique des lacs de données avec les garanties transactionnelles des entrepôts de données, les formats de table ouverts comme Apache Iceberg, Delta Lake et Apache Hudi ont transformé les lacs de données en systèmes fiables et interrogeables.</p>
<p>Ces formats introduisent des capacités essentielles pour la gestion de données à l'échelle de l'entreprise. Les transactions ACID garantissent la cohérence des lectures et écritures concurrentes. L'évolution de schéma permet de modifier la structure des tables sans réécriture complète. Le partitionnement masqué (hidden partitioning) optimise les performances de requête sans exposer la complexité aux utilisateurs. Le time travel permet d'interroger les données telles qu'elles existaient à un instant donné.</p>
<p>Cependant, les Lakehouses traditionnels restent fondamentalement orientés batch. Leurs optimisations ciblent les requêtes analytiques sur de grands volumes statiques plutôt que l'ingestion continue à faible latence. L'intégration avec les systèmes de streaming nécessite des pipelines ETL additionnels, réintroduisant la complexité que Kappa cherchait à éliminer.</p>
<h3 id="le-streaming-lakehouse-la-convergence">Le Streaming Lakehouse : La Convergence<a class="headerlink" href="#le-streaming-lakehouse-la-convergence" title="Permanent link">&para;</a></h3>
<p>Le Streaming Lakehouse représente la synthèse de ces évolutions architecturales. Il unifie les forces de Kappa (traitement unifié, source de vérité événementielle) avec celles du Lakehouse (stockage économique, interrogation SQL, gouvernance des données) en une architecture cohérente.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-2-1" name="__codelineno-2-1" href="#__codelineno-2-1"></a>┌─────────────────────────────────────────────────────────────────┐
<a id="__codelineno-2-2" name="__codelineno-2-2" href="#__codelineno-2-2"></a>│                   STREAMING LAKEHOUSE                           │
<a id="__codelineno-2-3" name="__codelineno-2-3" href="#__codelineno-2-3"></a>├─────────────────────────────────────────────────────────────────┤
<a id="__codelineno-2-4" name="__codelineno-2-4" href="#__codelineno-2-4"></a>│                                                                 │
<a id="__codelineno-2-5" name="__codelineno-2-5" href="#__codelineno-2-5"></a>│   ┌─────────────┐  ┌─────────────┐  ┌─────────────┐            │
<a id="__codelineno-2-6" name="__codelineno-2-6" href="#__codelineno-2-6"></a>│   │Applications │  │     CDC     │  │    IoT      │            │
<a id="__codelineno-2-7" name="__codelineno-2-7" href="#__codelineno-2-7"></a>│   │   &amp; APIs    │  │  Debezium   │  │  Capteurs   │            │
<a id="__codelineno-2-8" name="__codelineno-2-8" href="#__codelineno-2-8"></a>│   └──────┬──────┘  └──────┬──────┘  └──────┬──────┘            │
<a id="__codelineno-2-9" name="__codelineno-2-9" href="#__codelineno-2-9"></a>│          │                │                │                    │
<a id="__codelineno-2-10" name="__codelineno-2-10" href="#__codelineno-2-10"></a>│          └────────────────┼────────────────┘                    │
<a id="__codelineno-2-11" name="__codelineno-2-11" href="#__codelineno-2-11"></a>│                           ▼                                     │
<a id="__codelineno-2-12" name="__codelineno-2-12" href="#__codelineno-2-12"></a>│   ┌─────────────────────────────────────────────────────────┐  │
<a id="__codelineno-2-13" name="__codelineno-2-13" href="#__codelineno-2-13"></a>│   │              Apache Kafka (Dorsale Événementielle)       │  │
<a id="__codelineno-2-14" name="__codelineno-2-14" href="#__codelineno-2-14"></a>│   │         Source de Vérité pour les Données en Mouvement   │  │
<a id="__codelineno-2-15" name="__codelineno-2-15" href="#__codelineno-2-15"></a>│   │              + Schema Registry + Gouvernance             │  │
<a id="__codelineno-2-16" name="__codelineno-2-16" href="#__codelineno-2-16"></a>│   └───────────────────────┬─────────────────────────────────┘  │
<a id="__codelineno-2-17" name="__codelineno-2-17" href="#__codelineno-2-17"></a>│                           │                                     │
<a id="__codelineno-2-18" name="__codelineno-2-18" href="#__codelineno-2-18"></a>│              ┌────────────┼────────────┐                       │
<a id="__codelineno-2-19" name="__codelineno-2-19" href="#__codelineno-2-19"></a>│              │            │            │                        │
<a id="__codelineno-2-20" name="__codelineno-2-20" href="#__codelineno-2-20"></a>│              ▼            ▼            ▼                        │
<a id="__codelineno-2-21" name="__codelineno-2-21" href="#__codelineno-2-21"></a>│   ┌──────────────┐ ┌───────────┐ ┌───────────────┐             │
<a id="__codelineno-2-22" name="__codelineno-2-22" href="#__codelineno-2-22"></a>│   │Apache Flink  │ │Tableflow  │ │ Kafka Streams │             │
<a id="__codelineno-2-23" name="__codelineno-2-23" href="#__codelineno-2-23"></a>│   │(Traitement   │ │(Matéria-  │ │(Microservices)│             │
<a id="__codelineno-2-24" name="__codelineno-2-24" href="#__codelineno-2-24"></a>│   │ Complexe)    │ │ lisation) │ │               │             │
<a id="__codelineno-2-25" name="__codelineno-2-25" href="#__codelineno-2-25"></a>│   └──────┬───────┘ └─────┬─────┘ └───────────────┘             │
<a id="__codelineno-2-26" name="__codelineno-2-26" href="#__codelineno-2-26"></a>│          │               │                                      │
<a id="__codelineno-2-27" name="__codelineno-2-27" href="#__codelineno-2-27"></a>│          └───────┬───────┘                                      │
<a id="__codelineno-2-28" name="__codelineno-2-28" href="#__codelineno-2-28"></a>│                  ▼                                              │
<a id="__codelineno-2-29" name="__codelineno-2-29" href="#__codelineno-2-29"></a>│   ┌─────────────────────────────────────────────────────────┐  │
<a id="__codelineno-2-30" name="__codelineno-2-30" href="#__codelineno-2-30"></a>│   │            Apache Iceberg (Format de Table Ouvert)       │  │
<a id="__codelineno-2-31" name="__codelineno-2-31" href="#__codelineno-2-31"></a>│   │         Source de Vérité pour les Données au Repos       │  │
<a id="__codelineno-2-32" name="__codelineno-2-32" href="#__codelineno-2-32"></a>│   │        Stockage Objet (S3/ADLS/GCS) + REST Catalog       │  │
<a id="__codelineno-2-33" name="__codelineno-2-33" href="#__codelineno-2-33"></a>│   └───────────────────────┬─────────────────────────────────┘  │
<a id="__codelineno-2-34" name="__codelineno-2-34" href="#__codelineno-2-34"></a>│                           │                                     │
<a id="__codelineno-2-35" name="__codelineno-2-35" href="#__codelineno-2-35"></a>│              ┌────────────┼────────────┐                       │
<a id="__codelineno-2-36" name="__codelineno-2-36" href="#__codelineno-2-36"></a>│              │            │            │                        │
<a id="__codelineno-2-37" name="__codelineno-2-37" href="#__codelineno-2-37"></a>│              ▼            ▼            ▼                        │
<a id="__codelineno-2-38" name="__codelineno-2-38" href="#__codelineno-2-38"></a>│   ┌──────────────┐ ┌───────────┐ ┌───────────────┐             │
<a id="__codelineno-2-39" name="__codelineno-2-39" href="#__codelineno-2-39"></a>│   │   Dremio/    │ │ Power BI  │ │   ML/AI       │             │
<a id="__codelineno-2-40" name="__codelineno-2-40" href="#__codelineno-2-40"></a>│   │   Trino      │ │ Tableau   │ │   Platforms   │             │
<a id="__codelineno-2-41" name="__codelineno-2-41" href="#__codelineno-2-41"></a>│   └──────────────┘ └───────────┘ └───────────────┘             │
<a id="__codelineno-2-42" name="__codelineno-2-42" href="#__codelineno-2-42"></a>│                                                                 │
<a id="__codelineno-2-43" name="__codelineno-2-43" href="#__codelineno-2-43"></a>└─────────────────────────────────────────────────────────────────┘
</code></pre></div>
<p>Les caractéristiques distinctives du Streaming Lakehouse incluent :</p>
<p><strong>L'ingestion unifiée</strong> : Les données transitent par Kafka quelle que soit leur source (applications, CDC, IoT, fichiers batch). Cette normalisation simplifie la gouvernance et assure la traçabilité complète.</p>
<p><strong>La matérialisation automatique</strong> : Les topics Kafka sont automatiquement matérialisés en tables Iceberg, éliminant les pipelines ETL manuels. Des solutions comme Tableflow (Confluent) ou le Flink Dynamic Iceberg Sink gèrent cette conversion de manière transparente.</p>
<p><strong>Le stockage unique</strong> : Les données sont stockées une seule fois dans un format ouvert (Parquet sur stockage objet), accessible par tous les moteurs de consommation sans duplication.</p>
<p><strong>L'interrogation universelle</strong> : Les mêmes tables sont accessibles via des moteurs de streaming (Flink), des moteurs SQL analytiques (Trino, Dremio), des outils d'intelligence d'affaires (Power BI, Tableau), et des plateformes ML/AI.</p>
<h3 id="comparaison-des-architectures">Comparaison des Architectures<a class="headerlink" href="#comparaison-des-architectures" title="Permanent link">&para;</a></h3>
<p>Le tableau suivant synthétise les caractéristiques des trois architectures évoquées :</p>
<table>
<thead>
<tr>
<th>Critère</th>
<th>Lambda</th>
<th>Kappa</th>
<th>Streaming Lakehouse</th>
</tr>
</thead>
<tbody>
<tr>
<td>Duplication de code</td>
<td>Élevée (2 implémentations)</td>
<td>Aucune</td>
<td>Aucune</td>
</tr>
<tr>
<td>Latence</td>
<td>Mixte (temps réel + batch)</td>
<td>Temps réel</td>
<td>Temps réel + batch unifié</td>
</tr>
<tr>
<td>Interrogation SQL</td>
<td>Via couche de service</td>
<td>Limitée</td>
<td>Native sur Iceberg</td>
</tr>
<tr>
<td>Coût de stockage</td>
<td>Élevé (duplication)</td>
<td>Moyen (Kafka long terme)</td>
<td>Optimal (stockage objet)</td>
</tr>
<tr>
<td>Retraitement</td>
<td>Via couche batch</td>
<td>Rejeu du journal</td>
<td>Rejeu + time travel</td>
</tr>
<tr>
<td>Gouvernance</td>
<td>Fragmentée</td>
<td>Sur Kafka</td>
<td>Unifiée (Kafka + Iceberg)</td>
</tr>
<tr>
<td>Complexité opérationnelle</td>
<td>Élevée</td>
<td>Moyenne</td>
<td>Moyenne</td>
</tr>
<tr>
<td>Maturité</td>
<td>Mature (2011)</td>
<td>Mature (2014)</td>
<td>Émergente (2023+)</td>
</tr>
</tbody>
</table>
<blockquote>
<p><strong>Performance</strong><br />
Les organisations qui ont migré de Lambda vers un Streaming Lakehouse rapportent typiquement une réduction de 40 à 60 % des coûts d'infrastructure, principalement grâce à l'élimination de la duplication des données et du traitement. La latence de bout en bout pour les cas d'usage analytiques passe de T+1 jour à quelques minutes.</p>
</blockquote>
<h3 id="le-pattern-shift-left">Le Pattern « Shift Left »<a class="headerlink" href="#le-pattern-shift-left" title="Permanent link">&para;</a></h3>
<p>L'architecture Shift Left, décrite par Kai Waehner de Confluent, représente une évolution philosophique importante. Plutôt que de considérer la gouvernance et la qualité des données comme des préoccupations en aval (dans l'entrepôt ou le lakehouse), cette approche les déplace « vers la gauche », c'est-à-dire plus près de la source.</p>
<p>Dans un Streaming Lakehouse adoptant Shift Left, les transformations de données, les validations de qualité et l'enrichissement sémantique s'effectuent dans la couche de streaming (Kafka + Flink) plutôt que dans des processus ETL tardifs. Les données arrivent dans le Lakehouse déjà structurées, validées et conformes aux contrats de schéma définis dans le Schema Registry.</p>
<p>Ce pattern offre plusieurs avantages pour les organisations canadiennes soumises à des réglementations strictes (Loi 25, LPRPDE) :</p>
<ul>
<li>La traçabilité de chaque transformation est garantie par le journal Kafka</li>
<li>Les règles de qualité sont appliquées en temps réel, détectant les anomalies immédiatement</li>
<li>La gouvernance des schémas via le Schema Registry prévient les évolutions incompatibles</li>
<li>Les métadonnées de lignage sont capturées automatiquement pour l'audit</li>
</ul>
<p>L'implémentation du Shift Left avec Apache Flink illustre cette approche :</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-3-1" name="__codelineno-3-1" href="#__codelineno-3-1"></a><span class="c1">-- Flink SQL : Pipeline Shift Left avec validation et enrichissement</span>
<a id="__codelineno-3-2" name="__codelineno-3-2" href="#__codelineno-3-2"></a><span class="c1">-- Les données sont nettoyées et enrichies AVANT d&#39;atteindre le Lakehouse</span>
<a id="__codelineno-3-3" name="__codelineno-3-3" href="#__codelineno-3-3"></a>
<a id="__codelineno-3-4" name="__codelineno-3-4" href="#__codelineno-3-4"></a><span class="c1">-- Table source brute depuis Kafka</span>
<a id="__codelineno-3-5" name="__codelineno-3-5" href="#__codelineno-3-5"></a><span class="k">CREATE</span><span class="w"> </span><span class="k">TABLE</span><span class="w"> </span><span class="n">raw_transactions</span><span class="w"> </span><span class="p">(</span>
<a id="__codelineno-3-6" name="__codelineno-3-6" href="#__codelineno-3-6"></a><span class="w">    </span><span class="n">transaction_id</span><span class="w"> </span><span class="n">STRING</span><span class="p">,</span>
<a id="__codelineno-3-7" name="__codelineno-3-7" href="#__codelineno-3-7"></a><span class="w">    </span><span class="n">account_id</span><span class="w"> </span><span class="n">STRING</span><span class="p">,</span>
<a id="__codelineno-3-8" name="__codelineno-3-8" href="#__codelineno-3-8"></a><span class="w">    </span><span class="n">amount</span><span class="w"> </span><span class="nb">DECIMAL</span><span class="p">(</span><span class="mi">18</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">),</span>
<a id="__codelineno-3-9" name="__codelineno-3-9" href="#__codelineno-3-9"></a><span class="w">    </span><span class="n">currency</span><span class="w"> </span><span class="n">STRING</span><span class="p">,</span>
<a id="__codelineno-3-10" name="__codelineno-3-10" href="#__codelineno-3-10"></a><span class="w">    </span><span class="n">merchant_name</span><span class="w"> </span><span class="n">STRING</span><span class="p">,</span>
<a id="__codelineno-3-11" name="__codelineno-3-11" href="#__codelineno-3-11"></a><span class="w">    </span><span class="n">merchant_category</span><span class="w"> </span><span class="n">STRING</span><span class="p">,</span>
<a id="__codelineno-3-12" name="__codelineno-3-12" href="#__codelineno-3-12"></a><span class="w">    </span><span class="n">transaction_time</span><span class="w"> </span><span class="k">TIMESTAMP</span><span class="p">(</span><span class="mi">3</span><span class="p">),</span>
<a id="__codelineno-3-13" name="__codelineno-3-13" href="#__codelineno-3-13"></a><span class="w">    </span><span class="n">WATERMARK</span><span class="w"> </span><span class="k">FOR</span><span class="w"> </span><span class="n">transaction_time</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="n">transaction_time</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="nb">INTERVAL</span><span class="w"> </span><span class="s1">&#39;30&#39;</span><span class="w"> </span><span class="k">SECOND</span>
<a id="__codelineno-3-14" name="__codelineno-3-14" href="#__codelineno-3-14"></a><span class="p">)</span><span class="w"> </span><span class="k">WITH</span><span class="w"> </span><span class="p">(</span>
<a id="__codelineno-3-15" name="__codelineno-3-15" href="#__codelineno-3-15"></a><span class="w">    </span><span class="s1">&#39;connector&#39;</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;kafka&#39;</span><span class="p">,</span>
<a id="__codelineno-3-16" name="__codelineno-3-16" href="#__codelineno-3-16"></a><span class="w">    </span><span class="s1">&#39;topic&#39;</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;raw.transactions&#39;</span><span class="p">,</span>
<a id="__codelineno-3-17" name="__codelineno-3-17" href="#__codelineno-3-17"></a><span class="w">    </span><span class="s1">&#39;properties.bootstrap.servers&#39;</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;kafka:9092&#39;</span><span class="p">,</span>
<a id="__codelineno-3-18" name="__codelineno-3-18" href="#__codelineno-3-18"></a><span class="w">    </span><span class="s1">&#39;format&#39;</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;avro-confluent&#39;</span><span class="p">,</span>
<a id="__codelineno-3-19" name="__codelineno-3-19" href="#__codelineno-3-19"></a><span class="w">    </span><span class="s1">&#39;avro-confluent.url&#39;</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;http://schema-registry:8081&#39;</span>
<a id="__codelineno-3-20" name="__codelineno-3-20" href="#__codelineno-3-20"></a><span class="p">);</span>
<a id="__codelineno-3-21" name="__codelineno-3-21" href="#__codelineno-3-21"></a>
<a id="__codelineno-3-22" name="__codelineno-3-22" href="#__codelineno-3-22"></a><span class="c1">-- Table de référence pour enrichissement (lookup join)</span>
<a id="__codelineno-3-23" name="__codelineno-3-23" href="#__codelineno-3-23"></a><span class="k">CREATE</span><span class="w"> </span><span class="k">TABLE</span><span class="w"> </span><span class="n">merchant_categories</span><span class="w"> </span><span class="p">(</span>
<a id="__codelineno-3-24" name="__codelineno-3-24" href="#__codelineno-3-24"></a><span class="w">    </span><span class="n">merchant_category</span><span class="w"> </span><span class="n">STRING</span><span class="p">,</span>
<a id="__codelineno-3-25" name="__codelineno-3-25" href="#__codelineno-3-25"></a><span class="w">    </span><span class="n">category_group</span><span class="w"> </span><span class="n">STRING</span><span class="p">,</span>
<a id="__codelineno-3-26" name="__codelineno-3-26" href="#__codelineno-3-26"></a><span class="w">    </span><span class="n">risk_level</span><span class="w"> </span><span class="n">STRING</span><span class="p">,</span>
<a id="__codelineno-3-27" name="__codelineno-3-27" href="#__codelineno-3-27"></a><span class="w">    </span><span class="k">PRIMARY</span><span class="w"> </span><span class="k">KEY</span><span class="w"> </span><span class="p">(</span><span class="n">merchant_category</span><span class="p">)</span><span class="w"> </span><span class="k">NOT</span><span class="w"> </span><span class="n">ENFORCED</span>
<a id="__codelineno-3-28" name="__codelineno-3-28" href="#__codelineno-3-28"></a><span class="p">)</span><span class="w"> </span><span class="k">WITH</span><span class="w"> </span><span class="p">(</span>
<a id="__codelineno-3-29" name="__codelineno-3-29" href="#__codelineno-3-29"></a><span class="w">    </span><span class="s1">&#39;connector&#39;</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;jdbc&#39;</span><span class="p">,</span>
<a id="__codelineno-3-30" name="__codelineno-3-30" href="#__codelineno-3-30"></a><span class="w">    </span><span class="s1">&#39;url&#39;</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;jdbc:postgresql://postgres:5432/reference&#39;</span><span class="p">,</span>
<a id="__codelineno-3-31" name="__codelineno-3-31" href="#__codelineno-3-31"></a><span class="w">    </span><span class="s1">&#39;table-name&#39;</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;merchant_categories&#39;</span><span class="p">,</span>
<a id="__codelineno-3-32" name="__codelineno-3-32" href="#__codelineno-3-32"></a><span class="w">    </span><span class="s1">&#39;lookup.cache.max-rows&#39;</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;10000&#39;</span><span class="p">,</span>
<a id="__codelineno-3-33" name="__codelineno-3-33" href="#__codelineno-3-33"></a><span class="w">    </span><span class="s1">&#39;lookup.cache.ttl&#39;</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;1h&#39;</span>
<a id="__codelineno-3-34" name="__codelineno-3-34" href="#__codelineno-3-34"></a><span class="p">);</span>
<a id="__codelineno-3-35" name="__codelineno-3-35" href="#__codelineno-3-35"></a>
<a id="__codelineno-3-36" name="__codelineno-3-36" href="#__codelineno-3-36"></a><span class="c1">-- Table Iceberg cible avec données enrichies et validées</span>
<a id="__codelineno-3-37" name="__codelineno-3-37" href="#__codelineno-3-37"></a><span class="k">CREATE</span><span class="w"> </span><span class="k">TABLE</span><span class="w"> </span><span class="n">lakehouse_transactions</span><span class="w"> </span><span class="p">(</span>
<a id="__codelineno-3-38" name="__codelineno-3-38" href="#__codelineno-3-38"></a><span class="w">    </span><span class="n">transaction_id</span><span class="w"> </span><span class="n">STRING</span><span class="p">,</span>
<a id="__codelineno-3-39" name="__codelineno-3-39" href="#__codelineno-3-39"></a><span class="w">    </span><span class="n">account_id</span><span class="w"> </span><span class="n">STRING</span><span class="p">,</span>
<a id="__codelineno-3-40" name="__codelineno-3-40" href="#__codelineno-3-40"></a><span class="w">    </span><span class="n">amount_cad</span><span class="w"> </span><span class="nb">DECIMAL</span><span class="p">(</span><span class="mi">18</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">),</span>
<a id="__codelineno-3-41" name="__codelineno-3-41" href="#__codelineno-3-41"></a><span class="w">    </span><span class="n">original_amount</span><span class="w"> </span><span class="nb">DECIMAL</span><span class="p">(</span><span class="mi">18</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">),</span>
<a id="__codelineno-3-42" name="__codelineno-3-42" href="#__codelineno-3-42"></a><span class="w">    </span><span class="n">original_currency</span><span class="w"> </span><span class="n">STRING</span><span class="p">,</span>
<a id="__codelineno-3-43" name="__codelineno-3-43" href="#__codelineno-3-43"></a><span class="w">    </span><span class="n">merchant_name</span><span class="w"> </span><span class="n">STRING</span><span class="p">,</span>
<a id="__codelineno-3-44" name="__codelineno-3-44" href="#__codelineno-3-44"></a><span class="w">    </span><span class="n">category_group</span><span class="w"> </span><span class="n">STRING</span><span class="p">,</span>
<a id="__codelineno-3-45" name="__codelineno-3-45" href="#__codelineno-3-45"></a><span class="w">    </span><span class="n">risk_level</span><span class="w"> </span><span class="n">STRING</span><span class="p">,</span>
<a id="__codelineno-3-46" name="__codelineno-3-46" href="#__codelineno-3-46"></a><span class="w">    </span><span class="n">transaction_time</span><span class="w"> </span><span class="k">TIMESTAMP</span><span class="p">(</span><span class="mi">3</span><span class="p">),</span>
<a id="__codelineno-3-47" name="__codelineno-3-47" href="#__codelineno-3-47"></a><span class="w">    </span><span class="n">processing_time</span><span class="w"> </span><span class="k">TIMESTAMP</span><span class="p">(</span><span class="mi">3</span><span class="p">),</span>
<a id="__codelineno-3-48" name="__codelineno-3-48" href="#__codelineno-3-48"></a><span class="w">    </span><span class="n">data_quality_score</span><span class="w"> </span><span class="nb">INT</span>
<a id="__codelineno-3-49" name="__codelineno-3-49" href="#__codelineno-3-49"></a><span class="p">)</span><span class="w"> </span><span class="k">WITH</span><span class="w"> </span><span class="p">(</span>
<a id="__codelineno-3-50" name="__codelineno-3-50" href="#__codelineno-3-50"></a><span class="w">    </span><span class="s1">&#39;connector&#39;</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;iceberg&#39;</span><span class="p">,</span>
<a id="__codelineno-3-51" name="__codelineno-3-51" href="#__codelineno-3-51"></a><span class="w">    </span><span class="s1">&#39;catalog-name&#39;</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;lakehouse&#39;</span><span class="p">,</span>
<a id="__codelineno-3-52" name="__codelineno-3-52" href="#__codelineno-3-52"></a><span class="w">    </span><span class="s1">&#39;database-name&#39;</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;financial&#39;</span><span class="p">,</span>
<a id="__codelineno-3-53" name="__codelineno-3-53" href="#__codelineno-3-53"></a><span class="w">    </span><span class="s1">&#39;table-name&#39;</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;transactions&#39;</span>
<a id="__codelineno-3-54" name="__codelineno-3-54" href="#__codelineno-3-54"></a><span class="p">);</span>
<a id="__codelineno-3-55" name="__codelineno-3-55" href="#__codelineno-3-55"></a>
<a id="__codelineno-3-56" name="__codelineno-3-56" href="#__codelineno-3-56"></a><span class="c1">-- Pipeline de traitement avec validation et enrichissement</span>
<a id="__codelineno-3-57" name="__codelineno-3-57" href="#__codelineno-3-57"></a><span class="k">INSERT</span><span class="w"> </span><span class="k">INTO</span><span class="w"> </span><span class="n">lakehouse_transactions</span>
<a id="__codelineno-3-58" name="__codelineno-3-58" href="#__codelineno-3-58"></a><span class="k">SELECT</span><span class="w"> </span>
<a id="__codelineno-3-59" name="__codelineno-3-59" href="#__codelineno-3-59"></a><span class="w">    </span><span class="n">t</span><span class="p">.</span><span class="n">transaction_id</span><span class="p">,</span>
<a id="__codelineno-3-60" name="__codelineno-3-60" href="#__codelineno-3-60"></a><span class="w">    </span><span class="n">t</span><span class="p">.</span><span class="n">account_id</span><span class="p">,</span>
<a id="__codelineno-3-61" name="__codelineno-3-61" href="#__codelineno-3-61"></a><span class="w">    </span><span class="k">CASE</span><span class="w"> </span><span class="n">t</span><span class="p">.</span><span class="n">currency</span><span class="w"> </span>
<a id="__codelineno-3-62" name="__codelineno-3-62" href="#__codelineno-3-62"></a><span class="w">        </span><span class="k">WHEN</span><span class="w"> </span><span class="s1">&#39;CAD&#39;</span><span class="w"> </span><span class="k">THEN</span><span class="w"> </span><span class="n">t</span><span class="p">.</span><span class="n">amount</span>
<a id="__codelineno-3-63" name="__codelineno-3-63" href="#__codelineno-3-63"></a><span class="w">        </span><span class="k">WHEN</span><span class="w"> </span><span class="s1">&#39;USD&#39;</span><span class="w"> </span><span class="k">THEN</span><span class="w"> </span><span class="n">t</span><span class="p">.</span><span class="n">amount</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="mi">1</span><span class="p">.</span><span class="mi">36</span>
<a id="__codelineno-3-64" name="__codelineno-3-64" href="#__codelineno-3-64"></a><span class="w">        </span><span class="k">WHEN</span><span class="w"> </span><span class="s1">&#39;EUR&#39;</span><span class="w"> </span><span class="k">THEN</span><span class="w"> </span><span class="n">t</span><span class="p">.</span><span class="n">amount</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="mi">1</span><span class="p">.</span><span class="mi">47</span>
<a id="__codelineno-3-65" name="__codelineno-3-65" href="#__codelineno-3-65"></a><span class="w">        </span><span class="k">ELSE</span><span class="w"> </span><span class="n">t</span><span class="p">.</span><span class="n">amount</span>
<a id="__codelineno-3-66" name="__codelineno-3-66" href="#__codelineno-3-66"></a><span class="w">    </span><span class="k">END</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="n">amount_cad</span><span class="p">,</span>
<a id="__codelineno-3-67" name="__codelineno-3-67" href="#__codelineno-3-67"></a><span class="w">    </span><span class="n">t</span><span class="p">.</span><span class="n">amount</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="n">original_amount</span><span class="p">,</span>
<a id="__codelineno-3-68" name="__codelineno-3-68" href="#__codelineno-3-68"></a><span class="w">    </span><span class="n">t</span><span class="p">.</span><span class="n">currency</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="n">original_currency</span><span class="p">,</span>
<a id="__codelineno-3-69" name="__codelineno-3-69" href="#__codelineno-3-69"></a><span class="w">    </span><span class="k">COALESCE</span><span class="p">(</span><span class="k">TRIM</span><span class="p">(</span><span class="n">t</span><span class="p">.</span><span class="n">merchant_name</span><span class="p">),</span><span class="w"> </span><span class="s1">&#39;UNKNOWN&#39;</span><span class="p">)</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="n">merchant_name</span><span class="p">,</span>
<a id="__codelineno-3-70" name="__codelineno-3-70" href="#__codelineno-3-70"></a><span class="w">    </span><span class="k">COALESCE</span><span class="p">(</span><span class="n">mc</span><span class="p">.</span><span class="n">category_group</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;OTHER&#39;</span><span class="p">)</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="n">category_group</span><span class="p">,</span>
<a id="__codelineno-3-71" name="__codelineno-3-71" href="#__codelineno-3-71"></a><span class="w">    </span><span class="k">COALESCE</span><span class="p">(</span><span class="n">mc</span><span class="p">.</span><span class="n">risk_level</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;MEDIUM&#39;</span><span class="p">)</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="n">risk_level</span><span class="p">,</span>
<a id="__codelineno-3-72" name="__codelineno-3-72" href="#__codelineno-3-72"></a><span class="w">    </span><span class="n">t</span><span class="p">.</span><span class="n">transaction_time</span><span class="p">,</span>
<a id="__codelineno-3-73" name="__codelineno-3-73" href="#__codelineno-3-73"></a><span class="w">    </span><span class="k">CURRENT_TIMESTAMP</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="n">processing_time</span><span class="p">,</span>
<a id="__codelineno-3-74" name="__codelineno-3-74" href="#__codelineno-3-74"></a><span class="w">    </span><span class="k">CASE</span><span class="w"> </span>
<a id="__codelineno-3-75" name="__codelineno-3-75" href="#__codelineno-3-75"></a><span class="w">        </span><span class="k">WHEN</span><span class="w"> </span><span class="n">t</span><span class="p">.</span><span class="n">amount</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="k">AND</span><span class="w"> </span><span class="n">t</span><span class="p">.</span><span class="n">merchant_name</span><span class="w"> </span><span class="k">IS</span><span class="w"> </span><span class="k">NOT</span><span class="w"> </span><span class="k">NULL</span><span class="w"> </span><span class="k">THEN</span><span class="w"> </span><span class="mi">100</span>
<a id="__codelineno-3-76" name="__codelineno-3-76" href="#__codelineno-3-76"></a><span class="w">        </span><span class="k">WHEN</span><span class="w"> </span><span class="n">t</span><span class="p">.</span><span class="n">amount</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="k">THEN</span><span class="w"> </span><span class="mi">75</span>
<a id="__codelineno-3-77" name="__codelineno-3-77" href="#__codelineno-3-77"></a><span class="w">        </span><span class="k">ELSE</span><span class="w"> </span><span class="mi">50</span>
<a id="__codelineno-3-78" name="__codelineno-3-78" href="#__codelineno-3-78"></a><span class="w">    </span><span class="k">END</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="n">data_quality_score</span>
<a id="__codelineno-3-79" name="__codelineno-3-79" href="#__codelineno-3-79"></a><span class="k">FROM</span><span class="w"> </span><span class="n">raw_transactions</span><span class="w"> </span><span class="n">t</span>
<a id="__codelineno-3-80" name="__codelineno-3-80" href="#__codelineno-3-80"></a><span class="k">LEFT</span><span class="w"> </span><span class="k">JOIN</span><span class="w"> </span><span class="n">merchant_categories</span><span class="w"> </span><span class="k">FOR</span><span class="w"> </span><span class="n">SYSTEM_TIME</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="k">OF</span><span class="w"> </span><span class="n">t</span><span class="p">.</span><span class="n">transaction_time</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="n">mc</span>
<a id="__codelineno-3-81" name="__codelineno-3-81" href="#__codelineno-3-81"></a><span class="w">    </span><span class="k">ON</span><span class="w"> </span><span class="n">t</span><span class="p">.</span><span class="n">merchant_category</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">mc</span><span class="p">.</span><span class="n">merchant_category</span>
<a id="__codelineno-3-82" name="__codelineno-3-82" href="#__codelineno-3-82"></a><span class="k">WHERE</span><span class="w"> </span><span class="n">t</span><span class="p">.</span><span class="n">amount</span><span class="w"> </span><span class="k">IS</span><span class="w"> </span><span class="k">NOT</span><span class="w"> </span><span class="k">NULL</span><span class="w"> </span>
<a id="__codelineno-3-83" name="__codelineno-3-83" href="#__codelineno-3-83"></a><span class="w">  </span><span class="k">AND</span><span class="w"> </span><span class="n">t</span><span class="p">.</span><span class="n">transaction_id</span><span class="w"> </span><span class="k">IS</span><span class="w"> </span><span class="k">NOT</span><span class="w"> </span><span class="k">NULL</span>
<a id="__codelineno-3-84" name="__codelineno-3-84" href="#__codelineno-3-84"></a><span class="w">  </span><span class="k">AND</span><span class="w"> </span><span class="n">t</span><span class="p">.</span><span class="n">amount</span><span class="w"> </span><span class="k">BETWEEN</span><span class="w"> </span><span class="o">-</span><span class="mi">1000000</span><span class="w"> </span><span class="k">AND</span><span class="w"> </span><span class="mi">1000000</span><span class="p">;</span>
</code></pre></div>
<p>Ce pipeline illustre les principes Shift Left :</p>
<ol>
<li><strong>Validation à la source</strong> : Les transactions invalides sont filtrées avant d'atteindre le Lakehouse</li>
<li><strong>Enrichissement en vol</strong> : Les données de référence sont jointes en temps réel via lookup join</li>
<li><strong>Normalisation</strong> : Les montants sont convertis en dollars canadiens pour uniformité</li>
<li><strong>Score de qualité</strong> : Chaque enregistrement reçoit un indicateur exploitable en aval</li>
<li><strong>Traçabilité</strong> : Le timestamp de traitement permet de suivre la latence du pipeline</li>
</ol>
<h3 id="couches-bronze-silver-gold-dans-le-streaming-lakehouse">Couches Bronze, Silver, Gold dans le Streaming Lakehouse<a class="headerlink" href="#couches-bronze-silver-gold-dans-le-streaming-lakehouse" title="Permanent link">&para;</a></h3>
<p>Le modèle Medallion (Bronze-Silver-Gold), popularisé par Databricks, s'adapte naturellement au Streaming Lakehouse. Chaque couche représente un niveau de raffinement des données :</p>
<p><strong>Couche Bronze</strong> : Données brutes, telles qu'ingérées depuis les sources. Stockées avec un minimum de transformation pour préserver la fidélité. Utiles pour le retraitement et l'audit.</p>
<p><strong>Couche Silver</strong> : Données nettoyées, validées et enrichies. Les duplications sont éliminées, les schémas sont normalisés, les références sont résolues.</p>
<p><strong>Couche Gold</strong> : Données agrégées et modélisées pour la consommation métier. Métriques précalculées, dimensions denormalisées, vues optimisées pour les cas d'usage analytiques.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-4-1" name="__codelineno-4-1" href="#__codelineno-4-1"></a>┌─────────────────────────────────────────────────────────────────┐
<a id="__codelineno-4-2" name="__codelineno-4-2" href="#__codelineno-4-2"></a>│                 MODÈLE MEDALLION STREAMING                      │
<a id="__codelineno-4-3" name="__codelineno-4-3" href="#__codelineno-4-3"></a>├─────────────────────────────────────────────────────────────────┤
<a id="__codelineno-4-4" name="__codelineno-4-4" href="#__codelineno-4-4"></a>│                                                                 │
<a id="__codelineno-4-5" name="__codelineno-4-5" href="#__codelineno-4-5"></a>│   ┌────────────────┐                                            │
<a id="__codelineno-4-6" name="__codelineno-4-6" href="#__codelineno-4-6"></a>│   │ Sources Kafka  │                                            │
<a id="__codelineno-4-7" name="__codelineno-4-7" href="#__codelineno-4-7"></a>│   │ (Topics Bruts) │                                            │
<a id="__codelineno-4-8" name="__codelineno-4-8" href="#__codelineno-4-8"></a>│   └───────┬────────┘                                            │
<a id="__codelineno-4-9" name="__codelineno-4-9" href="#__codelineno-4-9"></a>│           │                                                     │
<a id="__codelineno-4-10" name="__codelineno-4-10" href="#__codelineno-4-10"></a>│           ▼                                                     │
<a id="__codelineno-4-11" name="__codelineno-4-11" href="#__codelineno-4-11"></a>│   ┌────────────────────────────────────────┐                    │
<a id="__codelineno-4-12" name="__codelineno-4-12" href="#__codelineno-4-12"></a>│   │            COUCHE BRONZE               │                    │
<a id="__codelineno-4-13" name="__codelineno-4-13" href="#__codelineno-4-13"></a>│   │  • Tables Iceberg Raw                  │                    │
<a id="__codelineno-4-14" name="__codelineno-4-14" href="#__codelineno-4-14"></a>│   │  • Données brutes sans transformation  │                    │
<a id="__codelineno-4-15" name="__codelineno-4-15" href="#__codelineno-4-15"></a>│   │  • Partitionnement par heure           │                    │
<a id="__codelineno-4-16" name="__codelineno-4-16" href="#__codelineno-4-16"></a>│   │  • Rétention longue (années)           │                    │
<a id="__codelineno-4-17" name="__codelineno-4-17" href="#__codelineno-4-17"></a>│   └───────────────┬────────────────────────┘                    │
<a id="__codelineno-4-18" name="__codelineno-4-18" href="#__codelineno-4-18"></a>│                   │ Flink: Nettoyage + Validation               │
<a id="__codelineno-4-19" name="__codelineno-4-19" href="#__codelineno-4-19"></a>│                   ▼                                             │
<a id="__codelineno-4-20" name="__codelineno-4-20" href="#__codelineno-4-20"></a>│   ┌────────────────────────────────────────┐                    │
<a id="__codelineno-4-21" name="__codelineno-4-21" href="#__codelineno-4-21"></a>│   │            COUCHE SILVER               │                    │
<a id="__codelineno-4-22" name="__codelineno-4-22" href="#__codelineno-4-22"></a>│   │  • Tables Iceberg Curated              │                    │
<a id="__codelineno-4-23" name="__codelineno-4-23" href="#__codelineno-4-23"></a>│   │  • Données validées et enrichies       │                    │
<a id="__codelineno-4-24" name="__codelineno-4-24" href="#__codelineno-4-24"></a>│   │  • Schémas normalisés                  │                    │
<a id="__codelineno-4-25" name="__codelineno-4-25" href="#__codelineno-4-25"></a>│   │  • Rétention moyenne (mois)            │                    │
<a id="__codelineno-4-26" name="__codelineno-4-26" href="#__codelineno-4-26"></a>│   └───────────────┬────────────────────────┘                    │
<a id="__codelineno-4-27" name="__codelineno-4-27" href="#__codelineno-4-27"></a>│                   │ Flink: Agrégation + Modélisation            │
<a id="__codelineno-4-28" name="__codelineno-4-28" href="#__codelineno-4-28"></a>│                   ▼                                             │
<a id="__codelineno-4-29" name="__codelineno-4-29" href="#__codelineno-4-29"></a>│   ┌────────────────────────────────────────┐                    │
<a id="__codelineno-4-30" name="__codelineno-4-30" href="#__codelineno-4-30"></a>│   │             COUCHE GOLD                │                    │
<a id="__codelineno-4-31" name="__codelineno-4-31" href="#__codelineno-4-31"></a>│   │  • Tables Iceberg Analytics            │                    │
<a id="__codelineno-4-32" name="__codelineno-4-32" href="#__codelineno-4-32"></a>│   │  • Métriques précalculées              │                    │
<a id="__codelineno-4-33" name="__codelineno-4-33" href="#__codelineno-4-33"></a>│   │  • Vues métier optimisées              │                    │
<a id="__codelineno-4-34" name="__codelineno-4-34" href="#__codelineno-4-34"></a>│   │  • Accès BI / ML direct                │                    │
<a id="__codelineno-4-35" name="__codelineno-4-35" href="#__codelineno-4-35"></a>│   └────────────────────────────────────────┘                    │
<a id="__codelineno-4-36" name="__codelineno-4-36" href="#__codelineno-4-36"></a>│                                                                 │
<a id="__codelineno-4-37" name="__codelineno-4-37" href="#__codelineno-4-37"></a>└─────────────────────────────────────────────────────────────────┘
</code></pre></div>
<p>L'avantage du streaming dans ce modèle est la mise à jour continue de chaque couche. Contrairement à l'approche batch où les couches Silver et Gold sont recalculées périodiquement, le streaming permet une propagation quasi instantanée des changements à travers toutes les couches.</p>
<h3 id="gestion-du-change-data-capture-cdc">Gestion du Change Data Capture (CDC)<a class="headerlink" href="#gestion-du-change-data-capture-cdc" title="Permanent link">&para;</a></h3>
<p>Le Change Data Capture représente un pattern fondamental pour alimenter le Streaming Lakehouse depuis les bases de données transactionnelles. Debezium, le standard open source pour le CDC, capture les modifications (INSERT, UPDATE, DELETE) depuis les journaux de transaction des bases de données et les publie comme événements Kafka.</p>
<p>L'intégration CDC-Iceberg requiert une attention particulière au format des opérations. Les événements Debezium contiennent non seulement la nouvelle valeur mais aussi l'ancienne valeur et le type d'opération. Apache Iceberg supporte nativement les opérations d'upsert via le mode Merge-on-Read, permettant de matérialiser fidèlement l'état des tables source.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-5-1" name="__codelineno-5-1" href="#__codelineno-5-1"></a><span class="c1"># Configuration Debezium pour PostgreSQL vers Kafka</span>
<a id="__codelineno-5-2" name="__codelineno-5-2" href="#__codelineno-5-2"></a><span class="c1"># debezium-postgres-config.yaml</span>
<a id="__codelineno-5-3" name="__codelineno-5-3" href="#__codelineno-5-3"></a><span class="nt">apiVersion</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">kafka.strimzi.io/v1beta2</span>
<a id="__codelineno-5-4" name="__codelineno-5-4" href="#__codelineno-5-4"></a><span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">KafkaConnector</span>
<a id="__codelineno-5-5" name="__codelineno-5-5" href="#__codelineno-5-5"></a><span class="nt">metadata</span><span class="p">:</span>
<a id="__codelineno-5-6" name="__codelineno-5-6" href="#__codelineno-5-6"></a><span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">postgres-cdc-connector</span>
<a id="__codelineno-5-7" name="__codelineno-5-7" href="#__codelineno-5-7"></a><span class="nt">spec</span><span class="p">:</span>
<a id="__codelineno-5-8" name="__codelineno-5-8" href="#__codelineno-5-8"></a><span class="w">  </span><span class="nt">class</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">io.debezium.connector.postgresql.PostgresConnector</span>
<a id="__codelineno-5-9" name="__codelineno-5-9" href="#__codelineno-5-9"></a><span class="w">  </span><span class="nt">tasksMax</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1</span>
<a id="__codelineno-5-10" name="__codelineno-5-10" href="#__codelineno-5-10"></a><span class="w">  </span><span class="nt">config</span><span class="p">:</span>
<a id="__codelineno-5-11" name="__codelineno-5-11" href="#__codelineno-5-11"></a><span class="w">    </span><span class="nt">database.hostname</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">postgres-primary.internal</span>
<a id="__codelineno-5-12" name="__codelineno-5-12" href="#__codelineno-5-12"></a><span class="w">    </span><span class="nt">database.port</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">5432</span>
<a id="__codelineno-5-13" name="__codelineno-5-13" href="#__codelineno-5-13"></a><span class="w">    </span><span class="nt">database.user</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">debezium</span>
<a id="__codelineno-5-14" name="__codelineno-5-14" href="#__codelineno-5-14"></a><span class="w">    </span><span class="nt">database.password</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">${secrets:cdc-password}</span>
<a id="__codelineno-5-15" name="__codelineno-5-15" href="#__codelineno-5-15"></a><span class="w">    </span><span class="nt">database.dbname</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">production</span>
<a id="__codelineno-5-16" name="__codelineno-5-16" href="#__codelineno-5-16"></a><span class="w">    </span><span class="nt">database.server.name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">prod-db</span>
<a id="__codelineno-5-17" name="__codelineno-5-17" href="#__codelineno-5-17"></a>
<a id="__codelineno-5-18" name="__codelineno-5-18" href="#__codelineno-5-18"></a><span class="w">    </span><span class="c1"># Tables à capturer</span>
<a id="__codelineno-5-19" name="__codelineno-5-19" href="#__codelineno-5-19"></a><span class="w">    </span><span class="nt">table.include.list</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">public.customers,public.orders,public.products</span>
<a id="__codelineno-5-20" name="__codelineno-5-20" href="#__codelineno-5-20"></a>
<a id="__codelineno-5-21" name="__codelineno-5-21" href="#__codelineno-5-21"></a><span class="w">    </span><span class="c1"># Configuration du format Avro</span>
<a id="__codelineno-5-22" name="__codelineno-5-22" href="#__codelineno-5-22"></a><span class="w">    </span><span class="nt">key.converter</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">io.confluent.connect.avro.AvroConverter</span>
<a id="__codelineno-5-23" name="__codelineno-5-23" href="#__codelineno-5-23"></a><span class="w">    </span><span class="nt">key.converter.schema.registry.url</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">http://schema-registry:8081</span>
<a id="__codelineno-5-24" name="__codelineno-5-24" href="#__codelineno-5-24"></a><span class="w">    </span><span class="nt">value.converter</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">io.confluent.connect.avro.AvroConverter</span>
<a id="__codelineno-5-25" name="__codelineno-5-25" href="#__codelineno-5-25"></a><span class="w">    </span><span class="nt">value.converter.schema.registry.url</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">http://schema-registry:8081</span>
<a id="__codelineno-5-26" name="__codelineno-5-26" href="#__codelineno-5-26"></a>
<a id="__codelineno-5-27" name="__codelineno-5-27" href="#__codelineno-5-27"></a><span class="w">    </span><span class="c1"># Options CDC</span>
<a id="__codelineno-5-28" name="__codelineno-5-28" href="#__codelineno-5-28"></a><span class="w">    </span><span class="nt">publication.autocreate.mode</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">filtered</span>
<a id="__codelineno-5-29" name="__codelineno-5-29" href="#__codelineno-5-29"></a><span class="w">    </span><span class="nt">slot.name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">debezium_prod</span>
<a id="__codelineno-5-30" name="__codelineno-5-30" href="#__codelineno-5-30"></a><span class="w">    </span><span class="nt">plugin.name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">pgoutput</span>
<a id="__codelineno-5-31" name="__codelineno-5-31" href="#__codelineno-5-31"></a>
<a id="__codelineno-5-32" name="__codelineno-5-32" href="#__codelineno-5-32"></a><span class="w">    </span><span class="c1"># Transformations pour extraction des valeurs</span>
<a id="__codelineno-5-33" name="__codelineno-5-33" href="#__codelineno-5-33"></a><span class="w">    </span><span class="nt">transforms</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">unwrap</span>
<a id="__codelineno-5-34" name="__codelineno-5-34" href="#__codelineno-5-34"></a><span class="w">    </span><span class="nt">transforms.unwrap.type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">io.debezium.transforms.ExtractNewRecordState</span>
<a id="__codelineno-5-35" name="__codelineno-5-35" href="#__codelineno-5-35"></a><span class="w">    </span><span class="nt">transforms.unwrap.drop.tombstones</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">false</span>
<a id="__codelineno-5-36" name="__codelineno-5-36" href="#__codelineno-5-36"></a><span class="w">    </span><span class="nt">transforms.unwrap.delete.handling.mode</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">rewrite</span>
</code></pre></div>
<p>La matérialisation des flux CDC en tables Iceberg avec support des opérations DELETE utilise le mode upsert de Flink :</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-6-1" name="__codelineno-6-1" href="#__codelineno-6-1"></a><span class="c1">-- Table Iceberg configurée pour CDC avec upsert</span>
<a id="__codelineno-6-2" name="__codelineno-6-2" href="#__codelineno-6-2"></a><span class="k">CREATE</span><span class="w"> </span><span class="k">TABLE</span><span class="w"> </span><span class="n">iceberg_customers</span><span class="w"> </span><span class="p">(</span>
<a id="__codelineno-6-3" name="__codelineno-6-3" href="#__codelineno-6-3"></a><span class="w">    </span><span class="n">customer_id</span><span class="w"> </span><span class="n">STRING</span><span class="p">,</span>
<a id="__codelineno-6-4" name="__codelineno-6-4" href="#__codelineno-6-4"></a><span class="w">    </span><span class="n">email</span><span class="w"> </span><span class="n">STRING</span><span class="p">,</span>
<a id="__codelineno-6-5" name="__codelineno-6-5" href="#__codelineno-6-5"></a><span class="w">    </span><span class="n">full_name</span><span class="w"> </span><span class="n">STRING</span><span class="p">,</span>
<a id="__codelineno-6-6" name="__codelineno-6-6" href="#__codelineno-6-6"></a><span class="w">    </span><span class="n">created_at</span><span class="w"> </span><span class="k">TIMESTAMP</span><span class="p">(</span><span class="mi">3</span><span class="p">),</span>
<a id="__codelineno-6-7" name="__codelineno-6-7" href="#__codelineno-6-7"></a><span class="w">    </span><span class="n">updated_at</span><span class="w"> </span><span class="k">TIMESTAMP</span><span class="p">(</span><span class="mi">3</span><span class="p">),</span>
<a id="__codelineno-6-8" name="__codelineno-6-8" href="#__codelineno-6-8"></a><span class="w">    </span><span class="n">is_deleted</span><span class="w"> </span><span class="nb">BOOLEAN</span><span class="p">,</span>
<a id="__codelineno-6-9" name="__codelineno-6-9" href="#__codelineno-6-9"></a><span class="w">    </span><span class="k">PRIMARY</span><span class="w"> </span><span class="k">KEY</span><span class="w"> </span><span class="p">(</span><span class="n">customer_id</span><span class="p">)</span><span class="w"> </span><span class="k">NOT</span><span class="w"> </span><span class="n">ENFORCED</span>
<a id="__codelineno-6-10" name="__codelineno-6-10" href="#__codelineno-6-10"></a><span class="p">)</span><span class="w"> </span><span class="k">WITH</span><span class="w"> </span><span class="p">(</span>
<a id="__codelineno-6-11" name="__codelineno-6-11" href="#__codelineno-6-11"></a><span class="w">    </span><span class="s1">&#39;connector&#39;</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;iceberg&#39;</span><span class="p">,</span>
<a id="__codelineno-6-12" name="__codelineno-6-12" href="#__codelineno-6-12"></a><span class="w">    </span><span class="s1">&#39;catalog-name&#39;</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;lakehouse&#39;</span><span class="p">,</span>
<a id="__codelineno-6-13" name="__codelineno-6-13" href="#__codelineno-6-13"></a><span class="w">    </span><span class="s1">&#39;database-name&#39;</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;crm&#39;</span><span class="p">,</span>
<a id="__codelineno-6-14" name="__codelineno-6-14" href="#__codelineno-6-14"></a><span class="w">    </span><span class="s1">&#39;table-name&#39;</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;customers&#39;</span><span class="p">,</span>
<a id="__codelineno-6-15" name="__codelineno-6-15" href="#__codelineno-6-15"></a><span class="w">    </span><span class="s1">&#39;write.upsert.enabled&#39;</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;true&#39;</span><span class="p">,</span>
<a id="__codelineno-6-16" name="__codelineno-6-16" href="#__codelineno-6-16"></a><span class="w">    </span><span class="s1">&#39;write.format.default&#39;</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;parquet&#39;</span><span class="p">,</span>
<a id="__codelineno-6-17" name="__codelineno-6-17" href="#__codelineno-6-17"></a><span class="w">    </span><span class="s1">&#39;write.merge-mode&#39;</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;merge-on-read&#39;</span>
<a id="__codelineno-6-18" name="__codelineno-6-18" href="#__codelineno-6-18"></a><span class="p">);</span>
<a id="__codelineno-6-19" name="__codelineno-6-19" href="#__codelineno-6-19"></a>
<a id="__codelineno-6-20" name="__codelineno-6-20" href="#__codelineno-6-20"></a><span class="c1">-- Ingestion CDC avec gestion des suppressions logiques</span>
<a id="__codelineno-6-21" name="__codelineno-6-21" href="#__codelineno-6-21"></a><span class="k">INSERT</span><span class="w"> </span><span class="k">INTO</span><span class="w"> </span><span class="n">iceberg_customers</span>
<a id="__codelineno-6-22" name="__codelineno-6-22" href="#__codelineno-6-22"></a><span class="k">SELECT</span><span class="w"> </span>
<a id="__codelineno-6-23" name="__codelineno-6-23" href="#__codelineno-6-23"></a><span class="w">    </span><span class="n">customer_id</span><span class="p">,</span>
<a id="__codelineno-6-24" name="__codelineno-6-24" href="#__codelineno-6-24"></a><span class="w">    </span><span class="n">email</span><span class="p">,</span>
<a id="__codelineno-6-25" name="__codelineno-6-25" href="#__codelineno-6-25"></a><span class="w">    </span><span class="n">full_name</span><span class="p">,</span>
<a id="__codelineno-6-26" name="__codelineno-6-26" href="#__codelineno-6-26"></a><span class="w">    </span><span class="n">created_at</span><span class="p">,</span>
<a id="__codelineno-6-27" name="__codelineno-6-27" href="#__codelineno-6-27"></a><span class="w">    </span><span class="k">CURRENT_TIMESTAMP</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="n">updated_at</span><span class="p">,</span>
<a id="__codelineno-6-28" name="__codelineno-6-28" href="#__codelineno-6-28"></a><span class="w">    </span><span class="n">__deleted</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="n">is_deleted</span>
<a id="__codelineno-6-29" name="__codelineno-6-29" href="#__codelineno-6-29"></a><span class="k">FROM</span><span class="w"> </span><span class="n">cdc_customers_kafka</span>
<a id="__codelineno-6-30" name="__codelineno-6-30" href="#__codelineno-6-30"></a><span class="k">WHERE</span><span class="w"> </span><span class="n">customer_id</span><span class="w"> </span><span class="k">IS</span><span class="w"> </span><span class="k">NOT</span><span class="w"> </span><span class="k">NULL</span><span class="p">;</span>
</code></pre></div>
<blockquote>
<p><strong>Migration</strong><br />
<em>De</em> : Réplication batch nocturne depuis PostgreSQL<br />
<em>Vers</em> : CDC temps réel avec Debezium vers Streaming Lakehouse<br />
<em>Stratégie</em> : 
1. Déployer Debezium en mode snapshot pour la capture initiale
2. Basculer en mode streaming après synchronisation complète
3. Maintenir la réplication batch en parallèle pendant validation (2-4 semaines)
4. Décommissionner le batch après période de stabilisation</p>
</blockquote>
<h3 id="architecture-delta-et-streamhouse">Architecture Delta et Streamhouse<a class="headerlink" href="#architecture-delta-et-streamhouse" title="Permanent link">&para;</a></h3>
<p>Au-delà du Streaming Lakehouse, d'autres évolutions architecturales méritent attention. L'architecture Delta, portée par Databricks, utilise des techniques de micro-batching pour unifier batch et streaming dans un modèle de flux continu. Elle organise les données en couches Bronze (données brutes), Silver (données nettoyées) et Gold (données agrégées), chacune représentée par des tables Delta Lake.</p>
<p>Plus récemment, le concept de Streamhouse émerge comme une évolution du Lakehouse vers le streaming natif. Porté notamment par Ververica avec Apache Paimon, ce modèle place le traitement de flux au cœur de l'architecture plutôt qu'en périphérie. Paimon, développé par Alibaba et incubé chez Apache, offre un format de table optimisé pour l'ingestion streaming à haute fréquence avec support natif du CDC.</p>
<p>Ces évolutions confirment la tendance vers l'unification streaming-lakehouse, chaque approche offrant des compromis différents entre latence, coût et complexité.</p>
<hr />
<h2 id="iv122-le-role-de-confluent-et-kafka">IV.12.2 Le Rôle de Confluent et Kafka<a class="headerlink" href="#iv122-le-role-de-confluent-et-kafka" title="Permanent link">&para;</a></h2>
<h3 id="apache-kafka-comme-systeme-nerveux-central">Apache Kafka comme Système Nerveux Central<a class="headerlink" href="#apache-kafka-comme-systeme-nerveux-central" title="Permanent link">&para;</a></h3>
<p>Apache Kafka s'est imposé comme la plateforme de streaming de facto pour l'entreprise moderne. Son modèle de journal distribué immuable offre des caractéristiques uniques qui en font le fondement idéal d'une architecture de Streaming Lakehouse.</p>
<p><strong>Le découplage producteurs-consommateurs</strong> permet à chaque système de fonctionner à son propre rythme. Les producteurs publient des événements sans se soucier de la disponibilité ou de la capacité des consommateurs. Les consommateurs lisent à leur vitesse, reprenant là où ils s'étaient arrêtés en cas d'interruption.</p>
<p><strong>La persistance durable</strong> garantit que chaque événement est stocké de manière fiable, avec une rétention configurable pouvant s'étendre sur des mois ou des années. Cette persistance permet le rejeu historique pour le retraitement ou la reconstruction d'état.</p>
<p><strong>L'ordonnancement garanti</strong> au niveau de la partition assure que les événements sont traités dans l'ordre où ils ont été produits, propriété essentielle pour maintenir la cohérence des états dérivés.</p>
<p><strong>La scalabilité horizontale</strong> permet d'absorber des volumes croissants en ajoutant simplement des brokers et des partitions, sans interruption de service.</p>
<h3 id="lecosysteme-confluent">L'Écosystème Confluent<a class="headerlink" href="#lecosysteme-confluent" title="Permanent link">&para;</a></h3>
<p>Confluent, fondée par les créateurs de Kafka, a construit un écosystème complet autour du noyau open source. Pour le Streaming Lakehouse, plusieurs composants sont particulièrement pertinents.</p>
<p><strong>Confluent Cloud</strong> offre Kafka en tant que service géré avec une séparation calcul-stockage, éliminant la complexité opérationnelle des clusters auto-gérés. Son architecture serverless permet une scalabilité élastique et un modèle de coût basé sur l'utilisation réelle.</p>
<p><strong>Schema Registry</strong> gère les contrats de données entre producteurs et consommateurs. Il supporte les formats Avro, Protobuf et JSON Schema avec des règles de compatibilité configurables (backward, forward, full). Cette gouvernance des schémas est essentielle pour l'évolution contrôlée des structures de données.</p>
<p><strong>Apache Flink (intégré)</strong> fournit un moteur de traitement de flux de niveau entreprise directement dans Confluent Cloud. Flink excelle dans les transformations complexes avec état, les jointures de flux, et les fenêtres temporelles.</p>
<p><strong>Tableflow</strong> représente l'innovation la plus significative pour le Streaming Lakehouse. Cette fonctionnalité, disponible en disponibilité générale depuis mars 2025, permet de matérialiser automatiquement les topics Kafka en tables Apache Iceberg ou Delta Lake.</p>
<h3 id="tableflow-la-passerelle-vers-le-lakehouse">Tableflow : La Passerelle vers le Lakehouse<a class="headerlink" href="#tableflow-la-passerelle-vers-le-lakehouse" title="Permanent link">&para;</a></h3>
<p>Tableflow élimine la complexité traditionnellement associée à l'alimentation d'un Lakehouse depuis Kafka. Avant Tableflow, les organisations devaient déployer et maintenir des pipelines Kafka Connect, des jobs Spark Streaming, ou des applications Flink dédiées pour convertir les événements Kafka en fichiers Parquet compatibles Iceberg.</p>
<p>L'architecture de Tableflow exploite des innovations dans la couche de stockage Kora de Confluent Cloud. Les segments Kafka sont directement convertis en fichiers Parquet, sans copie intermédiaire ni duplication des données. Un service de matérialisation de métadonnées génère automatiquement les métadonnées Iceberg et les journaux de transactions Delta Lake en s'appuyant sur le Schema Registry.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-7-1" name="__codelineno-7-1" href="#__codelineno-7-1"></a><span class="c1"># Configuration Tableflow via API Confluent Cloud</span>
<a id="__codelineno-7-2" name="__codelineno-7-2" href="#__codelineno-7-2"></a><span class="c1"># Exemple d&#39;activation sur un topic existant</span>
<a id="__codelineno-7-3" name="__codelineno-7-3" href="#__codelineno-7-3"></a>
<a id="__codelineno-7-4" name="__codelineno-7-4" href="#__codelineno-7-4"></a><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-7-5" name="__codelineno-7-5" href="#__codelineno-7-5"></a><span class="sd">Étape 1: Définir la configuration Tableflow</span>
<a id="__codelineno-7-6" name="__codelineno-7-6" href="#__codelineno-7-6"></a><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-7-7" name="__codelineno-7-7" href="#__codelineno-7-7"></a><span class="n">tableflow_config</span> <span class="o">=</span> <span class="p">{</span>
<a id="__codelineno-7-8" name="__codelineno-7-8" href="#__codelineno-7-8"></a>    <span class="s2">&quot;topic_name&quot;</span><span class="p">:</span> <span class="s2">&quot;orders.events&quot;</span><span class="p">,</span>
<a id="__codelineno-7-9" name="__codelineno-7-9" href="#__codelineno-7-9"></a>    <span class="s2">&quot;table_format&quot;</span><span class="p">:</span> <span class="s2">&quot;ICEBERG&quot;</span><span class="p">,</span>
<a id="__codelineno-7-10" name="__codelineno-7-10" href="#__codelineno-7-10"></a>    <span class="s2">&quot;catalog_type&quot;</span><span class="p">:</span> <span class="s2">&quot;REST&quot;</span><span class="p">,</span>
<a id="__codelineno-7-11" name="__codelineno-7-11" href="#__codelineno-7-11"></a>    <span class="s2">&quot;storage&quot;</span><span class="p">:</span> <span class="p">{</span>
<a id="__codelineno-7-12" name="__codelineno-7-12" href="#__codelineno-7-12"></a>        <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;S3&quot;</span><span class="p">,</span>
<a id="__codelineno-7-13" name="__codelineno-7-13" href="#__codelineno-7-13"></a>        <span class="s2">&quot;bucket&quot;</span><span class="p">:</span> <span class="s2">&quot;s3://lakehouse-streaming/iceberg/&quot;</span><span class="p">,</span>
<a id="__codelineno-7-14" name="__codelineno-7-14" href="#__codelineno-7-14"></a>        <span class="s2">&quot;region&quot;</span><span class="p">:</span> <span class="s2">&quot;ca-central-1&quot;</span>
<a id="__codelineno-7-15" name="__codelineno-7-15" href="#__codelineno-7-15"></a>    <span class="p">},</span>
<a id="__codelineno-7-16" name="__codelineno-7-16" href="#__codelineno-7-16"></a>    <span class="s2">&quot;schema_evolution&quot;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
<a id="__codelineno-7-17" name="__codelineno-7-17" href="#__codelineno-7-17"></a>    <span class="s2">&quot;compaction&quot;</span><span class="p">:</span> <span class="p">{</span>
<a id="__codelineno-7-18" name="__codelineno-7-18" href="#__codelineno-7-18"></a>        <span class="s2">&quot;enabled&quot;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
<a id="__codelineno-7-19" name="__codelineno-7-19" href="#__codelineno-7-19"></a>        <span class="s2">&quot;interval_minutes&quot;</span><span class="p">:</span> <span class="mi">60</span><span class="p">,</span>
<a id="__codelineno-7-20" name="__codelineno-7-20" href="#__codelineno-7-20"></a>        <span class="s2">&quot;target_file_size_mb&quot;</span><span class="p">:</span> <span class="mi">256</span>
<a id="__codelineno-7-21" name="__codelineno-7-21" href="#__codelineno-7-21"></a>    <span class="p">}</span>
<a id="__codelineno-7-22" name="__codelineno-7-22" href="#__codelineno-7-22"></a><span class="p">}</span>
<a id="__codelineno-7-23" name="__codelineno-7-23" href="#__codelineno-7-23"></a>
<a id="__codelineno-7-24" name="__codelineno-7-24" href="#__codelineno-7-24"></a><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-7-25" name="__codelineno-7-25" href="#__codelineno-7-25"></a><span class="sd">Étape 2: Activer Tableflow via CLI Confluent</span>
<a id="__codelineno-7-26" name="__codelineno-7-26" href="#__codelineno-7-26"></a><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-7-27" name="__codelineno-7-27" href="#__codelineno-7-27"></a><span class="c1"># confluent tableflow enable orders.events \</span>
<a id="__codelineno-7-28" name="__codelineno-7-28" href="#__codelineno-7-28"></a><span class="c1">#   --format iceberg \</span>
<a id="__codelineno-7-29" name="__codelineno-7-29" href="#__codelineno-7-29"></a><span class="c1">#   --catalog-type rest \</span>
<a id="__codelineno-7-30" name="__codelineno-7-30" href="#__codelineno-7-30"></a><span class="c1">#   --storage s3://lakehouse-streaming/iceberg/ \</span>
<a id="__codelineno-7-31" name="__codelineno-7-31" href="#__codelineno-7-31"></a><span class="c1">#   --region ca-central-1</span>
<a id="__codelineno-7-32" name="__codelineno-7-32" href="#__codelineno-7-32"></a>
<a id="__codelineno-7-33" name="__codelineno-7-33" href="#__codelineno-7-33"></a><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-7-34" name="__codelineno-7-34" href="#__codelineno-7-34"></a><span class="sd">Étape 3: Configuration Trino pour interroger les tables Iceberg</span>
<a id="__codelineno-7-35" name="__codelineno-7-35" href="#__codelineno-7-35"></a><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-7-36" name="__codelineno-7-36" href="#__codelineno-7-36"></a><span class="c1"># catalog.properties (trino/etc/catalog/iceberg_confluent.properties)</span>
<a id="__codelineno-7-37" name="__codelineno-7-37" href="#__codelineno-7-37"></a><span class="c1"># connector.name=iceberg</span>
<a id="__codelineno-7-38" name="__codelineno-7-38" href="#__codelineno-7-38"></a><span class="c1"># iceberg.catalog.type=rest</span>
<a id="__codelineno-7-39" name="__codelineno-7-39" href="#__codelineno-7-39"></a><span class="c1"># iceberg.rest-catalog.uri=https://tableflow.confluent.cloud/v1</span>
<a id="__codelineno-7-40" name="__codelineno-7-40" href="#__codelineno-7-40"></a><span class="c1"># iceberg.rest-catalog.security=OAUTH2</span>
<a id="__codelineno-7-41" name="__codelineno-7-41" href="#__codelineno-7-41"></a><span class="c1"># iceberg.rest-catalog.oauth2.credential=&lt;api-key&gt;:&lt;api-secret&gt;</span>
</code></pre></div>
<p>Les capacités clés de Tableflow incluent :</p>
<p><strong>La conversion automatique des schémas</strong> : Les schémas Avro, Protobuf ou JSON enregistrés dans le Schema Registry sont automatiquement convertis en schémas Iceberg compatibles, avec gestion des types et des conversions nécessaires.</p>
<p><strong>L'évolution de schéma transparente</strong> : Lorsqu'un producteur émet un événement avec un nouveau champ, Tableflow détecte le changement et fait évoluer le schéma de la table Iceberg de manière compatible.</p>
<p><strong>La compaction automatique</strong> : Les petits fichiers générés par le streaming continu sont régulièrement compactés en fichiers plus grands, optimisés pour les requêtes analytiques.</p>
<p><strong>L'intégration avec les catalogues</strong> : Tableflow supporte son propre REST Catalog ainsi que l'intégration avec AWS Glue, Snowflake Open Catalog, et Apache Polaris.</p>
<h3 id="patterns-dintegration-kafka-iceberg">Patterns d'Intégration Kafka-Iceberg<a class="headerlink" href="#patterns-dintegration-kafka-iceberg" title="Permanent link">&para;</a></h3>
<p>Au-delà de Tableflow, plusieurs patterns permettent d'alimenter un Lakehouse Iceberg depuis Kafka, chacun avec ses compromis.</p>
<p><strong>Pattern 1 : Kafka Connect avec Iceberg Sink</strong></p>
<p>Kafka Connect offre une approche mature et flexible pour l'ingestion vers Iceberg. Le connecteur Iceberg Sink, disponible en open source, consomme les messages Kafka et les écrit en tables Iceberg.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-8-1" name="__codelineno-8-1" href="#__codelineno-8-1"></a><span class="c1"># Configuration Kafka Connect Iceberg Sink</span>
<a id="__codelineno-8-2" name="__codelineno-8-2" href="#__codelineno-8-2"></a><span class="na">name</span><span class="o">=</span><span class="s">iceberg-sink-orders</span>
<a id="__codelineno-8-3" name="__codelineno-8-3" href="#__codelineno-8-3"></a><span class="na">connector.class</span><span class="o">=</span><span class="s">org.apache.iceberg.connect.IcebergSinkConnector</span>
<a id="__codelineno-8-4" name="__codelineno-8-4" href="#__codelineno-8-4"></a><span class="na">tasks.max</span><span class="o">=</span><span class="s">4</span>
<a id="__codelineno-8-5" name="__codelineno-8-5" href="#__codelineno-8-5"></a>
<a id="__codelineno-8-6" name="__codelineno-8-6" href="#__codelineno-8-6"></a><span class="c1"># Configuration Kafka</span>
<a id="__codelineno-8-7" name="__codelineno-8-7" href="#__codelineno-8-7"></a><span class="na">topics</span><span class="o">=</span><span class="s">orders.events</span>
<a id="__codelineno-8-8" name="__codelineno-8-8" href="#__codelineno-8-8"></a><span class="na">key.converter</span><span class="o">=</span><span class="s">io.confluent.connect.avro.AvroConverter</span>
<a id="__codelineno-8-9" name="__codelineno-8-9" href="#__codelineno-8-9"></a><span class="na">value.converter</span><span class="o">=</span><span class="s">io.confluent.connect.avro.AvroConverter</span>
<a id="__codelineno-8-10" name="__codelineno-8-10" href="#__codelineno-8-10"></a><span class="na">key.converter.schema.registry.url</span><span class="o">=</span><span class="s">http://schema-registry:8081</span>
<a id="__codelineno-8-11" name="__codelineno-8-11" href="#__codelineno-8-11"></a><span class="na">value.converter.schema.registry.url</span><span class="o">=</span><span class="s">http://schema-registry:8081</span>
<a id="__codelineno-8-12" name="__codelineno-8-12" href="#__codelineno-8-12"></a>
<a id="__codelineno-8-13" name="__codelineno-8-13" href="#__codelineno-8-13"></a><span class="c1"># Configuration Iceberg</span>
<a id="__codelineno-8-14" name="__codelineno-8-14" href="#__codelineno-8-14"></a><span class="na">iceberg.catalog.type</span><span class="o">=</span><span class="s">rest</span>
<a id="__codelineno-8-15" name="__codelineno-8-15" href="#__codelineno-8-15"></a><span class="na">iceberg.catalog.uri</span><span class="o">=</span><span class="s">http://nessie:19120/api/v1</span>
<a id="__codelineno-8-16" name="__codelineno-8-16" href="#__codelineno-8-16"></a><span class="na">iceberg.catalog.warehouse</span><span class="o">=</span><span class="s">s3://lakehouse/warehouse</span>
<a id="__codelineno-8-17" name="__codelineno-8-17" href="#__codelineno-8-17"></a><span class="na">iceberg.tables</span><span class="o">=</span><span class="s">default.orders</span>
<a id="__codelineno-8-18" name="__codelineno-8-18" href="#__codelineno-8-18"></a><span class="na">iceberg.tables.auto-create-enabled</span><span class="o">=</span><span class="s">true</span>
<a id="__codelineno-8-19" name="__codelineno-8-19" href="#__codelineno-8-19"></a>
<a id="__codelineno-8-20" name="__codelineno-8-20" href="#__codelineno-8-20"></a><span class="c1"># Configuration de commit</span>
<a id="__codelineno-8-21" name="__codelineno-8-21" href="#__codelineno-8-21"></a><span class="na">iceberg.control.commit.interval-ms</span><span class="o">=</span><span class="s">60000</span>
<a id="__codelineno-8-22" name="__codelineno-8-22" href="#__codelineno-8-22"></a><span class="na">iceberg.control.commit.records</span><span class="o">=</span><span class="s">10000</span>
</code></pre></div>
<p>Ce pattern convient aux organisations qui disposent déjà d'une expertise Kafka Connect et souhaitent un contrôle fin sur la configuration. Il nécessite cependant la gestion d'un cluster Connect dédié.</p>
<p><strong>Pattern 2 : Apache Flink avec Iceberg Sink</strong></p>
<p>Apache Flink offre le plus haut niveau de flexibilité pour les transformations complexes avant l'écriture vers Iceberg. Le Flink Dynamic Iceberg Sink, introduit fin 2025, permet même de router dynamiquement vers plusieurs tables et de gérer l'évolution de schéma sans redémarrage.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-9-1" name="__codelineno-9-1" href="#__codelineno-9-1"></a><span class="c1">-- Flink SQL : Création d&#39;une table source Kafka</span>
<a id="__codelineno-9-2" name="__codelineno-9-2" href="#__codelineno-9-2"></a><span class="k">CREATE</span><span class="w"> </span><span class="k">TABLE</span><span class="w"> </span><span class="n">kafka_orders</span><span class="w"> </span><span class="p">(</span>
<a id="__codelineno-9-3" name="__codelineno-9-3" href="#__codelineno-9-3"></a><span class="w">    </span><span class="n">order_id</span><span class="w"> </span><span class="n">STRING</span><span class="p">,</span>
<a id="__codelineno-9-4" name="__codelineno-9-4" href="#__codelineno-9-4"></a><span class="w">    </span><span class="n">customer_id</span><span class="w"> </span><span class="n">STRING</span><span class="p">,</span>
<a id="__codelineno-9-5" name="__codelineno-9-5" href="#__codelineno-9-5"></a><span class="w">    </span><span class="n">amount</span><span class="w"> </span><span class="nb">DECIMAL</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">),</span>
<a id="__codelineno-9-6" name="__codelineno-9-6" href="#__codelineno-9-6"></a><span class="w">    </span><span class="n">currency</span><span class="w"> </span><span class="n">STRING</span><span class="p">,</span>
<a id="__codelineno-9-7" name="__codelineno-9-7" href="#__codelineno-9-7"></a><span class="w">    </span><span class="n">order_time</span><span class="w"> </span><span class="k">TIMESTAMP</span><span class="p">(</span><span class="mi">3</span><span class="p">),</span>
<a id="__codelineno-9-8" name="__codelineno-9-8" href="#__codelineno-9-8"></a><span class="w">    </span><span class="n">WATERMARK</span><span class="w"> </span><span class="k">FOR</span><span class="w"> </span><span class="n">order_time</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="n">order_time</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="nb">INTERVAL</span><span class="w"> </span><span class="s1">&#39;5&#39;</span><span class="w"> </span><span class="k">SECOND</span>
<a id="__codelineno-9-9" name="__codelineno-9-9" href="#__codelineno-9-9"></a><span class="p">)</span><span class="w"> </span><span class="k">WITH</span><span class="w"> </span><span class="p">(</span>
<a id="__codelineno-9-10" name="__codelineno-9-10" href="#__codelineno-9-10"></a><span class="w">    </span><span class="s1">&#39;connector&#39;</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;kafka&#39;</span><span class="p">,</span>
<a id="__codelineno-9-11" name="__codelineno-9-11" href="#__codelineno-9-11"></a><span class="w">    </span><span class="s1">&#39;topic&#39;</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;orders.events&#39;</span><span class="p">,</span>
<a id="__codelineno-9-12" name="__codelineno-9-12" href="#__codelineno-9-12"></a><span class="w">    </span><span class="s1">&#39;properties.bootstrap.servers&#39;</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;kafka:9092&#39;</span><span class="p">,</span>
<a id="__codelineno-9-13" name="__codelineno-9-13" href="#__codelineno-9-13"></a><span class="w">    </span><span class="s1">&#39;properties.group.id&#39;</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;flink-iceberg-writer&#39;</span><span class="p">,</span>
<a id="__codelineno-9-14" name="__codelineno-9-14" href="#__codelineno-9-14"></a><span class="w">    </span><span class="s1">&#39;scan.startup.mode&#39;</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;earliest-offset&#39;</span><span class="p">,</span>
<a id="__codelineno-9-15" name="__codelineno-9-15" href="#__codelineno-9-15"></a><span class="w">    </span><span class="s1">&#39;format&#39;</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;avro-confluent&#39;</span><span class="p">,</span>
<a id="__codelineno-9-16" name="__codelineno-9-16" href="#__codelineno-9-16"></a><span class="w">    </span><span class="s1">&#39;avro-confluent.url&#39;</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;http://schema-registry:8081&#39;</span>
<a id="__codelineno-9-17" name="__codelineno-9-17" href="#__codelineno-9-17"></a><span class="p">);</span>
<a id="__codelineno-9-18" name="__codelineno-9-18" href="#__codelineno-9-18"></a>
<a id="__codelineno-9-19" name="__codelineno-9-19" href="#__codelineno-9-19"></a><span class="c1">-- Création de la table Iceberg cible</span>
<a id="__codelineno-9-20" name="__codelineno-9-20" href="#__codelineno-9-20"></a><span class="k">CREATE</span><span class="w"> </span><span class="k">TABLE</span><span class="w"> </span><span class="n">iceberg_orders</span><span class="w"> </span><span class="p">(</span>
<a id="__codelineno-9-21" name="__codelineno-9-21" href="#__codelineno-9-21"></a><span class="w">    </span><span class="n">order_id</span><span class="w"> </span><span class="n">STRING</span><span class="p">,</span>
<a id="__codelineno-9-22" name="__codelineno-9-22" href="#__codelineno-9-22"></a><span class="w">    </span><span class="n">customer_id</span><span class="w"> </span><span class="n">STRING</span><span class="p">,</span>
<a id="__codelineno-9-23" name="__codelineno-9-23" href="#__codelineno-9-23"></a><span class="w">    </span><span class="n">amount</span><span class="w"> </span><span class="nb">DECIMAL</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">),</span>
<a id="__codelineno-9-24" name="__codelineno-9-24" href="#__codelineno-9-24"></a><span class="w">    </span><span class="n">currency</span><span class="w"> </span><span class="n">STRING</span><span class="p">,</span>
<a id="__codelineno-9-25" name="__codelineno-9-25" href="#__codelineno-9-25"></a><span class="w">    </span><span class="n">order_time</span><span class="w"> </span><span class="k">TIMESTAMP</span><span class="p">(</span><span class="mi">3</span><span class="p">),</span>
<a id="__codelineno-9-26" name="__codelineno-9-26" href="#__codelineno-9-26"></a><span class="w">    </span><span class="n">processing_time</span><span class="w"> </span><span class="k">TIMESTAMP</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
<a id="__codelineno-9-27" name="__codelineno-9-27" href="#__codelineno-9-27"></a><span class="p">)</span><span class="w"> </span><span class="k">WITH</span><span class="w"> </span><span class="p">(</span>
<a id="__codelineno-9-28" name="__codelineno-9-28" href="#__codelineno-9-28"></a><span class="w">    </span><span class="s1">&#39;connector&#39;</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;iceberg&#39;</span><span class="p">,</span>
<a id="__codelineno-9-29" name="__codelineno-9-29" href="#__codelineno-9-29"></a><span class="w">    </span><span class="s1">&#39;catalog-name&#39;</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;lakehouse&#39;</span><span class="p">,</span>
<a id="__codelineno-9-30" name="__codelineno-9-30" href="#__codelineno-9-30"></a><span class="w">    </span><span class="s1">&#39;catalog-type&#39;</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;rest&#39;</span><span class="p">,</span>
<a id="__codelineno-9-31" name="__codelineno-9-31" href="#__codelineno-9-31"></a><span class="w">    </span><span class="s1">&#39;uri&#39;</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;http://nessie:19120/api/v1&#39;</span><span class="p">,</span>
<a id="__codelineno-9-32" name="__codelineno-9-32" href="#__codelineno-9-32"></a><span class="w">    </span><span class="s1">&#39;warehouse&#39;</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;s3://lakehouse/warehouse&#39;</span><span class="p">,</span>
<a id="__codelineno-9-33" name="__codelineno-9-33" href="#__codelineno-9-33"></a><span class="w">    </span><span class="s1">&#39;database-name&#39;</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;sales&#39;</span><span class="p">,</span>
<a id="__codelineno-9-34" name="__codelineno-9-34" href="#__codelineno-9-34"></a><span class="w">    </span><span class="s1">&#39;table-name&#39;</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;orders&#39;</span>
<a id="__codelineno-9-35" name="__codelineno-9-35" href="#__codelineno-9-35"></a><span class="p">);</span>
<a id="__codelineno-9-36" name="__codelineno-9-36" href="#__codelineno-9-36"></a>
<a id="__codelineno-9-37" name="__codelineno-9-37" href="#__codelineno-9-37"></a><span class="c1">-- Pipeline d&#39;ingestion avec enrichissement</span>
<a id="__codelineno-9-38" name="__codelineno-9-38" href="#__codelineno-9-38"></a><span class="k">INSERT</span><span class="w"> </span><span class="k">INTO</span><span class="w"> </span><span class="n">iceberg_orders</span>
<a id="__codelineno-9-39" name="__codelineno-9-39" href="#__codelineno-9-39"></a><span class="k">SELECT</span><span class="w"> </span>
<a id="__codelineno-9-40" name="__codelineno-9-40" href="#__codelineno-9-40"></a><span class="w">    </span><span class="n">order_id</span><span class="p">,</span>
<a id="__codelineno-9-41" name="__codelineno-9-41" href="#__codelineno-9-41"></a><span class="w">    </span><span class="n">customer_id</span><span class="p">,</span>
<a id="__codelineno-9-42" name="__codelineno-9-42" href="#__codelineno-9-42"></a><span class="w">    </span><span class="n">amount</span><span class="p">,</span>
<a id="__codelineno-9-43" name="__codelineno-9-43" href="#__codelineno-9-43"></a><span class="w">    </span><span class="n">currency</span><span class="p">,</span>
<a id="__codelineno-9-44" name="__codelineno-9-44" href="#__codelineno-9-44"></a><span class="w">    </span><span class="n">order_time</span><span class="p">,</span>
<a id="__codelineno-9-45" name="__codelineno-9-45" href="#__codelineno-9-45"></a><span class="w">    </span><span class="k">CURRENT_TIMESTAMP</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="n">processing_time</span>
<a id="__codelineno-9-46" name="__codelineno-9-46" href="#__codelineno-9-46"></a><span class="k">FROM</span><span class="w"> </span><span class="n">kafka_orders</span>
<a id="__codelineno-9-47" name="__codelineno-9-47" href="#__codelineno-9-47"></a><span class="k">WHERE</span><span class="w"> </span><span class="n">amount</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
</code></pre></div>
<p><strong>Pattern 3 : Tableflow (Zero-ETL)</strong></p>
<p>Tableflow représente l'approche la plus simple, éliminant tout code ou configuration de pipeline. Les données Kafka sont automatiquement disponibles en format Iceberg sans intervention.</p>
<table>
<thead>
<tr>
<th>Pattern</th>
<th>Complexité</th>
<th>Flexibilité</th>
<th>Latence</th>
<th>Cas d'usage</th>
</tr>
</thead>
<tbody>
<tr>
<td>Tableflow</td>
<td>Minimale</td>
<td>Moyenne</td>
<td>~Minutes</td>
<td>Matérialisation simple</td>
</tr>
<tr>
<td>Kafka Connect</td>
<td>Moyenne</td>
<td>Élevée</td>
<td>~Minutes</td>
<td>Intégration existante</td>
</tr>
<tr>
<td>Flink</td>
<td>Élevée</td>
<td>Maximale</td>
<td>Configurable</td>
<td>Transformations complexes</td>
</tr>
</tbody>
</table>
<h3 id="le-flink-dynamic-iceberg-sink">Le Flink Dynamic Iceberg Sink<a class="headerlink" href="#le-flink-dynamic-iceberg-sink" title="Permanent link">&para;</a></h3>
<p>Une avancée significative de 2025 est le Flink Dynamic Iceberg Sink, décrit en détail dans la documentation Apache Flink. Ce pattern résout un problème fondamental des pipelines d'ingestion traditionnels : leur incapacité à s'adapter aux changements sans redémarrage.</p>
<p>Dans une architecture traditionnelle, chaque topic Kafka nécessite un graphe de traitement (DAG) dédié avec un schéma figé. L'ajout d'un nouveau topic ou la modification d'un schéma requiert la modification du code et le redémarrage du job.</p>
<p>Le Dynamic Iceberg Sink permet au contraire un pipeline unique capable de :</p>
<ul>
<li>Écrire vers plusieurs tables Iceberg dynamiquement</li>
<li>Créer automatiquement de nouvelles tables selon les instructions contenues dans les messages</li>
<li>Évoluer le schéma des tables existantes en temps réel</li>
<li>S'adapter aux changements de partitionnement sans interruption</li>
</ul>
<div class="highlight"><pre><span></span><code><a id="__codelineno-10-1" name="__codelineno-10-1" href="#__codelineno-10-1"></a><span class="c1">// Configuration du Dynamic Iceberg Sink (exemple simplifié)</span>
<a id="__codelineno-10-2" name="__codelineno-10-2" href="#__codelineno-10-2"></a><span class="n">DataStream</span><span class="o">&lt;</span><span class="n">GenericRecord</span><span class="o">&gt;</span><span class="w"> </span><span class="n">kafkaStream</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">env</span>
<a id="__codelineno-10-3" name="__codelineno-10-3" href="#__codelineno-10-3"></a><span class="w">    </span><span class="p">.</span><span class="na">fromSource</span><span class="p">(</span><span class="n">kafkaSource</span><span class="p">,</span><span class="w"> </span><span class="n">WatermarkStrategy</span><span class="p">.</span><span class="na">noWatermarks</span><span class="p">(),</span><span class="w"> </span><span class="s">&quot;Kafka Source&quot;</span><span class="p">);</span>
<a id="__codelineno-10-4" name="__codelineno-10-4" href="#__codelineno-10-4"></a>
<a id="__codelineno-10-5" name="__codelineno-10-5" href="#__codelineno-10-5"></a><span class="c1">// Le DynamicIcebergSink route vers les tables selon les métadonnées du message</span>
<a id="__codelineno-10-6" name="__codelineno-10-6" href="#__codelineno-10-6"></a><span class="n">DynamicIcebergSink</span><span class="o">&lt;</span><span class="n">GenericRecord</span><span class="o">&gt;</span><span class="w"> </span><span class="n">sink</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">DynamicIcebergSink</span><span class="p">.</span><span class="o">&lt;</span><span class="n">GenericRecord</span><span class="o">&gt;</span><span class="n">builder</span><span class="p">()</span>
<a id="__codelineno-10-7" name="__codelineno-10-7" href="#__codelineno-10-7"></a><span class="w">    </span><span class="p">.</span><span class="na">catalog</span><span class="p">(</span><span class="n">catalogName</span><span class="p">)</span>
<a id="__codelineno-10-8" name="__codelineno-10-8" href="#__codelineno-10-8"></a><span class="w">    </span><span class="p">.</span><span class="na">tableNameExtractor</span><span class="p">(</span><span class="n">record</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">extractTableName</span><span class="p">(</span><span class="n">record</span><span class="p">))</span>
<a id="__codelineno-10-9" name="__codelineno-10-9" href="#__codelineno-10-9"></a><span class="w">    </span><span class="p">.</span><span class="na">schemaProvider</span><span class="p">(</span><span class="n">record</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">extractSchema</span><span class="p">(</span><span class="n">record</span><span class="p">))</span>
<a id="__codelineno-10-10" name="__codelineno-10-10" href="#__codelineno-10-10"></a><span class="w">    </span><span class="p">.</span><span class="na">tableCreationBehavior</span><span class="p">(</span><span class="n">TableCreationBehavior</span><span class="p">.</span><span class="na">CREATE_IF_NOT_EXISTS</span><span class="p">)</span>
<a id="__codelineno-10-11" name="__codelineno-10-11" href="#__codelineno-10-11"></a><span class="w">    </span><span class="p">.</span><span class="na">schemaEvolutionBehavior</span><span class="p">(</span><span class="n">SchemaEvolutionBehavior</span><span class="p">.</span><span class="na">AUTO_EVOLVE</span><span class="p">)</span>
<a id="__codelineno-10-12" name="__codelineno-10-12" href="#__codelineno-10-12"></a><span class="w">    </span><span class="p">.</span><span class="na">build</span><span class="p">();</span>
<a id="__codelineno-10-13" name="__codelineno-10-13" href="#__codelineno-10-13"></a>
<a id="__codelineno-10-14" name="__codelineno-10-14" href="#__codelineno-10-14"></a><span class="n">kafkaStream</span><span class="p">.</span><span class="na">sinkTo</span><span class="p">(</span><span class="n">sink</span><span class="p">);</span>
</code></pre></div>
<h3 id="integration-avec-le-schema-registry">Intégration avec le Schema Registry<a class="headerlink" href="#integration-avec-le-schema-registry" title="Permanent link">&para;</a></h3>
<p>Le Schema Registry de Confluent joue un rôle central dans le Streaming Lakehouse en assurant la cohérence des contrats de données entre les producteurs Kafka et les tables Iceberg.</p>
<p>Lorsqu'un producteur enregistre un schéma Avro dans le Registry, celui-ci devient la définition canonique de la structure des données. Tableflow et les connecteurs Iceberg utilisent ce schéma pour :</p>
<ol>
<li><strong>Créer automatiquement</strong> les tables Iceberg avec la structure correspondante</li>
<li><strong>Valider</strong> que les nouveaux messages respectent le contrat</li>
<li><strong>Évoluer</strong> le schéma Iceberg de manière compatible lors des changements</li>
<li><strong>Convertir</strong> les types Avro vers les types Iceberg équivalents</li>
</ol>
<p>La correspondance des types entre Avro et Iceberg est gérée automatiquement :</p>
<table>
<thead>
<tr>
<th>Type Avro</th>
<th>Type Iceberg</th>
</tr>
</thead>
<tbody>
<tr>
<td>string</td>
<td>STRING</td>
</tr>
<tr>
<td>int</td>
<td>INTEGER</td>
</tr>
<tr>
<td>long</td>
<td>LONG</td>
</tr>
<tr>
<td>float</td>
<td>FLOAT</td>
</tr>
<tr>
<td>double</td>
<td>DOUBLE</td>
</tr>
<tr>
<td>boolean</td>
<td>BOOLEAN</td>
</tr>
<tr>
<td>bytes (decimal)</td>
<td>DECIMAL(p, s)</td>
</tr>
<tr>
<td>long (timestamp-millis)</td>
<td>TIMESTAMP</td>
</tr>
<tr>
<td>array</td>
<td>LIST</td>
</tr>
<tr>
<td>map</td>
<td>MAP</td>
</tr>
<tr>
<td>record</td>
<td>STRUCT</td>
</tr>
</tbody>
</table>
<h3 id="gestion-de-levolution-de-schema">Gestion de l'Évolution de Schéma<a class="headerlink" href="#gestion-de-levolution-de-schema" title="Permanent link">&para;</a></h3>
<p>L'évolution de schéma représente l'un des défis les plus complexes dans un Streaming Lakehouse. Les producteurs évoluent indépendamment des consommateurs, et les tables Iceberg doivent absorber ces changements sans interruption de service.</p>
<p>Le Schema Registry de Confluent offre plusieurs modes de compatibilité qui régissent les évolutions autorisées :</p>
<p><strong>BACKWARD</strong> (par défaut) : Les nouveaux schémas peuvent lire les données écrites avec les anciens schémas. Autorise l'ajout de champs optionnels et la suppression de champs.</p>
<p><strong>FORWARD</strong> : Les anciens schémas peuvent lire les données écrites avec les nouveaux schémas. Autorise l'ajout de champs et la suppression de champs optionnels.</p>
<p><strong>FULL</strong> : Combine BACKWARD et FORWARD. Autorise uniquement l'ajout ou la suppression de champs optionnels.</p>
<p><strong>NONE</strong> : Aucune vérification de compatibilité. Déconseillé en production.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-11-1" name="__codelineno-11-1" href="#__codelineno-11-1"></a><span class="c1"># Exemple de configuration Schema Registry pour évolution contrôlée</span>
<a id="__codelineno-11-2" name="__codelineno-11-2" href="#__codelineno-11-2"></a><span class="kn">from</span><span class="w"> </span><span class="nn">confluent_kafka.schema_registry</span><span class="w"> </span><span class="kn">import</span> <span class="n">SchemaRegistryClient</span>
<a id="__codelineno-11-3" name="__codelineno-11-3" href="#__codelineno-11-3"></a><span class="kn">from</span><span class="w"> </span><span class="nn">confluent_kafka.schema_registry.avro</span><span class="w"> </span><span class="kn">import</span> <span class="n">AvroSerializer</span>
<a id="__codelineno-11-4" name="__codelineno-11-4" href="#__codelineno-11-4"></a>
<a id="__codelineno-11-5" name="__codelineno-11-5" href="#__codelineno-11-5"></a><span class="c1"># Configuration du client Schema Registry</span>
<a id="__codelineno-11-6" name="__codelineno-11-6" href="#__codelineno-11-6"></a><span class="n">schema_registry_config</span> <span class="o">=</span> <span class="p">{</span>
<a id="__codelineno-11-7" name="__codelineno-11-7" href="#__codelineno-11-7"></a>    <span class="s1">&#39;url&#39;</span><span class="p">:</span> <span class="s1">&#39;http://schema-registry:8081&#39;</span><span class="p">,</span>
<a id="__codelineno-11-8" name="__codelineno-11-8" href="#__codelineno-11-8"></a>    <span class="s1">&#39;basic.auth.user.info&#39;</span><span class="p">:</span> <span class="s1">&#39;&lt;api-key&gt;:&lt;api-secret&gt;&#39;</span>
<a id="__codelineno-11-9" name="__codelineno-11-9" href="#__codelineno-11-9"></a><span class="p">}</span>
<a id="__codelineno-11-10" name="__codelineno-11-10" href="#__codelineno-11-10"></a>
<a id="__codelineno-11-11" name="__codelineno-11-11" href="#__codelineno-11-11"></a><span class="n">sr_client</span> <span class="o">=</span> <span class="n">SchemaRegistryClient</span><span class="p">(</span><span class="n">schema_registry_config</span><span class="p">)</span>
<a id="__codelineno-11-12" name="__codelineno-11-12" href="#__codelineno-11-12"></a>
<a id="__codelineno-11-13" name="__codelineno-11-13" href="#__codelineno-11-13"></a><span class="c1"># Définir la règle de compatibilité pour un sujet</span>
<a id="__codelineno-11-14" name="__codelineno-11-14" href="#__codelineno-11-14"></a><span class="n">sr_client</span><span class="o">.</span><span class="n">set_compatibility</span><span class="p">(</span>
<a id="__codelineno-11-15" name="__codelineno-11-15" href="#__codelineno-11-15"></a>    <span class="n">subject_name</span><span class="o">=</span><span class="s1">&#39;orders.events-value&#39;</span><span class="p">,</span>
<a id="__codelineno-11-16" name="__codelineno-11-16" href="#__codelineno-11-16"></a>    <span class="n">level</span><span class="o">=</span><span class="s1">&#39;FULL_TRANSITIVE&#39;</span>  <span class="c1"># Compatibilité stricte dans les deux sens</span>
<a id="__codelineno-11-17" name="__codelineno-11-17" href="#__codelineno-11-17"></a><span class="p">)</span>
<a id="__codelineno-11-18" name="__codelineno-11-18" href="#__codelineno-11-18"></a>
<a id="__codelineno-11-19" name="__codelineno-11-19" href="#__codelineno-11-19"></a><span class="c1"># Schéma Avro v1</span>
<a id="__codelineno-11-20" name="__codelineno-11-20" href="#__codelineno-11-20"></a><span class="n">schema_v1</span> <span class="o">=</span> <span class="s2">&quot;&quot;&quot;</span>
<a id="__codelineno-11-21" name="__codelineno-11-21" href="#__codelineno-11-21"></a><span class="s2">{</span>
<a id="__codelineno-11-22" name="__codelineno-11-22" href="#__codelineno-11-22"></a><span class="s2">  &quot;type&quot;: &quot;record&quot;,</span>
<a id="__codelineno-11-23" name="__codelineno-11-23" href="#__codelineno-11-23"></a><span class="s2">  &quot;name&quot;: &quot;Order&quot;,</span>
<a id="__codelineno-11-24" name="__codelineno-11-24" href="#__codelineno-11-24"></a><span class="s2">  &quot;namespace&quot;: &quot;com.example.orders&quot;,</span>
<a id="__codelineno-11-25" name="__codelineno-11-25" href="#__codelineno-11-25"></a><span class="s2">  &quot;fields&quot;: [</span>
<a id="__codelineno-11-26" name="__codelineno-11-26" href="#__codelineno-11-26"></a><span class="s2">    {&quot;name&quot;: &quot;order_id&quot;, &quot;type&quot;: &quot;string&quot;},</span>
<a id="__codelineno-11-27" name="__codelineno-11-27" href="#__codelineno-11-27"></a><span class="s2">    {&quot;name&quot;: &quot;customer_id&quot;, &quot;type&quot;: &quot;string&quot;},</span>
<a id="__codelineno-11-28" name="__codelineno-11-28" href="#__codelineno-11-28"></a><span class="s2">    {&quot;name&quot;: &quot;amount&quot;, &quot;type&quot;: {&quot;type&quot;: &quot;bytes&quot;, &quot;logicalType&quot;: &quot;decimal&quot;, &quot;precision&quot;: 10, &quot;scale&quot;: 2}},</span>
<a id="__codelineno-11-29" name="__codelineno-11-29" href="#__codelineno-11-29"></a><span class="s2">    {&quot;name&quot;: &quot;order_time&quot;, &quot;type&quot;: {&quot;type&quot;: &quot;long&quot;, &quot;logicalType&quot;: &quot;timestamp-millis&quot;}}</span>
<a id="__codelineno-11-30" name="__codelineno-11-30" href="#__codelineno-11-30"></a><span class="s2">  ]</span>
<a id="__codelineno-11-31" name="__codelineno-11-31" href="#__codelineno-11-31"></a><span class="s2">}</span>
<a id="__codelineno-11-32" name="__codelineno-11-32" href="#__codelineno-11-32"></a><span class="s2">&quot;&quot;&quot;</span>
<a id="__codelineno-11-33" name="__codelineno-11-33" href="#__codelineno-11-33"></a>
<a id="__codelineno-11-34" name="__codelineno-11-34" href="#__codelineno-11-34"></a><span class="c1"># Schéma Avro v2 : Ajout d&#39;un champ optionnel (compatible FULL)</span>
<a id="__codelineno-11-35" name="__codelineno-11-35" href="#__codelineno-11-35"></a><span class="n">schema_v2</span> <span class="o">=</span> <span class="s2">&quot;&quot;&quot;</span>
<a id="__codelineno-11-36" name="__codelineno-11-36" href="#__codelineno-11-36"></a><span class="s2">{</span>
<a id="__codelineno-11-37" name="__codelineno-11-37" href="#__codelineno-11-37"></a><span class="s2">  &quot;type&quot;: &quot;record&quot;,</span>
<a id="__codelineno-11-38" name="__codelineno-11-38" href="#__codelineno-11-38"></a><span class="s2">  &quot;name&quot;: &quot;Order&quot;,</span>
<a id="__codelineno-11-39" name="__codelineno-11-39" href="#__codelineno-11-39"></a><span class="s2">  &quot;namespace&quot;: &quot;com.example.orders&quot;,</span>
<a id="__codelineno-11-40" name="__codelineno-11-40" href="#__codelineno-11-40"></a><span class="s2">  &quot;fields&quot;: [</span>
<a id="__codelineno-11-41" name="__codelineno-11-41" href="#__codelineno-11-41"></a><span class="s2">    {&quot;name&quot;: &quot;order_id&quot;, &quot;type&quot;: &quot;string&quot;},</span>
<a id="__codelineno-11-42" name="__codelineno-11-42" href="#__codelineno-11-42"></a><span class="s2">    {&quot;name&quot;: &quot;customer_id&quot;, &quot;type&quot;: &quot;string&quot;},</span>
<a id="__codelineno-11-43" name="__codelineno-11-43" href="#__codelineno-11-43"></a><span class="s2">    {&quot;name&quot;: &quot;amount&quot;, &quot;type&quot;: {&quot;type&quot;: &quot;bytes&quot;, &quot;logicalType&quot;: &quot;decimal&quot;, &quot;precision&quot;: 10, &quot;scale&quot;: 2}},</span>
<a id="__codelineno-11-44" name="__codelineno-11-44" href="#__codelineno-11-44"></a><span class="s2">    {&quot;name&quot;: &quot;order_time&quot;, &quot;type&quot;: {&quot;type&quot;: &quot;long&quot;, &quot;logicalType&quot;: &quot;timestamp-millis&quot;}},</span>
<a id="__codelineno-11-45" name="__codelineno-11-45" href="#__codelineno-11-45"></a><span class="s2">    {&quot;name&quot;: &quot;currency&quot;, &quot;type&quot;: [&quot;null&quot;, &quot;string&quot;], &quot;default&quot;: null}</span>
<a id="__codelineno-11-46" name="__codelineno-11-46" href="#__codelineno-11-46"></a><span class="s2">  ]</span>
<a id="__codelineno-11-47" name="__codelineno-11-47" href="#__codelineno-11-47"></a><span class="s2">}</span>
<a id="__codelineno-11-48" name="__codelineno-11-48" href="#__codelineno-11-48"></a><span class="s2">&quot;&quot;&quot;</span>
<a id="__codelineno-11-49" name="__codelineno-11-49" href="#__codelineno-11-49"></a>
<a id="__codelineno-11-50" name="__codelineno-11-50" href="#__codelineno-11-50"></a><span class="c1"># Tester la compatibilité avant enregistrement</span>
<a id="__codelineno-11-51" name="__codelineno-11-51" href="#__codelineno-11-51"></a><span class="n">is_compatible</span> <span class="o">=</span> <span class="n">sr_client</span><span class="o">.</span><span class="n">test_compatibility</span><span class="p">(</span>
<a id="__codelineno-11-52" name="__codelineno-11-52" href="#__codelineno-11-52"></a>    <span class="n">subject_name</span><span class="o">=</span><span class="s1">&#39;orders.events-value&#39;</span><span class="p">,</span>
<a id="__codelineno-11-53" name="__codelineno-11-53" href="#__codelineno-11-53"></a>    <span class="n">schema</span><span class="o">=</span><span class="n">schema_v2</span>
<a id="__codelineno-11-54" name="__codelineno-11-54" href="#__codelineno-11-54"></a><span class="p">)</span>
<a id="__codelineno-11-55" name="__codelineno-11-55" href="#__codelineno-11-55"></a>
<a id="__codelineno-11-56" name="__codelineno-11-56" href="#__codelineno-11-56"></a><span class="k">if</span> <span class="n">is_compatible</span><span class="p">:</span>
<a id="__codelineno-11-57" name="__codelineno-11-57" href="#__codelineno-11-57"></a>    <span class="c1"># Enregistrer le nouveau schéma</span>
<a id="__codelineno-11-58" name="__codelineno-11-58" href="#__codelineno-11-58"></a>    <span class="n">schema_id</span> <span class="o">=</span> <span class="n">sr_client</span><span class="o">.</span><span class="n">register_schema</span><span class="p">(</span>
<a id="__codelineno-11-59" name="__codelineno-11-59" href="#__codelineno-11-59"></a>        <span class="n">subject_name</span><span class="o">=</span><span class="s1">&#39;orders.events-value&#39;</span><span class="p">,</span>
<a id="__codelineno-11-60" name="__codelineno-11-60" href="#__codelineno-11-60"></a>        <span class="n">schema</span><span class="o">=</span><span class="n">schema_v2</span>
<a id="__codelineno-11-61" name="__codelineno-11-61" href="#__codelineno-11-61"></a>    <span class="p">)</span>
<a id="__codelineno-11-62" name="__codelineno-11-62" href="#__codelineno-11-62"></a>    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Schéma v2 enregistré avec ID: </span><span class="si">{</span><span class="n">schema_id</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<a id="__codelineno-11-63" name="__codelineno-11-63" href="#__codelineno-11-63"></a><span class="k">else</span><span class="p">:</span>
<a id="__codelineno-11-64" name="__codelineno-11-64" href="#__codelineno-11-64"></a>    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Erreur: Schéma incompatible, évolution rejetée&quot;</span><span class="p">)</span>
</code></pre></div>
<p>Lorsqu'un nouveau schéma est enregistré, Tableflow détecte automatiquement le changement et fait évoluer la table Iceberg correspondante. L'opération <code>ALTER TABLE ... ADD COLUMN</code> est exécutée de manière atomique, et les nouvelles données sont écrites avec le schéma élargi tandis que les anciennes données restent lisibles avec des valeurs NULL pour les nouveaux champs.</p>
<h3 id="integration-avec-les-catalogues-externes">Intégration avec les Catalogues Externes<a class="headerlink" href="#integration-avec-les-catalogues-externes" title="Permanent link">&para;</a></h3>
<p>Tableflow supporte l'intégration avec plusieurs catalogues pour exposer les tables Iceberg aux moteurs de consommation. Chaque option présente des compromis différents :</p>
<p><strong>REST Catalog Confluent (intégré)</strong> : Catalogue natif de Tableflow, accessible via l'API REST standard Iceberg. Idéal pour les déploiements centrés sur Confluent Cloud.</p>
<p><strong>AWS Glue Data Catalog</strong> : Intégration native avec l'écosystème AWS (Athena, EMR, Redshift Spectrum). Recommandé pour les organisations investies dans AWS.</p>
<p><strong>Snowflake Open Catalog</strong> : Permet l'accès direct depuis Snowflake sans duplication. Idéal pour les utilisateurs Snowflake souhaitant interroger des données streaming.</p>
<p><strong>Apache Polaris (incubating)</strong> : Catalogue open source avec gouvernance avancée, en cours d'incubation à Apache. Option de neutralité vendeur.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-12-1" name="__codelineno-12-1" href="#__codelineno-12-1"></a><span class="c1"># Configuration multi-catalogue pour Tableflow</span>
<a id="__codelineno-12-2" name="__codelineno-12-2" href="#__codelineno-12-2"></a><span class="c1"># Exemple : Synchronisation vers AWS Glue et Snowflake Open Catalog</span>
<a id="__codelineno-12-3" name="__codelineno-12-3" href="#__codelineno-12-3"></a>
<a id="__codelineno-12-4" name="__codelineno-12-4" href="#__codelineno-12-4"></a><span class="n">tableflow_multi_catalog_config</span> <span class="o">=</span> <span class="p">{</span>
<a id="__codelineno-12-5" name="__codelineno-12-5" href="#__codelineno-12-5"></a>    <span class="s2">&quot;topic_name&quot;</span><span class="p">:</span> <span class="s2">&quot;orders.events&quot;</span><span class="p">,</span>
<a id="__codelineno-12-6" name="__codelineno-12-6" href="#__codelineno-12-6"></a>    <span class="s2">&quot;table_format&quot;</span><span class="p">:</span> <span class="s2">&quot;ICEBERG&quot;</span><span class="p">,</span>
<a id="__codelineno-12-7" name="__codelineno-12-7" href="#__codelineno-12-7"></a>
<a id="__codelineno-12-8" name="__codelineno-12-8" href="#__codelineno-12-8"></a>    <span class="c1"># Stockage primaire</span>
<a id="__codelineno-12-9" name="__codelineno-12-9" href="#__codelineno-12-9"></a>    <span class="s2">&quot;storage&quot;</span><span class="p">:</span> <span class="p">{</span>
<a id="__codelineno-12-10" name="__codelineno-12-10" href="#__codelineno-12-10"></a>        <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;S3&quot;</span><span class="p">,</span>
<a id="__codelineno-12-11" name="__codelineno-12-11" href="#__codelineno-12-11"></a>        <span class="s2">&quot;bucket&quot;</span><span class="p">:</span> <span class="s2">&quot;s3://streaming-lakehouse-ca/iceberg/&quot;</span><span class="p">,</span>
<a id="__codelineno-12-12" name="__codelineno-12-12" href="#__codelineno-12-12"></a>        <span class="s2">&quot;region&quot;</span><span class="p">:</span> <span class="s2">&quot;ca-central-1&quot;</span>
<a id="__codelineno-12-13" name="__codelineno-12-13" href="#__codelineno-12-13"></a>    <span class="p">},</span>
<a id="__codelineno-12-14" name="__codelineno-12-14" href="#__codelineno-12-14"></a>
<a id="__codelineno-12-15" name="__codelineno-12-15" href="#__codelineno-12-15"></a>    <span class="c1"># Catalogues de synchronisation</span>
<a id="__codelineno-12-16" name="__codelineno-12-16" href="#__codelineno-12-16"></a>    <span class="s2">&quot;catalogs&quot;</span><span class="p">:</span> <span class="p">[</span>
<a id="__codelineno-12-17" name="__codelineno-12-17" href="#__codelineno-12-17"></a>        <span class="p">{</span>
<a id="__codelineno-12-18" name="__codelineno-12-18" href="#__codelineno-12-18"></a>            <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;AWS_GLUE&quot;</span><span class="p">,</span>
<a id="__codelineno-12-19" name="__codelineno-12-19" href="#__codelineno-12-19"></a>            <span class="s2">&quot;database&quot;</span><span class="p">:</span> <span class="s2">&quot;streaming_lakehouse&quot;</span><span class="p">,</span>
<a id="__codelineno-12-20" name="__codelineno-12-20" href="#__codelineno-12-20"></a>            <span class="s2">&quot;table_prefix&quot;</span><span class="p">:</span> <span class="s2">&quot;kafka_&quot;</span><span class="p">,</span>
<a id="__codelineno-12-21" name="__codelineno-12-21" href="#__codelineno-12-21"></a>            <span class="s2">&quot;aws_region&quot;</span><span class="p">:</span> <span class="s2">&quot;ca-central-1&quot;</span><span class="p">,</span>
<a id="__codelineno-12-22" name="__codelineno-12-22" href="#__codelineno-12-22"></a>            <span class="s2">&quot;iam_role&quot;</span><span class="p">:</span> <span class="s2">&quot;arn:aws:iam::123456789:role/TableflowGlueRole&quot;</span>
<a id="__codelineno-12-23" name="__codelineno-12-23" href="#__codelineno-12-23"></a>        <span class="p">},</span>
<a id="__codelineno-12-24" name="__codelineno-12-24" href="#__codelineno-12-24"></a>        <span class="p">{</span>
<a id="__codelineno-12-25" name="__codelineno-12-25" href="#__codelineno-12-25"></a>            <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;SNOWFLAKE_OPEN_CATALOG&quot;</span><span class="p">,</span>
<a id="__codelineno-12-26" name="__codelineno-12-26" href="#__codelineno-12-26"></a>            <span class="s2">&quot;catalog_name&quot;</span><span class="p">:</span> <span class="s2">&quot;streaming_data&quot;</span><span class="p">,</span>
<a id="__codelineno-12-27" name="__codelineno-12-27" href="#__codelineno-12-27"></a>            <span class="s2">&quot;schema&quot;</span><span class="p">:</span> <span class="s2">&quot;kafka_tables&quot;</span><span class="p">,</span>
<a id="__codelineno-12-28" name="__codelineno-12-28" href="#__codelineno-12-28"></a>            <span class="s2">&quot;connection&quot;</span><span class="p">:</span> <span class="p">{</span>
<a id="__codelineno-12-29" name="__codelineno-12-29" href="#__codelineno-12-29"></a>                <span class="s2">&quot;account&quot;</span><span class="p">:</span> <span class="s2">&quot;org-account.canada-central.azure&quot;</span><span class="p">,</span>
<a id="__codelineno-12-30" name="__codelineno-12-30" href="#__codelineno-12-30"></a>                <span class="s2">&quot;warehouse&quot;</span><span class="p">:</span> <span class="s2">&quot;STREAMING_WH&quot;</span>
<a id="__codelineno-12-31" name="__codelineno-12-31" href="#__codelineno-12-31"></a>            <span class="p">}</span>
<a id="__codelineno-12-32" name="__codelineno-12-32" href="#__codelineno-12-32"></a>        <span class="p">}</span>
<a id="__codelineno-12-33" name="__codelineno-12-33" href="#__codelineno-12-33"></a>    <span class="p">],</span>
<a id="__codelineno-12-34" name="__codelineno-12-34" href="#__codelineno-12-34"></a>
<a id="__codelineno-12-35" name="__codelineno-12-35" href="#__codelineno-12-35"></a>    <span class="c1"># Options de synchronisation</span>
<a id="__codelineno-12-36" name="__codelineno-12-36" href="#__codelineno-12-36"></a>    <span class="s2">&quot;sync_options&quot;</span><span class="p">:</span> <span class="p">{</span>
<a id="__codelineno-12-37" name="__codelineno-12-37" href="#__codelineno-12-37"></a>        <span class="s2">&quot;sync_interval_seconds&quot;</span><span class="p">:</span> <span class="mi">60</span><span class="p">,</span>
<a id="__codelineno-12-38" name="__codelineno-12-38" href="#__codelineno-12-38"></a>        <span class="s2">&quot;sync_on_commit&quot;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
<a id="__codelineno-12-39" name="__codelineno-12-39" href="#__codelineno-12-39"></a>        <span class="s2">&quot;propagate_schema_changes&quot;</span><span class="p">:</span> <span class="kc">True</span>
<a id="__codelineno-12-40" name="__codelineno-12-40" href="#__codelineno-12-40"></a>    <span class="p">}</span>
<a id="__codelineno-12-41" name="__codelineno-12-41" href="#__codelineno-12-41"></a><span class="p">}</span>
</code></pre></div>
<h3 id="traitement-pre-lakehouse-avec-flink">Traitement Pré-Lakehouse avec Flink<a class="headerlink" href="#traitement-pre-lakehouse-avec-flink" title="Permanent link">&para;</a></h3>
<p>Avant que les données n'atteignent le Lakehouse via Tableflow ou d'autres mécanismes, Apache Flink permet d'effectuer des transformations sophistiquées. Ce traitement « pré-lakehouse » est particulièrement utile pour :</p>
<p><strong>L'agrégation en temps réel</strong> : Calculer des métriques sur des fenêtres glissantes avant persistance.</p>
<p><strong>Le filtrage et routage</strong> : Diriger différents types d'événements vers différentes tables.</p>
<p><strong>L'enrichissement contextuel</strong> : Joindre avec des données de référence en temps réel.</p>
<p><strong>La détection d'anomalies</strong> : Identifier et marquer les données suspectes.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-13-1" name="__codelineno-13-1" href="#__codelineno-13-1"></a><span class="c1">-- Flink SQL : Agrégation temps réel avant persistance Iceberg</span>
<a id="__codelineno-13-2" name="__codelineno-13-2" href="#__codelineno-13-2"></a><span class="c1">-- Calcul de métriques par fenêtre de 5 minutes</span>
<a id="__codelineno-13-3" name="__codelineno-13-3" href="#__codelineno-13-3"></a>
<a id="__codelineno-13-4" name="__codelineno-13-4" href="#__codelineno-13-4"></a><span class="c1">-- Table source streaming</span>
<a id="__codelineno-13-5" name="__codelineno-13-5" href="#__codelineno-13-5"></a><span class="k">CREATE</span><span class="w"> </span><span class="k">TABLE</span><span class="w"> </span><span class="n">raw_clickstream</span><span class="w"> </span><span class="p">(</span>
<a id="__codelineno-13-6" name="__codelineno-13-6" href="#__codelineno-13-6"></a><span class="w">    </span><span class="n">user_id</span><span class="w"> </span><span class="n">STRING</span><span class="p">,</span>
<a id="__codelineno-13-7" name="__codelineno-13-7" href="#__codelineno-13-7"></a><span class="w">    </span><span class="n">session_id</span><span class="w"> </span><span class="n">STRING</span><span class="p">,</span>
<a id="__codelineno-13-8" name="__codelineno-13-8" href="#__codelineno-13-8"></a><span class="w">    </span><span class="n">page_url</span><span class="w"> </span><span class="n">STRING</span><span class="p">,</span>
<a id="__codelineno-13-9" name="__codelineno-13-9" href="#__codelineno-13-9"></a><span class="w">    </span><span class="n">action_type</span><span class="w"> </span><span class="n">STRING</span><span class="p">,</span>
<a id="__codelineno-13-10" name="__codelineno-13-10" href="#__codelineno-13-10"></a><span class="w">    </span><span class="n">device_type</span><span class="w"> </span><span class="n">STRING</span><span class="p">,</span>
<a id="__codelineno-13-11" name="__codelineno-13-11" href="#__codelineno-13-11"></a><span class="w">    </span><span class="n">event_time</span><span class="w"> </span><span class="k">TIMESTAMP</span><span class="p">(</span><span class="mi">3</span><span class="p">),</span>
<a id="__codelineno-13-12" name="__codelineno-13-12" href="#__codelineno-13-12"></a><span class="w">    </span><span class="n">WATERMARK</span><span class="w"> </span><span class="k">FOR</span><span class="w"> </span><span class="n">event_time</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="n">event_time</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="nb">INTERVAL</span><span class="w"> </span><span class="s1">&#39;10&#39;</span><span class="w"> </span><span class="k">SECOND</span>
<a id="__codelineno-13-13" name="__codelineno-13-13" href="#__codelineno-13-13"></a><span class="p">)</span><span class="w"> </span><span class="k">WITH</span><span class="w"> </span><span class="p">(</span>
<a id="__codelineno-13-14" name="__codelineno-13-14" href="#__codelineno-13-14"></a><span class="w">    </span><span class="s1">&#39;connector&#39;</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;kafka&#39;</span><span class="p">,</span>
<a id="__codelineno-13-15" name="__codelineno-13-15" href="#__codelineno-13-15"></a><span class="w">    </span><span class="s1">&#39;topic&#39;</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;clickstream.events&#39;</span><span class="p">,</span>
<a id="__codelineno-13-16" name="__codelineno-13-16" href="#__codelineno-13-16"></a><span class="w">    </span><span class="s1">&#39;properties.bootstrap.servers&#39;</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;kafka:9092&#39;</span><span class="p">,</span>
<a id="__codelineno-13-17" name="__codelineno-13-17" href="#__codelineno-13-17"></a><span class="w">    </span><span class="s1">&#39;format&#39;</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;avro-confluent&#39;</span><span class="p">,</span>
<a id="__codelineno-13-18" name="__codelineno-13-18" href="#__codelineno-13-18"></a><span class="w">    </span><span class="s1">&#39;avro-confluent.url&#39;</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;http://schema-registry:8081&#39;</span><span class="p">,</span>
<a id="__codelineno-13-19" name="__codelineno-13-19" href="#__codelineno-13-19"></a><span class="w">    </span><span class="s1">&#39;scan.startup.mode&#39;</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;latest-offset&#39;</span>
<a id="__codelineno-13-20" name="__codelineno-13-20" href="#__codelineno-13-20"></a><span class="p">);</span>
<a id="__codelineno-13-21" name="__codelineno-13-21" href="#__codelineno-13-21"></a>
<a id="__codelineno-13-22" name="__codelineno-13-22" href="#__codelineno-13-22"></a><span class="c1">-- Table Iceberg pour les métriques agrégées</span>
<a id="__codelineno-13-23" name="__codelineno-13-23" href="#__codelineno-13-23"></a><span class="k">CREATE</span><span class="w"> </span><span class="k">TABLE</span><span class="w"> </span><span class="n">clickstream_metrics_5min</span><span class="w"> </span><span class="p">(</span>
<a id="__codelineno-13-24" name="__codelineno-13-24" href="#__codelineno-13-24"></a><span class="w">    </span><span class="n">window_start</span><span class="w"> </span><span class="k">TIMESTAMP</span><span class="p">(</span><span class="mi">3</span><span class="p">),</span>
<a id="__codelineno-13-25" name="__codelineno-13-25" href="#__codelineno-13-25"></a><span class="w">    </span><span class="n">window_end</span><span class="w"> </span><span class="k">TIMESTAMP</span><span class="p">(</span><span class="mi">3</span><span class="p">),</span>
<a id="__codelineno-13-26" name="__codelineno-13-26" href="#__codelineno-13-26"></a><span class="w">    </span><span class="n">device_type</span><span class="w"> </span><span class="n">STRING</span><span class="p">,</span>
<a id="__codelineno-13-27" name="__codelineno-13-27" href="#__codelineno-13-27"></a><span class="w">    </span><span class="n">page_views</span><span class="w"> </span><span class="nb">BIGINT</span><span class="p">,</span>
<a id="__codelineno-13-28" name="__codelineno-13-28" href="#__codelineno-13-28"></a><span class="w">    </span><span class="n">unique_users</span><span class="w"> </span><span class="nb">BIGINT</span><span class="p">,</span>
<a id="__codelineno-13-29" name="__codelineno-13-29" href="#__codelineno-13-29"></a><span class="w">    </span><span class="n">unique_sessions</span><span class="w"> </span><span class="nb">BIGINT</span><span class="p">,</span>
<a id="__codelineno-13-30" name="__codelineno-13-30" href="#__codelineno-13-30"></a><span class="w">    </span><span class="n">clicks</span><span class="w"> </span><span class="nb">BIGINT</span><span class="p">,</span>
<a id="__codelineno-13-31" name="__codelineno-13-31" href="#__codelineno-13-31"></a><span class="w">    </span><span class="n">avg_session_depth</span><span class="w"> </span><span class="n">DOUBLE</span><span class="p">,</span>
<a id="__codelineno-13-32" name="__codelineno-13-32" href="#__codelineno-13-32"></a><span class="w">    </span><span class="n">bounce_rate</span><span class="w"> </span><span class="n">DOUBLE</span>
<a id="__codelineno-13-33" name="__codelineno-13-33" href="#__codelineno-13-33"></a><span class="p">)</span><span class="w"> </span><span class="k">WITH</span><span class="w"> </span><span class="p">(</span>
<a id="__codelineno-13-34" name="__codelineno-13-34" href="#__codelineno-13-34"></a><span class="w">    </span><span class="s1">&#39;connector&#39;</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;iceberg&#39;</span><span class="p">,</span>
<a id="__codelineno-13-35" name="__codelineno-13-35" href="#__codelineno-13-35"></a><span class="w">    </span><span class="s1">&#39;catalog-name&#39;</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;lakehouse&#39;</span><span class="p">,</span>
<a id="__codelineno-13-36" name="__codelineno-13-36" href="#__codelineno-13-36"></a><span class="w">    </span><span class="s1">&#39;database-name&#39;</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;analytics&#39;</span><span class="p">,</span>
<a id="__codelineno-13-37" name="__codelineno-13-37" href="#__codelineno-13-37"></a><span class="w">    </span><span class="s1">&#39;table-name&#39;</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;clickstream_metrics_5min&#39;</span>
<a id="__codelineno-13-38" name="__codelineno-13-38" href="#__codelineno-13-38"></a><span class="p">);</span>
<a id="__codelineno-13-39" name="__codelineno-13-39" href="#__codelineno-13-39"></a>
<a id="__codelineno-13-40" name="__codelineno-13-40" href="#__codelineno-13-40"></a><span class="c1">-- Pipeline d&#39;agrégation avec fenêtre tumbling</span>
<a id="__codelineno-13-41" name="__codelineno-13-41" href="#__codelineno-13-41"></a><span class="k">INSERT</span><span class="w"> </span><span class="k">INTO</span><span class="w"> </span><span class="n">clickstream_metrics_5min</span>
<a id="__codelineno-13-42" name="__codelineno-13-42" href="#__codelineno-13-42"></a><span class="k">SELECT</span><span class="w"> </span>
<a id="__codelineno-13-43" name="__codelineno-13-43" href="#__codelineno-13-43"></a><span class="w">    </span><span class="n">TUMBLE_START</span><span class="p">(</span><span class="n">event_time</span><span class="p">,</span><span class="w"> </span><span class="nb">INTERVAL</span><span class="w"> </span><span class="s1">&#39;5&#39;</span><span class="w"> </span><span class="k">MINUTE</span><span class="p">)</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="n">window_start</span><span class="p">,</span>
<a id="__codelineno-13-44" name="__codelineno-13-44" href="#__codelineno-13-44"></a><span class="w">    </span><span class="n">TUMBLE_END</span><span class="p">(</span><span class="n">event_time</span><span class="p">,</span><span class="w"> </span><span class="nb">INTERVAL</span><span class="w"> </span><span class="s1">&#39;5&#39;</span><span class="w"> </span><span class="k">MINUTE</span><span class="p">)</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="n">window_end</span><span class="p">,</span>
<a id="__codelineno-13-45" name="__codelineno-13-45" href="#__codelineno-13-45"></a><span class="w">    </span><span class="n">device_type</span><span class="p">,</span>
<a id="__codelineno-13-46" name="__codelineno-13-46" href="#__codelineno-13-46"></a><span class="w">    </span><span class="k">COUNT</span><span class="p">(</span><span class="o">*</span><span class="p">)</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="n">page_views</span><span class="p">,</span>
<a id="__codelineno-13-47" name="__codelineno-13-47" href="#__codelineno-13-47"></a><span class="w">    </span><span class="k">COUNT</span><span class="p">(</span><span class="k">DISTINCT</span><span class="w"> </span><span class="n">user_id</span><span class="p">)</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="n">unique_users</span><span class="p">,</span>
<a id="__codelineno-13-48" name="__codelineno-13-48" href="#__codelineno-13-48"></a><span class="w">    </span><span class="k">COUNT</span><span class="p">(</span><span class="k">DISTINCT</span><span class="w"> </span><span class="n">session_id</span><span class="p">)</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="n">unique_sessions</span><span class="p">,</span>
<a id="__codelineno-13-49" name="__codelineno-13-49" href="#__codelineno-13-49"></a><span class="w">    </span><span class="k">COUNT</span><span class="p">(</span><span class="k">CASE</span><span class="w"> </span><span class="k">WHEN</span><span class="w"> </span><span class="n">action_type</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;click&#39;</span><span class="w"> </span><span class="k">THEN</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="k">END</span><span class="p">)</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="n">clicks</span><span class="p">,</span>
<a id="__codelineno-13-50" name="__codelineno-13-50" href="#__codelineno-13-50"></a><span class="w">    </span><span class="k">AVG</span><span class="p">(</span><span class="k">CAST</span><span class="p">(</span><span class="n">session_depth</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="n">DOUBLE</span><span class="p">))</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="n">avg_session_depth</span><span class="p">,</span>
<a id="__codelineno-13-51" name="__codelineno-13-51" href="#__codelineno-13-51"></a><span class="w">    </span><span class="k">CAST</span><span class="p">(</span>
<a id="__codelineno-13-52" name="__codelineno-13-52" href="#__codelineno-13-52"></a><span class="w">        </span><span class="k">COUNT</span><span class="p">(</span><span class="k">CASE</span><span class="w"> </span><span class="k">WHEN</span><span class="w"> </span><span class="n">session_depth</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="k">THEN</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="k">END</span><span class="p">)</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="n">DOUBLE</span>
<a id="__codelineno-13-53" name="__codelineno-13-53" href="#__codelineno-13-53"></a><span class="w">    </span><span class="p">)</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="k">NULLIF</span><span class="p">(</span><span class="k">COUNT</span><span class="p">(</span><span class="k">DISTINCT</span><span class="w"> </span><span class="n">session_id</span><span class="p">),</span><span class="w"> </span><span class="mi">0</span><span class="p">)</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="n">bounce_rate</span>
<a id="__codelineno-13-54" name="__codelineno-13-54" href="#__codelineno-13-54"></a><span class="k">FROM</span><span class="w"> </span><span class="p">(</span>
<a id="__codelineno-13-55" name="__codelineno-13-55" href="#__codelineno-13-55"></a><span class="w">    </span><span class="k">SELECT</span><span class="w"> </span>
<a id="__codelineno-13-56" name="__codelineno-13-56" href="#__codelineno-13-56"></a><span class="w">        </span><span class="o">*</span><span class="p">,</span>
<a id="__codelineno-13-57" name="__codelineno-13-57" href="#__codelineno-13-57"></a><span class="w">        </span><span class="k">COUNT</span><span class="p">(</span><span class="o">*</span><span class="p">)</span><span class="w"> </span><span class="n">OVER</span><span class="w"> </span><span class="p">(</span>
<a id="__codelineno-13-58" name="__codelineno-13-58" href="#__codelineno-13-58"></a><span class="w">            </span><span class="n">PARTITION</span><span class="w"> </span><span class="k">BY</span><span class="w"> </span><span class="n">session_id</span><span class="w"> </span>
<a id="__codelineno-13-59" name="__codelineno-13-59" href="#__codelineno-13-59"></a><span class="w">            </span><span class="k">ORDER</span><span class="w"> </span><span class="k">BY</span><span class="w"> </span><span class="n">event_time</span><span class="w"> </span>
<a id="__codelineno-13-60" name="__codelineno-13-60" href="#__codelineno-13-60"></a><span class="w">            </span><span class="k">ROWS</span><span class="w"> </span><span class="k">BETWEEN</span><span class="w"> </span><span class="n">UNBOUNDED</span><span class="w"> </span><span class="n">PRECEDING</span><span class="w"> </span><span class="k">AND</span><span class="w"> </span><span class="k">CURRENT</span><span class="w"> </span><span class="k">ROW</span>
<a id="__codelineno-13-61" name="__codelineno-13-61" href="#__codelineno-13-61"></a><span class="w">        </span><span class="p">)</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="n">session_depth</span>
<a id="__codelineno-13-62" name="__codelineno-13-62" href="#__codelineno-13-62"></a><span class="w">    </span><span class="k">FROM</span><span class="w"> </span><span class="n">raw_clickstream</span>
<a id="__codelineno-13-63" name="__codelineno-13-63" href="#__codelineno-13-63"></a><span class="p">)</span>
<a id="__codelineno-13-64" name="__codelineno-13-64" href="#__codelineno-13-64"></a><span class="k">GROUP</span><span class="w"> </span><span class="k">BY</span><span class="w"> </span>
<a id="__codelineno-13-65" name="__codelineno-13-65" href="#__codelineno-13-65"></a><span class="w">    </span><span class="n">TUMBLE</span><span class="p">(</span><span class="n">event_time</span><span class="p">,</span><span class="w"> </span><span class="nb">INTERVAL</span><span class="w"> </span><span class="s1">&#39;5&#39;</span><span class="w"> </span><span class="k">MINUTE</span><span class="p">),</span>
<a id="__codelineno-13-66" name="__codelineno-13-66" href="#__codelineno-13-66"></a><span class="w">    </span><span class="n">device_type</span><span class="p">;</span>
<a id="__codelineno-13-67" name="__codelineno-13-67" href="#__codelineno-13-67"></a>
<a id="__codelineno-13-68" name="__codelineno-13-68" href="#__codelineno-13-68"></a><span class="c1">-- Table Iceberg pour les sessions individuelles (grain fin)</span>
<a id="__codelineno-13-69" name="__codelineno-13-69" href="#__codelineno-13-69"></a><span class="k">CREATE</span><span class="w"> </span><span class="k">TABLE</span><span class="w"> </span><span class="n">user_sessions</span><span class="w"> </span><span class="p">(</span>
<a id="__codelineno-13-70" name="__codelineno-13-70" href="#__codelineno-13-70"></a><span class="w">    </span><span class="n">session_id</span><span class="w"> </span><span class="n">STRING</span><span class="p">,</span>
<a id="__codelineno-13-71" name="__codelineno-13-71" href="#__codelineno-13-71"></a><span class="w">    </span><span class="n">user_id</span><span class="w"> </span><span class="n">STRING</span><span class="p">,</span>
<a id="__codelineno-13-72" name="__codelineno-13-72" href="#__codelineno-13-72"></a><span class="w">    </span><span class="n">device_type</span><span class="w"> </span><span class="n">STRING</span><span class="p">,</span>
<a id="__codelineno-13-73" name="__codelineno-13-73" href="#__codelineno-13-73"></a><span class="w">    </span><span class="n">session_start</span><span class="w"> </span><span class="k">TIMESTAMP</span><span class="p">(</span><span class="mi">3</span><span class="p">),</span>
<a id="__codelineno-13-74" name="__codelineno-13-74" href="#__codelineno-13-74"></a><span class="w">    </span><span class="n">session_end</span><span class="w"> </span><span class="k">TIMESTAMP</span><span class="p">(</span><span class="mi">3</span><span class="p">),</span>
<a id="__codelineno-13-75" name="__codelineno-13-75" href="#__codelineno-13-75"></a><span class="w">    </span><span class="n">page_count</span><span class="w"> </span><span class="nb">INT</span><span class="p">,</span>
<a id="__codelineno-13-76" name="__codelineno-13-76" href="#__codelineno-13-76"></a><span class="w">    </span><span class="n">total_duration_seconds</span><span class="w"> </span><span class="nb">INT</span><span class="p">,</span>
<a id="__codelineno-13-77" name="__codelineno-13-77" href="#__codelineno-13-77"></a><span class="w">    </span><span class="n">conversion_flag</span><span class="w"> </span><span class="nb">BOOLEAN</span><span class="p">,</span>
<a id="__codelineno-13-78" name="__codelineno-13-78" href="#__codelineno-13-78"></a><span class="w">    </span><span class="k">PRIMARY</span><span class="w"> </span><span class="k">KEY</span><span class="w"> </span><span class="p">(</span><span class="n">session_id</span><span class="p">)</span><span class="w"> </span><span class="k">NOT</span><span class="w"> </span><span class="n">ENFORCED</span>
<a id="__codelineno-13-79" name="__codelineno-13-79" href="#__codelineno-13-79"></a><span class="p">)</span><span class="w"> </span><span class="k">WITH</span><span class="w"> </span><span class="p">(</span>
<a id="__codelineno-13-80" name="__codelineno-13-80" href="#__codelineno-13-80"></a><span class="w">    </span><span class="s1">&#39;connector&#39;</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;iceberg&#39;</span><span class="p">,</span>
<a id="__codelineno-13-81" name="__codelineno-13-81" href="#__codelineno-13-81"></a><span class="w">    </span><span class="s1">&#39;catalog-name&#39;</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;lakehouse&#39;</span><span class="p">,</span>
<a id="__codelineno-13-82" name="__codelineno-13-82" href="#__codelineno-13-82"></a><span class="w">    </span><span class="s1">&#39;database-name&#39;</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;analytics&#39;</span><span class="p">,</span>
<a id="__codelineno-13-83" name="__codelineno-13-83" href="#__codelineno-13-83"></a><span class="w">    </span><span class="s1">&#39;table-name&#39;</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;user_sessions&#39;</span><span class="p">,</span>
<a id="__codelineno-13-84" name="__codelineno-13-84" href="#__codelineno-13-84"></a><span class="w">    </span><span class="s1">&#39;write.upsert.enabled&#39;</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;true&#39;</span>
<a id="__codelineno-13-85" name="__codelineno-13-85" href="#__codelineno-13-85"></a><span class="p">);</span>
<a id="__codelineno-13-86" name="__codelineno-13-86" href="#__codelineno-13-86"></a>
<a id="__codelineno-13-87" name="__codelineno-13-87" href="#__codelineno-13-87"></a><span class="c1">-- Pipeline de sessionisation avec fenêtre de session</span>
<a id="__codelineno-13-88" name="__codelineno-13-88" href="#__codelineno-13-88"></a><span class="k">INSERT</span><span class="w"> </span><span class="k">INTO</span><span class="w"> </span><span class="n">user_sessions</span>
<a id="__codelineno-13-89" name="__codelineno-13-89" href="#__codelineno-13-89"></a><span class="k">SELECT</span><span class="w"> </span>
<a id="__codelineno-13-90" name="__codelineno-13-90" href="#__codelineno-13-90"></a><span class="w">    </span><span class="n">session_id</span><span class="p">,</span>
<a id="__codelineno-13-91" name="__codelineno-13-91" href="#__codelineno-13-91"></a><span class="w">    </span><span class="n">FIRST_VALUE</span><span class="p">(</span><span class="n">user_id</span><span class="p">)</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="n">user_id</span><span class="p">,</span>
<a id="__codelineno-13-92" name="__codelineno-13-92" href="#__codelineno-13-92"></a><span class="w">    </span><span class="n">FIRST_VALUE</span><span class="p">(</span><span class="n">device_type</span><span class="p">)</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="n">device_type</span><span class="p">,</span>
<a id="__codelineno-13-93" name="__codelineno-13-93" href="#__codelineno-13-93"></a><span class="w">    </span><span class="n">SESSION_START</span><span class="p">(</span><span class="n">event_time</span><span class="p">,</span><span class="w"> </span><span class="nb">INTERVAL</span><span class="w"> </span><span class="s1">&#39;30&#39;</span><span class="w"> </span><span class="k">MINUTE</span><span class="p">)</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="n">session_start</span><span class="p">,</span>
<a id="__codelineno-13-94" name="__codelineno-13-94" href="#__codelineno-13-94"></a><span class="w">    </span><span class="n">SESSION_END</span><span class="p">(</span><span class="n">event_time</span><span class="p">,</span><span class="w"> </span><span class="nb">INTERVAL</span><span class="w"> </span><span class="s1">&#39;30&#39;</span><span class="w"> </span><span class="k">MINUTE</span><span class="p">)</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="n">session_end</span><span class="p">,</span>
<a id="__codelineno-13-95" name="__codelineno-13-95" href="#__codelineno-13-95"></a><span class="w">    </span><span class="k">CAST</span><span class="p">(</span><span class="k">COUNT</span><span class="p">(</span><span class="o">*</span><span class="p">)</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="nb">INT</span><span class="p">)</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="n">page_count</span><span class="p">,</span>
<a id="__codelineno-13-96" name="__codelineno-13-96" href="#__codelineno-13-96"></a><span class="w">    </span><span class="k">CAST</span><span class="p">(</span>
<a id="__codelineno-13-97" name="__codelineno-13-97" href="#__codelineno-13-97"></a><span class="w">        </span><span class="n">TIMESTAMPDIFF</span><span class="p">(</span><span class="k">SECOND</span><span class="p">,</span><span class="w"> </span>
<a id="__codelineno-13-98" name="__codelineno-13-98" href="#__codelineno-13-98"></a><span class="w">            </span><span class="n">SESSION_START</span><span class="p">(</span><span class="n">event_time</span><span class="p">,</span><span class="w"> </span><span class="nb">INTERVAL</span><span class="w"> </span><span class="s1">&#39;30&#39;</span><span class="w"> </span><span class="k">MINUTE</span><span class="p">),</span>
<a id="__codelineno-13-99" name="__codelineno-13-99" href="#__codelineno-13-99"></a><span class="w">            </span><span class="n">SESSION_END</span><span class="p">(</span><span class="n">event_time</span><span class="p">,</span><span class="w"> </span><span class="nb">INTERVAL</span><span class="w"> </span><span class="s1">&#39;30&#39;</span><span class="w"> </span><span class="k">MINUTE</span><span class="p">)</span>
<a id="__codelineno-13-100" name="__codelineno-13-100" href="#__codelineno-13-100"></a><span class="w">        </span><span class="p">)</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="nb">INT</span>
<a id="__codelineno-13-101" name="__codelineno-13-101" href="#__codelineno-13-101"></a><span class="w">    </span><span class="p">)</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="n">total_duration_seconds</span><span class="p">,</span>
<a id="__codelineno-13-102" name="__codelineno-13-102" href="#__codelineno-13-102"></a><span class="w">    </span><span class="k">MAX</span><span class="p">(</span><span class="k">CASE</span><span class="w"> </span><span class="k">WHEN</span><span class="w"> </span><span class="n">action_type</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;purchase&#39;</span><span class="w"> </span><span class="k">THEN</span><span class="w"> </span><span class="k">TRUE</span><span class="w"> </span><span class="k">ELSE</span><span class="w"> </span><span class="k">FALSE</span><span class="w"> </span><span class="k">END</span><span class="p">)</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="n">conversion_flag</span>
<a id="__codelineno-13-103" name="__codelineno-13-103" href="#__codelineno-13-103"></a><span class="k">FROM</span><span class="w"> </span><span class="n">raw_clickstream</span>
<a id="__codelineno-13-104" name="__codelineno-13-104" href="#__codelineno-13-104"></a><span class="k">GROUP</span><span class="w"> </span><span class="k">BY</span><span class="w"> </span>
<a id="__codelineno-13-105" name="__codelineno-13-105" href="#__codelineno-13-105"></a><span class="w">    </span><span class="k">SESSION</span><span class="p">(</span><span class="n">event_time</span><span class="p">,</span><span class="w"> </span><span class="nb">INTERVAL</span><span class="w"> </span><span class="s1">&#39;30&#39;</span><span class="w"> </span><span class="k">MINUTE</span><span class="p">),</span>
<a id="__codelineno-13-106" name="__codelineno-13-106" href="#__codelineno-13-106"></a><span class="w">    </span><span class="n">session_id</span><span class="p">;</span>
</code></pre></div>
<h3 id="garanties-de-livraison-et-exactly-once">Garanties de Livraison et Exactly-Once<a class="headerlink" href="#garanties-de-livraison-et-exactly-once" title="Permanent link">&para;</a></h3>
<p>La sémantique de livraison « exactly-once » est cruciale pour un Streaming Lakehouse où la cohérence des données analytiques dépend de l'absence de duplications ou de pertes.</p>
<p><strong>Kafka</strong> offre des garanties exactly-once via les transactions et l'idempotence des producteurs. Chaque message est écrit exactement une fois, même en cas de retry.</p>
<p><strong>Flink</strong> maintient l'état de manière cohérente via son mécanisme de checkpointing distribué. En cas de défaillance, le traitement reprend depuis le dernier checkpoint avec une cohérence garantie.</p>
<p><strong>Iceberg</strong> assure l'atomicité des commits. Chaque commit de fichiers est une opération atomique : soit tous les fichiers sont visibles, soit aucun.</p>
<p>La combinaison de ces garanties permet un pipeline end-to-end exactly-once :</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-14-1" name="__codelineno-14-1" href="#__codelineno-14-1"></a><span class="c1">// Configuration Flink pour exactly-once avec Iceberg</span>
<a id="__codelineno-14-2" name="__codelineno-14-2" href="#__codelineno-14-2"></a><span class="n">StreamExecutionEnvironment</span><span class="w"> </span><span class="n">env</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">StreamExecutionEnvironment</span><span class="p">.</span><span class="na">getExecutionEnvironment</span><span class="p">();</span>
<a id="__codelineno-14-3" name="__codelineno-14-3" href="#__codelineno-14-3"></a>
<a id="__codelineno-14-4" name="__codelineno-14-4" href="#__codelineno-14-4"></a><span class="c1">// Activer le checkpointing pour exactly-once</span>
<a id="__codelineno-14-5" name="__codelineno-14-5" href="#__codelineno-14-5"></a><span class="n">env</span><span class="p">.</span><span class="na">enableCheckpointing</span><span class="p">(</span><span class="mi">60000</span><span class="p">,</span><span class="w"> </span><span class="n">CheckpointingMode</span><span class="p">.</span><span class="na">EXACTLY_ONCE</span><span class="p">);</span>
<a id="__codelineno-14-6" name="__codelineno-14-6" href="#__codelineno-14-6"></a><span class="n">env</span><span class="p">.</span><span class="na">getCheckpointConfig</span><span class="p">().</span><span class="na">setMinPauseBetweenCheckpoints</span><span class="p">(</span><span class="mi">30000</span><span class="p">);</span>
<a id="__codelineno-14-7" name="__codelineno-14-7" href="#__codelineno-14-7"></a><span class="n">env</span><span class="p">.</span><span class="na">getCheckpointConfig</span><span class="p">().</span><span class="na">setCheckpointTimeout</span><span class="p">(</span><span class="mi">120000</span><span class="p">);</span>
<a id="__codelineno-14-8" name="__codelineno-14-8" href="#__codelineno-14-8"></a><span class="n">env</span><span class="p">.</span><span class="na">getCheckpointConfig</span><span class="p">().</span><span class="na">setMaxConcurrentCheckpoints</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span>
<a id="__codelineno-14-9" name="__codelineno-14-9" href="#__codelineno-14-9"></a><span class="n">env</span><span class="p">.</span><span class="na">getCheckpointConfig</span><span class="p">().</span><span class="na">setExternalizedCheckpointCleanup</span><span class="p">(</span>
<a id="__codelineno-14-10" name="__codelineno-14-10" href="#__codelineno-14-10"></a><span class="w">    </span><span class="n">CheckpointConfig</span><span class="p">.</span><span class="na">ExternalizedCheckpointCleanup</span><span class="p">.</span><span class="na">RETAIN_ON_CANCELLATION</span>
<a id="__codelineno-14-11" name="__codelineno-14-11" href="#__codelineno-14-11"></a><span class="p">);</span>
<a id="__codelineno-14-12" name="__codelineno-14-12" href="#__codelineno-14-12"></a>
<a id="__codelineno-14-13" name="__codelineno-14-13" href="#__codelineno-14-13"></a><span class="c1">// Configurer le state backend pour haute disponibilité</span>
<a id="__codelineno-14-14" name="__codelineno-14-14" href="#__codelineno-14-14"></a><span class="n">env</span><span class="p">.</span><span class="na">setStateBackend</span><span class="p">(</span><span class="k">new</span><span class="w"> </span><span class="n">EmbeddedRocksDBStateBackend</span><span class="p">());</span>
<a id="__codelineno-14-15" name="__codelineno-14-15" href="#__codelineno-14-15"></a><span class="n">env</span><span class="p">.</span><span class="na">getCheckpointConfig</span><span class="p">().</span><span class="na">setCheckpointStorage</span><span class="p">(</span>
<a id="__codelineno-14-16" name="__codelineno-14-16" href="#__codelineno-14-16"></a><span class="w">    </span><span class="s">&quot;s3://checkpoints-bucket/flink-checkpoints/&quot;</span>
<a id="__codelineno-14-17" name="__codelineno-14-17" href="#__codelineno-14-17"></a><span class="p">);</span>
<a id="__codelineno-14-18" name="__codelineno-14-18" href="#__codelineno-14-18"></a>
<a id="__codelineno-14-19" name="__codelineno-14-19" href="#__codelineno-14-19"></a><span class="c1">// Configuration Kafka source avec exactly-once</span>
<a id="__codelineno-14-20" name="__codelineno-14-20" href="#__codelineno-14-20"></a><span class="n">KafkaSource</span><span class="o">&lt;</span><span class="n">GenericRecord</span><span class="o">&gt;</span><span class="w"> </span><span class="n">kafkaSource</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">KafkaSource</span><span class="p">.</span><span class="o">&lt;</span><span class="n">GenericRecord</span><span class="o">&gt;</span><span class="n">builder</span><span class="p">()</span>
<a id="__codelineno-14-21" name="__codelineno-14-21" href="#__codelineno-14-21"></a><span class="w">    </span><span class="p">.</span><span class="na">setBootstrapServers</span><span class="p">(</span><span class="s">&quot;kafka:9092&quot;</span><span class="p">)</span>
<a id="__codelineno-14-22" name="__codelineno-14-22" href="#__codelineno-14-22"></a><span class="w">    </span><span class="p">.</span><span class="na">setTopics</span><span class="p">(</span><span class="s">&quot;orders.events&quot;</span><span class="p">)</span>
<a id="__codelineno-14-23" name="__codelineno-14-23" href="#__codelineno-14-23"></a><span class="w">    </span><span class="p">.</span><span class="na">setGroupId</span><span class="p">(</span><span class="s">&quot;flink-iceberg-exactly-once&quot;</span><span class="p">)</span>
<a id="__codelineno-14-24" name="__codelineno-14-24" href="#__codelineno-14-24"></a><span class="w">    </span><span class="p">.</span><span class="na">setStartingOffsets</span><span class="p">(</span><span class="n">OffsetsInitializer</span><span class="p">.</span><span class="na">committedOffsets</span><span class="p">(</span><span class="n">OffsetResetStrategy</span><span class="p">.</span><span class="na">EARLIEST</span><span class="p">))</span>
<a id="__codelineno-14-25" name="__codelineno-14-25" href="#__codelineno-14-25"></a><span class="w">    </span><span class="p">.</span><span class="na">setDeserializer</span><span class="p">(</span><span class="n">KafkaRecordDeserializationSchema</span><span class="p">.</span><span class="na">of</span><span class="p">(</span>
<a id="__codelineno-14-26" name="__codelineno-14-26" href="#__codelineno-14-26"></a><span class="w">        </span><span class="k">new</span><span class="w"> </span><span class="n">ConfluentRegistryAvroDeserializationSchema</span><span class="o">&lt;&gt;</span><span class="p">(</span>
<a id="__codelineno-14-27" name="__codelineno-14-27" href="#__codelineno-14-27"></a><span class="w">            </span><span class="n">GenericRecord</span><span class="p">.</span><span class="na">class</span><span class="p">,</span>
<a id="__codelineno-14-28" name="__codelineno-14-28" href="#__codelineno-14-28"></a><span class="w">            </span><span class="n">schemaRegistryUrl</span>
<a id="__codelineno-14-29" name="__codelineno-14-29" href="#__codelineno-14-29"></a><span class="w">        </span><span class="p">)</span>
<a id="__codelineno-14-30" name="__codelineno-14-30" href="#__codelineno-14-30"></a><span class="w">    </span><span class="p">))</span>
<a id="__codelineno-14-31" name="__codelineno-14-31" href="#__codelineno-14-31"></a><span class="w">    </span><span class="p">.</span><span class="na">setProperty</span><span class="p">(</span><span class="s">&quot;isolation.level&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;read_committed&quot;</span><span class="p">)</span><span class="w">  </span><span class="c1">// Important pour exactly-once</span>
<a id="__codelineno-14-32" name="__codelineno-14-32" href="#__codelineno-14-32"></a><span class="w">    </span><span class="p">.</span><span class="na">build</span><span class="p">();</span>
<a id="__codelineno-14-33" name="__codelineno-14-33" href="#__codelineno-14-33"></a>
<a id="__codelineno-14-34" name="__codelineno-14-34" href="#__codelineno-14-34"></a><span class="c1">// Configuration Iceberg sink</span>
<a id="__codelineno-14-35" name="__codelineno-14-35" href="#__codelineno-14-35"></a><span class="n">FlinkSink</span><span class="p">.</span><span class="na">Builder</span><span class="o">&lt;</span><span class="n">RowData</span><span class="o">&gt;</span><span class="w"> </span><span class="n">sinkBuilder</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">FlinkSink</span><span class="p">.</span><span class="na">forRowData</span><span class="p">(</span><span class="n">rowDataStream</span><span class="p">)</span>
<a id="__codelineno-14-36" name="__codelineno-14-36" href="#__codelineno-14-36"></a><span class="w">    </span><span class="p">.</span><span class="na">tableLoader</span><span class="p">(</span><span class="n">tableLoader</span><span class="p">)</span>
<a id="__codelineno-14-37" name="__codelineno-14-37" href="#__codelineno-14-37"></a><span class="w">    </span><span class="p">.</span><span class="na">overwrite</span><span class="p">(</span><span class="kc">false</span><span class="p">)</span>
<a id="__codelineno-14-38" name="__codelineno-14-38" href="#__codelineno-14-38"></a><span class="w">    </span><span class="p">.</span><span class="na">equalityFieldColumns</span><span class="p">(</span><span class="n">Arrays</span><span class="p">.</span><span class="na">asList</span><span class="p">(</span><span class="s">&quot;order_id&quot;</span><span class="p">))</span><span class="w">  </span><span class="c1">// Clé pour upsert</span>
<a id="__codelineno-14-39" name="__codelineno-14-39" href="#__codelineno-14-39"></a><span class="w">    </span><span class="p">.</span><span class="na">upsert</span><span class="p">(</span><span class="kc">true</span><span class="p">);</span>
<a id="__codelineno-14-40" name="__codelineno-14-40" href="#__codelineno-14-40"></a>
<a id="__codelineno-14-41" name="__codelineno-14-41" href="#__codelineno-14-41"></a><span class="c1">// Le commit Iceberg est coordonné avec le checkpoint Flink</span>
<a id="__codelineno-14-42" name="__codelineno-14-42" href="#__codelineno-14-42"></a><span class="c1">// garantissant l&#39;exactly-once end-to-end</span>
</code></pre></div>
<h3 id="considerations-de-couts">Considérations de Coûts<a class="headerlink" href="#considerations-de-couts" title="Permanent link">&para;</a></h3>
<p>L'optimisation des coûts dans un Streaming Lakehouse requiert une compréhension des différents postes de dépenses et de leurs leviers.</p>
<p><strong>Coûts Kafka/Confluent</strong> :
- Débit d'ingestion (par Go ingéré)
- Rétention (par Go-heure stocké)
- Connecteurs et Flink (par UCU - Confluent Unit Compute)</p>
<p><strong>Coûts Stockage Objet (S3/ADLS/GCS)</strong> :
- Stockage (par Go/mois)
- Requêtes (par millier de requêtes PUT/GET)
- Transfert inter-régions (par Go transféré)</p>
<p><strong>Coûts Calcul (Flink, Trino, etc.)</strong> :
- Instances de traitement (par vCPU-heure)
- Mémoire (par Go-heure)</p>
<table>
<thead>
<tr>
<th>Composant</th>
<th>Coût mensuel estimé (100 To, 1M msg/s)</th>
</tr>
</thead>
<tbody>
<tr>
<td>Confluent Cloud (Kafka + Flink)</td>
<td>15 000 - 25 000 $ CAD</td>
</tr>
<tr>
<td>Stockage S3 (ca-central-1)</td>
<td>2 300 $ CAD</td>
</tr>
<tr>
<td>Requêtes S3</td>
<td>500 - 1 500 $ CAD</td>
</tr>
<tr>
<td>Trino/Dremio (si utilisé)</td>
<td>3 000 - 8 000 $ CAD</td>
</tr>
<tr>
<td><strong>Total estimé</strong></td>
<td><strong>20 800 - 36 800 $ CAD</strong></td>
</tr>
</tbody>
</table>
<p>Stratégies d'optimisation :</p>
<ol>
<li><strong>Compaction agressive</strong> : Réduire le nombre de fichiers diminue les coûts de requêtes S3</li>
<li><strong>Tiering de rétention</strong> : Données récentes dans Kafka, historique dans Iceberg</li>
<li><strong>Compression optimale</strong> : Zstandard offre le meilleur ratio compression/performance</li>
<li><strong>Partitionnement intelligent</strong> : Aligner avec les patterns de requête pour maximiser le pruning</li>
</ol>
<h3 id="considerations-de-performance">Considérations de Performance<a class="headerlink" href="#considerations-de-performance" title="Permanent link">&para;</a></h3>
<p>L'optimisation des performances dans un Streaming Lakehouse requiert une attention particulière à plusieurs paramètres.</p>
<p><strong>La fréquence de commit</strong> détermine le compromis entre latence et efficacité. Des commits fréquents (toutes les minutes) offrent une fraîcheur maximale mais génèrent de nombreux petits fichiers nécessitant une compaction agressive. Des commits moins fréquents (toutes les heures) produisent des fichiers mieux dimensionnés mais augmentent la latence.</p>
<p><strong>Le parallélisme d'écriture</strong> influence le débit d'ingestion. Augmenter le nombre de tâches (partitions Kafka, tâches Flink, workers Connect) améliore le débit au prix d'une multiplication des fichiers générés.</p>
<p><strong>La stratégie de partitionnement</strong> Iceberg doit aligner avec les patterns de requête. Un partitionnement par date (heure ou jour) convient à la majorité des cas d'usage analytiques.</p>
<blockquote>
<p><strong>Performance</strong><br />
Configuration recommandée pour un Streaming Lakehouse à haut débit :
- Intervalle de commit : 5-15 minutes pour les tables analytiques, 1 minute pour les cas d'usage temps réel critiques
- Compaction : Activer la compaction automatique avec un seuil de 10-20 fichiers par partition
- Taille cible des fichiers : 128-256 Mo pour équilibrer performance de requête et overhead de métadonnées
- Write mode : Utiliser Merge-on-Read pour les cas CDC/upsert, Copy-on-Write pour l'append-only</p>
</blockquote>
<h3 id="observabilite-du-pipeline-streaming-lakehouse">Observabilité du Pipeline Streaming-Lakehouse<a class="headerlink" href="#observabilite-du-pipeline-streaming-lakehouse" title="Permanent link">&para;</a></h3>
<p>La surveillance d'un Streaming Lakehouse nécessite une observabilité de bout en bout, du producteur Kafka jusqu'aux requêtes analytiques sur Iceberg.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-15-1" name="__codelineno-15-1" href="#__codelineno-15-1"></a><span class="c1"># Configuration Prometheus pour métriques Streaming Lakehouse</span>
<a id="__codelineno-15-2" name="__codelineno-15-2" href="#__codelineno-15-2"></a><span class="c1"># prometheus.yml</span>
<a id="__codelineno-15-3" name="__codelineno-15-3" href="#__codelineno-15-3"></a><span class="nt">global</span><span class="p">:</span>
<a id="__codelineno-15-4" name="__codelineno-15-4" href="#__codelineno-15-4"></a><span class="w">  </span><span class="nt">scrape_interval</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">15s</span>
<a id="__codelineno-15-5" name="__codelineno-15-5" href="#__codelineno-15-5"></a>
<a id="__codelineno-15-6" name="__codelineno-15-6" href="#__codelineno-15-6"></a><span class="nt">scrape_configs</span><span class="p">:</span>
<a id="__codelineno-15-7" name="__codelineno-15-7" href="#__codelineno-15-7"></a><span class="w">  </span><span class="c1"># Métriques Kafka (JMX Exporter)</span>
<a id="__codelineno-15-8" name="__codelineno-15-8" href="#__codelineno-15-8"></a><span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">job_name</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;kafka-brokers&#39;</span>
<a id="__codelineno-15-9" name="__codelineno-15-9" href="#__codelineno-15-9"></a><span class="w">    </span><span class="nt">static_configs</span><span class="p">:</span>
<a id="__codelineno-15-10" name="__codelineno-15-10" href="#__codelineno-15-10"></a><span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">targets</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="s">&#39;kafka-1:9090&#39;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&#39;kafka-2:9090&#39;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&#39;kafka-3:9090&#39;</span><span class="p p-Indicator">]</span>
<a id="__codelineno-15-11" name="__codelineno-15-11" href="#__codelineno-15-11"></a>
<a id="__codelineno-15-12" name="__codelineno-15-12" href="#__codelineno-15-12"></a><span class="w">  </span><span class="c1"># Métriques Consumer Lag</span>
<a id="__codelineno-15-13" name="__codelineno-15-13" href="#__codelineno-15-13"></a><span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">job_name</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;kafka-consumer-lag&#39;</span>
<a id="__codelineno-15-14" name="__codelineno-15-14" href="#__codelineno-15-14"></a><span class="w">    </span><span class="nt">static_configs</span><span class="p">:</span>
<a id="__codelineno-15-15" name="__codelineno-15-15" href="#__codelineno-15-15"></a><span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">targets</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="s">&#39;kafka-lag-exporter:8080&#39;</span><span class="p p-Indicator">]</span>
<a id="__codelineno-15-16" name="__codelineno-15-16" href="#__codelineno-15-16"></a>
<a id="__codelineno-15-17" name="__codelineno-15-17" href="#__codelineno-15-17"></a><span class="w">  </span><span class="c1"># Métriques Flink</span>
<a id="__codelineno-15-18" name="__codelineno-15-18" href="#__codelineno-15-18"></a><span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">job_name</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;flink-jobmanager&#39;</span>
<a id="__codelineno-15-19" name="__codelineno-15-19" href="#__codelineno-15-19"></a><span class="w">    </span><span class="nt">static_configs</span><span class="p">:</span>
<a id="__codelineno-15-20" name="__codelineno-15-20" href="#__codelineno-15-20"></a><span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">targets</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="s">&#39;flink-jobmanager:9249&#39;</span><span class="p p-Indicator">]</span>
<a id="__codelineno-15-21" name="__codelineno-15-21" href="#__codelineno-15-21"></a>
<a id="__codelineno-15-22" name="__codelineno-15-22" href="#__codelineno-15-22"></a><span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">job_name</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;flink-taskmanagers&#39;</span>
<a id="__codelineno-15-23" name="__codelineno-15-23" href="#__codelineno-15-23"></a><span class="w">    </span><span class="nt">static_configs</span><span class="p">:</span>
<a id="__codelineno-15-24" name="__codelineno-15-24" href="#__codelineno-15-24"></a><span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">targets</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="s">&#39;flink-tm-1:9249&#39;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&#39;flink-tm-2:9249&#39;</span><span class="p p-Indicator">]</span>
<a id="__codelineno-15-25" name="__codelineno-15-25" href="#__codelineno-15-25"></a>
<a id="__codelineno-15-26" name="__codelineno-15-26" href="#__codelineno-15-26"></a><span class="w">  </span><span class="c1"># Métriques Iceberg Catalog (Nessie)</span>
<a id="__codelineno-15-27" name="__codelineno-15-27" href="#__codelineno-15-27"></a><span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">job_name</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;nessie-catalog&#39;</span>
<a id="__codelineno-15-28" name="__codelineno-15-28" href="#__codelineno-15-28"></a><span class="w">    </span><span class="nt">static_configs</span><span class="p">:</span>
<a id="__codelineno-15-29" name="__codelineno-15-29" href="#__codelineno-15-29"></a><span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">targets</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="s">&#39;nessie:9091&#39;</span><span class="p p-Indicator">]</span>
</code></pre></div>
<p>Les métriques critiques à surveiller incluent :</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-16-1" name="__codelineno-16-1" href="#__codelineno-16-1"></a><span class="c1"># Règles d&#39;alerte pour Streaming Lakehouse</span>
<a id="__codelineno-16-2" name="__codelineno-16-2" href="#__codelineno-16-2"></a><span class="c1"># alerting_rules.yml</span>
<a id="__codelineno-16-3" name="__codelineno-16-3" href="#__codelineno-16-3"></a><span class="nt">groups</span><span class="p">:</span>
<a id="__codelineno-16-4" name="__codelineno-16-4" href="#__codelineno-16-4"></a><span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">streaming_lakehouse_alerts</span>
<a id="__codelineno-16-5" name="__codelineno-16-5" href="#__codelineno-16-5"></a><span class="w">    </span><span class="nt">rules</span><span class="p">:</span>
<a id="__codelineno-16-6" name="__codelineno-16-6" href="#__codelineno-16-6"></a><span class="w">      </span><span class="c1"># Consumer lag critique</span>
<a id="__codelineno-16-7" name="__codelineno-16-7" href="#__codelineno-16-7"></a><span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">alert</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">KafkaConsumerLagCritical</span>
<a id="__codelineno-16-8" name="__codelineno-16-8" href="#__codelineno-16-8"></a><span class="w">        </span><span class="nt">expr</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">kafka_consumer_group_lag &gt; 500000</span>
<a id="__codelineno-16-9" name="__codelineno-16-9" href="#__codelineno-16-9"></a><span class="w">        </span><span class="nt">for</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">10m</span>
<a id="__codelineno-16-10" name="__codelineno-16-10" href="#__codelineno-16-10"></a><span class="w">        </span><span class="nt">labels</span><span class="p">:</span>
<a id="__codelineno-16-11" name="__codelineno-16-11" href="#__codelineno-16-11"></a><span class="w">          </span><span class="nt">severity</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">critical</span>
<a id="__codelineno-16-12" name="__codelineno-16-12" href="#__codelineno-16-12"></a><span class="w">        </span><span class="nt">annotations</span><span class="p">:</span>
<a id="__codelineno-16-13" name="__codelineno-16-13" href="#__codelineno-16-13"></a><span class="w">          </span><span class="nt">summary</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;Retard</span><span class="nv"> </span><span class="s">consommateur</span><span class="nv"> </span><span class="s">critique&quot;</span>
<a id="__codelineno-16-14" name="__codelineno-16-14" href="#__codelineno-16-14"></a><span class="w">          </span><span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;Le</span><span class="nv"> </span><span class="s">groupe</span><span class="nv"> </span><span class="s">{{</span><span class="nv"> </span><span class="s">$labels.group</span><span class="nv"> </span><span class="s">}}</span><span class="nv"> </span><span class="s">a</span><span class="nv"> </span><span class="s">un</span><span class="nv"> </span><span class="s">retard</span><span class="nv"> </span><span class="s">de</span><span class="nv"> </span><span class="s">{{</span><span class="nv"> </span><span class="s">$value</span><span class="nv"> </span><span class="s">}}</span><span class="nv"> </span><span class="s">messages</span><span class="nv"> </span><span class="s">sur</span><span class="nv"> </span><span class="s">{{</span><span class="nv"> </span><span class="s">$labels.topic</span><span class="nv"> </span><span class="s">}}&quot;</span>
<a id="__codelineno-16-15" name="__codelineno-16-15" href="#__codelineno-16-15"></a>
<a id="__codelineno-16-16" name="__codelineno-16-16" href="#__codelineno-16-16"></a><span class="w">      </span><span class="c1"># Échec de commit Iceberg</span>
<a id="__codelineno-16-17" name="__codelineno-16-17" href="#__codelineno-16-17"></a><span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">alert</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">IcebergCommitFailure</span>
<a id="__codelineno-16-18" name="__codelineno-16-18" href="#__codelineno-16-18"></a><span class="w">        </span><span class="nt">expr</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">increase(iceberg_commit_failures_total[5m]) &gt; 0</span>
<a id="__codelineno-16-19" name="__codelineno-16-19" href="#__codelineno-16-19"></a><span class="w">        </span><span class="nt">for</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1m</span>
<a id="__codelineno-16-20" name="__codelineno-16-20" href="#__codelineno-16-20"></a><span class="w">        </span><span class="nt">labels</span><span class="p">:</span>
<a id="__codelineno-16-21" name="__codelineno-16-21" href="#__codelineno-16-21"></a><span class="w">          </span><span class="nt">severity</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">critical</span>
<a id="__codelineno-16-22" name="__codelineno-16-22" href="#__codelineno-16-22"></a><span class="w">        </span><span class="nt">annotations</span><span class="p">:</span>
<a id="__codelineno-16-23" name="__codelineno-16-23" href="#__codelineno-16-23"></a><span class="w">          </span><span class="nt">summary</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;Échec</span><span class="nv"> </span><span class="s">de</span><span class="nv"> </span><span class="s">commit</span><span class="nv"> </span><span class="s">Iceberg&quot;</span>
<a id="__codelineno-16-24" name="__codelineno-16-24" href="#__codelineno-16-24"></a><span class="w">          </span><span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;Des</span><span class="nv"> </span><span class="s">commits</span><span class="nv"> </span><span class="s">Iceberg</span><span class="nv"> </span><span class="s">échouent,</span><span class="nv"> </span><span class="s">vérifier</span><span class="nv"> </span><span class="s">les</span><span class="nv"> </span><span class="s">logs&quot;</span>
<a id="__codelineno-16-25" name="__codelineno-16-25" href="#__codelineno-16-25"></a>
<a id="__codelineno-16-26" name="__codelineno-16-26" href="#__codelineno-16-26"></a><span class="w">      </span><span class="c1"># Prolifération de petits fichiers</span>
<a id="__codelineno-16-27" name="__codelineno-16-27" href="#__codelineno-16-27"></a><span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">alert</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">IcebergSmallFilesProliferation</span>
<a id="__codelineno-16-28" name="__codelineno-16-28" href="#__codelineno-16-28"></a><span class="w">        </span><span class="nt">expr</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">iceberg_table_files_count &gt; 500 AND iceberg_table_avg_file_size_mb &lt; 50</span>
<a id="__codelineno-16-29" name="__codelineno-16-29" href="#__codelineno-16-29"></a><span class="w">        </span><span class="nt">for</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">2h</span>
<a id="__codelineno-16-30" name="__codelineno-16-30" href="#__codelineno-16-30"></a><span class="w">        </span><span class="nt">labels</span><span class="p">:</span>
<a id="__codelineno-16-31" name="__codelineno-16-31" href="#__codelineno-16-31"></a><span class="w">          </span><span class="nt">severity</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">warning</span>
<a id="__codelineno-16-32" name="__codelineno-16-32" href="#__codelineno-16-32"></a><span class="w">        </span><span class="nt">annotations</span><span class="p">:</span>
<a id="__codelineno-16-33" name="__codelineno-16-33" href="#__codelineno-16-33"></a><span class="w">          </span><span class="nt">summary</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;Compaction</span><span class="nv"> </span><span class="s">nécessaire&quot;</span>
<a id="__codelineno-16-34" name="__codelineno-16-34" href="#__codelineno-16-34"></a><span class="w">          </span><span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;La</span><span class="nv"> </span><span class="s">table</span><span class="nv"> </span><span class="s">{{</span><span class="nv"> </span><span class="s">$labels.table</span><span class="nv"> </span><span class="s">}}</span><span class="nv"> </span><span class="s">contient</span><span class="nv"> </span><span class="s">{{</span><span class="nv"> </span><span class="s">$value</span><span class="nv"> </span><span class="s">}}</span><span class="nv"> </span><span class="s">fichiers</span><span class="nv"> </span><span class="s">de</span><span class="nv"> </span><span class="s">taille</span><span class="nv"> </span><span class="s">moyenne</span><span class="nv"> </span><span class="s">{{</span><span class="nv"> </span><span class="s">$labels.avg_size</span><span class="nv"> </span><span class="s">}}MB&quot;</span>
<a id="__codelineno-16-35" name="__codelineno-16-35" href="#__codelineno-16-35"></a>
<a id="__codelineno-16-36" name="__codelineno-16-36" href="#__codelineno-16-36"></a><span class="w">      </span><span class="c1"># Fraîcheur des données</span>
<a id="__codelineno-16-37" name="__codelineno-16-37" href="#__codelineno-16-37"></a><span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">alert</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">DataFreshnessLag</span>
<a id="__codelineno-16-38" name="__codelineno-16-38" href="#__codelineno-16-38"></a><span class="w">        </span><span class="nt">expr</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">(time() - iceberg_table_last_commit_timestamp) &gt; 3600</span>
<a id="__codelineno-16-39" name="__codelineno-16-39" href="#__codelineno-16-39"></a><span class="w">        </span><span class="nt">for</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">15m</span>
<a id="__codelineno-16-40" name="__codelineno-16-40" href="#__codelineno-16-40"></a><span class="w">        </span><span class="nt">labels</span><span class="p">:</span>
<a id="__codelineno-16-41" name="__codelineno-16-41" href="#__codelineno-16-41"></a><span class="w">          </span><span class="nt">severity</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">warning</span>
<a id="__codelineno-16-42" name="__codelineno-16-42" href="#__codelineno-16-42"></a><span class="w">        </span><span class="nt">annotations</span><span class="p">:</span>
<a id="__codelineno-16-43" name="__codelineno-16-43" href="#__codelineno-16-43"></a><span class="w">          </span><span class="nt">summary</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;Données</span><span class="nv"> </span><span class="s">non</span><span class="nv"> </span><span class="s">fraîches&quot;</span>
<a id="__codelineno-16-44" name="__codelineno-16-44" href="#__codelineno-16-44"></a><span class="w">          </span><span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;La</span><span class="nv"> </span><span class="s">table</span><span class="nv"> </span><span class="s">{{</span><span class="nv"> </span><span class="s">$labels.table</span><span class="nv"> </span><span class="s">}}</span><span class="nv"> </span><span class="s">n&#39;a</span><span class="nv"> </span><span class="s">pas</span><span class="nv"> </span><span class="s">reçu</span><span class="nv"> </span><span class="s">de</span><span class="nv"> </span><span class="s">commit</span><span class="nv"> </span><span class="s">depuis</span><span class="nv"> </span><span class="s">plus</span><span class="nv"> </span><span class="s">d&#39;une</span><span class="nv"> </span><span class="s">heure&quot;</span>
</code></pre></div>
<h3 id="lapproche-lakehouse-native-avec-ursa">L'Approche Lakehouse-Native avec Ursa<a class="headerlink" href="#lapproche-lakehouse-native-avec-ursa" title="Permanent link">&para;</a></h3>
<p>Une approche émergente mérite mention : les moteurs de streaming « lakehouse-native ». Le projet Ursa, développé par StreamNative et récompensé du Best Industry Paper à VLDB 2025, représente cette nouvelle génération.</p>
<p>Ursa écrit les données directement en format Iceberg ou Delta Lake sur stockage objet, éliminant la distinction entre stockage Kafka et stockage analytique. Chaque topic est simultanément un flux d'événements consommable via l'API Kafka et une table Iceberg interrogeable via SQL. Cette dualité simplifie radicalement l'architecture en éliminant la nécessité de pipelines de synchronisation.</p>
<p>L'architecture d'Ursa utilise un journal d'écriture anticipée (WAL) sur stockage objet pour les données récentes avec latence minimale, tandis qu'un service de compaction en arrière-plan convertit progressivement ces données en fichiers Parquet organisés selon les formats de table ouverts.</p>
<p>Cette approche offre une réduction potentielle des coûts jusqu'à 10× par rapport à un cluster Kafka traditionnel, principalement grâce à l'élimination de la réplication triple et de la duplication streaming/lakehouse.</p>
<h3 id="considerations-pour-le-contexte-canadien">Considérations pour le Contexte Canadien<a class="headerlink" href="#considerations-pour-le-contexte-canadien" title="Permanent link">&para;</a></h3>
<p>Les organisations canadiennes adoptant le Streaming Lakehouse doivent tenir compte de considérations spécifiques liées à la réglementation, à la géographie et à l'écosystème technologique local.</p>
<p><strong>La souveraineté des données</strong> requiert que les données sensibles restent dans des régions canadiennes. AWS offre les régions Canada (Montréal) ca-central-1 et Canada (Calgary) ca-west-1, tandis qu'Azure propose Canada Centre (Toronto) et Canada Est (Québec). Google Cloud dispose de la région northamerica-northeast1 (Montréal) et northamerica-northeast2 (Toronto). Confluent Cloud supporte le déploiement dans ces régions, et le stockage Iceberg doit être configuré sur des buckets S3 ou conteneurs Azure situés au Canada.</p>
<p><strong>La conformité Loi 25</strong> (anciennement Projet de loi 64) impose des exigences strictes sur le consentement, la transparence et le droit à l'effacement des données personnelles des résidents québécois. Un Streaming Lakehouse bien conçu facilite la conformité grâce à :</p>
<ul>
<li>La traçabilité complète offerte par le journal Kafka (qui a accédé à quoi, quand)</li>
<li>Le support natif des opérations DELETE par Iceberg pour le droit à l'effacement</li>
<li>Les capacités de time travel permettant de démontrer l'état des données à un moment donné</li>
<li>La gouvernance centralisée des schémas documentant la structure des données personnelles</li>
</ul>
<div class="highlight"><pre><span></span><code><a id="__codelineno-17-1" name="__codelineno-17-1" href="#__codelineno-17-1"></a><span class="c1"># Implémentation du droit à l&#39;effacement (Loi 25, Article 27)</span>
<a id="__codelineno-17-2" name="__codelineno-17-2" href="#__codelineno-17-2"></a><span class="c1"># Pipeline de suppression propagée Kafka -&gt; Iceberg</span>
<a id="__codelineno-17-3" name="__codelineno-17-3" href="#__codelineno-17-3"></a>
<a id="__codelineno-17-4" name="__codelineno-17-4" href="#__codelineno-17-4"></a><span class="kn">from</span><span class="w"> </span><span class="nn">dataclasses</span><span class="w"> </span><span class="kn">import</span> <span class="n">dataclass</span>
<a id="__codelineno-17-5" name="__codelineno-17-5" href="#__codelineno-17-5"></a><span class="kn">from</span><span class="w"> </span><span class="nn">typing</span><span class="w"> </span><span class="kn">import</span> <span class="n">List</span>
<a id="__codelineno-17-6" name="__codelineno-17-6" href="#__codelineno-17-6"></a><span class="kn">import</span><span class="w"> </span><span class="nn">json</span>
<a id="__codelineno-17-7" name="__codelineno-17-7" href="#__codelineno-17-7"></a>
<a id="__codelineno-17-8" name="__codelineno-17-8" href="#__codelineno-17-8"></a><span class="nd">@dataclass</span>
<a id="__codelineno-17-9" name="__codelineno-17-9" href="#__codelineno-17-9"></a><span class="k">class</span><span class="w"> </span><span class="nc">ErasureRequest</span><span class="p">:</span>
<a id="__codelineno-17-10" name="__codelineno-17-10" href="#__codelineno-17-10"></a>    <span class="n">request_id</span><span class="p">:</span> <span class="nb">str</span>
<a id="__codelineno-17-11" name="__codelineno-17-11" href="#__codelineno-17-11"></a>    <span class="n">subject_identifier</span><span class="p">:</span> <span class="nb">str</span>  <span class="c1"># Identifiant de la personne concernée</span>
<a id="__codelineno-17-12" name="__codelineno-17-12" href="#__codelineno-17-12"></a>    <span class="n">identifier_type</span><span class="p">:</span> <span class="nb">str</span>     <span class="c1"># email, customer_id, etc.</span>
<a id="__codelineno-17-13" name="__codelineno-17-13" href="#__codelineno-17-13"></a>    <span class="n">requested_at</span><span class="p">:</span> <span class="nb">str</span>
<a id="__codelineno-17-14" name="__codelineno-17-14" href="#__codelineno-17-14"></a>    <span class="n">tables_to_process</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span>
<a id="__codelineno-17-15" name="__codelineno-17-15" href="#__codelineno-17-15"></a>
<a id="__codelineno-17-16" name="__codelineno-17-16" href="#__codelineno-17-16"></a><span class="k">class</span><span class="w"> </span><span class="nc">ErasurePipeline</span><span class="p">:</span>
<a id="__codelineno-17-17" name="__codelineno-17-17" href="#__codelineno-17-17"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-17-18" name="__codelineno-17-18" href="#__codelineno-17-18"></a><span class="sd">    Pipeline de conformité Loi 25 pour le droit à l&#39;effacement.</span>
<a id="__codelineno-17-19" name="__codelineno-17-19" href="#__codelineno-17-19"></a><span class="sd">    Coordonne la suppression entre Kafka et Iceberg.</span>
<a id="__codelineno-17-20" name="__codelineno-17-20" href="#__codelineno-17-20"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-17-21" name="__codelineno-17-21" href="#__codelineno-17-21"></a>
<a id="__codelineno-17-22" name="__codelineno-17-22" href="#__codelineno-17-22"></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">kafka_admin</span><span class="p">,</span> <span class="n">iceberg_catalog</span><span class="p">,</span> <span class="n">audit_logger</span><span class="p">):</span>
<a id="__codelineno-17-23" name="__codelineno-17-23" href="#__codelineno-17-23"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">kafka_admin</span> <span class="o">=</span> <span class="n">kafka_admin</span>
<a id="__codelineno-17-24" name="__codelineno-17-24" href="#__codelineno-17-24"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">iceberg_catalog</span> <span class="o">=</span> <span class="n">iceberg_catalog</span>
<a id="__codelineno-17-25" name="__codelineno-17-25" href="#__codelineno-17-25"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">audit_logger</span> <span class="o">=</span> <span class="n">audit_logger</span>
<a id="__codelineno-17-26" name="__codelineno-17-26" href="#__codelineno-17-26"></a>
<a id="__codelineno-17-27" name="__codelineno-17-27" href="#__codelineno-17-27"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">process_erasure_request</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">:</span> <span class="n">ErasureRequest</span><span class="p">):</span>
<a id="__codelineno-17-28" name="__codelineno-17-28" href="#__codelineno-17-28"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-17-29" name="__codelineno-17-29" href="#__codelineno-17-29"></a><span class="sd">        Traite une demande d&#39;effacement conformément à la Loi 25.</span>
<a id="__codelineno-17-30" name="__codelineno-17-30" href="#__codelineno-17-30"></a><span class="sd">        Délai légal : 30 jours.</span>
<a id="__codelineno-17-31" name="__codelineno-17-31" href="#__codelineno-17-31"></a><span class="sd">        &quot;&quot;&quot;</span>
<a id="__codelineno-17-32" name="__codelineno-17-32" href="#__codelineno-17-32"></a>        <span class="c1"># 1. Journaliser la demande pour audit</span>
<a id="__codelineno-17-33" name="__codelineno-17-33" href="#__codelineno-17-33"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">audit_logger</span><span class="o">.</span><span class="n">log_erasure_request</span><span class="p">(</span>
<a id="__codelineno-17-34" name="__codelineno-17-34" href="#__codelineno-17-34"></a>            <span class="n">request_id</span><span class="o">=</span><span class="n">request</span><span class="o">.</span><span class="n">request_id</span><span class="p">,</span>
<a id="__codelineno-17-35" name="__codelineno-17-35" href="#__codelineno-17-35"></a>            <span class="n">subject</span><span class="o">=</span><span class="n">request</span><span class="o">.</span><span class="n">subject_identifier</span><span class="p">,</span>
<a id="__codelineno-17-36" name="__codelineno-17-36" href="#__codelineno-17-36"></a>            <span class="n">timestamp</span><span class="o">=</span><span class="n">request</span><span class="o">.</span><span class="n">requested_at</span>
<a id="__codelineno-17-37" name="__codelineno-17-37" href="#__codelineno-17-37"></a>        <span class="p">)</span>
<a id="__codelineno-17-38" name="__codelineno-17-38" href="#__codelineno-17-38"></a>
<a id="__codelineno-17-39" name="__codelineno-17-39" href="#__codelineno-17-39"></a>        <span class="n">results</span> <span class="o">=</span> <span class="p">{}</span>
<a id="__codelineno-17-40" name="__codelineno-17-40" href="#__codelineno-17-40"></a>
<a id="__codelineno-17-41" name="__codelineno-17-41" href="#__codelineno-17-41"></a>        <span class="c1"># 2. Supprimer des tables Iceberg</span>
<a id="__codelineno-17-42" name="__codelineno-17-42" href="#__codelineno-17-42"></a>        <span class="k">for</span> <span class="n">table_name</span> <span class="ow">in</span> <span class="n">request</span><span class="o">.</span><span class="n">tables_to_process</span><span class="p">:</span>
<a id="__codelineno-17-43" name="__codelineno-17-43" href="#__codelineno-17-43"></a>            <span class="n">table</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">iceberg_catalog</span><span class="o">.</span><span class="n">load_table</span><span class="p">(</span><span class="n">table_name</span><span class="p">)</span>
<a id="__codelineno-17-44" name="__codelineno-17-44" href="#__codelineno-17-44"></a>
<a id="__codelineno-17-45" name="__codelineno-17-45" href="#__codelineno-17-45"></a>            <span class="c1"># Identifier la colonne correspondant à l&#39;identifiant</span>
<a id="__codelineno-17-46" name="__codelineno-17-46" href="#__codelineno-17-46"></a>            <span class="n">id_column</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_identifier_column</span><span class="p">(</span>
<a id="__codelineno-17-47" name="__codelineno-17-47" href="#__codelineno-17-47"></a>                <span class="n">table</span><span class="p">,</span> 
<a id="__codelineno-17-48" name="__codelineno-17-48" href="#__codelineno-17-48"></a>                <span class="n">request</span><span class="o">.</span><span class="n">identifier_type</span>
<a id="__codelineno-17-49" name="__codelineno-17-49" href="#__codelineno-17-49"></a>            <span class="p">)</span>
<a id="__codelineno-17-50" name="__codelineno-17-50" href="#__codelineno-17-50"></a>
<a id="__codelineno-17-51" name="__codelineno-17-51" href="#__codelineno-17-51"></a>            <span class="c1"># Exécuter la suppression</span>
<a id="__codelineno-17-52" name="__codelineno-17-52" href="#__codelineno-17-52"></a>            <span class="n">delete_count</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_execute_delete</span><span class="p">(</span>
<a id="__codelineno-17-53" name="__codelineno-17-53" href="#__codelineno-17-53"></a>                <span class="n">table</span><span class="o">=</span><span class="n">table</span><span class="p">,</span>
<a id="__codelineno-17-54" name="__codelineno-17-54" href="#__codelineno-17-54"></a>                <span class="n">column</span><span class="o">=</span><span class="n">id_column</span><span class="p">,</span>
<a id="__codelineno-17-55" name="__codelineno-17-55" href="#__codelineno-17-55"></a>                <span class="n">value</span><span class="o">=</span><span class="n">request</span><span class="o">.</span><span class="n">subject_identifier</span>
<a id="__codelineno-17-56" name="__codelineno-17-56" href="#__codelineno-17-56"></a>            <span class="p">)</span>
<a id="__codelineno-17-57" name="__codelineno-17-57" href="#__codelineno-17-57"></a>
<a id="__codelineno-17-58" name="__codelineno-17-58" href="#__codelineno-17-58"></a>            <span class="n">results</span><span class="p">[</span><span class="n">table_name</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
<a id="__codelineno-17-59" name="__codelineno-17-59" href="#__codelineno-17-59"></a>                <span class="s1">&#39;deleted_rows&#39;</span><span class="p">:</span> <span class="n">delete_count</span><span class="p">,</span>
<a id="__codelineno-17-60" name="__codelineno-17-60" href="#__codelineno-17-60"></a>                <span class="s1">&#39;timestamp&#39;</span><span class="p">:</span> <span class="n">datetime</span><span class="o">.</span><span class="n">utcnow</span><span class="p">()</span><span class="o">.</span><span class="n">isoformat</span><span class="p">()</span>
<a id="__codelineno-17-61" name="__codelineno-17-61" href="#__codelineno-17-61"></a>            <span class="p">}</span>
<a id="__codelineno-17-62" name="__codelineno-17-62" href="#__codelineno-17-62"></a>
<a id="__codelineno-17-63" name="__codelineno-17-63" href="#__codelineno-17-63"></a>            <span class="c1"># Journaliser pour audit</span>
<a id="__codelineno-17-64" name="__codelineno-17-64" href="#__codelineno-17-64"></a>            <span class="bp">self</span><span class="o">.</span><span class="n">audit_logger</span><span class="o">.</span><span class="n">log_table_erasure</span><span class="p">(</span>
<a id="__codelineno-17-65" name="__codelineno-17-65" href="#__codelineno-17-65"></a>                <span class="n">request_id</span><span class="o">=</span><span class="n">request</span><span class="o">.</span><span class="n">request_id</span><span class="p">,</span>
<a id="__codelineno-17-66" name="__codelineno-17-66" href="#__codelineno-17-66"></a>                <span class="n">table</span><span class="o">=</span><span class="n">table_name</span><span class="p">,</span>
<a id="__codelineno-17-67" name="__codelineno-17-67" href="#__codelineno-17-67"></a>                <span class="n">rows_deleted</span><span class="o">=</span><span class="n">delete_count</span>
<a id="__codelineno-17-68" name="__codelineno-17-68" href="#__codelineno-17-68"></a>            <span class="p">)</span>
<a id="__codelineno-17-69" name="__codelineno-17-69" href="#__codelineno-17-69"></a>
<a id="__codelineno-17-70" name="__codelineno-17-70" href="#__codelineno-17-70"></a>        <span class="c1"># 3. Produire un tombstone sur les topics Kafka pertinents</span>
<a id="__codelineno-17-71" name="__codelineno-17-71" href="#__codelineno-17-71"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_produce_tombstones</span><span class="p">(</span>
<a id="__codelineno-17-72" name="__codelineno-17-72" href="#__codelineno-17-72"></a>            <span class="n">subject_identifier</span><span class="o">=</span><span class="n">request</span><span class="o">.</span><span class="n">subject_identifier</span><span class="p">,</span>
<a id="__codelineno-17-73" name="__codelineno-17-73" href="#__codelineno-17-73"></a>            <span class="n">identifier_type</span><span class="o">=</span><span class="n">request</span><span class="o">.</span><span class="n">identifier_type</span>
<a id="__codelineno-17-74" name="__codelineno-17-74" href="#__codelineno-17-74"></a>        <span class="p">)</span>
<a id="__codelineno-17-75" name="__codelineno-17-75" href="#__codelineno-17-75"></a>
<a id="__codelineno-17-76" name="__codelineno-17-76" href="#__codelineno-17-76"></a>        <span class="c1"># 4. Générer le certificat de suppression</span>
<a id="__codelineno-17-77" name="__codelineno-17-77" href="#__codelineno-17-77"></a>        <span class="n">certificate</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_generate_erasure_certificate</span><span class="p">(</span>
<a id="__codelineno-17-78" name="__codelineno-17-78" href="#__codelineno-17-78"></a>            <span class="n">request</span><span class="o">=</span><span class="n">request</span><span class="p">,</span>
<a id="__codelineno-17-79" name="__codelineno-17-79" href="#__codelineno-17-79"></a>            <span class="n">results</span><span class="o">=</span><span class="n">results</span>
<a id="__codelineno-17-80" name="__codelineno-17-80" href="#__codelineno-17-80"></a>        <span class="p">)</span>
<a id="__codelineno-17-81" name="__codelineno-17-81" href="#__codelineno-17-81"></a>
<a id="__codelineno-17-82" name="__codelineno-17-82" href="#__codelineno-17-82"></a>        <span class="k">return</span> <span class="n">certificate</span>
<a id="__codelineno-17-83" name="__codelineno-17-83" href="#__codelineno-17-83"></a>
<a id="__codelineno-17-84" name="__codelineno-17-84" href="#__codelineno-17-84"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">_execute_delete</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">table</span><span class="p">,</span> <span class="n">column</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
<a id="__codelineno-17-85" name="__codelineno-17-85" href="#__codelineno-17-85"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-17-86" name="__codelineno-17-86" href="#__codelineno-17-86"></a><span class="sd">        Exécute une suppression SQL sur la table Iceberg.</span>
<a id="__codelineno-17-87" name="__codelineno-17-87" href="#__codelineno-17-87"></a><span class="sd">        Utilise le DELETE natif d&#39;Iceberg (v2).</span>
<a id="__codelineno-17-88" name="__codelineno-17-88" href="#__codelineno-17-88"></a><span class="sd">        &quot;&quot;&quot;</span>
<a id="__codelineno-17-89" name="__codelineno-17-89" href="#__codelineno-17-89"></a>        <span class="c1"># Via Spark SQL ou Flink</span>
<a id="__codelineno-17-90" name="__codelineno-17-90" href="#__codelineno-17-90"></a>        <span class="n">delete_sql</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;&quot;&quot;</span>
<a id="__codelineno-17-91" name="__codelineno-17-91" href="#__codelineno-17-91"></a><span class="s2">            DELETE FROM </span><span class="si">{</span><span class="n">table</span><span class="o">.</span><span class="n">name</span><span class="p">()</span><span class="si">}</span>
<a id="__codelineno-17-92" name="__codelineno-17-92" href="#__codelineno-17-92"></a><span class="s2">            WHERE </span><span class="si">{</span><span class="n">column</span><span class="si">}</span><span class="s2"> = &#39;</span><span class="si">{</span><span class="n">value</span><span class="si">}</span><span class="s2">&#39;</span>
<a id="__codelineno-17-93" name="__codelineno-17-93" href="#__codelineno-17-93"></a><span class="s2">        &quot;&quot;&quot;</span>
<a id="__codelineno-17-94" name="__codelineno-17-94" href="#__codelineno-17-94"></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">spark</span><span class="o">.</span><span class="n">sql</span><span class="p">(</span><span class="n">delete_sql</span><span class="p">)</span><span class="o">.</span><span class="n">count</span><span class="p">()</span>
<a id="__codelineno-17-95" name="__codelineno-17-95" href="#__codelineno-17-95"></a>
<a id="__codelineno-17-96" name="__codelineno-17-96" href="#__codelineno-17-96"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">_produce_tombstones</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">subject_identifier</span><span class="p">,</span> <span class="n">identifier_type</span><span class="p">):</span>
<a id="__codelineno-17-97" name="__codelineno-17-97" href="#__codelineno-17-97"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-17-98" name="__codelineno-17-98" href="#__codelineno-17-98"></a><span class="sd">        Produit des tombstones Kafka pour les topics contenant</span>
<a id="__codelineno-17-99" name="__codelineno-17-99" href="#__codelineno-17-99"></a><span class="sd">        les données de la personne concernée.</span>
<a id="__codelineno-17-100" name="__codelineno-17-100" href="#__codelineno-17-100"></a><span class="sd">        &quot;&quot;&quot;</span>
<a id="__codelineno-17-101" name="__codelineno-17-101" href="#__codelineno-17-101"></a>        <span class="n">topics</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_identify_affected_topics</span><span class="p">(</span><span class="n">identifier_type</span><span class="p">)</span>
<a id="__codelineno-17-102" name="__codelineno-17-102" href="#__codelineno-17-102"></a>
<a id="__codelineno-17-103" name="__codelineno-17-103" href="#__codelineno-17-103"></a>        <span class="k">for</span> <span class="n">topic</span> <span class="ow">in</span> <span class="n">topics</span><span class="p">:</span>
<a id="__codelineno-17-104" name="__codelineno-17-104" href="#__codelineno-17-104"></a>            <span class="c1"># Le tombstone (valeur null avec la clé) permet</span>
<a id="__codelineno-17-105" name="__codelineno-17-105" href="#__codelineno-17-105"></a>            <span class="c1"># la compaction du log Kafka</span>
<a id="__codelineno-17-106" name="__codelineno-17-106" href="#__codelineno-17-106"></a>            <span class="bp">self</span><span class="o">.</span><span class="n">kafka_producer</span><span class="o">.</span><span class="n">send</span><span class="p">(</span>
<a id="__codelineno-17-107" name="__codelineno-17-107" href="#__codelineno-17-107"></a>                <span class="n">topic</span><span class="o">=</span><span class="n">topic</span><span class="p">,</span>
<a id="__codelineno-17-108" name="__codelineno-17-108" href="#__codelineno-17-108"></a>                <span class="n">key</span><span class="o">=</span><span class="n">subject_identifier</span><span class="p">,</span>
<a id="__codelineno-17-109" name="__codelineno-17-109" href="#__codelineno-17-109"></a>                <span class="n">value</span><span class="o">=</span><span class="kc">None</span>  <span class="c1"># Tombstone</span>
<a id="__codelineno-17-110" name="__codelineno-17-110" href="#__codelineno-17-110"></a>            <span class="p">)</span>
</code></pre></div>
<p><strong>Les coûts de transfert inter-régions</strong> peuvent s'accumuler rapidement dans une architecture distribuée. L'optimisation consiste à colocater les composants Kafka, Flink et le stockage Iceberg dans la même région pour minimiser les frais d'egress. Pour les organisations multi-régionales (ex: Québec et Ontario), une architecture active-passive avec réplication asynchrone peut être plus économique qu'une distribution active-active.</p>
<p><strong>L'écosystème local</strong> inclut plusieurs fournisseurs de services gérés avec présence canadienne :</p>
<table>
<thead>
<tr>
<th>Fournisseur</th>
<th>Service</th>
<th>Régions Canada</th>
</tr>
</thead>
<tbody>
<tr>
<td>Confluent</td>
<td>Confluent Cloud</td>
<td>ca-central-1 (Montréal)</td>
</tr>
<tr>
<td>Aiven</td>
<td>Aiven for Apache Kafka</td>
<td>Toronto, Montréal</td>
</tr>
<tr>
<td>Amazon</td>
<td>Amazon MSK</td>
<td>ca-central-1, ca-west-1</td>
</tr>
<tr>
<td>Microsoft</td>
<td>Azure Event Hubs</td>
<td>Canada Central, Canada East</td>
</tr>
<tr>
<td>Starburst</td>
<td>Starburst Galaxy</td>
<td>Canada</td>
</tr>
</tbody>
</table>
<blockquote>
<p><strong>Étude de cas : Mouvement Desjardins</strong><br />
<em>Secteur</em> : Services financiers coopératifs<br />
<em>Défi</em> : Unifier les données de 7 millions de membres provenant de multiples systèmes (bancaires, assurances, valeurs mobilières) pour une vue client 360° temps réel, tout en respectant les exigences strictes de l'AMF et de la Loi 25<br />
<em>Solution</em> : Streaming Lakehouse avec Kafka hébergé au Québec (ca-central-1), Apache Flink pour l'agrégation temps réel des profils clients, et Apache Iceberg pour l'historique analytique. CDC Debezium depuis les systèmes legacy AS/400 et Oracle.<br />
<em>Architecture</em> :<br />
- 47 topics Kafka pour les événements temps réel (transactions, connexions, appels)<br />
- 3 clusters Flink pour les différents domaines (bancaire, assurance, investissement)<br />
- REST Catalog Nessie avec gouvernance centralisée<br />
- Stockage Iceberg sur S3 ca-central-1 avec chiffrement KMS<br />
<em>Résultats</em> :<br />
- Latence de mise à jour du profil client réduite de 24 heures à 3 minutes<br />
- Conformité Loi 25 assurée par traçabilité complète et capacité d'effacement<br />
- Réduction de 45 % des coûts par élimination des ETL batch nocturnes<br />
- Temps de réponse aux demandes d'accès de l'AMF réduit de 5 jours à 4 heures</p>
<p><strong>Étude de cas : Bell Canada</strong><br />
<em>Secteur</em> : Télécommunications<br />
<em>Défi</em> : Traiter en temps réel les données de réseau et d'utilisation de 23 millions d'abonnés pour la détection proactive des pannes, l'optimisation de l'expérience client, et la prévention de la fraude<br />
<em>Solution</em> : Architecture Kappa évoluée vers Streaming Lakehouse avec :<br />
- Ingestion temps réel des métriques réseau (15 millions d'événements/seconde en pointe) via Kafka<br />
- Apache Flink pour la détection d'anomalies avec modèles ML embarqués<br />
- Persistance Iceberg pour l'analyse historique et l'entraînement des modèles<br />
- Intégration Power BI via Dremio pour les tableaux de bord opérationnels<br />
<em>Architecture multi-régions</em> :<br />
- Cluster Kafka primaire : Toronto (Canada Central)<br />
- Réplica DR : Montréal (Canada East)<br />
- Latence de réplication : &lt; 100ms<br />
<em>Résultats</em> :<br />
- Temps moyen de détection des incidents réseau réduit de 45 minutes à 90 secondes<br />
- Capacité d'analyse historique sur 2 ans de données réseau (850 To)<br />
- Détection de fraude SIM swap améliorée de 78 %<br />
- Économies de 3,2 M$ CAD/an en coûts d'infrastructure</p>
<p><strong>Étude de cas : Loblaws Digital</strong><br />
<em>Secteur</em> : Commerce de détail alimentaire<br />
<em>Défi</em> : Personnaliser l'expérience client sur les plateformes numériques (PC Optimum, click &amp; collect) en temps réel basé sur le comportement d'achat et les préférences<br />
<em>Solution</em> : Streaming Lakehouse alimentant un moteur de recommandation temps réel :<br />
- Événements de navigation et d'achat capturés via Kafka<br />
- Calcul de features temps réel avec Flink (panier moyen, catégories favorites, sensibilité prix)<br />
- Feature Store matérialisé dans Iceberg pour l'entraînement ML<br />
- Modèles de recommandation servis via API avec latence &lt; 50ms<br />
<em>Résultats</em> :<br />
- Taux de conversion des recommandations augmenté de 23 %<br />
- Valeur moyenne du panier en hausse de 8 %<br />
- Temps d'entraînement des modèles réduit de 4 heures à 45 minutes grâce aux features pré-calculées</p>
</blockquote>
<h3 id="architecture-de-reference-pour-le-canada">Architecture de Référence pour le Canada<a class="headerlink" href="#architecture-de-reference-pour-le-canada" title="Permanent link">&para;</a></h3>
<p>L'architecture suivante représente un déploiement de référence pour une organisation canadienne adoptant le Streaming Lakehouse :</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-18-1" name="__codelineno-18-1" href="#__codelineno-18-1"></a>┌─────────────────────────────────────────────────────────────────────────┐
<a id="__codelineno-18-2" name="__codelineno-18-2" href="#__codelineno-18-2"></a>│              STREAMING LAKEHOUSE - ARCHITECTURE CANADA                  │
<a id="__codelineno-18-3" name="__codelineno-18-3" href="#__codelineno-18-3"></a>├─────────────────────────────────────────────────────────────────────────┤
<a id="__codelineno-18-4" name="__codelineno-18-4" href="#__codelineno-18-4"></a>│                                                                         │
<a id="__codelineno-18-5" name="__codelineno-18-5" href="#__codelineno-18-5"></a>│  RÉGION PRIMAIRE (ca-central-1 / Montréal)                             │
<a id="__codelineno-18-6" name="__codelineno-18-6" href="#__codelineno-18-6"></a>│  ┌───────────────────────────────────────────────────────────────────┐ │
<a id="__codelineno-18-7" name="__codelineno-18-7" href="#__codelineno-18-7"></a>│  │                                                                   │ │
<a id="__codelineno-18-8" name="__codelineno-18-8" href="#__codelineno-18-8"></a>│  │  ┌─────────────┐   ┌─────────────┐   ┌─────────────────────────┐ │ │
<a id="__codelineno-18-9" name="__codelineno-18-9" href="#__codelineno-18-9"></a>│  │  │  Sources    │──▶│   Kafka     │──▶│      Apache Flink       │ │ │
<a id="__codelineno-18-10" name="__codelineno-18-10" href="#__codelineno-18-10"></a>│  │  │  (CDC, App) │   │  Confluent  │   │   (Traitement Temps    │ │ │
<a id="__codelineno-18-11" name="__codelineno-18-11" href="#__codelineno-18-11"></a>│  │  └─────────────┘   │   Cloud     │   │        Réel)           │ │ │
<a id="__codelineno-18-12" name="__codelineno-18-12" href="#__codelineno-18-12"></a>│  │                    │             │   └───────────┬─────────────┘ │ │
<a id="__codelineno-18-13" name="__codelineno-18-13" href="#__codelineno-18-13"></a>│  │                    │  + Schema   │               │               │ │
<a id="__codelineno-18-14" name="__codelineno-18-14" href="#__codelineno-18-14"></a>│  │                    │   Registry  │               │               │ │
<a id="__codelineno-18-15" name="__codelineno-18-15" href="#__codelineno-18-15"></a>│  │                    └──────┬──────┘               │               │ │
<a id="__codelineno-18-16" name="__codelineno-18-16" href="#__codelineno-18-16"></a>│  │                           │                      │               │ │
<a id="__codelineno-18-17" name="__codelineno-18-17" href="#__codelineno-18-17"></a>│  │                           │ Tableflow            │               │ │
<a id="__codelineno-18-18" name="__codelineno-18-18" href="#__codelineno-18-18"></a>│  │                           ▼                      ▼               │ │
<a id="__codelineno-18-19" name="__codelineno-18-19" href="#__codelineno-18-19"></a>│  │                    ┌─────────────────────────────────────────┐   │ │
<a id="__codelineno-18-20" name="__codelineno-18-20" href="#__codelineno-18-20"></a>│  │                    │           Apache Iceberg                │   │ │
<a id="__codelineno-18-21" name="__codelineno-18-21" href="#__codelineno-18-21"></a>│  │                    │      (S3 ca-central-1, chiffré KMS)     │   │ │
<a id="__codelineno-18-22" name="__codelineno-18-22" href="#__codelineno-18-22"></a>│  │                    │                                         │   │ │
<a id="__codelineno-18-23" name="__codelineno-18-23" href="#__codelineno-18-23"></a>│  │                    │  REST Catalog (Nessie ou Confluent)     │   │ │
<a id="__codelineno-18-24" name="__codelineno-18-24" href="#__codelineno-18-24"></a>│  │                    └─────────────────────────────────────────┘   │ │
<a id="__codelineno-18-25" name="__codelineno-18-25" href="#__codelineno-18-25"></a>│  │                                      │                           │ │
<a id="__codelineno-18-26" name="__codelineno-18-26" href="#__codelineno-18-26"></a>│  │                    ┌─────────────────┼─────────────────┐         │ │
<a id="__codelineno-18-27" name="__codelineno-18-27" href="#__codelineno-18-27"></a>│  │                    │                 │                 │         │ │
<a id="__codelineno-18-28" name="__codelineno-18-28" href="#__codelineno-18-28"></a>│  │                    ▼                 ▼                 ▼         │ │
<a id="__codelineno-18-29" name="__codelineno-18-29" href="#__codelineno-18-29"></a>│  │             ┌───────────┐     ┌───────────┐     ┌───────────┐   │ │
<a id="__codelineno-18-30" name="__codelineno-18-30" href="#__codelineno-18-30"></a>│  │             │  Dremio   │     │ Power BI  │     │ ML/AI     │   │ │
<a id="__codelineno-18-31" name="__codelineno-18-31" href="#__codelineno-18-31"></a>│  │             │  (Query)  │     │(Direct    │     │(SageMaker │   │ │
<a id="__codelineno-18-32" name="__codelineno-18-32" href="#__codelineno-18-32"></a>│  │             │           │     │ Lake)     │     │ Vertex)   │   │ │
<a id="__codelineno-18-33" name="__codelineno-18-33" href="#__codelineno-18-33"></a>│  │             └───────────┘     └───────────┘     └───────────┘   │ │
<a id="__codelineno-18-34" name="__codelineno-18-34" href="#__codelineno-18-34"></a>│  │                                                                   │ │
<a id="__codelineno-18-35" name="__codelineno-18-35" href="#__codelineno-18-35"></a>│  └───────────────────────────────────────────────────────────────────┘ │
<a id="__codelineno-18-36" name="__codelineno-18-36" href="#__codelineno-18-36"></a>│                                                                         │
<a id="__codelineno-18-37" name="__codelineno-18-37" href="#__codelineno-18-37"></a>│  RÉGION DR (ca-west-1 / Calgary)                                       │
<a id="__codelineno-18-38" name="__codelineno-18-38" href="#__codelineno-18-38"></a>│  ┌───────────────────────────────────────────────────────────────────┐ │
<a id="__codelineno-18-39" name="__codelineno-18-39" href="#__codelineno-18-39"></a>│  │                                                                   │ │
<a id="__codelineno-18-40" name="__codelineno-18-40" href="#__codelineno-18-40"></a>│  │  ┌─────────────────┐        ┌─────────────────────────────────┐  │ │
<a id="__codelineno-18-41" name="__codelineno-18-41" href="#__codelineno-18-41"></a>│  │  │  Kafka Replica  │◀──────│  S3 Cross-Region Replication   │  │ │
<a id="__codelineno-18-42" name="__codelineno-18-42" href="#__codelineno-18-42"></a>│  │  │  (Cluster Link) │        │  (Iceberg métadonnées + data)  │  │ │
<a id="__codelineno-18-43" name="__codelineno-18-43" href="#__codelineno-18-43"></a>│  │  └─────────────────┘        └─────────────────────────────────┘  │ │
<a id="__codelineno-18-44" name="__codelineno-18-44" href="#__codelineno-18-44"></a>│  │                                                                   │ │
<a id="__codelineno-18-45" name="__codelineno-18-45" href="#__codelineno-18-45"></a>│  │  RTO: 15 minutes | RPO: 5 minutes                                │ │
<a id="__codelineno-18-46" name="__codelineno-18-46" href="#__codelineno-18-46"></a>│  │                                                                   │ │
<a id="__codelineno-18-47" name="__codelineno-18-47" href="#__codelineno-18-47"></a>│  └───────────────────────────────────────────────────────────────────┘ │
<a id="__codelineno-18-48" name="__codelineno-18-48" href="#__codelineno-18-48"></a>│                                                                         │
<a id="__codelineno-18-49" name="__codelineno-18-49" href="#__codelineno-18-49"></a>│  GOUVERNANCE ET CONFORMITÉ                                             │
<a id="__codelineno-18-50" name="__codelineno-18-50" href="#__codelineno-18-50"></a>│  ┌───────────────────────────────────────────────────────────────────┐ │
<a id="__codelineno-18-51" name="__codelineno-18-51" href="#__codelineno-18-51"></a>│  │  • Loi 25 : Consentement, Effacement, Portabilité                │ │
<a id="__codelineno-18-52" name="__codelineno-18-52" href="#__codelineno-18-52"></a>│  │  • LPRPDE : Protection des renseignements personnels              │ │
<a id="__codelineno-18-53" name="__codelineno-18-53" href="#__codelineno-18-53"></a>│  │  • SOX (si applicable) : Intégrité et audit financier            │ │
<a id="__codelineno-18-54" name="__codelineno-18-54" href="#__codelineno-18-54"></a>│  │  • BSIF (institutions financières) : Résilience opérationnelle   │ │
<a id="__codelineno-18-55" name="__codelineno-18-55" href="#__codelineno-18-55"></a>│  └───────────────────────────────────────────────────────────────────┘ │
<a id="__codelineno-18-56" name="__codelineno-18-56" href="#__codelineno-18-56"></a>│                                                                         │
<a id="__codelineno-18-57" name="__codelineno-18-57" href="#__codelineno-18-57"></a>└─────────────────────────────────────────────────────────────────────────┘
</code></pre></div>
<p>Cette architecture assure :</p>
<ul>
<li><strong>Souveraineté des données</strong> : Toutes les données restent dans les régions canadiennes</li>
<li><strong>Haute disponibilité</strong> : Réplication entre Montréal et Calgary</li>
<li><strong>Conformité</strong> : Traçabilité, audit et capacités d'effacement</li>
<li><strong>Performance</strong> : Latence minimale grâce à la colocation des composants</li>
<li><strong>Évolutivité</strong> : Scaling indépendant de chaque couche</li>
</ul>
<h3 id="feuille-de-route-pour-la-migration">Feuille de Route pour la Migration<a class="headerlink" href="#feuille-de-route-pour-la-migration" title="Permanent link">&para;</a></h3>
<p>La transition vers un Streaming Lakehouse depuis une architecture Lambda ou des pipelines batch traditionnels requiert une approche méthodique en phases. L'objectif est de minimiser les risques tout en démontrant rapidement la valeur.</p>
<p><strong>Phase 1 : Fondations (Mois 1-3)</strong></p>
<p>Cette phase établit l'infrastructure de base sans perturber les systèmes existants.</p>
<p><em>Objectifs</em> :
- Déployer un cluster Kafka ou Confluent Cloud dans une région canadienne
- Établir le Schema Registry avec les premiers schémas Avro
- Configurer le stockage Iceberg sur S3/ADLS avec un REST Catalog
- Former l'équipe aux concepts fondamentaux</p>
<p><em>Livrables</em> :
- Environnement de développement fonctionnel
- Premier topic Kafka alimenté par une source non critique
- Première table Iceberg matérialisée (via Tableflow ou Kafka Connect)
- Documentation des standards et conventions</p>
<p><em>Métriques de succès</em> :
- Latence de bout en bout &lt; 5 minutes
- Zéro perte de données sur un mois de production test</p>
<p><strong>Phase 2 : Cas d'Usage Pilote (Mois 4-6)</strong></p>
<p>Cette phase déploie un premier cas d'usage en production parallèlement aux systèmes existants.</p>
<p><em>Sélection du cas pilote</em> : Choisir un cas d'usage présentant les caractéristiques suivantes :
- Haute valeur métier mais risque limité en cas d'échec
- Latence actuelle insatisfaisante (typiquement T+1)
- Volume gérable (&lt; 100 Go/jour, &lt; 50 000 événements/seconde)
- Équipe métier engagée et disponible pour valider</p>
<p><em>Exemples de cas pilotes recommandés</em> :
- Tableau de bord temps réel pour les indicateurs opérationnels
- Détection d'anomalies sur un flux de transactions secondaire
- Alimentation d'un Feature Store pour un modèle ML existant</p>
<p><em>Architecture parallèle</em> : Durant cette phase, le nouveau pipeline Streaming Lakehouse fonctionne en parallèle avec l'existant. Les consommateurs peuvent comparer les résultats des deux systèmes pour valider la cohérence avant basculement.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-19-1" name="__codelineno-19-1" href="#__codelineno-19-1"></a>┌───────────────────────────────────────────────────────────────┐
<a id="__codelineno-19-2" name="__codelineno-19-2" href="#__codelineno-19-2"></a>│                  ARCHITECTURE DE MIGRATION PARALLÈLE          │
<a id="__codelineno-19-3" name="__codelineno-19-3" href="#__codelineno-19-3"></a>├───────────────────────────────────────────────────────────────┤
<a id="__codelineno-19-4" name="__codelineno-19-4" href="#__codelineno-19-4"></a>│                                                               │
<a id="__codelineno-19-5" name="__codelineno-19-5" href="#__codelineno-19-5"></a>│  Sources  ───┬───▶ [Pipeline Lambda Existant] ───▶ Résultats │
<a id="__codelineno-19-6" name="__codelineno-19-6" href="#__codelineno-19-6"></a>│  de          │                                       Batch    │
<a id="__codelineno-19-7" name="__codelineno-19-7" href="#__codelineno-19-7"></a>│  Données     │                                                │
<a id="__codelineno-19-8" name="__codelineno-19-8" href="#__codelineno-19-8"></a>│              │                                                │
<a id="__codelineno-19-9" name="__codelineno-19-9" href="#__codelineno-19-9"></a>│              └───▶ [Nouveau Streaming Lakehouse] ──▶ Résultats│
<a id="__codelineno-19-10" name="__codelineno-19-10" href="#__codelineno-19-10"></a>│                         Kafka → Flink → Iceberg    Temps Réel │
<a id="__codelineno-19-11" name="__codelineno-19-11" href="#__codelineno-19-11"></a>│                                                               │
<a id="__codelineno-19-12" name="__codelineno-19-12" href="#__codelineno-19-12"></a>│                              ▼                                │
<a id="__codelineno-19-13" name="__codelineno-19-13" href="#__codelineno-19-13"></a>│                    [Comparaison et Validation]                │
<a id="__codelineno-19-14" name="__codelineno-19-14" href="#__codelineno-19-14"></a>│                                                               │
<a id="__codelineno-19-15" name="__codelineno-19-15" href="#__codelineno-19-15"></a>└───────────────────────────────────────────────────────────────┘
</code></pre></div>
<p><em>Livrables</em> :
- Pipeline Streaming Lakehouse complet pour le cas pilote
- Tableaux de bord d'observabilité
- Runbooks opérationnels
- Formation des équipes de support</p>
<p><strong>Phase 3 : Extension et Consolidation (Mois 7-12)</strong></p>
<p>Cette phase étend le Streaming Lakehouse à des cas d'usage additionnels et commence le décommissionnement des systèmes legacy.</p>
<p><em>Objectifs</em> :
- Migrer 3 à 5 cas d'usage supplémentaires
- Intégrer les sources CDC pour les systèmes transactionnels
- Établir la gouvernance centralisée (catalogage, lignage, accès)
- Décommissionner les premiers pipelines batch redondants</p>
<p><em>Considérations critiques</em> :
- Maintenir une période de fonctionnement parallèle d'au moins 3 mois avant décommissionnement
- Documenter les différences sémantiques entre ancien et nouveau système
- Planifier la migration des consommateurs en coordination avec les équipes métier</p>
<p><strong>Phase 4 : Optimisation et Maturité (Année 2)</strong></p>
<p>Cette phase finalise la transition et optimise les coûts et performances.</p>
<p><em>Objectifs</em> :
- Décommissionner l'architecture Lambda complète
- Implémenter les patterns avancés (Shift Left, CDC complet)
- Optimiser les coûts (compaction, tiering, réservations)
- Établir les pratiques MLOps intégrées</p>
<blockquote>
<p><strong>Migration</strong><br />
<em>De</em> : Architecture Lambda avec ETL batch nocturnes<br />
<em>Vers</em> : Streaming Lakehouse unifié Kafka-Iceberg<br />
<em>Stratégie</em> : Migration progressive en 4 phases sur 12-18 mois. Fonctionnement parallèle obligatoire avant tout décommissionnement. Budget de contingence de 20 % pour les imprévus techniques.</p>
</blockquote>
<h3 id="resolution-des-problemes-courants">Résolution des Problèmes Courants<a class="headerlink" href="#resolution-des-problemes-courants" title="Permanent link">&para;</a></h3>
<p>L'exploitation d'un Streaming Lakehouse présente des défis opérationnels spécifiques. Cette section documente les problèmes les plus fréquents et leurs solutions.</p>
<p><strong>Problème : Consumer Lag Croissant</strong></p>
<p><em>Symptômes</em> : Le retard entre la production et la consommation des messages Kafka augmente progressivement, indiquant que les consommateurs ne parviennent pas à suivre le rythme d'ingestion.</p>
<p><em>Causes possibles</em> :
- Ressources de calcul insuffisantes (tâches Flink sous-dimensionnées)
- Backpressure dans le pipeline Flink dû à des opérations coûteuses
- Commits Iceberg trop fréquents créant des goulots d'étranglement</p>
<p><em>Diagnostic</em> :
<div class="highlight"><pre><span></span><code><a id="__codelineno-20-1" name="__codelineno-20-1" href="#__codelineno-20-1"></a><span class="c1"># Vérifier le consumer lag</span>
<a id="__codelineno-20-2" name="__codelineno-20-2" href="#__codelineno-20-2"></a>kafka-consumer-groups.sh<span class="w"> </span>--bootstrap-server<span class="w"> </span>kafka:9092<span class="w"> </span><span class="se">\</span>
<a id="__codelineno-20-3" name="__codelineno-20-3" href="#__codelineno-20-3"></a><span class="w">  </span>--describe<span class="w"> </span>--group<span class="w"> </span>flink-streaming-lakehouse
<a id="__codelineno-20-4" name="__codelineno-20-4" href="#__codelineno-20-4"></a>
<a id="__codelineno-20-5" name="__codelineno-20-5" href="#__codelineno-20-5"></a><span class="c1"># Identifier le backpressure Flink (si disponible)</span>
<a id="__codelineno-20-6" name="__codelineno-20-6" href="#__codelineno-20-6"></a>curl<span class="w"> </span>http://flink-jobmanager:8081/jobs/&lt;job-id&gt;/vertices/&lt;vertex-id&gt;/backpressure
</code></pre></div></p>
<p><em>Solutions</em> :
- Augmenter le parallélisme Flink (<code>SET 'parallelism.default' = '16';</code>)
- Optimiser les opérations coûteuses (éviter les aggregations non-bornées)
- Réduire la fréquence de checkpoint si elle est excessive
- Augmenter l'intervalle de commit Iceberg (5-15 minutes au lieu de 1 minute)</p>
<p><strong>Problème : Prolifération de Petits Fichiers</strong></p>
<p><em>Symptômes</em> : Les performances de requête sur les tables Iceberg se dégradent progressivement. Le nombre de fichiers par partition dépasse plusieurs centaines.</p>
<p><em>Causes possibles</em> :
- Commits trop fréquents générant de nombreux fichiers sous-dimensionnés
- Parallélisme d'écriture élevé combiné à un faible volume
- Compaction désactivée ou mal configurée</p>
<p><em>Diagnostic</em> :
<div class="highlight"><pre><span></span><code><a id="__codelineno-21-1" name="__codelineno-21-1" href="#__codelineno-21-1"></a><span class="c1">-- Analyser la distribution des fichiers</span>
<a id="__codelineno-21-2" name="__codelineno-21-2" href="#__codelineno-21-2"></a><span class="k">SELECT</span><span class="w"> </span>
<a id="__codelineno-21-3" name="__codelineno-21-3" href="#__codelineno-21-3"></a><span class="w">    </span><span class="n">partition</span><span class="p">,</span>
<a id="__codelineno-21-4" name="__codelineno-21-4" href="#__codelineno-21-4"></a><span class="w">    </span><span class="k">COUNT</span><span class="p">(</span><span class="o">*</span><span class="p">)</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">file_count</span><span class="p">,</span>
<a id="__codelineno-21-5" name="__codelineno-21-5" href="#__codelineno-21-5"></a><span class="w">    </span><span class="k">SUM</span><span class="p">(</span><span class="n">file_size_in_bytes</span><span class="p">)</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="mi">1024</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="mi">1024</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">total_size_mb</span><span class="p">,</span>
<a id="__codelineno-21-6" name="__codelineno-21-6" href="#__codelineno-21-6"></a><span class="w">    </span><span class="k">AVG</span><span class="p">(</span><span class="n">file_size_in_bytes</span><span class="p">)</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="mi">1024</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="mi">1024</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">avg_file_size_mb</span>
<a id="__codelineno-21-7" name="__codelineno-21-7" href="#__codelineno-21-7"></a><span class="k">FROM</span><span class="w"> </span><span class="n">prod</span><span class="p">.</span><span class="n">lakehouse</span><span class="p">.</span><span class="n">orders</span><span class="p">.</span><span class="n">files</span>
<a id="__codelineno-21-8" name="__codelineno-21-8" href="#__codelineno-21-8"></a><span class="k">GROUP</span><span class="w"> </span><span class="k">BY</span><span class="w"> </span><span class="n">partition</span>
<a id="__codelineno-21-9" name="__codelineno-21-9" href="#__codelineno-21-9"></a><span class="k">HAVING</span><span class="w"> </span><span class="n">file_count</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mi">100</span>
<a id="__codelineno-21-10" name="__codelineno-21-10" href="#__codelineno-21-10"></a><span class="k">ORDER</span><span class="w"> </span><span class="k">BY</span><span class="w"> </span><span class="n">file_count</span><span class="w"> </span><span class="k">DESC</span><span class="p">;</span>
</code></pre></div></p>
<p><em>Solutions</em> :
- Activer la compaction automatique avec des seuils appropriés
- Augmenter l'intervalle entre les commits
- Réduire le parallélisme d'écriture si le volume est faible
- Exécuter une compaction manuelle pour les tables problématiques</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-22-1" name="__codelineno-22-1" href="#__codelineno-22-1"></a><span class="c1">-- Compaction manuelle (Spark)</span>
<a id="__codelineno-22-2" name="__codelineno-22-2" href="#__codelineno-22-2"></a><span class="k">CALL</span><span class="w"> </span><span class="n">prod</span><span class="p">.</span><span class="k">system</span><span class="p">.</span><span class="n">rewrite_data_files</span><span class="p">(</span>
<a id="__codelineno-22-3" name="__codelineno-22-3" href="#__codelineno-22-3"></a><span class="w">    </span><span class="k">table</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="s1">&#39;lakehouse.orders&#39;</span><span class="p">,</span>
<a id="__codelineno-22-4" name="__codelineno-22-4" href="#__codelineno-22-4"></a><span class="w">    </span><span class="k">options</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="k">map</span><span class="p">(</span><span class="s1">&#39;target-file-size-bytes&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;268435456&#39;</span><span class="p">)</span><span class="w">  </span><span class="c1">-- 256 MB</span>
<a id="__codelineno-22-5" name="__codelineno-22-5" href="#__codelineno-22-5"></a><span class="p">);</span>
</code></pre></div>
<p><strong>Problème : Échecs de Checkpoint Flink</strong></p>
<p><em>Symptômes</em> : Les checkpoints Flink échouent régulièrement, provoquant des retours en arrière et des duplications potentielles.</p>
<p><em>Causes possibles</em> :
- Timeout de checkpoint trop court pour le volume d'état
- State backend mal configuré ou saturé
- Problèmes de connectivité avec le stockage des checkpoints</p>
<p><em>Solutions</em> :
- Augmenter le timeout de checkpoint (<code>execution.checkpointing.timeout: 10min</code>)
- Activer les checkpoints incrémentaux pour RocksDB
- Vérifier la latence vers le stockage S3/ADLS
- Réduire la taille de l'état en utilisant des TTL sur les états non nécessaires</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-23-1" name="__codelineno-23-1" href="#__codelineno-23-1"></a><span class="c1">// Configuration du TTL pour les états Flink</span>
<a id="__codelineno-23-2" name="__codelineno-23-2" href="#__codelineno-23-2"></a><span class="n">StateTtlConfig</span><span class="w"> </span><span class="n">ttlConfig</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">StateTtlConfig</span>
<a id="__codelineno-23-3" name="__codelineno-23-3" href="#__codelineno-23-3"></a><span class="w">    </span><span class="p">.</span><span class="na">newBuilder</span><span class="p">(</span><span class="n">Time</span><span class="p">.</span><span class="na">hours</span><span class="p">(</span><span class="mi">24</span><span class="p">))</span><span class="w">  </span><span class="c1">// Expiration après 24h d&#39;inactivité</span>
<a id="__codelineno-23-4" name="__codelineno-23-4" href="#__codelineno-23-4"></a><span class="w">    </span><span class="p">.</span><span class="na">setUpdateType</span><span class="p">(</span><span class="n">StateTtlConfig</span><span class="p">.</span><span class="na">UpdateType</span><span class="p">.</span><span class="na">OnReadAndWrite</span><span class="p">)</span>
<a id="__codelineno-23-5" name="__codelineno-23-5" href="#__codelineno-23-5"></a><span class="w">    </span><span class="p">.</span><span class="na">setStateVisibility</span><span class="p">(</span><span class="n">StateTtlConfig</span><span class="p">.</span><span class="na">StateVisibility</span><span class="p">.</span><span class="na">NeverReturnExpired</span><span class="p">)</span>
<a id="__codelineno-23-6" name="__codelineno-23-6" href="#__codelineno-23-6"></a><span class="w">    </span><span class="p">.</span><span class="na">build</span><span class="p">();</span>
<a id="__codelineno-23-7" name="__codelineno-23-7" href="#__codelineno-23-7"></a>
<a id="__codelineno-23-8" name="__codelineno-23-8" href="#__codelineno-23-8"></a><span class="n">ValueStateDescriptor</span><span class="o">&lt;</span><span class="n">UserState</span><span class="o">&gt;</span><span class="w"> </span><span class="n">stateDescriptor</span><span class="w"> </span><span class="o">=</span><span class="w"> </span>
<a id="__codelineno-23-9" name="__codelineno-23-9" href="#__codelineno-23-9"></a><span class="w">    </span><span class="k">new</span><span class="w"> </span><span class="n">ValueStateDescriptor</span><span class="o">&lt;&gt;</span><span class="p">(</span><span class="s">&quot;user-state&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">UserState</span><span class="p">.</span><span class="na">class</span><span class="p">);</span>
<a id="__codelineno-23-10" name="__codelineno-23-10" href="#__codelineno-23-10"></a><span class="n">stateDescriptor</span><span class="p">.</span><span class="na">enableTimeToLive</span><span class="p">(</span><span class="n">ttlConfig</span><span class="p">);</span>
</code></pre></div>
<p><strong>Problème : Divergence de Schéma entre Kafka et Iceberg</strong></p>
<p><em>Symptômes</em> : Les écritures vers Iceberg échouent avec des erreurs de schéma incompatible, bien que le Schema Registry accepte les évolutions.</p>
<p><em>Causes possibles</em> :
- Évolution de schéma dans le Registry non propagée vers Iceberg
- Types incompatibles entre Avro et Iceberg
- Champs obligatoires ajoutés sans valeur par défaut</p>
<p><em>Solutions</em> :
- Vérifier que l'évolution de schéma respecte les règles de compatibilité Iceberg
- Utiliser FULL ou FULL_TRANSITIVE pour une compatibilité stricte
- Toujours définir des valeurs par défaut pour les nouveaux champs
- Recréer le connecteur après évolution majeure si nécessaire</p>
<p><strong>Problème : Latence de Requête Élevée</strong></p>
<p><em>Symptômes</em> : Les requêtes analytiques sur les tables Iceberg prennent plusieurs minutes au lieu des secondes attendues.</p>
<p><em>Causes possibles</em> :
- Partitionnement inadapté aux patterns de requête
- Absence de pruning sur les prédicats de filtre
- Trop de fichiers nécessitant un scan complet
- Métriques de colonnes non maintenues</p>
<p><em>Solutions</em> :
- Analyser le plan d'exécution pour identifier les scans complets
- Revoir la stratégie de partitionnement
- Activer les statistiques de colonnes
- Considérer le tri (clustering) sur les colonnes de filtre fréquentes</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-24-1" name="__codelineno-24-1" href="#__codelineno-24-1"></a><span class="c1">-- Ajouter le tri sur les colonnes fréquemment filtrées (Spark)</span>
<a id="__codelineno-24-2" name="__codelineno-24-2" href="#__codelineno-24-2"></a><span class="k">ALTER</span><span class="w"> </span><span class="k">TABLE</span><span class="w"> </span><span class="n">prod</span><span class="p">.</span><span class="n">lakehouse</span><span class="p">.</span><span class="n">orders</span><span class="w"> </span>
<a id="__codelineno-24-3" name="__codelineno-24-3" href="#__codelineno-24-3"></a><span class="k">WRITE</span><span class="w"> </span><span class="n">ORDERED</span><span class="w"> </span><span class="k">BY</span><span class="w"> </span><span class="n">customer_id</span><span class="p">,</span><span class="w"> </span><span class="n">order_date</span><span class="p">;</span>
<a id="__codelineno-24-4" name="__codelineno-24-4" href="#__codelineno-24-4"></a>
<a id="__codelineno-24-5" name="__codelineno-24-5" href="#__codelineno-24-5"></a><span class="c1">-- Réécrire avec le nouveau tri</span>
<a id="__codelineno-24-6" name="__codelineno-24-6" href="#__codelineno-24-6"></a><span class="k">CALL</span><span class="w"> </span><span class="n">prod</span><span class="p">.</span><span class="k">system</span><span class="p">.</span><span class="n">rewrite_data_files</span><span class="p">(</span>
<a id="__codelineno-24-7" name="__codelineno-24-7" href="#__codelineno-24-7"></a><span class="w">    </span><span class="k">table</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="s1">&#39;lakehouse.orders&#39;</span><span class="p">,</span>
<a id="__codelineno-24-8" name="__codelineno-24-8" href="#__codelineno-24-8"></a><span class="w">    </span><span class="n">strategy</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="s1">&#39;sort&#39;</span>
<a id="__codelineno-24-9" name="__codelineno-24-9" href="#__codelineno-24-9"></a><span class="p">);</span>
</code></pre></div>
<h3 id="gestion-des-donnees-tardives">Gestion des Données Tardives<a class="headerlink" href="#gestion-des-donnees-tardives" title="Permanent link">&para;</a></h3>
<p>Dans un système de streaming, les données arrivent parfois avec un retard significatif par rapport à leur timestamp d'événement. Cette situation, fréquente dans les architectures IoT ou mobiles, nécessite une gestion explicite pour maintenir l'intégrité analytique.</p>
<p>Apache Flink utilise le concept de watermark pour délimiter la frontière entre les données attendues et les données tardives. Le watermark représente une assertion que tous les événements avec un timestamp inférieur sont arrivés (ou devraient être considérés comme tels).</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-25-1" name="__codelineno-25-1" href="#__codelineno-25-1"></a><span class="c1">-- Configuration du watermark avec tolérance pour les retards</span>
<a id="__codelineno-25-2" name="__codelineno-25-2" href="#__codelineno-25-2"></a><span class="k">CREATE</span><span class="w"> </span><span class="k">TABLE</span><span class="w"> </span><span class="n">mobile_events</span><span class="w"> </span><span class="p">(</span>
<a id="__codelineno-25-3" name="__codelineno-25-3" href="#__codelineno-25-3"></a><span class="w">    </span><span class="n">event_id</span><span class="w"> </span><span class="n">STRING</span><span class="p">,</span>
<a id="__codelineno-25-4" name="__codelineno-25-4" href="#__codelineno-25-4"></a><span class="w">    </span><span class="n">user_id</span><span class="w"> </span><span class="n">STRING</span><span class="p">,</span>
<a id="__codelineno-25-5" name="__codelineno-25-5" href="#__codelineno-25-5"></a><span class="w">    </span><span class="n">event_type</span><span class="w"> </span><span class="n">STRING</span><span class="p">,</span>
<a id="__codelineno-25-6" name="__codelineno-25-6" href="#__codelineno-25-6"></a><span class="w">    </span><span class="n">event_time</span><span class="w"> </span><span class="k">TIMESTAMP</span><span class="p">(</span><span class="mi">3</span><span class="p">),</span>
<a id="__codelineno-25-7" name="__codelineno-25-7" href="#__codelineno-25-7"></a><span class="w">    </span><span class="n">device_info</span><span class="w"> </span><span class="n">STRING</span><span class="p">,</span>
<a id="__codelineno-25-8" name="__codelineno-25-8" href="#__codelineno-25-8"></a><span class="w">    </span><span class="c1">-- Watermark avec tolérance de 5 minutes pour les événements mobiles</span>
<a id="__codelineno-25-9" name="__codelineno-25-9" href="#__codelineno-25-9"></a><span class="w">    </span><span class="n">WATERMARK</span><span class="w"> </span><span class="k">FOR</span><span class="w"> </span><span class="n">event_time</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="n">event_time</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="nb">INTERVAL</span><span class="w"> </span><span class="s1">&#39;5&#39;</span><span class="w"> </span><span class="k">MINUTE</span>
<a id="__codelineno-25-10" name="__codelineno-25-10" href="#__codelineno-25-10"></a><span class="p">)</span><span class="w"> </span><span class="k">WITH</span><span class="w"> </span><span class="p">(</span>
<a id="__codelineno-25-11" name="__codelineno-25-11" href="#__codelineno-25-11"></a><span class="w">    </span><span class="s1">&#39;connector&#39;</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;kafka&#39;</span><span class="p">,</span>
<a id="__codelineno-25-12" name="__codelineno-25-12" href="#__codelineno-25-12"></a><span class="w">    </span><span class="s1">&#39;topic&#39;</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;mobile.events&#39;</span><span class="p">,</span>
<a id="__codelineno-25-13" name="__codelineno-25-13" href="#__codelineno-25-13"></a><span class="w">    </span><span class="s1">&#39;properties.bootstrap.servers&#39;</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;kafka:9092&#39;</span><span class="p">,</span>
<a id="__codelineno-25-14" name="__codelineno-25-14" href="#__codelineno-25-14"></a><span class="w">    </span><span class="s1">&#39;format&#39;</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;avro-confluent&#39;</span><span class="p">,</span>
<a id="__codelineno-25-15" name="__codelineno-25-15" href="#__codelineno-25-15"></a><span class="w">    </span><span class="s1">&#39;avro-confluent.url&#39;</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;http://schema-registry:8081&#39;</span>
<a id="__codelineno-25-16" name="__codelineno-25-16" href="#__codelineno-25-16"></a><span class="p">);</span>
<a id="__codelineno-25-17" name="__codelineno-25-17" href="#__codelineno-25-17"></a>
<a id="__codelineno-25-18" name="__codelineno-25-18" href="#__codelineno-25-18"></a><span class="c1">-- Stratégie pour les données extrêmement tardives</span>
<a id="__codelineno-25-19" name="__codelineno-25-19" href="#__codelineno-25-19"></a><span class="c1">-- Option 1 : Table séparée pour les données tardives</span>
<a id="__codelineno-25-20" name="__codelineno-25-20" href="#__codelineno-25-20"></a><span class="k">CREATE</span><span class="w"> </span><span class="k">TABLE</span><span class="w"> </span><span class="n">late_mobile_events</span><span class="w"> </span><span class="p">(</span>
<a id="__codelineno-25-21" name="__codelineno-25-21" href="#__codelineno-25-21"></a><span class="w">    </span><span class="n">event_id</span><span class="w"> </span><span class="n">STRING</span><span class="p">,</span>
<a id="__codelineno-25-22" name="__codelineno-25-22" href="#__codelineno-25-22"></a><span class="w">    </span><span class="n">user_id</span><span class="w"> </span><span class="n">STRING</span><span class="p">,</span>
<a id="__codelineno-25-23" name="__codelineno-25-23" href="#__codelineno-25-23"></a><span class="w">    </span><span class="n">event_type</span><span class="w"> </span><span class="n">STRING</span><span class="p">,</span>
<a id="__codelineno-25-24" name="__codelineno-25-24" href="#__codelineno-25-24"></a><span class="w">    </span><span class="n">event_time</span><span class="w"> </span><span class="k">TIMESTAMP</span><span class="p">(</span><span class="mi">3</span><span class="p">),</span>
<a id="__codelineno-25-25" name="__codelineno-25-25" href="#__codelineno-25-25"></a><span class="w">    </span><span class="n">arrival_time</span><span class="w"> </span><span class="k">TIMESTAMP</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span><span class="w"> </span><span class="k">DEFAULT</span><span class="w"> </span><span class="n">PROCTIME</span><span class="p">(),</span>
<a id="__codelineno-25-26" name="__codelineno-25-26" href="#__codelineno-25-26"></a><span class="w">    </span><span class="k">PRIMARY</span><span class="w"> </span><span class="k">KEY</span><span class="w"> </span><span class="p">(</span><span class="n">event_id</span><span class="p">)</span><span class="w"> </span><span class="k">NOT</span><span class="w"> </span><span class="n">ENFORCED</span>
<a id="__codelineno-25-27" name="__codelineno-25-27" href="#__codelineno-25-27"></a><span class="p">)</span><span class="w"> </span><span class="k">WITH</span><span class="w"> </span><span class="p">(</span>
<a id="__codelineno-25-28" name="__codelineno-25-28" href="#__codelineno-25-28"></a><span class="w">    </span><span class="s1">&#39;connector&#39;</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;iceberg&#39;</span><span class="p">,</span>
<a id="__codelineno-25-29" name="__codelineno-25-29" href="#__codelineno-25-29"></a><span class="w">    </span><span class="s1">&#39;catalog-name&#39;</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;lakehouse&#39;</span><span class="p">,</span>
<a id="__codelineno-25-30" name="__codelineno-25-30" href="#__codelineno-25-30"></a><span class="w">    </span><span class="s1">&#39;database-name&#39;</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;staging&#39;</span><span class="p">,</span>
<a id="__codelineno-25-31" name="__codelineno-25-31" href="#__codelineno-25-31"></a><span class="w">    </span><span class="s1">&#39;table-name&#39;</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;late_mobile_events&#39;</span>
<a id="__codelineno-25-32" name="__codelineno-25-32" href="#__codelineno-25-32"></a><span class="p">);</span>
<a id="__codelineno-25-33" name="__codelineno-25-33" href="#__codelineno-25-33"></a>
<a id="__codelineno-25-34" name="__codelineno-25-34" href="#__codelineno-25-34"></a><span class="c1">-- Pipeline avec gestion des données tardives</span>
<a id="__codelineno-25-35" name="__codelineno-25-35" href="#__codelineno-25-35"></a><span class="k">INSERT</span><span class="w"> </span><span class="k">INTO</span><span class="w"> </span><span class="n">late_mobile_events</span>
<a id="__codelineno-25-36" name="__codelineno-25-36" href="#__codelineno-25-36"></a><span class="k">SELECT</span><span class="w"> </span>
<a id="__codelineno-25-37" name="__codelineno-25-37" href="#__codelineno-25-37"></a><span class="w">    </span><span class="n">event_id</span><span class="p">,</span>
<a id="__codelineno-25-38" name="__codelineno-25-38" href="#__codelineno-25-38"></a><span class="w">    </span><span class="n">user_id</span><span class="p">,</span>
<a id="__codelineno-25-39" name="__codelineno-25-39" href="#__codelineno-25-39"></a><span class="w">    </span><span class="n">event_type</span><span class="p">,</span>
<a id="__codelineno-25-40" name="__codelineno-25-40" href="#__codelineno-25-40"></a><span class="w">    </span><span class="n">event_time</span><span class="p">,</span>
<a id="__codelineno-25-41" name="__codelineno-25-41" href="#__codelineno-25-41"></a><span class="w">    </span><span class="n">PROCTIME</span><span class="p">()</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">arrival_time</span>
<a id="__codelineno-25-42" name="__codelineno-25-42" href="#__codelineno-25-42"></a><span class="k">FROM</span><span class="w"> </span><span class="n">mobile_events</span>
<a id="__codelineno-25-43" name="__codelineno-25-43" href="#__codelineno-25-43"></a><span class="k">WHERE</span><span class="w"> </span><span class="n">event_time</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">CURRENT_WATERMARK</span><span class="p">(</span><span class="n">event_time</span><span class="p">)</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="nb">INTERVAL</span><span class="w"> </span><span class="s1">&#39;5&#39;</span><span class="w"> </span><span class="k">MINUTE</span><span class="p">;</span>
</code></pre></div>
<p>Les données tardives capturées séparément peuvent ensuite être réconciliées via des processus batch périodiques qui mettent à jour les agrégations Iceberg. Le support des opérations MERGE d'Iceberg v2 facilite cette réconciliation.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-26-1" name="__codelineno-26-1" href="#__codelineno-26-1"></a><span class="c1">-- Réconciliation batch des données tardives (exécuté quotidiennement)</span>
<a id="__codelineno-26-2" name="__codelineno-26-2" href="#__codelineno-26-2"></a><span class="n">MERGE</span><span class="w"> </span><span class="k">INTO</span><span class="w"> </span><span class="n">analytics</span><span class="p">.</span><span class="n">daily_metrics</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="n">target</span>
<a id="__codelineno-26-3" name="__codelineno-26-3" href="#__codelineno-26-3"></a><span class="k">USING</span><span class="w"> </span><span class="p">(</span>
<a id="__codelineno-26-4" name="__codelineno-26-4" href="#__codelineno-26-4"></a><span class="w">    </span><span class="k">SELECT</span><span class="w"> </span>
<a id="__codelineno-26-5" name="__codelineno-26-5" href="#__codelineno-26-5"></a><span class="w">        </span><span class="nb">DATE</span><span class="p">(</span><span class="n">event_time</span><span class="p">)</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">metric_date</span><span class="p">,</span>
<a id="__codelineno-26-6" name="__codelineno-26-6" href="#__codelineno-26-6"></a><span class="w">        </span><span class="n">user_id</span><span class="p">,</span>
<a id="__codelineno-26-7" name="__codelineno-26-7" href="#__codelineno-26-7"></a><span class="w">        </span><span class="k">COUNT</span><span class="p">(</span><span class="o">*</span><span class="p">)</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">late_event_count</span><span class="p">,</span>
<a id="__codelineno-26-8" name="__codelineno-26-8" href="#__codelineno-26-8"></a><span class="w">        </span><span class="k">SUM</span><span class="p">(</span><span class="k">CASE</span><span class="w"> </span><span class="k">WHEN</span><span class="w"> </span><span class="n">event_type</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;purchase&#39;</span><span class="w"> </span><span class="k">THEN</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="k">ELSE</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="k">END</span><span class="p">)</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">late_purchases</span>
<a id="__codelineno-26-9" name="__codelineno-26-9" href="#__codelineno-26-9"></a><span class="w">    </span><span class="k">FROM</span><span class="w"> </span><span class="n">staging</span><span class="p">.</span><span class="n">late_mobile_events</span>
<a id="__codelineno-26-10" name="__codelineno-26-10" href="#__codelineno-26-10"></a><span class="w">    </span><span class="k">WHERE</span><span class="w"> </span><span class="n">arrival_time</span><span class="w"> </span><span class="o">&gt;=</span><span class="w"> </span><span class="k">CURRENT_DATE</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="nb">INTERVAL</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="k">DAY</span>
<a id="__codelineno-26-11" name="__codelineno-26-11" href="#__codelineno-26-11"></a><span class="w">    </span><span class="k">GROUP</span><span class="w"> </span><span class="k">BY</span><span class="w"> </span><span class="nb">DATE</span><span class="p">(</span><span class="n">event_time</span><span class="p">),</span><span class="w"> </span><span class="n">user_id</span>
<a id="__codelineno-26-12" name="__codelineno-26-12" href="#__codelineno-26-12"></a><span class="p">)</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="k">source</span>
<a id="__codelineno-26-13" name="__codelineno-26-13" href="#__codelineno-26-13"></a><span class="k">ON</span><span class="w"> </span><span class="n">target</span><span class="p">.</span><span class="n">metric_date</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">source</span><span class="p">.</span><span class="n">metric_date</span><span class="w"> </span>
<a id="__codelineno-26-14" name="__codelineno-26-14" href="#__codelineno-26-14"></a><span class="w">   </span><span class="k">AND</span><span class="w"> </span><span class="n">target</span><span class="p">.</span><span class="n">user_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">source</span><span class="p">.</span><span class="n">user_id</span>
<a id="__codelineno-26-15" name="__codelineno-26-15" href="#__codelineno-26-15"></a><span class="k">WHEN</span><span class="w"> </span><span class="n">MATCHED</span><span class="w"> </span><span class="k">THEN</span><span class="w"> </span><span class="k">UPDATE</span><span class="w"> </span><span class="k">SET</span>
<a id="__codelineno-26-16" name="__codelineno-26-16" href="#__codelineno-26-16"></a><span class="w">    </span><span class="n">event_count</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">target</span><span class="p">.</span><span class="n">event_count</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="k">source</span><span class="p">.</span><span class="n">late_event_count</span><span class="p">,</span>
<a id="__codelineno-26-17" name="__codelineno-26-17" href="#__codelineno-26-17"></a><span class="w">    </span><span class="n">purchase_count</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">target</span><span class="p">.</span><span class="n">purchase_count</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="k">source</span><span class="p">.</span><span class="n">late_purchases</span><span class="p">,</span>
<a id="__codelineno-26-18" name="__codelineno-26-18" href="#__codelineno-26-18"></a><span class="w">    </span><span class="n">last_updated</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">CURRENT_TIMESTAMP</span>
<a id="__codelineno-26-19" name="__codelineno-26-19" href="#__codelineno-26-19"></a><span class="k">WHEN</span><span class="w"> </span><span class="k">NOT</span><span class="w"> </span><span class="n">MATCHED</span><span class="w"> </span><span class="k">THEN</span><span class="w"> </span><span class="k">INSERT</span><span class="w"> </span><span class="p">(</span><span class="n">metric_date</span><span class="p">,</span><span class="w"> </span><span class="n">user_id</span><span class="p">,</span><span class="w"> </span><span class="n">event_count</span><span class="p">,</span><span class="w"> </span><span class="n">purchase_count</span><span class="p">,</span><span class="w"> </span><span class="n">last_updated</span><span class="p">)</span>
<a id="__codelineno-26-20" name="__codelineno-26-20" href="#__codelineno-26-20"></a><span class="k">VALUES</span><span class="w"> </span><span class="p">(</span><span class="k">source</span><span class="p">.</span><span class="n">metric_date</span><span class="p">,</span><span class="w"> </span><span class="k">source</span><span class="p">.</span><span class="n">user_id</span><span class="p">,</span><span class="w"> </span><span class="k">source</span><span class="p">.</span><span class="n">late_event_count</span><span class="p">,</span><span class="w"> </span><span class="k">source</span><span class="p">.</span><span class="n">late_purchases</span><span class="p">,</span><span class="w"> </span><span class="k">CURRENT_TIMESTAMP</span><span class="p">);</span>
</code></pre></div>
<p>Cette approche hybride combine la faible latence du streaming pour la majorité des données avec la complétude du batch pour les données tardives, offrant le meilleur des deux mondes.</p>
<h3 id="architecture-de-reference-du-streaming-lakehouse">Architecture de référence du Streaming Lakehouse<a class="headerlink" href="#architecture-de-reference-du-streaming-lakehouse" title="Permanent link">&para;</a></h3>
<p>L'architecture de référence du Streaming Lakehouse repose sur un pipeline de bout en bout qui unifie l'ingestion événementielle, la transformation en vol et la persistance analytique dans un cadre cohérent. Cette architecture élimine la dichotomie traditionnelle entre les systèmes temps réel et les entrepôts analytiques en établissant un flux continu depuis les sources opérationnelles jusqu'aux couches de requêtage.</p>
<p>Le pipeline canonique s'articule autour de cinq étapes fondamentales. Les <strong>sources de données</strong> — bases transactionnelles, capteurs IoT, événements applicatifs, interactions utilisateur — émettent des événements capturés via Change Data Capture (Debezium), SDK producteur Kafka ou connecteurs natifs. Ces événements transitent par <strong>Apache Kafka</strong>, qui assure le découplage temporel, la durabilité et la distribution ordonnée des flux. La <strong>couche de transformation</strong>, implémentée via Kafka Connect, Apache Flink ou Confluent Tableflow, applique les enrichissements, validations et restructurations nécessaires avant l'écriture. Les données transformées sont matérialisées en <strong>tables Apache Iceberg</strong>, qui garantissent les propriétés ACID, le time travel et l'évolution de schéma sur un stockage objet (S3, GCS, ADLS). Enfin, les <strong>moteurs de requêtes</strong> — Trino, Spark SQL, Dremio, Snowflake — exploitent le catalogue Iceberg pour servir les analyses ad hoc, les tableaux de bord opérationnels et les pipelines d'apprentissage automatique.</p>
<p>Cette architecture unifiée procure des avantages structurels majeurs. Elle élimine la duplication de données et de logique inhérente à l'architecture Lambda. Elle offre une <strong>latence configurable</strong> allant du quasi-temps réel (secondes) au micro-batch (minutes), selon les exigences métier. Elle garantit une <strong>cohérence sémantique</strong> de bout en bout grâce au Schema Registry et aux contrats de données. Enfin, elle permet une <strong>gouvernance centralisée</strong> des données en mouvement et au repos au sein d'un catalogue unifié.</p>
<pre class="mermaid"><code>flowchart LR
    subgraph Sources["Sources de données"]
        DB[(Bases transactionnelles)]
        IoT[Capteurs IoT]
        Apps[Événements applicatifs]
        CDC[Change Data Capture]
    end

    subgraph Kafka["Apache Kafka"]
        Topics[Topics Kafka]
        SR[Schema Registry]
    end

    subgraph Transformation["Couche de transformation"]
        KC[Kafka Connect\nIceberg Sink]
        Flink[Apache Flink]
        TF[Confluent\nTableflow]
    end

    subgraph Lakehouse["Lakehouse Iceberg"]
        Bronze[Couche Bronze\nDonnées brutes]
        Silver[Couche Silver\nDonnées nettoyées]
        Gold[Couche Gold\nAgrégations métier]
    end

    subgraph Requetes["Moteurs de requêtes"]
        Trino[Trino / Presto]
        SparkSQL[Spark SQL]
        Dremio[Dremio]
        Snow[Snowflake]
    end

    DB --&gt; CDC --&gt; Topics
    IoT --&gt; Topics
    Apps --&gt; Topics
    Topics --&gt; SR
    Topics --&gt; KC --&gt; Bronze
    Topics --&gt; Flink --&gt; Silver
    Topics --&gt; TF --&gt; Bronze
    Bronze --&gt; Silver --&gt; Gold
    Gold --&gt; Trino
    Gold --&gt; SparkSQL
    Gold --&gt; Dremio
    Gold --&gt; Snow
    Silver --&gt; Trino
    Silver --&gt; SparkSQL</code></pre>
<h3 id="patrons-de-connecteurs-kafka-iceberg">Patrons de connecteurs Kafka-Iceberg<a class="headerlink" href="#patrons-de-connecteurs-kafka-iceberg" title="Permanent link">&para;</a></h3>
<p>La matérialisation des flux Kafka en tables Iceberg peut s'effectuer selon plusieurs patrons architecturaux, chacun répondant à des exigences distinctes en termes de complexité opérationnelle, de flexibilité de transformation et de garanties de latence. Le choix du patron approprié conditionne la capacité de l'organisation à évoluer et à maintenir son pipeline de données.</p>
<p>Le <strong>Kafka Connect Iceberg Sink Connector</strong> constitue l'approche la plus éprouvée pour les scénarios d'ingestion directe. Fonctionnant au sein de l'écosystème Kafka Connect, il bénéficie de la gestion native des offsets, de la scalabilité horizontale via les tâches distribuées et de l'intégration transparente avec le Schema Registry. Ce patron convient aux organisations disposant d'une infrastructure Connect existante et dont les besoins de transformation se limitent aux Single Message Transforms (SMT).</p>
<p><strong>Apache Flink avec sink Iceberg</strong> offre le plus haut degré de flexibilité grâce à ses capacités de traitement stateful, de fenêtrage temporel et de jointures entre flux. Le Dynamic Iceberg Sink, introduit récemment, permet le routage dynamique vers plusieurs tables et l'évolution automatique des schémas. Ce patron est privilégié lorsque les données nécessitent des transformations complexes, des agrégations en temps réel ou un enrichissement par référence croisée avant la persistance.</p>
<p><strong>Spark Structured Streaming vers Iceberg</strong> s'adresse aux organisations dont l'écosystème analytique repose déjà sur Apache Spark. Ce patron exploite le moteur de micro-batch de Spark pour écrire incrémentalement vers des tables Iceberg, avec le support natif des opérations MERGE pour la gestion des upserts. Il convient particulièrement aux pipelines qui combinent ingestion streaming et retraitement batch au sein du même framework.</p>
<p><strong>Confluent Tableflow</strong> représente l'approche Zero-ETL, où la matérialisation est entièrement gérée par la plateforme sans code ni configuration de pipeline. Ce patron minimise la charge opérationnelle mais limite les possibilités de transformation pré-écriture.</p>
<table>
<thead>
<tr>
<th>Critère</th>
<th>Kafka Connect Sink</th>
<th>Apache Flink</th>
<th>Spark Structured Streaming</th>
<th>Tableflow</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>Complexité de déploiement</strong></td>
<td>Moyenne</td>
<td>Élevée</td>
<td>Moyenne</td>
<td>Minimale</td>
</tr>
<tr>
<td><strong>Flexibilité de transformation</strong></td>
<td>Limitée (SMT)</td>
<td>Maximale</td>
<td>Élevée</td>
<td>Aucune</td>
</tr>
<tr>
<td><strong>Latence typique</strong></td>
<td>1-5 minutes</td>
<td>Secondes à minutes</td>
<td>1-10 minutes</td>
<td>1-5 minutes</td>
</tr>
<tr>
<td><strong>Garantie exactly-once</strong></td>
<td>Oui (avec config)</td>
<td>Oui (checkpoint)</td>
<td>Oui (WAL + commit)</td>
<td>Oui (natif)</td>
</tr>
<tr>
<td><strong>Évolution de schéma</strong></td>
<td>Via Schema Registry</td>
<td>Dynamique</td>
<td>Via Spark schema merge</td>
<td>Automatique</td>
</tr>
<tr>
<td><strong>Gestion des offsets</strong></td>
<td>Native (Connect)</td>
<td>Checkpoint Flink</td>
<td>Checkpoint Spark</td>
<td>Gérée par plateforme</td>
</tr>
<tr>
<td><strong>Scalabilité</strong></td>
<td>Horizontale (tâches)</td>
<td>Horizontale (slots)</td>
<td>Horizontale (executors)</td>
<td>Élastique (cloud)</td>
</tr>
<tr>
<td><strong>Cas d'usage privilégié</strong></td>
<td>Ingestion directe</td>
<td>Transformation complexe</td>
<td>Écosystème Spark existant</td>
<td>Matérialisation simple</td>
</tr>
</tbody>
</table>
<h3 id="gestion-des-schemas-entre-kafka-et-iceberg">Gestion des schémas entre Kafka et Iceberg<a class="headerlink" href="#gestion-des-schemas-entre-kafka-et-iceberg" title="Permanent link">&para;</a></h3>
<p>La cohérence des schémas entre Apache Kafka et Apache Iceberg constitue un enjeu architectural critique dans le Streaming Lakehouse. Ces deux systèmes maintiennent des représentations distinctes de la structure des données — le Schema Registry pour Kafka, les métadonnées de table pour Iceberg — et leur synchronisation détermine la fiabilité de l'ensemble du pipeline.</p>
<p>Le <strong>Schema Registry de Confluent</strong> agit comme autorité centrale pour les contrats de données côté streaming. Chaque topic Kafka est associé à un schéma versionné (Avro, Protobuf ou JSON Schema) qui régit la sérialisation et la validation des messages. Côté Lakehouse, <strong>Apache Iceberg</strong> maintient son propre mécanisme d'évolution de schéma, permettant l'ajout, la suppression, le renommage et la réorganisation des colonnes sans réécriture des données existantes. La passerelle entre ces deux mondes repose sur la conversion automatique des types : les schémas Avro ou Protobuf sont traduits en types Iceberg lors de l'écriture, avec une correspondance déterministe (par exemple, <code>bytes</code> avec <code>logicalType: decimal</code> en Avro devient <code>DECIMAL(p, s)</code> en Iceberg).</p>
<p>La <strong>sérialisation Avro ou Protobuf</strong> des messages Kafka est convertie en format <strong>Parquet</strong> lors de la matérialisation en tables Iceberg. Cette conversion préserve la richesse typologique — types logiques, unions, types imbriqués — tout en bénéficiant de la compression colonnaire et du pushdown de prédicats propres à Parquet. Les connecteurs (Kafka Connect Sink, Flink, Tableflow) gèrent cette conversion de manière transparente, mais les cas limites (unions complexes Avro, types <code>oneof</code> Protobuf) nécessitent une attention particulière lors de la conception des schémas.</p>
<p>La <strong>gestion de la compatibilité</strong> exige une stratégie coordonnée. Le mode <code>FULL_TRANSITIVE</code> du Schema Registry garantit que chaque version de schéma est compatible en lecture et en écriture avec toutes les versions précédentes. Côté Iceberg, les opérations d'évolution — <code>ADD COLUMN</code>, <code>DROP COLUMN</code>, <code>RENAME COLUMN</code> — doivent être alignées avec les règles de compatibilité du Registry. Une pratique recommandée consiste à configurer un webhook ou un processus de synchronisation qui propage automatiquement les évolutions de schéma du Registry vers le catalogue Iceberg, assurant ainsi une cohérence bidirectionnelle permanente.</p>
<h3 id="cas-dusage-en-contexte-dentreprise-agentique">Cas d'usage en contexte d'entreprise agentique<a class="headerlink" href="#cas-dusage-en-contexte-dentreprise-agentique" title="Permanent link">&para;</a></h3>
<p>Dans le cadre d'une entreprise agentique — où des agents autonomes collaborent pour exécuter des processus métier complexes — le Streaming Lakehouse devient l'infrastructure fondamentale de traçabilité, d'observabilité et d'intelligence analytique. Trois cas d'usage illustrent cette convergence.</p>
<p><strong>L'ingestion de télémétrie d'agents via Kafka vers Iceberg</strong> constitue le premier pilier. Chaque agent autonome — qu'il s'agisse d'un agent conversationnel, d'un orchestrateur de workflow ou d'un agent décisionnel — émet un flux continu d'événements de télémétrie : invocations de modèles, temps de réponse, tokens consommés, décisions prises, outils appelés. Ces événements sont publiés sur des topics Kafka dédiés (<code>agents.telemetry.*</code>), puis matérialisés en tables Iceberg partitionnées par agent, par jour et par type d'événement. Cette architecture permet une analyse rétrospective à granularité fine du comportement de chaque agent, essentielle pour l'optimisation des prompts, la détection de dérives et le capacity planning.</p>
<p><strong>La piste d'audit décisionnelle en temps réel</strong> répond aux exigences de gouvernance et de conformité réglementaire. Chaque décision prise par un agent — approbation d'un crédit, recommandation d'un produit, escalade vers un humain — est enregistrée dans un flux Kafka immuable avec l'intégralité du contexte décisionnel (entrées, raisonnement, sorties, niveau de confiance). La matérialisation en tables Iceberg avec time travel garantit une auditabilité complète : les régulateurs peuvent reconstituer l'état exact des données et du raisonnement au moment de toute décision passée, conformément aux exigences de la Loi 25 au Québec et de la directive européenne sur l'IA.</p>
<p><strong>L'analytique comportementale Lakehouse</strong> exploite l'historique accumulé dans les tables Iceberg pour identifier des patrons émergents dans le comportement collectif des agents. Les requêtes analytiques sur les couches Silver et Gold du Lakehouse permettent de détecter des anomalies (un agent qui dévie de sa politique), d'optimiser les stratégies de collaboration inter-agents, et de mesurer l'impact métier des décisions autonomes. Le time travel d'Iceberg facilite les analyses comparatives entre différentes versions de politiques d'agents, transformant le Lakehouse en laboratoire d'expérimentation continue.</p>
<hr />
<h2 id="iv123-resume">IV.12.3 Résumé<a class="headerlink" href="#iv123-resume" title="Permanent link">&para;</a></h2>
<p>Ce chapitre a retracé l'évolution des architectures de données depuis l'approche Lambda hybride jusqu'au Streaming Lakehouse moderne unifié. Les points essentiels à retenir sont structurés ci-dessous.</p>
<h3 id="levolution-architecturale">L'Évolution Architecturale<a class="headerlink" href="#levolution-architecturale" title="Permanent link">&para;</a></h3>
<p>L'architecture Lambda (2011) a posé les fondations en reconnaissant le besoin de combiner traitement batch et temps réel. Cependant, sa dualité intrinsèque engendre une duplication de code, une divergence des résultats et une complexité opérationnelle qui deviennent rapidement insurmontables à l'échelle de l'entreprise.</p>
<p>L'architecture Kappa (2014) a simplifié radicalement l'approche en traitant toutes les données comme un flux continu, avec le journal Kafka comme source de vérité unique. Cette unification élimine la duplication mais limite l'accès SQL et peut s'avérer coûteuse pour le stockage long terme.</p>
<p>Le Data Lakehouse (2017+) a apporté les garanties transactionnelles et l'interrogation SQL aux lacs de données via des formats comme Apache Iceberg, mais reste fondamentalement orienté batch.</p>
<p>Le Streaming Lakehouse (2023+) synthétise ces approches en combinant Kafka pour les données en mouvement et Iceberg pour les données au repos, avec une matérialisation automatique entre les deux couches. Cette architecture unifie enfin streaming et analytique dans une plateforme cohérente.</p>
<h3 id="le-role-central-de-kafka-et-confluent">Le Rôle Central de Kafka et Confluent<a class="headerlink" href="#le-role-central-de-kafka-et-confluent" title="Permanent link">&para;</a></h3>
<p>Apache Kafka s'impose comme la colonne vertébrale événementielle du Streaming Lakehouse, offrant le découplage, la persistance et l'ordonnancement nécessaires à une architecture de données fiable.</p>
<p>Tableflow de Confluent révolutionne l'intégration Kafka-Iceberg en éliminant les pipelines ETL traditionnels. La matérialisation automatique des topics en tables Iceberg, avec gestion native de l'évolution de schéma et de la compaction, réduit drastiquement la complexité opérationnelle.</p>
<p>Le Schema Registry assure la gouvernance des contrats de données entre producteurs et consommateurs, garantissant la cohérence structurelle de bout en bout.</p>
<h3 id="patterns-dimplementation">Patterns d'Implémentation<a class="headerlink" href="#patterns-dimplementation" title="Permanent link">&para;</a></h3>
<p>Trois patterns principaux permettent l'alimentation du Lakehouse depuis Kafka :</p>
<ol>
<li><strong>Tableflow</strong> pour une matérialisation simple sans code</li>
<li><strong>Kafka Connect</strong> avec Iceberg Sink pour une intégration flexible avec contrôle fin</li>
<li><strong>Apache Flink</strong> pour les transformations complexes et le routage dynamique</li>
</ol>
<p>Le choix du pattern dépend des exigences de transformation, de l'expertise existante et du niveau de contrôle souhaité.</p>
<h3 id="considerations-operationnelles">Considérations Opérationnelles<a class="headerlink" href="#considerations-operationnelles" title="Permanent link">&para;</a></h3>
<p>L'observabilité de bout en bout est essentielle, couvrant les métriques Kafka (consumer lag, throughput), Flink (checkpointing, backpressure) et Iceberg (commits, file count, compaction).</p>
<p>La fréquence de commit constitue le principal levier de compromis entre latence et efficacité du stockage. Une compaction automatique bien configurée maintient les performances de requête.</p>
<h3 id="recommandations-strategiques">Recommandations Stratégiques<a class="headerlink" href="#recommandations-strategiques" title="Permanent link">&para;</a></h3>
<p>Pour les organisations qui entreprennent la transition vers le Streaming Lakehouse, les recommandations suivantes guident l'adoption :</p>
<ol>
<li>
<p><strong>Commencer par les cas d'usage à haute valeur</strong> où la latence actuelle constitue un frein tangible (détection de fraude, pricing dynamique, tableaux de bord temps réel)</p>
</li>
<li>
<p><strong>Adopter le pattern Shift Left</strong> en déplaçant la gouvernance et la qualité des données vers la couche streaming plutôt que dans des processus ETL tardifs</p>
</li>
<li>
<p><strong>Standardiser sur Apache Iceberg</strong> comme format de table pour maximiser l'interopérabilité entre les moteurs de consommation</p>
</li>
<li>
<p><strong>Investir dans l'observabilité</strong> de bout en bout, du producteur Kafka jusqu'aux requêtes analytiques sur Iceberg</p>
</li>
<li>
<p><strong>Considérer Tableflow</strong> pour les nouveaux cas d'usage afin de minimiser le code et la maintenance opérationnelle</p>
</li>
<li>
<p><strong>Planifier la migration incrémentale</strong> depuis Lambda ou les architectures batch existantes, en maintenant les systèmes en parallèle pendant la transition</p>
</li>
<li>
<p><strong>Assurer la souveraineté des données</strong> en déployant tous les composants (Kafka, Flink, stockage Iceberg) dans des régions canadiennes pour la conformité Loi 25 et LPRPDE</p>
</li>
</ol>
<p>Le Streaming Lakehouse représente l'état de l'art pour les architectures de données modernes. En unifiant les données en mouvement et au repos sous une gouvernance commune, il permet aux organisations de répondre aux exigences de temps réel sans sacrifier la complétude historique ni la rigueur analytique. Pour les organisations canadiennes, cette architecture offre en outre un cadre robuste pour la conformité réglementaire grâce à sa traçabilité inhérente et son support natif des opérations d'effacement.</p>
<hr />
<h2 id="references">Références<a class="headerlink" href="#references" title="Permanent link">&para;</a></h2>
<ol>
<li>
<p>Confluent (2025). <em>Introducing Tableflow: Unifying Streaming and Analytics</em>. Documentation technique Confluent.</p>
</li>
<li>
<p>Apache Flink (2025). <em>From Stream to Lakehouse: Kafka Ingestion with the Flink Dynamic Iceberg Sink</em>. Blog officiel Apache Flink.</p>
</li>
<li>
<p>Waehner, K. (2025). <em>The Rise of Kappa Architecture in the Era of Agentic AI and Data Streaming</em>. Blog technique.</p>
</li>
<li>
<p>Waehner, K. (2025). <em>Data Streaming Meets Lakehouse: Apache Iceberg for Unified Real-Time and Batch Analytics</em>. Présentation Open Source Data Summit.</p>
</li>
<li>
<p>Ververica (2025). <em>From Kappa Architecture to Streamhouse: Making the Lakehouse Real-Time</em>. Documentation technique.</p>
</li>
<li>
<p>StreamNative (2025). <em>Ursa Wins VLDB 2025 Best Industry Paper: The First Lakehouse-Native Streaming Engine for Kafka</em>. Communiqué de presse.</p>
</li>
<li>
<p>Apache Iceberg (2025). <em>Flink Getting Started</em>. Documentation officielle.</p>
</li>
<li>
<p>Merced, A. (2024). <em>2025 Guide to Architecting an Iceberg Lakehouse</em>. Medium.</p>
</li>
<li>
<p>Kreps, J. (2014). <em>Questioning the Lambda Architecture</em>. Blog O'Reilly.</p>
</li>
<li>
<p>Marz, N. (2011). <em>How to beat the CAP theorem</em>. Blog personnel.</p>
</li>
</ol>
<hr />
<h3 id="references-croisees">Références croisées<a class="headerlink" href="#references-croisees" title="Permanent link">&para;</a></h3>
<ul>
<li><strong>Fondamentaux Apache Kafka et Confluent</strong> : voir aussi <a href="../../Volume_II_Infrastructure_Agentique/Chapitre_II.2_Fondamentaux_Apache_Kafka_Confluent/">Chapitre II.2 -- Fondamentaux Apache Kafka et Confluent</a></li>
<li><strong>Conception d'applications de streaming</strong> : voir aussi <a href="../../Volume_III_Apache_Kafka_Guide_Architecte/Chapitre_III.8_Conception_Application_Streaming/">Chapitre III.8 -- Conception d'Applications de Streaming</a></li>
</ul>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg>
  Retour en haut de la page
</button>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
        
<div class="md-social">
  
    
    
    
    
      
      
    
    <a href="https://github.com/agbruneau/CorpusInformatique" target="_blank" rel="noopener" title="github.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M173.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M252.8 8C114.1 8 8 113.3 8 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C436.2 457.8 504 362.9 504 252 504 113.3 391.5 8 252.8 8M105.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg>
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      
      <script id="__config" type="application/json">{"annotate": null, "base": "../../..", "features": ["navigation.tabs", "navigation.sections", "navigation.expand", "navigation.top", "navigation.indexes", "toc.integrate", "search.suggest", "search.highlight", "content.code.copy"], "search": "../../../assets/javascripts/workers/search.2c215733.min.js", "tags": null, "translations": {"clipboard.copied": "Copi\u00e9 dans le presse-papier", "clipboard.copy": "Copier dans le presse-papier", "search.result.more.one": "1 de plus sur cette page", "search.result.more.other": "# de plus sur cette page", "search.result.none": "Aucun document trouv\u00e9", "search.result.one": "1 document trouv\u00e9", "search.result.other": "# documents trouv\u00e9s", "search.result.placeholder": "Taper pour d\u00e9marrer la recherche", "search.result.term.missing": "Non trouv\u00e9", "select.version": "S\u00e9lectionner la version"}, "version": null}</script>
    
    
      <script src="../../../assets/javascripts/bundle.79ae519e.min.js"></script>
      
        <script src="https://unpkg.com/mathjax@3/es5/tex-mml-chtml.js"></script>
      
    
  </body>
</html>