
<!doctype html>
<html lang="fr" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="Corpus encyclopédique francophone — science informatique, interopérabilité et entreprise agentique">
      
      
        <meta name="author" content="André-Guy Bruneau">
      
      
        <link rel="canonical" href="https://agbruneau.github.io/CorpusInformatique/III%20-%20Entreprise%20Agentique/Volume_III_Apache_Kafka_Guide_Architecte/Chapitre_III.6_Contrats_Donnees/">
      
      
        <link rel="prev" href="../Chapitre_III.5_Cas_Utilisation_Kafka/">
      
      
        <link rel="next" href="../Chapitre_III.7_Patrons_Interaction_Kafka/">
      
      
        
      
      
      <link rel="icon" href="../../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.7.2">
    
    
      
        <title>III.6 — Contrats de données - Corpus Informatique</title>
      
    
    
      <link rel="stylesheet" href="../../../assets/stylesheets/main.484c7ddc.min.css">
      
        
        <link rel="stylesheet" href="../../../assets/stylesheets/palette.ab4e12ef.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../../css/extra.css">
    
    <script>__md_scope=new URL("../../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#chapitre-iii6" class="md-skip">
          Aller au contenu
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="En-tête">
    <a href="../../.." title="Corpus Informatique" class="md-header__button md-logo" aria-label="Corpus Informatique" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Corpus Informatique
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              III.6 — Contrats de données
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Passer au mode sombre"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Passer au mode sombre" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a4 4 0 0 0-4 4 4 4 0 0 0 4 4 4 4 0 0 0 4-4 4 4 0 0 0-4-4m0 10a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="slate" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Passer au mode clair"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Passer au mode clair" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12s-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6a6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Rechercher" placeholder="Rechercher" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Recherche">
        
        <button type="reset" class="md-search__icon md-icon" title="Effacer" aria-label="Effacer" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initialisation de la recherche
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
      <div class="md-header__source">
        <a href="https://github.com/agbruneau/CorpusInformatique" title="Aller au dépôt" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg>
  </div>
  <div class="md-source__repository">
    agbruneau/CorpusInformatique
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
            
<nav class="md-tabs" aria-label="Onglets" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../../.." class="md-tabs__link">
        
  
  
    
  
  Accueil

      </a>
    </li>
  

      
        
  
  
  
  
    
    
      
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../I%20-%20Science%20et%20G%C3%A9nie%20Informatique/Volume_I_Fondements_Mathematiques_Theorie/Chapitre_I.1_Fondements_Logiques_Raisonnement/" class="md-tabs__link">
          
  
  
    
  
  I — Science et Génie Informatique

        </a>
      </li>
    
  

    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../II%20-%20Interop%C3%A9rabilit%C3%A9/Chapitre_II.1_Introduction_Problematique/" class="md-tabs__link">
          
  
  
    
  
  II — Interopérabilité

        </a>
      </li>
    
  

      
        
  
  
  
    
  
  
    
    
      
  
  
  
    
  
  
    
    
      <li class="md-tabs__item md-tabs__item--active">
        <a href="../../Volume_I_Fondations_Entreprise_Agentique/Chapitre_I.1_Crise_Integration_Systemique/" class="md-tabs__link">
          
  
  
    
  
  III — Entreprise Agentique

        </a>
      </li>
    
  

    
  

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


  

<nav class="md-nav md-nav--primary md-nav--lifted md-nav--integrated" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../../.." title="Corpus Informatique" class="md-nav__button md-logo" aria-label="Corpus Informatique" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    Corpus Informatique
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/agbruneau/CorpusInformatique" title="Aller au dépôt" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg>
  </div>
  <div class="md-source__repository">
    agbruneau/CorpusInformatique
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../.." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Accueil
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_2" >
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    I — Science et Génie Informatique
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            
  
    I — Science et Génie Informatique
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_2_1" >
        
          
          <label class="md-nav__link" for="__nav_2_1" id="__nav_2_1_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Volume I — Fondements Mathématiques et Théorie de l'Informatique
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_1">
            <span class="md-nav__icon md-icon"></span>
            
  
    Volume I — Fondements Mathématiques et Théorie de l'Informatique
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../I%20-%20Science%20et%20G%C3%A9nie%20Informatique/Volume_I_Fondements_Mathematiques_Theorie/Chapitre_I.1_Fondements_Logiques_Raisonnement/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    I.1 — Fondements logiques et raisonnement
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../I%20-%20Science%20et%20G%C3%A9nie%20Informatique/Volume_I_Fondements_Mathematiques_Theorie/Chapitre_I.2_Structures_Discretes_Combinatoire/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    I.2 — Structures discrètes et combinatoire
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../I%20-%20Science%20et%20G%C3%A9nie%20Informatique/Volume_I_Fondements_Mathematiques_Theorie/Chapitre_I.3_Theorie_Graphes/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    I.3 — Théorie des graphes
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../I%20-%20Science%20et%20G%C3%A9nie%20Informatique/Volume_I_Fondements_Mathematiques_Theorie/Chapitre_I.4_Langages_Formels_Automates/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    I.4 — Langages formels et automates
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../I%20-%20Science%20et%20G%C3%A9nie%20Informatique/Volume_I_Fondements_Mathematiques_Theorie/Chapitre_I.5_Calculabilite_Decidabilite/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    I.5 — Calculabilité et décidabilité
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../I%20-%20Science%20et%20G%C3%A9nie%20Informatique/Volume_I_Fondements_Mathematiques_Theorie/Chapitre_I.6_Theorie_Complexite/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    I.6 — Théorie de la complexité
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_2_2" >
        
          
          <label class="md-nav__link" for="__nav_2_2" id="__nav_2_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Volume II — Architecture des Ordinateurs et Systèmes Numériques
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_2">
            <span class="md-nav__icon md-icon"></span>
            
  
    Volume II — Architecture des Ordinateurs et Systèmes Numériques
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../I%20-%20Science%20et%20G%C3%A9nie%20Informatique/Volume_II_Architecture_Ordinateurs_Systemes_Numeriques/Chapitre_I.7_Systemes_Numeriques_Donnees/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    I.7 — Systèmes numériques et données
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../I%20-%20Science%20et%20G%C3%A9nie%20Informatique/Volume_II_Architecture_Ordinateurs_Systemes_Numeriques/Chapitre_I.8_Circuits_Combinatoires/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    I.8 — Circuits combinatoires
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../I%20-%20Science%20et%20G%C3%A9nie%20Informatique/Volume_II_Architecture_Ordinateurs_Systemes_Numeriques/Chapitre_I.9_Circuits_Sequentiels/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    I.9 — Circuits séquentiels
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../I%20-%20Science%20et%20G%C3%A9nie%20Informatique/Volume_II_Architecture_Ordinateurs_Systemes_Numeriques/Chapitre_I.10_Conception_Systeme_HDL/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    I.10 — Conception système HDL
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../I%20-%20Science%20et%20G%C3%A9nie%20Informatique/Volume_II_Architecture_Ordinateurs_Systemes_Numeriques/Chapitre_I.11_Architecture_ISA/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    I.11 — Architecture ISA
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../I%20-%20Science%20et%20G%C3%A9nie%20Informatique/Volume_II_Architecture_Ordinateurs_Systemes_Numeriques/Chapitre_I.12_Conception_CPU/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    I.12 — Conception CPU
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../I%20-%20Science%20et%20G%C3%A9nie%20Informatique/Volume_II_Architecture_Ordinateurs_Systemes_Numeriques/Chapitre_I.13_Parallelisme_ILP/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    I.13 — Parallélisme ILP
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../I%20-%20Science%20et%20G%C3%A9nie%20Informatique/Volume_II_Architecture_Ordinateurs_Systemes_Numeriques/Chapitre_I.14_Hierarchie_Memoire_Stockage/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    I.14 — Hiérarchie mémoire et stockage
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../I%20-%20Science%20et%20G%C3%A9nie%20Informatique/Volume_II_Architecture_Ordinateurs_Systemes_Numeriques/Chapitre_I.15_Systemes_IO_Accelere/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    I.15 — Systèmes I/O accélérés
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_2_3" >
        
          
          <label class="md-nav__link" for="__nav_2_3" id="__nav_2_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Volume III — Systèmes d'Exploitation, Langages et Environnements
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_3">
            <span class="md-nav__icon md-icon"></span>
            
  
    Volume III — Systèmes d'Exploitation, Langages et Environnements
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../I%20-%20Science%20et%20G%C3%A9nie%20Informatique/Volume_III_Systemes_Exploitation_Langages_Environnements/Chapitre_I.16_Systemes_Exploitation_OS/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    I.16 — Systèmes d'exploitation
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../I%20-%20Science%20et%20G%C3%A9nie%20Informatique/Volume_III_Systemes_Exploitation_Langages_Environnements/Chapitre_I.17_Gestion_Concurrence/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    I.17 — Gestion de la concurrence
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../I%20-%20Science%20et%20G%C3%A9nie%20Informatique/Volume_III_Systemes_Exploitation_Langages_Environnements/Chapitre_I.18_Gestion_Memoire_Fichiers/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    I.18 — Gestion mémoire et fichiers
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../I%20-%20Science%20et%20G%C3%A9nie%20Informatique/Volume_III_Systemes_Exploitation_Langages_Environnements/Chapitre_I.19_Conception_Langages/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    I.19 — Conception des langages
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../I%20-%20Science%20et%20G%C3%A9nie%20Informatique/Volume_III_Systemes_Exploitation_Langages_Environnements/Chapitre_I.20_Compilation_Interpretation/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    I.20 — Compilation et interprétation
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../I%20-%20Science%20et%20G%C3%A9nie%20Informatique/Volume_III_Systemes_Exploitation_Langages_Environnements/Chapitre_I.21_Environnements_Virtualisation/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    I.21 — Environnements et virtualisation
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_2_4" >
        
          
          <label class="md-nav__link" for="__nav_2_4" id="__nav_2_4_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Volume IV — Structures de Données, Algorithmique et Génie Logiciel
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_4">
            <span class="md-nav__icon md-icon"></span>
            
  
    Volume IV — Structures de Données, Algorithmique et Génie Logiciel
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../I%20-%20Science%20et%20G%C3%A9nie%20Informatique/Volume_IV_Structures_Donnees_Algorithmique_Genie_Logiciel/Chapitre_I.22_Structures_Donnees_Fondamentales/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    I.22 — Structures de données fondamentales
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../I%20-%20Science%20et%20G%C3%A9nie%20Informatique/Volume_IV_Structures_Donnees_Algorithmique_Genie_Logiciel/Chapitre_I.23_Structures_Donnees_Avancees/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    I.23 — Structures de données avancées
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../I%20-%20Science%20et%20G%C3%A9nie%20Informatique/Volume_IV_Structures_Donnees_Algorithmique_Genie_Logiciel/Chapitre_I.24_Conception_Analyse_Algorithmes/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    I.24 — Conception et analyse d'algorithmes
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../I%20-%20Science%20et%20G%C3%A9nie%20Informatique/Volume_IV_Structures_Donnees_Algorithmique_Genie_Logiciel/Chapitre_I.25_Algorithmes_Graphes_Avances/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    I.25 — Algorithmes de graphes avancés
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../I%20-%20Science%20et%20G%C3%A9nie%20Informatique/Volume_IV_Structures_Donnees_Algorithmique_Genie_Logiciel/Chapitre_I.26_Processus_Developpement/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    I.26 — Processus de développement
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../I%20-%20Science%20et%20G%C3%A9nie%20Informatique/Volume_IV_Structures_Donnees_Algorithmique_Genie_Logiciel/Chapitre_I.27_Architecture_Logicielle/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    I.27 — Architecture logicielle
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../I%20-%20Science%20et%20G%C3%A9nie%20Informatique/Volume_IV_Structures_Donnees_Algorithmique_Genie_Logiciel/Chapitre_I.28_Qualite_Test_Maintenance/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    I.28 — Qualité, test et maintenance
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../I%20-%20Science%20et%20G%C3%A9nie%20Informatique/Volume_IV_Structures_Donnees_Algorithmique_Genie_Logiciel/Chapitre_I.29_DevOps_SRE/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    I.29 — DevOps et SRE
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_2_5" >
        
          
          <label class="md-nav__link" for="__nav_2_5" id="__nav_2_5_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Volume V — Données, Réseaux, Cloud et Sécurité
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_5">
            <span class="md-nav__icon md-icon"></span>
            
  
    Volume V — Données, Réseaux, Cloud et Sécurité
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../I%20-%20Science%20et%20G%C3%A9nie%20Informatique/Volume_V_Donnees_Reseaux_Cloud_Securite/Chapitre_I.30_SGBD_Fondements/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    I.30 — SGBD fondements
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../I%20-%20Science%20et%20G%C3%A9nie%20Informatique/Volume_V_Donnees_Reseaux_Cloud_Securite/Chapitre_I.31_SGBD_Implementation_Transactions/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    I.31 — SGBD implémentation et transactions
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../I%20-%20Science%20et%20G%C3%A9nie%20Informatique/Volume_V_Donnees_Reseaux_Cloud_Securite/Chapitre_I.32_Donnees_Modernes_BigData/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    I.32 — Données modernes et Big Data
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../I%20-%20Science%20et%20G%C3%A9nie%20Informatique/Volume_V_Donnees_Reseaux_Cloud_Securite/Chapitre_I.33_Fondements_Reseaux/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    I.33 — Fondements des réseaux
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../I%20-%20Science%20et%20G%C3%A9nie%20Informatique/Volume_V_Donnees_Reseaux_Cloud_Securite/Chapitre_I.34_Protocoles_Internetworking/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    I.34 — Protocoles et internetworking
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../I%20-%20Science%20et%20G%C3%A9nie%20Informatique/Volume_V_Donnees_Reseaux_Cloud_Securite/Chapitre_I.35_Systemes_Distribues/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    I.35 — Systèmes distribués
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../I%20-%20Science%20et%20G%C3%A9nie%20Informatique/Volume_V_Donnees_Reseaux_Cloud_Securite/Chapitre_I.36_Cloud_Infrastructures/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    I.36 — Cloud et infrastructures
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../I%20-%20Science%20et%20G%C3%A9nie%20Informatique/Volume_V_Donnees_Reseaux_Cloud_Securite/Chapitre_I.37_Fondements_Securite/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    I.37 — Fondements de la sécurité
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../I%20-%20Science%20et%20G%C3%A9nie%20Informatique/Volume_V_Donnees_Reseaux_Cloud_Securite/Chapitre_I.38_Cryptographie_Appliquee/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    I.38 — Cryptographie appliquée
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../I%20-%20Science%20et%20G%C3%A9nie%20Informatique/Volume_V_Donnees_Reseaux_Cloud_Securite/Chapitre_I.39_Securite_Reseaux/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    I.39 — Sécurité des réseaux
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../I%20-%20Science%20et%20G%C3%A9nie%20Informatique/Volume_V_Donnees_Reseaux_Cloud_Securite/Chapitre_I.40_Securite_Systemes/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    I.40 — Sécurité des systèmes
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_2_6" >
        
          
          <label class="md-nav__link" for="__nav_2_6" id="__nav_2_6_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Volume VI — Intelligence Artificielle et Systèmes Interactifs
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_6">
            <span class="md-nav__icon md-icon"></span>
            
  
    Volume VI — Intelligence Artificielle et Systèmes Interactifs
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../I%20-%20Science%20et%20G%C3%A9nie%20Informatique/Volume_VI_Intelligence_Artificielle_Systemes_Interactifs/Chapitre_I.41_Fondements_IA/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    I.41 — Fondements de l'IA
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../I%20-%20Science%20et%20G%C3%A9nie%20Informatique/Volume_VI_Intelligence_Artificielle_Systemes_Interactifs/Chapitre_I.42_Connaissance_Raisonnement/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    I.42 — Connaissance et raisonnement
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../I%20-%20Science%20et%20G%C3%A9nie%20Informatique/Volume_VI_Intelligence_Artificielle_Systemes_Interactifs/Chapitre_I.43_ML_Fondements/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    I.43 — ML fondements
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../I%20-%20Science%20et%20G%C3%A9nie%20Informatique/Volume_VI_Intelligence_Artificielle_Systemes_Interactifs/Chapitre_I.44_DeepLearning/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    I.44 — Deep Learning
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../I%20-%20Science%20et%20G%C3%A9nie%20Informatique/Volume_VI_Intelligence_Artificielle_Systemes_Interactifs/Chapitre_I.45_Reinforcement_Learning/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    I.45 — Reinforcement Learning
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../I%20-%20Science%20et%20G%C3%A9nie%20Informatique/Volume_VI_Intelligence_Artificielle_Systemes_Interactifs/Chapitre_I.46_TALN_NLP/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    I.46 — TALN / NLP
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../I%20-%20Science%20et%20G%C3%A9nie%20Informatique/Volume_VI_Intelligence_Artificielle_Systemes_Interactifs/Chapitre_I.47_Vision_Ordinateur/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    I.47 — Vision par ordinateur
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../I%20-%20Science%20et%20G%C3%A9nie%20Informatique/Volume_VI_Intelligence_Artificielle_Systemes_Interactifs/Chapitre_I.48_Infographie_Visualisation/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    I.48 — Infographie et visualisation
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../I%20-%20Science%20et%20G%C3%A9nie%20Informatique/Volume_VI_Intelligence_Artificielle_Systemes_Interactifs/Chapitre_I.49_IHM_HCI/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    I.49 — IHM / HCI
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../I%20-%20Science%20et%20G%C3%A9nie%20Informatique/Volume_VI_Intelligence_Artificielle_Systemes_Interactifs/Chapitre_I.50_Robotique_IoT/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    I.50 — Robotique et IoT
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_2_7" >
        
          
          <label class="md-nav__link" for="__nav_2_7" id="__nav_2_7_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Volume VII — Technologies Émergentes et Frontières
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_7_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_7">
            <span class="md-nav__icon md-icon"></span>
            
  
    Volume VII — Technologies Émergentes et Frontières
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../I%20-%20Science%20et%20G%C3%A9nie%20Informatique/Volume_VII_Technologies_Emergentes_Frontieres/Chapitre_I.51_Informatique_Quantique/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    I.51 — Informatique quantique
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../I%20-%20Science%20et%20G%C3%A9nie%20Informatique/Volume_VII_Technologies_Emergentes_Frontieres/Chapitre_I.52_Algorithmes_Cryptographie_Quantiques/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    I.52 — Algorithmes et cryptographie quantiques
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../I%20-%20Science%20et%20G%C3%A9nie%20Informatique/Volume_VII_Technologies_Emergentes_Frontieres/Chapitre_I.53_HPC_Exascale/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    I.53 — HPC et exascale
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../I%20-%20Science%20et%20G%C3%A9nie%20Informatique/Volume_VII_Technologies_Emergentes_Frontieres/Chapitre_I.54_Architectures_Post_Moore/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    I.54 — Architectures post-Moore
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../I%20-%20Science%20et%20G%C3%A9nie%20Informatique/Volume_VII_Technologies_Emergentes_Frontieres/Chapitre_I.55_Modeles_Fondateurs_IA/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    I.55 — Modèles fondateurs IA
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../I%20-%20Science%20et%20G%C3%A9nie%20Informatique/Volume_VII_Technologies_Emergentes_Frontieres/Chapitre_I.56_AGI_Alignement_Securite/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    I.56 — AGI, alignement et sécurité
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../I%20-%20Science%20et%20G%C3%A9nie%20Informatique/Volume_VII_Technologies_Emergentes_Frontieres/Chapitre_I.57_Sciences_Computationnelles/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    I.57 — Sciences computationnelles
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../I%20-%20Science%20et%20G%C3%A9nie%20Informatique/Volume_VII_Technologies_Emergentes_Frontieres/Chapitre_I.58_CyberPhysiques_Jumeaux/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    I.58 — Systèmes cyber-physiques et jumeaux
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../I%20-%20Science%20et%20G%C3%A9nie%20Informatique/Volume_VII_Technologies_Emergentes_Frontieres/Chapitre_I.59_Web3_Decentralise/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    I.59 — Web3 et décentralisé
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../I%20-%20Science%20et%20G%C3%A9nie%20Informatique/Volume_VII_Technologies_Emergentes_Frontieres/Chapitre_I.60_Synthese_Frontieres/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    I.60 — Synthèse et frontières
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_2_8" >
        
          
          <label class="md-nav__link" for="__nav_2_8" id="__nav_2_8_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Volume VIII — Convergence AGI–Quantique : Fondements et Algorithmes
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_8_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_8">
            <span class="md-nav__icon md-icon"></span>
            
  
    Volume VIII — Convergence AGI–Quantique : Fondements et Algorithmes
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../I%20-%20Science%20et%20G%C3%A9nie%20Informatique/Volume_VIII_Convergence_AGI_Quantique_Fondements/Chapitre_I.61_Introduction_Informatique/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    I.61 — Introduction à l'informatique
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../I%20-%20Science%20et%20G%C3%A9nie%20Informatique/Volume_VIII_Convergence_AGI_Quantique_Fondements/Chapitre_I.62_Convergence_AGI_Quantique/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    I.62 — Convergence AGI-quantique
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../I%20-%20Science%20et%20G%C3%A9nie%20Informatique/Volume_VIII_Convergence_AGI_Quantique_Fondements/Chapitre_I.63_Evolution_IA_Quantique/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    I.63 — Évolution IA-quantique
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../I%20-%20Science%20et%20G%C3%A9nie%20Informatique/Volume_VIII_Convergence_AGI_Quantique_Fondements/Chapitre_I.64_Reseaux_Neuronaux_Quantiques/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    I.64 — Réseaux neuronaux quantiques
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../I%20-%20Science%20et%20G%C3%A9nie%20Informatique/Volume_VIII_Convergence_AGI_Quantique_Fondements/Chapitre_I.65_Algorithmes_Evolutionnaires_Quantiques/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    I.65 — Algorithmes évolutionnaires quantiques
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../I%20-%20Science%20et%20G%C3%A9nie%20Informatique/Volume_VIII_Convergence_AGI_Quantique_Fondements/Chapitre_I.66_Renforcement_Quantique/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    I.66 — Renforcement quantique
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../I%20-%20Science%20et%20G%C3%A9nie%20Informatique/Volume_VIII_Convergence_AGI_Quantique_Fondements/Chapitre_I.67_Architectures_Hybrides/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    I.67 — Architectures hybrides
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../I%20-%20Science%20et%20G%C3%A9nie%20Informatique/Volume_VIII_Convergence_AGI_Quantique_Fondements/Chapitre_I.68_SVM_Quantiques/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    I.68 — SVM quantiques
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../I%20-%20Science%20et%20G%C3%A9nie%20Informatique/Volume_VIII_Convergence_AGI_Quantique_Fondements/Chapitre_I.69_Codage_Donnees_Quantiques/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    I.69 — Codage de données quantiques
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../I%20-%20Science%20et%20G%C3%A9nie%20Informatique/Volume_VIII_Convergence_AGI_Quantique_Fondements/Chapitre_I.70_Scalabilite_Correction_Erreurs/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    I.70 — Scalabilité et correction d'erreurs
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_2_9" >
        
          
          <label class="md-nav__link" for="__nav_2_9" id="__nav_2_9_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Volume IX — Convergence AGI–Quantique : Applications et Perspectives
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_9_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_9">
            <span class="md-nav__icon md-icon"></span>
            
  
    Volume IX — Convergence AGI–Quantique : Applications et Perspectives
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../I%20-%20Science%20et%20G%C3%A9nie%20Informatique/Volume_IX_Convergence_AGI_Quantique_Applications/Chapitre_I.71_TALN_Quantique/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    I.71 — TALN quantique
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../I%20-%20Science%20et%20G%C3%A9nie%20Informatique/Volume_IX_Convergence_AGI_Quantique_Applications/Chapitre_I.72_Securite_Confidentialite/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    I.72 — Sécurité et confidentialité
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../I%20-%20Science%20et%20G%C3%A9nie%20Informatique/Volume_IX_Convergence_AGI_Quantique_Applications/Chapitre_I.73_Ethique_Reglementaire/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    I.73 — Éthique et réglementaire
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../I%20-%20Science%20et%20G%C3%A9nie%20Informatique/Volume_IX_Convergence_AGI_Quantique_Applications/Chapitre_I.74_Implementation_Materielle/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    I.74 — Implémentation matérielle
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../I%20-%20Science%20et%20G%C3%A9nie%20Informatique/Volume_IX_Convergence_AGI_Quantique_Applications/Chapitre_I.75_Middleware_Software/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    I.75 — Middleware et software
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../I%20-%20Science%20et%20G%C3%A9nie%20Informatique/Volume_IX_Convergence_AGI_Quantique_Applications/Chapitre_I.76_Etudes_Cas/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    I.76 — Études de cas
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../I%20-%20Science%20et%20G%C3%A9nie%20Informatique/Volume_IX_Convergence_AGI_Quantique_Applications/Chapitre_I.77_Durabilite_Energie/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    I.77 — Durabilité et énergie
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../I%20-%20Science%20et%20G%C3%A9nie%20Informatique/Volume_IX_Convergence_AGI_Quantique_Applications/Chapitre_I.78_Metriques_Bancs/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    I.78 — Métriques et bancs d'essai
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../I%20-%20Science%20et%20G%C3%A9nie%20Informatique/Volume_IX_Convergence_AGI_Quantique_Applications/Chapitre_I.79_Perspectives_Avenir/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    I.79 — Perspectives d'avenir
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../I%20-%20Science%20et%20G%C3%A9nie%20Informatique/Volume_IX_Convergence_AGI_Quantique_Applications/Chapitre_I.80_Infrastructure_Centres_Donnees_IA/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    I.80 — Infrastructure et centres de données IA
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_3" >
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    II — Interopérabilité
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            
  
    II — Interopérabilité
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../II%20-%20Interop%C3%A9rabilit%C3%A9/Chapitre_II.1_Introduction_Problematique/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    II.1 — Introduction et problématique
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../II%20-%20Interop%C3%A9rabilit%C3%A9/Chapitre_II.2_Fondements_Theoriques/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    II.2 — Fondements théoriques
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../II%20-%20Interop%C3%A9rabilit%C3%A9/Chapitre_II.3_Integration_Applications/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    II.3 — Intégration des applications
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../II%20-%20Interop%C3%A9rabilit%C3%A9/Chapitre_II.4_Integration_Donnees/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    II.4 — Intégration des données
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../II%20-%20Interop%C3%A9rabilit%C3%A9/Chapitre_II.5_Integration_Evenements/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    II.5 — Intégration des événements
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../II%20-%20Interop%C3%A9rabilit%C3%A9/Chapitre_II.6_Standards_Contrats/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    II.6 — Standards et contrats
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../II%20-%20Interop%C3%A9rabilit%C3%A9/Chapitre_II.7_Resilience_Observabilite/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    II.7 — Résilience et observabilité
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../II%20-%20Interop%C3%A9rabilit%C3%A9/Chapitre_II.8_Collaboration_Automatisation/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    II.8 — Collaboration et automatisation
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../II%20-%20Interop%C3%A9rabilit%C3%A9/Chapitre_II.9_Architecture_Reference/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    II.9 — Architecture de référence
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../II%20-%20Interop%C3%A9rabilit%C3%A9/Chapitre_II.10_Order_to_Cash/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    II.10 — Order-to-Cash
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../II%20-%20Interop%C3%A9rabilit%C3%A9/Chapitre_II.11_Entreprise_Agentique/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    II.11 — Entreprise agentique
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../II%20-%20Interop%C3%A9rabilit%C3%A9/Chapitre_II.12_Securite_Identite_Conformite/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    II.12 — Sécurité, identité et conformité
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../II%20-%20Interop%C3%A9rabilit%C3%A9/Chapitre_II.A_Annexes/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Annexes
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
        
        
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" checked>
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    
  
    III — Entreprise Agentique
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            
  
    III — Entreprise Agentique
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
        
          
          
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_4_1" >
        
          
          <label class="md-nav__link" for="__nav_4_1" id="__nav_4_1_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    
  
    Volume I — Fondations
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_1">
            <span class="md-nav__icon md-icon"></span>
            
  
    Volume I — Fondations
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Volume_I_Fondations_Entreprise_Agentique/Chapitre_I.1_Crise_Integration_Systemique/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    I.1 — Crise d'intégration systémique
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Volume_I_Fondations_Entreprise_Agentique/Chapitre_I.2_Fondements_Dimensions_Interoperabilite/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    I.2 — Fondements et dimensions de l'interopérabilité
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Volume_I_Fondations_Entreprise_Agentique/Chapitre_I.3_Cadres_Reference_Standards_Maturite/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    I.3 — Cadres de référence, standards et maturité
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Volume_I_Fondations_Entreprise_Agentique/Chapitre_I.4_Principes_Architecture_Reactive/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    I.4 — Principes d'architecture réactive
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Volume_I_Fondations_Entreprise_Agentique/Chapitre_I.5_Ecosysteme_API/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    I.5 — Écosystème API
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Volume_I_Fondations_Entreprise_Agentique/Chapitre_I.6_Architecture_Evenements_EDA/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    I.6 — Architecture événements (EDA)
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Volume_I_Fondations_Entreprise_Agentique/Chapitre_I.7_Contrats_Donnees/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    I.7 — Contrats de données
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Volume_I_Fondations_Entreprise_Agentique/Chapitre_I.8_Conception_Implementation_Observabilite/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    I.8 — Conception et implémentation de l'observabilité
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Volume_I_Fondations_Entreprise_Agentique/Chapitre_I.9_Etudes_Cas_Architecturales/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    I.9 — Études de cas architecturales
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Volume_I_Fondations_Entreprise_Agentique/Chapitre_I.10_Limites_Interoperabilite_Semantique/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    I.10 — Limites de l'interopérabilité sémantique
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Volume_I_Fondations_Entreprise_Agentique/Chapitre_I.11_IA_Moteur_Interoperabilite/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    I.11 — IA moteur d'interopérabilité
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Volume_I_Fondations_Entreprise_Agentique/Chapitre_I.12_Definition_Interoperabilite_Cognitivo_Adaptative/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    I.12 — Définition de l'interopérabilité cognitivo-adaptative
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Volume_I_Fondations_Entreprise_Agentique/Chapitre_I.13_Ere_IA_Agentique_Modele_Travailleur_Numerique/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    I.13 — Ère IA agentique et modèle du travailleur numérique
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Volume_I_Fondations_Entreprise_Agentique/Chapitre_I.14_Maillage_Agentique/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    I.14 — Maillage agentique
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Volume_I_Fondations_Entreprise_Agentique/Chapitre_I.15_Ingenierie_Systemes_Cognitifs_Protocoles_Interaction/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    I.15 — Ingénierie des systèmes cognitifs et protocoles d'interaction
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Volume_I_Fondations_Entreprise_Agentique/Chapitre_I.16_Modele_Operationnel_Symbiose_Humain_Agent/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    I.16 — Modèle opérationnel de symbiose humain-agent
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Volume_I_Fondations_Entreprise_Agentique/Chapitre_I.17_Gouvernance_Constitutionnelle_Alignement_IA/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    I.17 — Gouvernance constitutionnelle et alignement IA
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Volume_I_Fondations_Entreprise_Agentique/Chapitre_I.18_AgentOps_Industrialisation_Securisation/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    I.18 — AgentOps : industrialisation et sécurisation
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Volume_I_Fondations_Entreprise_Agentique/Chapitre_I.19_Architecte_Intentions_Role_Sociotechnique/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    I.19 — Architecte des intentions : rôle sociotechnique
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Volume_I_Fondations_Entreprise_Agentique/Chapitre_I.20_Cockpit_Berger_Intention/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    I.20 — Cockpit du berger d'intention
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Volume_I_Fondations_Entreprise_Agentique/Chapitre_I.21_Feuille_Route_Transformation_Agentique/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    I.21 — Feuille de route de la transformation agentique
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Volume_I_Fondations_Entreprise_Agentique/Chapitre_I.22_Gestion_Strategique_Portefeuille_Applicatif_APM_Cognitif/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    I.22 — Gestion stratégique du portefeuille applicatif (APM cognitif)
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Volume_I_Fondations_Entreprise_Agentique/Chapitre_I.23_Patrons_Modernisation_Agentification/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    I.23 — Patrons de modernisation et agentification
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Volume_I_Fondations_Entreprise_Agentique/Chapitre_I.24_Industrialisation_Ingenierie_Plateforme/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    I.24 — Industrialisation et ingénierie de plateforme
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Volume_I_Fondations_Entreprise_Agentique/Chapitre_I.25_Economie_Cognitive_Diplomatie_Algorithmique/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    I.25 — Économie cognitive et diplomatie algorithmique
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Volume_I_Fondations_Entreprise_Agentique/Chapitre_I.26_Gestion_Risques_Systemiques_Superalignement/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    I.26 — Gestion des risques systémiques et superalignement
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Volume_I_Fondations_Entreprise_Agentique/Chapitre_I.27_Prospective_Agent_Auto_Architecturant_AGI_Entreprise/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    I.27 — Prospective : agent auto-architecturant et AGI d'entreprise
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Volume_I_Fondations_Entreprise_Agentique/Chapitre_I.28_Conclusion_Architecture_Intentionnelle_Sagesse_Collective/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    I.28 — Conclusion : architecture intentionnelle et sagesse collective
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
        
          
          
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_4_2" >
        
          
          <label class="md-nav__link" for="__nav_4_2" id="__nav_4_2_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    
  
    Volume II — Infrastructure Agentique
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_2">
            <span class="md-nav__icon md-icon"></span>
            
  
    Volume II — Infrastructure Agentique
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Volume_II_Infrastructure_Agentique/Chapitre_II.1_Ingenierie_Plateforme/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    II.1 — Ingénierie de plateforme
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Volume_II_Infrastructure_Agentique/Chapitre_II.2_Fondamentaux_Apache_Kafka_Confluent/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    II.2 — Fondamentaux Apache Kafka et Confluent
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Volume_II_Infrastructure_Agentique/Chapitre_II.3_Conception_Modelisation_Flux_Evenements/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    II.3 — Conception et modélisation des flux d'événements
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Volume_II_Infrastructure_Agentique/Chapitre_II.4_Contrats_Donnees_Gouvernance_Semantique/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    II.4 — Contrats de données et gouvernance sémantique
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Volume_II_Infrastructure_Agentique/Chapitre_II.5_Flux_Temps_Reel/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    II.5 — Flux temps réel
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Volume_II_Infrastructure_Agentique/Chapitre_II.6_Google_Cloud_Vertex_AI/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    II.6 — Google Cloud et Vertex AI
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Volume_II_Infrastructure_Agentique/Chapitre_II.7_Ingenierie_Contexte_RAG/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    II.7 — Ingénierie de contexte et RAG
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Volume_II_Infrastructure_Agentique/Chapitre_II.8_Integration_Backbone_Evenementiel_Couche_Cognitive/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    II.8 — Intégration backbone événementiel et couche cognitive
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Volume_II_Infrastructure_Agentique/Chapitre_II.9_Patrons_Architecturaux_Avances_AEM/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    II.9 — Patrons architecturaux avancés (AEM)
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Volume_II_Infrastructure_Agentique/Chapitre_II.10_Pipelines_CI_CD_Deploiement_Agents/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    II.10 — Pipelines CI/CD et déploiement d'agents
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Volume_II_Infrastructure_Agentique/Chapitre_II.11_Observabilite_Comportementale_Monitoring/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    II.11 — Observabilité comportementale et monitoring
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Volume_II_Infrastructure_Agentique/Chapitre_II.12_Tests_Evaluation_Simulation_Systemes_Multi_Agents/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    II.12 — Tests, évaluation et simulation de systèmes multi-agents
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Volume_II_Infrastructure_Agentique/Chapitre_II.13_Paysage_Menaces_Securite_Systemes_Agentiques/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    II.13 — Paysage des menaces et sécurité des systèmes agentiques
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Volume_II_Infrastructure_Agentique/Chapitre_II.14_Securisation_Infrastructure/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    II.14 — Sécurisation de l'infrastructure
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Volume_II_Infrastructure_Agentique/Chapitre_II.15_Conformite_Reglementaire_Gestion_Confidentialite/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    II.15 — Conformité réglementaire et gestion de la confidentialité
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
    
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
        
          
          
        
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_3" checked>
        
          
          <label class="md-nav__link" for="__nav_4_3" id="__nav_4_3_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    
  
    Volume III — Apache Kafka : Guide de l'Architecte
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_3_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_4_3">
            <span class="md-nav__icon md-icon"></span>
            
  
    Volume III — Apache Kafka : Guide de l'Architecte
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Chapitre_III.1_Decouvrir_Kafka/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    III.1 — Découvrir Kafka
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Chapitre_III.2_Architecture_Cluster_Kafka/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    III.2 — Architecture du cluster Kafka
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Chapitre_III.3_Clients_Kafka_Production/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    III.3 — Clients Kafka en production
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Chapitre_III.4_Applications_Consommatrices/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    III.4 — Applications consommatrices
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Chapitre_III.5_Cas_Utilisation_Kafka/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    III.5 — Cas d'utilisation Kafka
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    
  
    III.6 — Contrats de données
  

    
  </span>
  
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    
  
    III.6 — Contrats de données
  

    
  </span>
  
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table des matières">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table des matières
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#contrats-de-donnees" class="md-nav__link">
    <span class="md-ellipsis">
      
        CONTRATS DE DONNÉES
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#iii61-traduire-les-produits-daffaires-en-schemas" class="md-nav__link">
    <span class="md-ellipsis">
      
        III.6.1 Traduire les Produits d'Affaires en Schémas
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="III.6.1 Traduire les Produits d&#39;Affaires en Schémas">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#du-domaine-metier-a-la-representation-technique" class="md-nav__link">
    <span class="md-ellipsis">
      
        Du Domaine Métier à la Représentation Technique
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#principes-de-conception-des-schemas" class="md-nav__link">
    <span class="md-ellipsis">
      
        Principes de Conception des Schémas
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#granularite-des-evenements" class="md-nav__link">
    <span class="md-ellipsis">
      
        Granularité des Événements
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#iii62-comment-kafka-gere-la-structure-des-evenements" class="md-nav__link">
    <span class="md-ellipsis">
      
        III.6.2 Comment Kafka Gère la Structure des Événements
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="III.6.2 Comment Kafka Gère la Structure des Événements">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#kafka-est-agnostique-au-contenu" class="md-nav__link">
    <span class="md-ellipsis">
      
        Kafka est Agnostique au Contenu
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#formats-de-serialisation" class="md-nav__link">
    <span class="md-ellipsis">
      
        Formats de Sérialisation
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#iii63-defis-dans-la-conception-devenements" class="md-nav__link">
    <span class="md-ellipsis">
      
        III.6.3 Défis dans la Conception d'Événements
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="III.6.3 Défis dans la Conception d&#39;Événements">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#le-probleme-de-levolution-des-schemas" class="md-nav__link">
    <span class="md-ellipsis">
      
        Le Problème de l'Évolution des Schémas
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#analyse-dimpact-des-changements" class="md-nav__link">
    <span class="md-ellipsis">
      
        Analyse d'Impact des Changements
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#strategies-de-compatibilite" class="md-nav__link">
    <span class="md-ellipsis">
      
        Stratégies de Compatibilité
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#versioning-explicite-vs-implicite" class="md-nav__link">
    <span class="md-ellipsis">
      
        Versioning Explicite vs. Implicite
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#patterns-devolution-de-schema" class="md-nav__link">
    <span class="md-ellipsis">
      
        Patterns d'Évolution de Schéma
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#iii64-structure-de-levenement-et-mapping" class="md-nav__link">
    <span class="md-ellipsis">
      
        III.6.4 Structure de l'Événement et Mapping
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="III.6.4 Structure de l&#39;Événement et Mapping">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#anatomie-dun-evenement-bien-concu" class="md-nav__link">
    <span class="md-ellipsis">
      
        Anatomie d'un Événement Bien Conçu
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#mapping-entre-systemes" class="md-nav__link">
    <span class="md-ellipsis">
      
        Mapping entre Systèmes
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#gestion-des-references-et-relations" class="md-nav__link">
    <span class="md-ellipsis">
      
        Gestion des Références et Relations
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#iii65-notes-de-terrain-strategies-de-donnees-customer360" class="md-nav__link">
    <span class="md-ellipsis">
      
        III.6.5 Notes de Terrain : Stratégies de Données Customer360
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="III.6.5 Notes de Terrain : Stratégies de Données Customer360">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#le-defi-du-customer-360" class="md-nav__link">
    <span class="md-ellipsis">
      
        Le Défi du Customer 360
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#defi-1-identification-du-client" class="md-nav__link">
    <span class="md-ellipsis">
      
        Défi 1 : Identification du Client
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#defi-2-schemas-heterogenes" class="md-nav__link">
    <span class="md-ellipsis">
      
        Défi 2 : Schémas Hétérogènes
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#defi-3-coherence-temporelle" class="md-nav__link">
    <span class="md-ellipsis">
      
        Défi 3 : Cohérence Temporelle
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#defi-4-qualite-des-donnees" class="md-nav__link">
    <span class="md-ellipsis">
      
        Défi 4 : Qualité des Données
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#iii66-schema-registry-dans-lecosysteme-kafka" class="md-nav__link">
    <span class="md-ellipsis">
      
        III.6.6 Schema Registry dans l'Écosystème Kafka
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="III.6.6 Schema Registry dans l&#39;Écosystème Kafka">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#architecture-et-fonctionnement" class="md-nav__link">
    <span class="md-ellipsis">
      
        Architecture et Fonctionnement
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#haute-disponibilite-et-deploiement" class="md-nav__link">
    <span class="md-ellipsis">
      
        Haute Disponibilité et Déploiement
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#configuration-et-utilisation" class="md-nav__link">
    <span class="md-ellipsis">
      
        Configuration et Utilisation
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#api-rest-du-schema-registry" class="md-nav__link">
    <span class="md-ellipsis">
      
        API REST du Schema Registry
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#conventions-de-nommage-des-sujets" class="md-nav__link">
    <span class="md-ellipsis">
      
        Conventions de Nommage des Sujets
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#iii67-problemes-courants-dans-la-gestion-des-contrats" class="md-nav__link">
    <span class="md-ellipsis">
      
        III.6.7 Problèmes Courants dans la Gestion des Contrats
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="III.6.7 Problèmes Courants dans la Gestion des Contrats">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#probleme-1-schema-drift-derive-de-schema" class="md-nav__link">
    <span class="md-ellipsis">
      
        Problème 1 : Schéma Drift (Dérive de Schéma)
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#probleme-2-schemas-non-documentes" class="md-nav__link">
    <span class="md-ellipsis">
      
        Problème 2 : Schémas Non Documentés
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#probleme-3-breaking-changes-accidentels" class="md-nav__link">
    <span class="md-ellipsis">
      
        Problème 3 : Breaking Changes Accidentels
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#probleme-4-proliferation-de-schemas" class="md-nav__link">
    <span class="md-ellipsis">
      
        Problème 4 : Prolifération de Schémas
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#probleme-5-performance-du-schema-registry" class="md-nav__link">
    <span class="md-ellipsis">
      
        Problème 5 : Performance du Schema Registry
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#iii68-resume" class="md-nav__link">
    <span class="md-ellipsis">
      
        III.6.8 Résumé
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="III.6.8 Résumé">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#traduire-les-besoins-metier-en-schemas" class="md-nav__link">
    <span class="md-ellipsis">
      
        Traduire les Besoins Métier en Schémas
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#kafka-et-la-structure-des-evenements" class="md-nav__link">
    <span class="md-ellipsis">
      
        Kafka et la Structure des Événements
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#defis-de-levolution-des-schemas" class="md-nav__link">
    <span class="md-ellipsis">
      
        Défis de l'Évolution des Schémas
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#structure-et-mapping-des-evenements" class="md-nav__link">
    <span class="md-ellipsis">
      
        Structure et Mapping des Événements
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#le-cas-customer-360" class="md-nav__link">
    <span class="md-ellipsis">
      
        Le Cas Customer 360
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#schema-registry-gouvernance-des-schemas" class="md-nav__link">
    <span class="md-ellipsis">
      
        Schema Registry — Gouvernance des Schémas
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#problemes-courants-et-solutions-eprouvees" class="md-nav__link">
    <span class="md-ellipsis">
      
        Problèmes Courants et Solutions Éprouvées
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#principes-directeurs-pour-larchitecte" class="md-nav__link">
    <span class="md-ellipsis">
      
        Principes Directeurs pour l'Architecte
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#vers-le-chapitre-suivant" class="md-nav__link">
    <span class="md-ellipsis">
      
        Vers le Chapitre Suivant
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Chapitre_III.7_Patrons_Interaction_Kafka/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    III.7 — Patrons d'interaction Kafka
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Chapitre_III.8_Conception_Application_Streaming/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    III.8 — Conception d'application streaming
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Chapitre_III.9_Gestion_Kafka_Entreprise/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    III.9 — Gestion Kafka en entreprise
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Chapitre_III.10_Organisation_Projet_Kafka/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    III.10 — Organisation d'un projet Kafka
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Chapitre_III.11_Operer_Kafka/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    III.11 — Opérer Kafka
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Chapitre_III.12_Avenir_Kafka/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    III.12 — L'avenir de Kafka
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
        
          
          
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_4_4" >
        
          
          <label class="md-nav__link" for="__nav_4_4" id="__nav_4_4_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    
  
    Volume IV — Apache Iceberg et Lakehouse
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_4">
            <span class="md-nav__icon md-icon"></span>
            
  
    Volume IV — Apache Iceberg et Lakehouse
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Volume_IV_Apache_Iceberg_Lakehouse/Chapitre_IV.1_Monde_Lakehouse_Iceberg/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    IV.1 — Le monde Lakehouse et Iceberg
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Volume_IV_Apache_Iceberg_Lakehouse/Chapitre_IV.2_Anatomie_Technique/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    IV.2 — Anatomie technique
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Volume_IV_Apache_Iceberg_Lakehouse/Chapitre_IV.3_Mise_Pratique/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    IV.3 — Mise en pratique
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Volume_IV_Apache_Iceberg_Lakehouse/Chapitre_IV.4_Preparer_Passage_Iceberg/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    IV.4 — Préparer le passage à Iceberg
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Volume_IV_Apache_Iceberg_Lakehouse/Chapitre_IV.5_Selection_Couche_Stockage/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    IV.5 — Sélection de la couche de stockage
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Volume_IV_Apache_Iceberg_Lakehouse/Chapitre_IV.6_Architecture_Couche_Ingestion/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    IV.6 — Architecture de la couche d'ingestion
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Volume_IV_Apache_Iceberg_Lakehouse/Chapitre_IV.7_Implementation_Couche_Catalogue/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    IV.7 — Implémentation de la couche catalogue
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Volume_IV_Apache_Iceberg_Lakehouse/Chapitre_IV.8_Conception_Couche_Federation/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    IV.8 — Conception de la couche de fédération
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Volume_IV_Apache_Iceberg_Lakehouse/Chapitre_IV.9_Comprendre_Couche_Consommation/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    IV.9 — Comprendre la couche de consommation
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Volume_IV_Apache_Iceberg_Lakehouse/Chapitre_IV.10_Maintenir_Lakehouse_Production/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    IV.10 — Maintenir le Lakehouse en production
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Volume_IV_Apache_Iceberg_Lakehouse/Chapitre_IV.11_Operationnaliser_Apache_Iceberg/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    IV.11 — Opérationnaliser Apache Iceberg
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Volume_IV_Apache_Iceberg_Lakehouse/Chapitre_IV.12_Evolution_Streaming_Lakehouse/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    IV.12 — Évolution du streaming Lakehouse
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Volume_IV_Apache_Iceberg_Lakehouse/Chapitre_IV.13_Securite_Gouvernance_Conformite/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    IV.13 — Sécurité, gouvernance et conformité
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Volume_IV_Apache_Iceberg_Lakehouse/Chapitre_IV.14_Integration_Microsoft_Fabric_PowerBI/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    IV.14 — Intégration Microsoft Fabric et Power BI
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Volume_IV_Apache_Iceberg_Lakehouse/Chapitre_IV.15_Contexte_Canadien_Etudes_Cas/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    IV.15 — Contexte canadien et études de cas
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Volume_IV_Apache_Iceberg_Lakehouse/Chapitre_IV.16_Conclusion_Perspectives_2026_2030/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    IV.16 — Conclusion et perspectives 2026-2030
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Volume_IV_Apache_Iceberg_Lakehouse/Chapitre_IV.Annexe_A_Specification_Apache_Iceberg/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Annexe A — Spécification Apache Iceberg
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Volume_IV_Apache_Iceberg_Lakehouse/Chapitre_IV.Annexe_B_Glossaire/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Annexe B — Glossaire
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
        
          
          
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_4_5" >
        
          
          <label class="md-nav__link" for="__nav_4_5" id="__nav_4_5_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    
  
    Volume V — Développeur Renaissance
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_5">
            <span class="md-nav__icon md-icon"></span>
            
  
    Volume V — Développeur Renaissance
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Volume_V_Developpeur_Renaissance/Chapitre_V.0_Introduction/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    V.0 — Introduction
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Volume_V_Developpeur_Renaissance/Chapitre_V.1_Convergence_Ages_Or/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    V.1 — Convergence des âges d'or
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Volume_V_Developpeur_Renaissance/Chapitre_V.2_Curiosite_Appliquee/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    V.2 — Curiosité appliquée
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Volume_V_Developpeur_Renaissance/Chapitre_V.3_Pensee_Systemique/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    V.3 — Pensée systémique
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Volume_V_Developpeur_Renaissance/Chapitre_V.4_Nouvelle_Communication/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    V.4 — Nouvelle communication
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Volume_V_Developpeur_Renaissance/Chapitre_V.5_Imperatif_Qualite_Responsabilite/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    V.5 — Impératif qualité et responsabilité
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Volume_V_Developpeur_Renaissance/Chapitre_V.6_Capital_Humain_Profil_Polymathe/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    V.6 — Capital humain et profil polymathe
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Volume_V_Developpeur_Renaissance/Chapitre_V.7_Art_Batir_Futur/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    V.7 — L'art de bâtir le futur
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Volume_V_Developpeur_Renaissance/Chapitre_V.8_Bibliotheque_Developpeur_Renaissance/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    V.8 — Bibliothèque du développeur Renaissance
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Volume_V_Developpeur_Renaissance/Chapitre_V.9_Mandat/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    V.9 — Mandat
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Volume_V_Developpeur_Renaissance/Chapitre_V.10_Spec_Driven_Development/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    V.10 — Spec-Driven Development
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
          
          
            <div class="md-content" data-md-component="content">
              
              <article class="md-content__inner md-typeset">
                
                  


  
  


<h1 id="chapitre-iii6">Chapitre III.6<a class="headerlink" href="#chapitre-iii6" title="Permanent link">&para;</a></h1>
<h2 id="contrats-de-donnees">CONTRATS DE DONNÉES<a class="headerlink" href="#contrats-de-donnees" title="Permanent link">&para;</a></h2>
<hr />
<blockquote>
<p><em>« Un schéma est un contrat. Un contrat brisé détruit la confiance. La confiance est le fondement de tout système distribué. »</em></p>
<p>— Martin Kleppmann, Designing Data-Intensive Applications</p>
</blockquote>
<hr />
<p>Le chapitre précédent a exploré quand utiliser Kafka et les alternatives disponibles. Cette analyse stratégique présuppose une question fondamentale : comment les producteurs et consommateurs s'accordent-ils sur la structure des données échangées ? Sans réponse rigoureuse à cette question, même l'architecture la plus élégante s'effondre sous le poids des incompatibilités et des erreurs de désérialisation.</p>
<p>Les contrats de données sont le fondement silencieux de toute architecture événementielle réussie. Ils définissent la structure, le format, et les règles d'évolution des messages. Sans eux, chaque modification de schéma devient une opération risquée nécessitant la coordination synchrone de tous les systèmes — exactement le couplage que Kafka est censé éliminer.</p>
<p>Ce chapitre explore la conception, l'implémentation, et la gouvernance des contrats de données dans l'écosystème Kafka. Nous verrons comment traduire les besoins métier en schémas techniques, comment Kafka gère (ou ne gère pas) la structure des événements, et comment le Schema Registry apporte les garanties nécessaires pour une évolution contrôlée.</p>
<hr />
<h2 id="iii61-traduire-les-produits-daffaires-en-schemas">III.6.1 Traduire les Produits d'Affaires en Schémas<a class="headerlink" href="#iii61-traduire-les-produits-daffaires-en-schemas" title="Permanent link">&para;</a></h2>
<h3 id="du-domaine-metier-a-la-representation-technique">Du Domaine Métier à la Représentation Technique<a class="headerlink" href="#du-domaine-metier-a-la-representation-technique" title="Permanent link">&para;</a></h3>
<p>La conception d'un schéma d'événement commence par la compréhension du domaine métier, pas par les considérations techniques. L'erreur la plus fréquente est de concevoir les schémas en fonction des structures de bases de données existantes plutôt que des événements métier réels.</p>
<p><strong>L'approche Domain-Driven Design (DDD).</strong> Les événements Kafka doivent représenter des faits métier significatifs — des choses qui se sont produites dans le domaine. Un événement <code>OrderCreated</code> capture le fait qu'une commande a été créée, avec toutes les informations pertinentes au moment de la création.</p>
<p><em>Événement vs. État</em> : Un événement capture un changement à un instant donné. Il est immuable par nature — ce qui s'est passé ne peut pas être modifié. L'état, en revanche, est une projection cumulative des événements. Cette distinction est fondamentale pour la conception des schémas.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a>Événement (fait immuable)              État (projection mutable)
<a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a>─────────────────────────              ─────────────────────────
<a id="__codelineno-0-3" name="__codelineno-0-3" href="#__codelineno-0-3"></a>OrderCreated {                         Order {
<a id="__codelineno-0-4" name="__codelineno-0-4" href="#__codelineno-0-4"></a>  order_id: &quot;123&quot;                        order_id: &quot;123&quot;
<a id="__codelineno-0-5" name="__codelineno-0-5" href="#__codelineno-0-5"></a>  customer_id: &quot;456&quot;                     customer_id: &quot;456&quot;
<a id="__codelineno-0-6" name="__codelineno-0-6" href="#__codelineno-0-6"></a>  items: [...]                           items: [...]
<a id="__codelineno-0-7" name="__codelineno-0-7" href="#__codelineno-0-7"></a>  total: 150.00                          total: 150.00
<a id="__codelineno-0-8" name="__codelineno-0-8" href="#__codelineno-0-8"></a>  created_at: &quot;2024-01-15T10:30:00Z&quot;     status: &quot;shipped&quot;      ← modifié
<a id="__codelineno-0-9" name="__codelineno-0-9" href="#__codelineno-0-9"></a>}                                        shipped_at: &quot;2024-01-16T...&quot; ← ajouté
<a id="__codelineno-0-10" name="__codelineno-0-10" href="#__codelineno-0-10"></a>                                       }
<a id="__codelineno-0-11" name="__codelineno-0-11" href="#__codelineno-0-11"></a>OrderShipped {
<a id="__codelineno-0-12" name="__codelineno-0-12" href="#__codelineno-0-12"></a>  order_id: &quot;123&quot;
<a id="__codelineno-0-13" name="__codelineno-0-13" href="#__codelineno-0-13"></a>  shipped_at: &quot;2024-01-16T14:00:00Z&quot;
<a id="__codelineno-0-14" name="__codelineno-0-14" href="#__codelineno-0-14"></a>  tracking_number: &quot;XYZ789&quot;
<a id="__codelineno-0-15" name="__codelineno-0-15" href="#__codelineno-0-15"></a>}
</code></pre></div>
<p><strong>Event Storming comme outil de découverte.</strong> L'Event Storming est un atelier collaboratif qui réunit experts métier et développeurs pour identifier les événements du domaine. Le résultat est une cartographie des événements qui guide directement la conception des topics et des schémas.</p>
<p><em>Processus</em> :
1. Identifier les événements métier (post-its orange) : « Commande créée », « Paiement reçu », « Article expédié »
2. Identifier les commandes qui déclenchent ces événements (post-its bleu) : « Passer commande », « Confirmer paiement »
3. Identifier les agrégats (entités) concernés (post-its jaune) : « Commande », « Paiement », « Expédition »
4. Regrouper par bounded context : « Ventes », « Paiements », « Logistique »</p>
<p>Chaque événement identifié devient potentiellement un type de message Kafka avec son propre schéma.</p>
<h3 id="principes-de-conception-des-schemas">Principes de Conception des Schémas<a class="headerlink" href="#principes-de-conception-des-schemas" title="Permanent link">&para;</a></h3>
<p><strong>Principe 1 : Autonomie de l'événement (Self-Contained Events).</strong></p>
<p>Un événement doit contenir toutes les informations nécessaires pour être compris et traité indépendamment. Le consommateur ne devrait pas avoir besoin de faire des lookups dans d'autres systèmes pour comprendre l'événement.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-1-1" name="__codelineno-1-1" href="#__codelineno-1-1"></a><span class="c1">// ❌ Mauvais : Événement incomplet nécessitant des lookups</span>
<a id="__codelineno-1-2" name="__codelineno-1-2" href="#__codelineno-1-2"></a><span class="p">{</span>
<a id="__codelineno-1-3" name="__codelineno-1-3" href="#__codelineno-1-3"></a><span class="w">  </span><span class="nt">&quot;event_type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;OrderCreated&quot;</span><span class="p">,</span>
<a id="__codelineno-1-4" name="__codelineno-1-4" href="#__codelineno-1-4"></a><span class="w">  </span><span class="nt">&quot;order_id&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;123&quot;</span><span class="p">,</span>
<a id="__codelineno-1-5" name="__codelineno-1-5" href="#__codelineno-1-5"></a><span class="w">  </span><span class="nt">&quot;customer_id&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;456&quot;</span><span class="w">  </span><span class="c1">// Le consommateur doit chercher les détails du client ailleurs</span>
<a id="__codelineno-1-6" name="__codelineno-1-6" href="#__codelineno-1-6"></a><span class="p">}</span>
<a id="__codelineno-1-7" name="__codelineno-1-7" href="#__codelineno-1-7"></a>
<a id="__codelineno-1-8" name="__codelineno-1-8" href="#__codelineno-1-8"></a><span class="c1">// ✅ Bon : Événement autonome avec les informations pertinentes</span>
<a id="__codelineno-1-9" name="__codelineno-1-9" href="#__codelineno-1-9"></a><span class="p">{</span>
<a id="__codelineno-1-10" name="__codelineno-1-10" href="#__codelineno-1-10"></a><span class="w">  </span><span class="nt">&quot;event_type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;OrderCreated&quot;</span><span class="p">,</span>
<a id="__codelineno-1-11" name="__codelineno-1-11" href="#__codelineno-1-11"></a><span class="w">  </span><span class="nt">&quot;order_id&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;123&quot;</span><span class="p">,</span>
<a id="__codelineno-1-12" name="__codelineno-1-12" href="#__codelineno-1-12"></a><span class="w">  </span><span class="nt">&quot;customer&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-1-13" name="__codelineno-1-13" href="#__codelineno-1-13"></a><span class="w">    </span><span class="nt">&quot;id&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;456&quot;</span><span class="p">,</span>
<a id="__codelineno-1-14" name="__codelineno-1-14" href="#__codelineno-1-14"></a><span class="w">    </span><span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Jean Dupont&quot;</span><span class="p">,</span>
<a id="__codelineno-1-15" name="__codelineno-1-15" href="#__codelineno-1-15"></a><span class="w">    </span><span class="nt">&quot;email&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;jean@example.com&quot;</span><span class="p">,</span>
<a id="__codelineno-1-16" name="__codelineno-1-16" href="#__codelineno-1-16"></a><span class="w">    </span><span class="nt">&quot;segment&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;premium&quot;</span>
<a id="__codelineno-1-17" name="__codelineno-1-17" href="#__codelineno-1-17"></a><span class="w">  </span><span class="p">},</span>
<a id="__codelineno-1-18" name="__codelineno-1-18" href="#__codelineno-1-18"></a><span class="w">  </span><span class="nt">&quot;items&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="err">...</span><span class="p">],</span>
<a id="__codelineno-1-19" name="__codelineno-1-19" href="#__codelineno-1-19"></a><span class="w">  </span><span class="nt">&quot;total&quot;</span><span class="p">:</span><span class="w"> </span><span class="mf">150.00</span><span class="p">,</span>
<a id="__codelineno-1-20" name="__codelineno-1-20" href="#__codelineno-1-20"></a><span class="w">  </span><span class="nt">&quot;currency&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;CAD&quot;</span><span class="p">,</span>
<a id="__codelineno-1-21" name="__codelineno-1-21" href="#__codelineno-1-21"></a><span class="w">  </span><span class="nt">&quot;created_at&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;2024-01-15T10:30:00Z&quot;</span>
<a id="__codelineno-1-22" name="__codelineno-1-22" href="#__codelineno-1-22"></a><span class="p">}</span>
</code></pre></div>
<p><em>Trade-off</em> : Les événements autonomes sont plus volumineux mais réduisent le couplage. Les consommateurs sont indépendants des bases de données des producteurs.</p>
<p><strong>Principe 2 : Nommage explicite et cohérent.</strong></p>
<p>Les noms des événements et des champs doivent être explicites, non ambigus, et cohérents à travers tous les schémas de l'organisation.</p>
<p><em>Conventions recommandées</em> :
- Événements au passé : <code>OrderCreated</code>, <code>PaymentReceived</code>, <code>ItemShipped</code> (pas <code>CreateOrder</code>)
- Champs en snake_case ou camelCase (choisir une convention et s'y tenir)
- Types explicites : <code>customer_id</code> plutôt que <code>id</code>, <code>order_total_amount</code> plutôt que <code>total</code>
- Unités dans le nom si ambigu : <code>duration_seconds</code>, <code>amount_cents</code></p>
<p><strong>Principe 3 : Versionner dès le début.</strong></p>
<p>Tout schéma évoluera. Intégrer la notion de version dès la conception initiale, même si une seule version existe.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-2-1" name="__codelineno-2-1" href="#__codelineno-2-1"></a><span class="p">{</span>
<a id="__codelineno-2-2" name="__codelineno-2-2" href="#__codelineno-2-2"></a><span class="w">  </span><span class="nt">&quot;schema_version&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;1.0&quot;</span><span class="p">,</span>
<a id="__codelineno-2-3" name="__codelineno-2-3" href="#__codelineno-2-3"></a><span class="w">  </span><span class="nt">&quot;event_type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;OrderCreated&quot;</span><span class="p">,</span>
<a id="__codelineno-2-4" name="__codelineno-2-4" href="#__codelineno-2-4"></a><span class="w">  </span><span class="nt">&quot;event_id&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;uuid-...&quot;</span><span class="p">,</span>
<a id="__codelineno-2-5" name="__codelineno-2-5" href="#__codelineno-2-5"></a><span class="w">  </span><span class="nt">&quot;event_time&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;2024-01-15T10:30:00Z&quot;</span><span class="p">,</span>
<a id="__codelineno-2-6" name="__codelineno-2-6" href="#__codelineno-2-6"></a><span class="w">  </span><span class="nt">&quot;payload&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-2-7" name="__codelineno-2-7" href="#__codelineno-2-7"></a><span class="w">    </span><span class="c1">// Données métier</span>
<a id="__codelineno-2-8" name="__codelineno-2-8" href="#__codelineno-2-8"></a><span class="w">  </span><span class="p">}</span>
<a id="__codelineno-2-9" name="__codelineno-2-9" href="#__codelineno-2-9"></a><span class="p">}</span>
</code></pre></div>
<p><strong>Principe 4 : Séparer métadonnées et payload.</strong></p>
<p>Les métadonnées techniques (timestamps, IDs de corrélation, source) doivent être séparées des données métier. Cela permet une évolution indépendante et un traitement standardisé des métadonnées.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-3-1" name="__codelineno-3-1" href="#__codelineno-3-1"></a><span class="p">{</span>
<a id="__codelineno-3-2" name="__codelineno-3-2" href="#__codelineno-3-2"></a><span class="w">  </span><span class="nt">&quot;metadata&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-3-3" name="__codelineno-3-3" href="#__codelineno-3-3"></a><span class="w">    </span><span class="nt">&quot;event_id&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;550e8400-e29b-41d4-a716-446655440000&quot;</span><span class="p">,</span>
<a id="__codelineno-3-4" name="__codelineno-3-4" href="#__codelineno-3-4"></a><span class="w">    </span><span class="nt">&quot;event_type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;OrderCreated&quot;</span><span class="p">,</span>
<a id="__codelineno-3-5" name="__codelineno-3-5" href="#__codelineno-3-5"></a><span class="w">    </span><span class="nt">&quot;event_time&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;2024-01-15T10:30:00Z&quot;</span><span class="p">,</span>
<a id="__codelineno-3-6" name="__codelineno-3-6" href="#__codelineno-3-6"></a><span class="w">    </span><span class="nt">&quot;source_system&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;checkout-service&quot;</span><span class="p">,</span>
<a id="__codelineno-3-7" name="__codelineno-3-7" href="#__codelineno-3-7"></a><span class="w">    </span><span class="nt">&quot;correlation_id&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;req-abc-123&quot;</span><span class="p">,</span>
<a id="__codelineno-3-8" name="__codelineno-3-8" href="#__codelineno-3-8"></a><span class="w">    </span><span class="nt">&quot;causation_id&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;evt-xyz-789&quot;</span><span class="p">,</span>
<a id="__codelineno-3-9" name="__codelineno-3-9" href="#__codelineno-3-9"></a><span class="w">    </span><span class="nt">&quot;schema_version&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;1.2&quot;</span>
<a id="__codelineno-3-10" name="__codelineno-3-10" href="#__codelineno-3-10"></a><span class="w">  </span><span class="p">},</span>
<a id="__codelineno-3-11" name="__codelineno-3-11" href="#__codelineno-3-11"></a><span class="w">  </span><span class="nt">&quot;payload&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-3-12" name="__codelineno-3-12" href="#__codelineno-3-12"></a><span class="w">    </span><span class="nt">&quot;order_id&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;ORD-12345&quot;</span><span class="p">,</span>
<a id="__codelineno-3-13" name="__codelineno-3-13" href="#__codelineno-3-13"></a><span class="w">    </span><span class="nt">&quot;customer_id&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;CUST-67890&quot;</span><span class="p">,</span>
<a id="__codelineno-3-14" name="__codelineno-3-14" href="#__codelineno-3-14"></a><span class="w">    </span><span class="nt">&quot;items&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="err">...</span><span class="p">],</span>
<a id="__codelineno-3-15" name="__codelineno-3-15" href="#__codelineno-3-15"></a><span class="w">    </span><span class="nt">&quot;total_amount&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">15000</span><span class="p">,</span>
<a id="__codelineno-3-16" name="__codelineno-3-16" href="#__codelineno-3-16"></a><span class="w">    </span><span class="nt">&quot;currency&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;CAD&quot;</span>
<a id="__codelineno-3-17" name="__codelineno-3-17" href="#__codelineno-3-17"></a><span class="w">  </span><span class="p">}</span>
<a id="__codelineno-3-18" name="__codelineno-3-18" href="#__codelineno-3-18"></a><span class="p">}</span>
</code></pre></div>
<blockquote>
<p><strong>Définition formelle</strong></p>
<p><strong>Contrat de données</strong> : Accord formel entre producteurs et consommateurs spécifiant la structure, le format, la sémantique, et les règles d'évolution des messages échangés. Le contrat inclut :
- Le schéma technique (Avro, Protobuf, JSON Schema)
- La documentation sémantique (signification des champs, unités, valeurs valides)
- Les règles de compatibilité (backward, forward, full)
- Les SLA (latence, disponibilité, fraîcheur des données)
- Les responsabilités (propriétaire du schéma, processus de modification)</p>
<p>Un contrat de données bien défini est la fondation de la confiance dans une architecture événementielle. Sans lui, chaque interaction entre systèmes devient une source potentielle d'erreurs et d'incompréhensions.</p>
</blockquote>
<h3 id="granularite-des-evenements">Granularité des Événements<a class="headerlink" href="#granularite-des-evenements" title="Permanent link">&para;</a></h3>
<p>La question de la granularité est récurrente : faut-il des événements fins (un événement par changement atomique) ou des événements agrégés (un événement résumant plusieurs changements) ? La réponse dépend des besoins des consommateurs et des exigences de traçabilité.</p>
<p><strong>Événements fins (Fine-Grained Events).</strong></p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-4-1" name="__codelineno-4-1" href="#__codelineno-4-1"></a>OrderCreated → ItemAddedToOrder → ItemAddedToOrder → OrderSubmitted → PaymentReceived → OrderConfirmed
</code></pre></div>
<p><em>Avantages</em> : Flexibilité maximale, possibilité de reconstruire n'importe quel état intermédiaire, audit détaillé complet, support natif de l'Event Sourcing.</p>
<p><em>Inconvénients</em> : Volume élevé de messages, complexité de traitement pour les consommateurs qui ont besoin de l'image complète, nécessité de maintenir un état pour reconstituer les agrégats.</p>
<p><strong>Événements agrégés (Coarse-Grained Events).</strong></p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-5-1" name="__codelineno-5-1" href="#__codelineno-5-1"></a>OrderCompleted (contient tous les détails de la commande finalisée avec l&#39;historique résumé)
</code></pre></div>
<p><em>Avantages</em> : Simple à consommer, volume réduit, image complète en un seul message, pas besoin de maintenir un état côté consommateur.</p>
<p><em>Inconvénients</em> : Perte d'information sur le processus détaillé, moins de flexibilité pour les cas d'usage non anticipés, difficulté à répondre aux questions « quand exactement X s'est-il produit ? ».</p>
<p><strong>Approche hybride recommandée.</strong></p>
<p>Publier les événements fins pour les consommateurs qui en ont besoin (audit, replay détaillé), et des événements agrégés pour les consommateurs qui ont besoin d'une vue synthétique. Les deux types peuvent coexister dans des topics différents.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-6-1" name="__codelineno-6-1" href="#__codelineno-6-1"></a>Topic: orders.events (fin)           Topic: orders.completed (agrégé)
<a id="__codelineno-6-2" name="__codelineno-6-2" href="#__codelineno-6-2"></a>├── OrderCreated                     └── OrderCompleted (résumé)
<a id="__codelineno-6-3" name="__codelineno-6-3" href="#__codelineno-6-3"></a>├── ItemAdded
<a id="__codelineno-6-4" name="__codelineno-6-4" href="#__codelineno-6-4"></a>├── ItemAdded
<a id="__codelineno-6-5" name="__codelineno-6-5" href="#__codelineno-6-5"></a>├── PaymentReceived
<a id="__codelineno-6-6" name="__codelineno-6-6" href="#__codelineno-6-6"></a>└── OrderConfirmed
</code></pre></div>
<blockquote>
<p><strong>Note de terrain</strong></p>
<p><em>Contexte</em> : Plateforme e-commerce avec 50 microservices consommant des événements de commande.</p>
<p><em>Problème initial</em> : Seuls des événements fins étaient publiés. Les services de reporting devaient agréger 5-10 événements pour avoir une vue complète d'une commande. Complexité, latence, et bugs fréquents.</p>
<p><em>Solution</em> : Ajout d'un topic <code>orders.snapshots</code> avec des événements agrégés publiés à chaque changement d'état significatif. Les services simples consomment les snapshots ; les services d'audit consomment les événements fins.</p>
<p><em>Résultat</em> : Réduction de 70% du code de consommation pour les services simples, maintien de l'audit détaillé.</p>
</blockquote>
<hr />
<h2 id="iii62-comment-kafka-gere-la-structure-des-evenements">III.6.2 Comment Kafka Gère la Structure des Événements<a class="headerlink" href="#iii62-comment-kafka-gere-la-structure-des-evenements" title="Permanent link">&para;</a></h2>
<h3 id="kafka-est-agnostique-au-contenu">Kafka est Agnostique au Contenu<a class="headerlink" href="#kafka-est-agnostique-au-contenu" title="Permanent link">&para;</a></h3>
<p>Un point fondamental souvent mal compris : <strong>Kafka ne comprend pas le contenu des messages</strong>. Pour Kafka, un message est une séquence d'octets (bytes) avec une clé optionnelle. Kafka ne valide pas, ne parse pas, et ne transforme pas le contenu.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-7-1" name="__codelineno-7-1" href="#__codelineno-7-1"></a>┌─────────────────────────────────────────────────────────────────────────┐
<a id="__codelineno-7-2" name="__codelineno-7-2" href="#__codelineno-7-2"></a>│                    Message Kafka (vue interne)                          │
<a id="__codelineno-7-3" name="__codelineno-7-3" href="#__codelineno-7-3"></a>│                                                                         │
<a id="__codelineno-7-4" name="__codelineno-7-4" href="#__codelineno-7-4"></a>│  ┌─────────────────────────────────────────────────────────────────┐   │
<a id="__codelineno-7-5" name="__codelineno-7-5" href="#__codelineno-7-5"></a>│  │ Headers (optionnel)                                              │   │
<a id="__codelineno-7-6" name="__codelineno-7-6" href="#__codelineno-7-6"></a>│  │ ┌─────────────────┬─────────────────┐                           │   │
<a id="__codelineno-7-7" name="__codelineno-7-7" href="#__codelineno-7-7"></a>│  │ │ Key: &quot;trace-id&quot; │ Value: &quot;abc123&quot; │                           │   │
<a id="__codelineno-7-8" name="__codelineno-7-8" href="#__codelineno-7-8"></a>│  │ └─────────────────┴─────────────────┘                           │   │
<a id="__codelineno-7-9" name="__codelineno-7-9" href="#__codelineno-7-9"></a>│  └─────────────────────────────────────────────────────────────────┘   │
<a id="__codelineno-7-10" name="__codelineno-7-10" href="#__codelineno-7-10"></a>│                                                                         │
<a id="__codelineno-7-11" name="__codelineno-7-11" href="#__codelineno-7-11"></a>│  ┌─────────────────────────────────────────────────────────────────┐   │
<a id="__codelineno-7-12" name="__codelineno-7-12" href="#__codelineno-7-12"></a>│  │ Key (optionnel) : byte[]                                         │   │
<a id="__codelineno-7-13" name="__codelineno-7-13" href="#__codelineno-7-13"></a>│  │ 0x4F 0x52 0x44 0x2D 0x31 0x32 0x33 0x34 0x35  (&quot;ORD-12345&quot;)     │   │
<a id="__codelineno-7-14" name="__codelineno-7-14" href="#__codelineno-7-14"></a>│  └─────────────────────────────────────────────────────────────────┘   │
<a id="__codelineno-7-15" name="__codelineno-7-15" href="#__codelineno-7-15"></a>│                                                                         │
<a id="__codelineno-7-16" name="__codelineno-7-16" href="#__codelineno-7-16"></a>│  ┌─────────────────────────────────────────────────────────────────┐   │
<a id="__codelineno-7-17" name="__codelineno-7-17" href="#__codelineno-7-17"></a>│  │ Value : byte[]                                                   │   │
<a id="__codelineno-7-18" name="__codelineno-7-18" href="#__codelineno-7-18"></a>│  │ 0x7B 0x22 0x6F 0x72 0x64 0x65 0x72 ...  (JSON, Avro, Protobuf?) │   │
<a id="__codelineno-7-19" name="__codelineno-7-19" href="#__codelineno-7-19"></a>│  │ Kafka ne sait pas et ne se soucie pas du format                 │   │
<a id="__codelineno-7-20" name="__codelineno-7-20" href="#__codelineno-7-20"></a>│  └─────────────────────────────────────────────────────────────────┘   │
<a id="__codelineno-7-21" name="__codelineno-7-21" href="#__codelineno-7-21"></a>│                                                                         │
<a id="__codelineno-7-22" name="__codelineno-7-22" href="#__codelineno-7-22"></a>│  Timestamp: 1705312200000                                              │
<a id="__codelineno-7-23" name="__codelineno-7-23" href="#__codelineno-7-23"></a>│  Partition: 3                                                          │
<a id="__codelineno-7-24" name="__codelineno-7-24" href="#__codelineno-7-24"></a>│  Offset: 42                                                            │
<a id="__codelineno-7-25" name="__codelineno-7-25" href="#__codelineno-7-25"></a>└─────────────────────────────────────────────────────────────────────────┘
</code></pre></div>
<p><strong>Conséquences de cette agnosticité :</strong></p>
<p><em>Flexibilité</em> : Kafka peut transporter n'importe quel format — JSON, Avro, Protobuf, XML, binaire propriétaire, images, fichiers compressés.</p>
<p><em>Responsabilité déplacée</em> : La validation et la compatibilité des schémas sont la responsabilité des producteurs et consommateurs, pas de Kafka.</p>
<p><em>Risque</em> : Sans mécanisme externe, rien n'empêche un producteur de publier des données corrompues ou incompatibles.</p>
<h3 id="formats-de-serialisation">Formats de Sérialisation<a class="headerlink" href="#formats-de-serialisation" title="Permanent link">&para;</a></h3>
<p>Le choix du format de sérialisation impacte les performances, la compatibilité, et l'outillage disponible.</p>
<p><strong>JSON (JavaScript Object Notation).</strong></p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-8-1" name="__codelineno-8-1" href="#__codelineno-8-1"></a><span class="p">{</span>
<a id="__codelineno-8-2" name="__codelineno-8-2" href="#__codelineno-8-2"></a><span class="w">  </span><span class="nt">&quot;order_id&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;ORD-12345&quot;</span><span class="p">,</span>
<a id="__codelineno-8-3" name="__codelineno-8-3" href="#__codelineno-8-3"></a><span class="w">  </span><span class="nt">&quot;customer_id&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;CUST-67890&quot;</span><span class="p">,</span>
<a id="__codelineno-8-4" name="__codelineno-8-4" href="#__codelineno-8-4"></a><span class="w">  </span><span class="nt">&quot;total_amount&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">15000</span><span class="p">,</span>
<a id="__codelineno-8-5" name="__codelineno-8-5" href="#__codelineno-8-5"></a><span class="w">  </span><span class="nt">&quot;currency&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;CAD&quot;</span><span class="p">,</span>
<a id="__codelineno-8-6" name="__codelineno-8-6" href="#__codelineno-8-6"></a><span class="w">  </span><span class="nt">&quot;created_at&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;2024-01-15T10:30:00Z&quot;</span>
<a id="__codelineno-8-7" name="__codelineno-8-7" href="#__codelineno-8-7"></a><span class="p">}</span>
</code></pre></div>
<p><em>Avantages</em> :
- Lisible par les humains (débogage facile)
- Supporté universellement (tous les langages)
- Pas de schéma requis pour la lecture de base
- Flexible (champs optionnels naturels)</p>
<p><em>Inconvénients</em> :
- Verbeux (noms de champs répétés dans chaque message)
- Pas de typage fort (le champ <code>total_amount</code> est-il un entier ou un flottant ?)
- Pas de validation de schéma native
- Performance de sérialisation/désérialisation modérée</p>
<p><em>Cas d'usage</em> : Prototypage, faibles volumes, intégration avec des systèmes legacy, cas où la lisibilité prime.</p>
<p><strong>Apache Avro.</strong></p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-9-1" name="__codelineno-9-1" href="#__codelineno-9-1"></a>{
<a id="__codelineno-9-2" name="__codelineno-9-2" href="#__codelineno-9-2"></a>  &quot;type&quot;: &quot;record&quot;,
<a id="__codelineno-9-3" name="__codelineno-9-3" href="#__codelineno-9-3"></a>  &quot;name&quot;: &quot;OrderCreated&quot;,
<a id="__codelineno-9-4" name="__codelineno-9-4" href="#__codelineno-9-4"></a>  &quot;namespace&quot;: &quot;com.example.orders&quot;,
<a id="__codelineno-9-5" name="__codelineno-9-5" href="#__codelineno-9-5"></a>  &quot;fields&quot;: [
<a id="__codelineno-9-6" name="__codelineno-9-6" href="#__codelineno-9-6"></a>    {&quot;name&quot;: &quot;order_id&quot;, &quot;type&quot;: &quot;string&quot;},
<a id="__codelineno-9-7" name="__codelineno-9-7" href="#__codelineno-9-7"></a>    {&quot;name&quot;: &quot;customer_id&quot;, &quot;type&quot;: &quot;string&quot;},
<a id="__codelineno-9-8" name="__codelineno-9-8" href="#__codelineno-9-8"></a>    {&quot;name&quot;: &quot;total_amount&quot;, &quot;type&quot;: &quot;long&quot;, &quot;doc&quot;: &quot;Amount in cents&quot;},
<a id="__codelineno-9-9" name="__codelineno-9-9" href="#__codelineno-9-9"></a>    {&quot;name&quot;: &quot;currency&quot;, &quot;type&quot;: &quot;string&quot;, &quot;default&quot;: &quot;CAD&quot;},
<a id="__codelineno-9-10" name="__codelineno-9-10" href="#__codelineno-9-10"></a>    {&quot;name&quot;: &quot;created_at&quot;, &quot;type&quot;: &quot;long&quot;, &quot;logicalType&quot;: &quot;timestamp-millis&quot;}
<a id="__codelineno-9-11" name="__codelineno-9-11" href="#__codelineno-9-11"></a>  ]
<a id="__codelineno-9-12" name="__codelineno-9-12" href="#__codelineno-9-12"></a>}
</code></pre></div>
<p><em>Avantages</em> :
- Format binaire compact (pas de noms de champs dans les données)
- Schéma intégré ou référencé (Schema Registry)
- Évolution de schéma native avec règles de compatibilité
- Performance excellente
- Support natif dans l'écosystème Confluent</p>
<p><em>Inconvénients</em> :
- Non lisible par les humains (binaire)
- Nécessite le schéma pour la lecture
- Courbe d'apprentissage pour les développeurs</p>
<p><em>Cas d'usage</em> : Production à grande échelle, intégration Confluent, cas où la compatibilité de schéma est critique.</p>
<p><strong>Protocol Buffers (Protobuf).</strong></p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-10-1" name="__codelineno-10-1" href="#__codelineno-10-1"></a><span class="k">syntax</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;proto3&quot;</span><span class="p">;</span>
<a id="__codelineno-10-2" name="__codelineno-10-2" href="#__codelineno-10-2"></a>
<a id="__codelineno-10-3" name="__codelineno-10-3" href="#__codelineno-10-3"></a><span class="kn">package</span><span class="w"> </span><span class="nn">com</span><span class="o">.</span><span class="n">example.orders</span><span class="p">;</span>
<a id="__codelineno-10-4" name="__codelineno-10-4" href="#__codelineno-10-4"></a>
<a id="__codelineno-10-5" name="__codelineno-10-5" href="#__codelineno-10-5"></a><span class="kd">message</span><span class="w"> </span><span class="nc">OrderCreated</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-10-6" name="__codelineno-10-6" href="#__codelineno-10-6"></a><span class="w">  </span><span class="kt">string</span><span class="w"> </span><span class="na">order_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span><span class="p">;</span>
<a id="__codelineno-10-7" name="__codelineno-10-7" href="#__codelineno-10-7"></a><span class="w">  </span><span class="kt">string</span><span class="w"> </span><span class="na">customer_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">2</span><span class="p">;</span>
<a id="__codelineno-10-8" name="__codelineno-10-8" href="#__codelineno-10-8"></a><span class="w">  </span><span class="kt">int64</span><span class="w"> </span><span class="na">total_amount</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">3</span><span class="p">;</span><span class="w">  </span><span class="c1">// Amount in cents</span>
<a id="__codelineno-10-9" name="__codelineno-10-9" href="#__codelineno-10-9"></a><span class="w">  </span><span class="kt">string</span><span class="w"> </span><span class="na">currency</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">4</span><span class="p">;</span>
<a id="__codelineno-10-10" name="__codelineno-10-10" href="#__codelineno-10-10"></a><span class="w">  </span><span class="n">google.protobuf.Timestamp</span><span class="w"> </span><span class="na">created_at</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">5</span><span class="p">;</span>
<a id="__codelineno-10-11" name="__codelineno-10-11" href="#__codelineno-10-11"></a><span class="p">}</span>
</code></pre></div>
<p><em>Avantages</em> :
- Format binaire très compact
- Performance de sérialisation excellente
- Génération de code dans de nombreux langages
- Évolution de schéma via numéros de champs
- Largement utilisé (Google, gRPC)</p>
<p><em>Inconvénients</em> :
- Nécessite compilation du schéma (.proto → code)
- Non lisible par les humains
- Moins intégré nativement avec l'écosystème Kafka (mais supporté par Schema Registry)</p>
<p><em>Cas d'usage</em> : Environnements polyglotes, intégration avec gRPC, haute performance requise.</p>
<p><strong>Comparaison des formats :</strong></p>
<table>
<thead>
<tr>
<th>Critère</th>
<th>JSON</th>
<th>Avro</th>
<th>Protobuf</th>
</tr>
</thead>
<tbody>
<tr>
<td>Taille message</td>
<td>Grande</td>
<td>Petite</td>
<td>Très petite</td>
</tr>
<tr>
<td>Lisibilité</td>
<td>Excellente</td>
<td>Nulle</td>
<td>Nulle</td>
</tr>
<tr>
<td>Performance sérialisation</td>
<td>Modérée</td>
<td>Excellente</td>
<td>Excellente</td>
</tr>
<tr>
<td>Typage</td>
<td>Faible</td>
<td>Fort</td>
<td>Fort</td>
</tr>
<tr>
<td>Évolution de schéma</td>
<td>Manuelle</td>
<td>Native</td>
<td>Native</td>
</tr>
<tr>
<td>Intégration Schema Registry</td>
<td>Via JSON Schema</td>
<td>Native</td>
<td>Supporté</td>
</tr>
<tr>
<td>Génération de code</td>
<td>Non nécessaire</td>
<td>Optionnelle</td>
<td>Requise</td>
</tr>
<tr>
<td>Courbe d'apprentissage</td>
<td>Faible</td>
<td>Moyenne</td>
<td>Moyenne</td>
</tr>
<tr>
<td>Débogage</td>
<td>Facile</td>
<td>Difficile</td>
<td>Difficile</td>
</tr>
</tbody>
</table>
<p><strong>Impact sur la taille des messages — exemple concret :</strong></p>
<p>Pour un événement <code>OrderCreated</code> typique avec 10 champs, voici les tailles observées en production :</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-11-1" name="__codelineno-11-1" href="#__codelineno-11-1"></a>Événement OrderCreated (même contenu, formats différents):
<a id="__codelineno-11-2" name="__codelineno-11-2" href="#__codelineno-11-2"></a>┌────────────────────────────────────────────────────────────────────────┐
<a id="__codelineno-11-3" name="__codelineno-11-3" href="#__codelineno-11-3"></a>│ Format      │ Taille (bytes) │ Ratio vs JSON │ Messages/sec (1 Gbps)  │
<a id="__codelineno-11-4" name="__codelineno-11-4" href="#__codelineno-11-4"></a>├────────────────────────────────────────────────────────────────────────┤
<a id="__codelineno-11-5" name="__codelineno-11-5" href="#__codelineno-11-5"></a>│ JSON        │     450        │    1.0x       │    277,000             │
<a id="__codelineno-11-6" name="__codelineno-11-6" href="#__codelineno-11-6"></a>│ JSON (gzip) │     180        │    0.4x       │    694,000             │
<a id="__codelineno-11-7" name="__codelineno-11-7" href="#__codelineno-11-7"></a>│ Avro        │     120        │    0.27x      │  1,041,000             │
<a id="__codelineno-11-8" name="__codelineno-11-8" href="#__codelineno-11-8"></a>│ Protobuf    │      95        │    0.21x      │  1,315,000             │
<a id="__codelineno-11-9" name="__codelineno-11-9" href="#__codelineno-11-9"></a>└────────────────────────────────────────────────────────────────────────┘
</code></pre></div>
<p><em>Observation</em> : Le choix du format peut multiplier par 4-5 le débit théorique sur un même réseau. Pour les architectures à très haut volume (&gt; 100 000 msg/sec), ce choix est critique.</p>
<p><strong>Considérations pratiques pour le choix :</strong></p>
<p><em>Choisir JSON si</em> :
- L'équipe n'a pas d'expérience avec les formats binaires
- Le volume est faible (&lt; 1 000 msg/sec)
- Le débogage fréquent est nécessaire (environnements de développement)
- L'intégration avec des systèmes legacy JSON est requise
- La flexibilité prime sur la performance</p>
<p><em>Choisir Avro si</em> :
- L'environnement utilise Confluent Platform
- La compatibilité de schéma est critique
- Le volume justifie un format compact
- L'équipe peut investir dans l'apprentissage
- La génération de code optionnelle est un avantage</p>
<p><em>Choisir Protobuf si</em> :
- L'environnement utilise déjà gRPC
- La performance est la priorité absolue
- L'équipe maîtrise déjà Protobuf
- La compilation de schémas est acceptable dans le workflow</p>
<blockquote>
<p><strong>Décision architecturale</strong></p>
<p><em>Contexte</em> : Nouvelle plateforme événementielle pour une banque. 50 microservices, 100+ types d'événements, volumes de 50 000 messages/seconde, exigences réglementaires strictes.</p>
<p><em>Options considérées</em> :
1. JSON : Simple, lisible, mais pas de garanties de compatibilité et taille importante
2. Avro : Compact, évolution native, intégration Confluent Cloud
3. Protobuf : Très compact, très performant, mais compilation requise</p>
<p><em>Analyse détaillée</em> :
- Volume : 50k msg/sec × 450 bytes (JSON) = 22 MB/sec vs 6 MB/sec (Avro) → économie réseau significative
- Compatibilité : Critique pour une banque — Avro et Protobuf offrent des garanties, pas JSON
- Intégration : Confluent Cloud choisi → Avro nativement supporté
- Équipes : 8 équipes de développement, expertise variable → Avro plus accessible que Protobuf</p>
<p><em>Décision</em> : Avro avec Schema Registry Confluent.</p>
<p><em>Justification</em> :
- La compatibilité de schéma est critique pour une banque (pas de messages perdus ou corrompus)
- L'intégration native avec Confluent Cloud simplifie l'opérationnel
- Les volumes justifient un format compact (économie de 70% sur la bande passante)
- La génération de code optionnelle réduit la friction pour les équipes</p>
<p><em>Concession</em> : JSON autorisé pour les topics de développement/debug avec rétention courte (24h).</p>
<p><em>Métriques de succès</em> : Aucun incident de compatibilité en 18 mois de production.</p>
</blockquote>
<hr />
<h2 id="iii63-defis-dans-la-conception-devenements">III.6.3 Défis dans la Conception d'Événements<a class="headerlink" href="#iii63-defis-dans-la-conception-devenements" title="Permanent link">&para;</a></h2>
<h3 id="le-probleme-de-levolution-des-schemas">Le Problème de l'Évolution des Schémas<a class="headerlink" href="#le-probleme-de-levolution-des-schemas" title="Permanent link">&para;</a></h3>
<p>Les schémas évoluent inévitablement. Les besoins métier changent, de nouveaux champs sont nécessaires, d'anciens champs deviennent obsolètes. Le défi est de gérer cette évolution sans briser les consommateurs existants.</p>
<p><strong>Scénario typique de rupture :</strong></p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-12-1" name="__codelineno-12-1" href="#__codelineno-12-1"></a>Jour 1: Producteur publie OrderCreated v1
<a id="__codelineno-12-2" name="__codelineno-12-2" href="#__codelineno-12-2"></a>        Consommateur A traite OrderCreated v1 ✓
<a id="__codelineno-12-3" name="__codelineno-12-3" href="#__codelineno-12-3"></a>
<a id="__codelineno-12-4" name="__codelineno-12-4" href="#__codelineno-12-4"></a>Jour 30: Producteur modifie le schéma → OrderCreated v2
<a id="__codelineno-12-5" name="__codelineno-12-5" href="#__codelineno-12-5"></a>         - Renomme &quot;total&quot; en &quot;total_amount&quot;
<a id="__codelineno-12-6" name="__codelineno-12-6" href="#__codelineno-12-6"></a>         - Ajoute champ obligatoire &quot;currency&quot;
<a id="__codelineno-12-7" name="__codelineno-12-7" href="#__codelineno-12-7"></a>
<a id="__codelineno-12-8" name="__codelineno-12-8" href="#__codelineno-12-8"></a>Jour 30: Consommateur A (non mis à jour) reçoit OrderCreated v2
<a id="__codelineno-12-9" name="__codelineno-12-9" href="#__codelineno-12-9"></a>         - Cherche le champ &quot;total&quot; → absent → ERREUR
<a id="__codelineno-12-10" name="__codelineno-12-10" href="#__codelineno-12-10"></a>         - Ne connaît pas &quot;currency&quot; → ignore (ou erreur)
</code></pre></div>
<p>Ce scénario illustre pourquoi l'évolution des schémas est l'un des problèmes les plus critiques dans les architectures événementielles. Un changement apparemment simple peut avoir des conséquences en cascade sur des dizaines de consommateurs.</p>
<p><strong>Types de changements de schéma :</strong></p>
<p><em>Changements rétrocompatibles (Backward Compatible)</em> :
- Ajouter un champ avec valeur par défaut
- Supprimer un champ optionnel
- Élargir un type (int → long)
- Ajouter un alias pour un champ existant</p>
<p><em>Changements non rétrocompatibles (Breaking Changes)</em> :
- Renommer un champ
- Supprimer un champ obligatoire
- Changer le type d'un champ (string → int)
- Ajouter un champ obligatoire sans défaut
- Réduire un type (long → int)
- Modifier le nom d'un type enum</p>
<h3 id="analyse-dimpact-des-changements">Analyse d'Impact des Changements<a class="headerlink" href="#analyse-dimpact-des-changements" title="Permanent link">&para;</a></h3>
<p>Avant toute modification de schéma, une analyse d'impact rigoureuse est nécessaire.</p>
<p><strong>Checklist d'analyse d'impact :</strong></p>
<ol>
<li>
<p><strong>Identifier tous les consommateurs</strong> : Quels services, applications, ou équipes consomment ce topic ?</p>
</li>
<li>
<p><strong>Évaluer la nature du changement</strong> : Est-il backward compatible ? Forward compatible ? Breaking ?</p>
</li>
<li>
<p><strong>Déterminer l'ordre de déploiement</strong> : Qui doit être mis à jour en premier — producteurs ou consommateurs ?</p>
</li>
<li>
<p><strong>Planifier la migration</strong> : Période de transition, communication, rollback possible ?</p>
</li>
<li>
<p><strong>Tester la compatibilité</strong> : Validation automatisée avec les schémas existants.</p>
</li>
</ol>
<div class="highlight"><pre><span></span><code><a id="__codelineno-13-1" name="__codelineno-13-1" href="#__codelineno-13-1"></a>┌─────────────────────────────────────────────────────────────────────────┐
<a id="__codelineno-13-2" name="__codelineno-13-2" href="#__codelineno-13-2"></a>│                    Matrice d&#39;Impact des Changements                     │
<a id="__codelineno-13-3" name="__codelineno-13-3" href="#__codelineno-13-3"></a>│                                                                         │
<a id="__codelineno-13-4" name="__codelineno-13-4" href="#__codelineno-13-4"></a>│  Type de changement          │ Impact │ Action requise                  │
<a id="__codelineno-13-5" name="__codelineno-13-5" href="#__codelineno-13-5"></a>│  ────────────────────────────┼────────┼───────────────────────────────  │
<a id="__codelineno-13-6" name="__codelineno-13-6" href="#__codelineno-13-6"></a>│  Ajout champ avec défaut     │ Faible │ Déployer producteur d&#39;abord     │
<a id="__codelineno-13-7" name="__codelineno-13-7" href="#__codelineno-13-7"></a>│  Suppression champ optionnel │ Moyen  │ Vérifier aucun consommateur     │
<a id="__codelineno-13-8" name="__codelineno-13-8" href="#__codelineno-13-8"></a>│                              │        │ n&#39;utilise le champ              │
<a id="__codelineno-13-9" name="__codelineno-13-9" href="#__codelineno-13-9"></a>│  Renommage de champ          │ Élevé  │ Migration en plusieurs phases   │
<a id="__codelineno-13-10" name="__codelineno-13-10" href="#__codelineno-13-10"></a>│  Changement de type          │ Élevé  │ Nouveau topic ou versioning     │
<a id="__codelineno-13-11" name="__codelineno-13-11" href="#__codelineno-13-11"></a>│  Ajout champ obligatoire     │ Élevé  │ Ajouter défaut ou nouveau topic │
<a id="__codelineno-13-12" name="__codelineno-13-12" href="#__codelineno-13-12"></a>└─────────────────────────────────────────────────────────────────────────┘
</code></pre></div>
<blockquote>
<p><strong>Note de terrain</strong></p>
<p><em>Contexte</em> : Équipe produit souhaitant renommer le champ <code>price</code> en <code>unit_price</code> pour plus de clarté.</p>
<p><em>Analyse</em> : 12 consommateurs utilisent ce champ. Un renommage direct casserait tous les consommateurs.</p>
<p><em>Solution mise en place</em> (migration en 4 phases) :
1. <strong>Phase 1</strong> : Ajouter <code>unit_price</code> comme alias de <code>price</code> (v2 du schéma). Les deux champs contiennent la même valeur.
2. <strong>Phase 2</strong> : Mettre à jour tous les consommateurs pour lire <code>unit_price</code> (sur 4 semaines).
3. <strong>Phase 3</strong> : Modifier le producteur pour ne plus remplir <code>price</code> (déprécié).
4. <strong>Phase 4</strong> : Supprimer <code>price</code> du schéma (v3) après confirmation que plus aucun consommateur ne l'utilise.</p>
<p><em>Durée totale</em> : 8 semaines. Aucune interruption de service.</p>
<p><em>Leçon</em> : Les renommages « simples » sont en réalité des migrations complexes. Planifier en conséquence.</p>
</blockquote>
<h3 id="strategies-de-compatibilite">Stratégies de Compatibilité<a class="headerlink" href="#strategies-de-compatibilite" title="Permanent link">&para;</a></h3>
<p>Le Schema Registry Confluent définit plusieurs modes de compatibilité qui contrôlent quelles évolutions sont autorisées.</p>
<p><strong>BACKWARD (par défaut).</strong></p>
<p>Les nouveaux schémas peuvent lire les données écrites avec les anciens schémas. C'est le mode le plus courant car il protège les consommateurs existants.</p>
<p><em>Autorisé</em> : Supprimer des champs, ajouter des champs optionnels avec défaut.</p>
<p><em>Interdit</em> : Ajouter des champs obligatoires, changer les types de manière restrictive.</p>
<p><em>Cas d'usage</em> : Les consommateurs sont mis à jour avant les producteurs. C'est l'approche recommandée pour la plupart des organisations.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-14-1" name="__codelineno-14-1" href="#__codelineno-14-1"></a>Ordre de déploiement BACKWARD:
<a id="__codelineno-14-2" name="__codelineno-14-2" href="#__codelineno-14-2"></a>1. Mettre à jour les consommateurs (peuvent lire v1 et v2)
<a id="__codelineno-14-3" name="__codelineno-14-3" href="#__codelineno-14-3"></a>2. Mettre à jour les producteurs (écrivent v2)
<a id="__codelineno-14-4" name="__codelineno-14-4" href="#__codelineno-14-4"></a>3. Les anciens messages v1 sont toujours lisibles
<a id="__codelineno-14-5" name="__codelineno-14-5" href="#__codelineno-14-5"></a>4. Pas de downtime, pas de perte de messages
</code></pre></div>
<p><strong>FORWARD.</strong></p>
<p>Les anciens schémas peuvent lire les données écrites avec les nouveaux schémas. Moins courant mais utile quand le contrôle sur les consommateurs est limité.</p>
<p><em>Autorisé</em> : Ajouter des champs (les anciens consommateurs ignorent), supprimer des champs optionnels.</p>
<p><em>Interdit</em> : Supprimer des champs obligatoires, changer les types.</p>
<p><em>Cas d'usage</em> : Les producteurs sont mis à jour avant les consommateurs. Utile quand les consommateurs sont externes ou difficiles à mettre à jour.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-15-1" name="__codelineno-15-1" href="#__codelineno-15-1"></a>Ordre de déploiement FORWARD:
<a id="__codelineno-15-2" name="__codelineno-15-2" href="#__codelineno-15-2"></a>1. Mettre à jour les producteurs (écrivent v2)
<a id="__codelineno-15-3" name="__codelineno-15-3" href="#__codelineno-15-3"></a>2. Les anciens consommateurs lisent v2 (ignorent les nouveaux champs)
<a id="__codelineno-15-4" name="__codelineno-15-4" href="#__codelineno-15-4"></a>3. Mettre à jour les consommateurs à leur rythme
<a id="__codelineno-15-5" name="__codelineno-15-5" href="#__codelineno-15-5"></a>4. Flexibilité maximale pour les producteurs
</code></pre></div>
<p><strong>FULL.</strong></p>
<p>Combinaison de BACKWARD et FORWARD. Les schémas peuvent évoluer dans les deux sens.</p>
<p><em>Autorisé</em> : Ajouter/supprimer des champs optionnels avec défaut uniquement.</p>
<p><em>Interdit</em> : Tout changement de champ obligatoire ou de type.</p>
<p><em>Cas d'usage</em> : Environnements où l'ordre de déploiement n'est pas contrôlable, ou microservices avec déploiements indépendants.</p>
<p><strong>BACKWARD_TRANSITIVE / FORWARD_TRANSITIVE / FULL_TRANSITIVE.</strong></p>
<p>Les versions transitives vérifient la compatibilité avec TOUTES les versions précédentes, pas seulement la dernière. Plus strict mais plus sûr pour les topics avec longue rétention.</p>
<p><strong>NONE.</strong></p>
<p>Aucune vérification de compatibilité. Le Schema Registry accepte tout schéma.</p>
<p><em>Cas d'usage</em> : Développement uniquement. JAMAIS en production.</p>
<blockquote>
<p><strong>Perspective stratégique</strong></p>
<p>Le choix du mode de compatibilité est une décision d'architecture, pas une décision technique ponctuelle. Il détermine :
- L'ordre de déploiement des services
- La liberté d'évolution des schémas
- Le risque de rupture en production
- La complexité des migrations</p>
<p>Pour la plupart des organisations, <strong>BACKWARD</strong> est le bon choix par défaut. Il permet une évolution contrôlée tout en protégeant contre les ruptures accidentelles. Pour les topics critiques avec longue rétention, <strong>BACKWARD_TRANSITIVE</strong> offre une protection supplémentaire.</p>
</blockquote>
<h3 id="versioning-explicite-vs-implicite">Versioning Explicite vs. Implicite<a class="headerlink" href="#versioning-explicite-vs-implicite" title="Permanent link">&para;</a></h3>
<p><strong>Versioning implicite (via Schema Registry).</strong></p>
<p>Le Schema Registry assigne automatiquement des IDs de version aux schémas. Les messages contiennent l'ID du schéma utilisé. Le consommateur récupère le schéma correspondant pour désérialiser.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-16-1" name="__codelineno-16-1" href="#__codelineno-16-1"></a>Message Avro avec versioning implicite:
<a id="__codelineno-16-2" name="__codelineno-16-2" href="#__codelineno-16-2"></a>┌──────────────┬────────────────────────────────────┐
<a id="__codelineno-16-3" name="__codelineno-16-3" href="#__codelineno-16-3"></a>│ Magic Byte   │ 0x00 (Confluent wire format)      │
<a id="__codelineno-16-4" name="__codelineno-16-4" href="#__codelineno-16-4"></a>│ Schema ID    │ 0x00 0x00 0x00 0x05 (ID = 5)      │
<a id="__codelineno-16-5" name="__codelineno-16-5" href="#__codelineno-16-5"></a>│ Data         │ Données binaires Avro              │
<a id="__codelineno-16-6" name="__codelineno-16-6" href="#__codelineno-16-6"></a>└──────────────┴────────────────────────────────────┘
<a id="__codelineno-16-7" name="__codelineno-16-7" href="#__codelineno-16-7"></a>
<a id="__codelineno-16-8" name="__codelineno-16-8" href="#__codelineno-16-8"></a>Processus de consommation:
<a id="__codelineno-16-9" name="__codelineno-16-9" href="#__codelineno-16-9"></a>1. Lire le magic byte (validation format)
<a id="__codelineno-16-10" name="__codelineno-16-10" href="#__codelineno-16-10"></a>2. Lire les 4 bytes suivants → Schema ID = 5
<a id="__codelineno-16-11" name="__codelineno-16-11" href="#__codelineno-16-11"></a>3. Requête au Schema Registry: GET /schemas/ids/5
<a id="__codelineno-16-12" name="__codelineno-16-12" href="#__codelineno-16-12"></a>4. Cache le schéma localement
<a id="__codelineno-16-13" name="__codelineno-16-13" href="#__codelineno-16-13"></a>5. Désérialiser les données avec ce schéma
</code></pre></div>
<p><em>Avantages</em> : Transparent, géré automatiquement, pas de champ version dans les données, efficace en espace.</p>
<p><em>Inconvénients</em> : Dépendance au Schema Registry (point de défaillance), opaque pour le débogage manuel.</p>
<p><strong>Versioning explicite (dans les données).</strong></p>
<p>Un champ version explicite dans chaque message permet un routage et un traitement différencié sans dépendance externe.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-17-1" name="__codelineno-17-1" href="#__codelineno-17-1"></a><span class="p">{</span>
<a id="__codelineno-17-2" name="__codelineno-17-2" href="#__codelineno-17-2"></a><span class="w">  </span><span class="nt">&quot;schema_version&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;2.1&quot;</span><span class="p">,</span>
<a id="__codelineno-17-3" name="__codelineno-17-3" href="#__codelineno-17-3"></a><span class="w">  </span><span class="nt">&quot;event_type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;OrderCreated&quot;</span><span class="p">,</span>
<a id="__codelineno-17-4" name="__codelineno-17-4" href="#__codelineno-17-4"></a><span class="w">  </span><span class="nt">&quot;payload&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="err">...</span><span class="p">}</span>
<a id="__codelineno-17-5" name="__codelineno-17-5" href="#__codelineno-17-5"></a><span class="p">}</span>
</code></pre></div>
<p><em>Avantages</em> : Visible, permet un routage explicite, fonctionne sans Schema Registry, facilite le débogage.</p>
<p><em>Inconvénients</em> : Redondant si Schema Registry est utilisé, maintenance manuelle du numéro de version.</p>
<p><strong>Approche recommandée</strong> : Utiliser le Schema Registry pour la validation et la compatibilité (versioning implicite), et optionnellement un champ version explicite dans le header pour la traçabilité et le débogage. Les deux approches ne sont pas mutuellement exclusives.</p>
<h3 id="patterns-devolution-de-schema">Patterns d'Évolution de Schéma<a class="headerlink" href="#patterns-devolution-de-schema" title="Permanent link">&para;</a></h3>
<p><strong>Pattern 1 : Ajout de champ avec migration progressive.</strong></p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-18-1" name="__codelineno-18-1" href="#__codelineno-18-1"></a>// Version 1
<a id="__codelineno-18-2" name="__codelineno-18-2" href="#__codelineno-18-2"></a>{
<a id="__codelineno-18-3" name="__codelineno-18-3" href="#__codelineno-18-3"></a>  &quot;fields&quot;: [
<a id="__codelineno-18-4" name="__codelineno-18-4" href="#__codelineno-18-4"></a>    {&quot;name&quot;: &quot;order_id&quot;, &quot;type&quot;: &quot;string&quot;},
<a id="__codelineno-18-5" name="__codelineno-18-5" href="#__codelineno-18-5"></a>    {&quot;name&quot;: &quot;total&quot;, &quot;type&quot;: &quot;long&quot;}
<a id="__codelineno-18-6" name="__codelineno-18-6" href="#__codelineno-18-6"></a>  ]
<a id="__codelineno-18-7" name="__codelineno-18-7" href="#__codelineno-18-7"></a>}
<a id="__codelineno-18-8" name="__codelineno-18-8" href="#__codelineno-18-8"></a>
<a id="__codelineno-18-9" name="__codelineno-18-9" href="#__codelineno-18-9"></a>// Version 2 : Ajout de currency avec défaut
<a id="__codelineno-18-10" name="__codelineno-18-10" href="#__codelineno-18-10"></a>{
<a id="__codelineno-18-11" name="__codelineno-18-11" href="#__codelineno-18-11"></a>  &quot;fields&quot;: [
<a id="__codelineno-18-12" name="__codelineno-18-12" href="#__codelineno-18-12"></a>    {&quot;name&quot;: &quot;order_id&quot;, &quot;type&quot;: &quot;string&quot;},
<a id="__codelineno-18-13" name="__codelineno-18-13" href="#__codelineno-18-13"></a>    {&quot;name&quot;: &quot;total&quot;, &quot;type&quot;: &quot;long&quot;},
<a id="__codelineno-18-14" name="__codelineno-18-14" href="#__codelineno-18-14"></a>    {&quot;name&quot;: &quot;currency&quot;, &quot;type&quot;: &quot;string&quot;, &quot;default&quot;: &quot;CAD&quot;}
<a id="__codelineno-18-15" name="__codelineno-18-15" href="#__codelineno-18-15"></a>  ]
<a id="__codelineno-18-16" name="__codelineno-18-16" href="#__codelineno-18-16"></a>}
</code></pre></div>
<p>Déploiement :
1. Déployer les consommateurs mis à jour (lisent v1 et v2)
2. Déployer les producteurs (écrivent v2)
3. Les messages v1 restants sont lus avec currency = "CAD"</p>
<p><strong>Pattern 2 : Dépréciation de champ.</strong></p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-19-1" name="__codelineno-19-1" href="#__codelineno-19-1"></a>// Version 1
<a id="__codelineno-19-2" name="__codelineno-19-2" href="#__codelineno-19-2"></a>{
<a id="__codelineno-19-3" name="__codelineno-19-3" href="#__codelineno-19-3"></a>  &quot;fields&quot;: [
<a id="__codelineno-19-4" name="__codelineno-19-4" href="#__codelineno-19-4"></a>    {&quot;name&quot;: &quot;order_id&quot;, &quot;type&quot;: &quot;string&quot;},
<a id="__codelineno-19-5" name="__codelineno-19-5" href="#__codelineno-19-5"></a>    {&quot;name&quot;: &quot;total&quot;, &quot;type&quot;: &quot;long&quot;},
<a id="__codelineno-19-6" name="__codelineno-19-6" href="#__codelineno-19-6"></a>    {&quot;name&quot;: &quot;price&quot;, &quot;type&quot;: &quot;long&quot;, &quot;doc&quot;: &quot;DEPRECATED: use total instead&quot;}
<a id="__codelineno-19-7" name="__codelineno-19-7" href="#__codelineno-19-7"></a>  ]
<a id="__codelineno-19-8" name="__codelineno-19-8" href="#__codelineno-19-8"></a>}
<a id="__codelineno-19-9" name="__codelineno-19-9" href="#__codelineno-19-9"></a>
<a id="__codelineno-19-10" name="__codelineno-19-10" href="#__codelineno-19-10"></a>// Version 2 : Suppression après migration
<a id="__codelineno-19-11" name="__codelineno-19-11" href="#__codelineno-19-11"></a>{
<a id="__codelineno-19-12" name="__codelineno-19-12" href="#__codelineno-19-12"></a>  &quot;fields&quot;: [
<a id="__codelineno-19-13" name="__codelineno-19-13" href="#__codelineno-19-13"></a>    {&quot;name&quot;: &quot;order_id&quot;, &quot;type&quot;: &quot;string&quot;},
<a id="__codelineno-19-14" name="__codelineno-19-14" href="#__codelineno-19-14"></a>    {&quot;name&quot;: &quot;total&quot;, &quot;type&quot;: &quot;long&quot;}
<a id="__codelineno-19-15" name="__codelineno-19-15" href="#__codelineno-19-15"></a>  ]
<a id="__codelineno-19-16" name="__codelineno-19-16" href="#__codelineno-19-16"></a>}
</code></pre></div>
<p><strong>Pattern 3 : Nouveau topic pour breaking changes.</strong></p>
<p>Quand un changement est véritablement breaking et qu'une migration n'est pas possible, créer un nouveau topic.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-20-1" name="__codelineno-20-1" href="#__codelineno-20-1"></a>orders-v1 (ancien schéma) → maintenu pour les anciens consommateurs
<a id="__codelineno-20-2" name="__codelineno-20-2" href="#__codelineno-20-2"></a>orders-v2 (nouveau schéma) → utilisé par les nouveaux producteurs/consommateurs
<a id="__codelineno-20-3" name="__codelineno-20-3" href="#__codelineno-20-3"></a>
<a id="__codelineno-20-4" name="__codelineno-20-4" href="#__codelineno-20-4"></a>Service de transition : lit v1, transforme, écrit v2
</code></pre></div>
<blockquote>
<p><strong>Anti-patron</strong></p>
<p><em>« Nous changeons le type du champ <code>amount</code> de string à long pour corriger une erreur de conception. »</em></p>
<p><em>Problème</em> : Changement de type = breaking change. Tous les consommateurs casseront immédiatement.</p>
<p><em>Conséquences</em> :
- Erreurs de désérialisation en production
- Perte potentielle de messages
- Déploiement d'urgence de tous les consommateurs</p>
<p><em>Solution correcte</em> :
1. Ajouter un nouveau champ <code>amount_cents</code> (long) avec défaut
2. Migrer tous les consommateurs vers le nouveau champ
3. Marquer <code>amount</code> comme déprécié
4. Supprimer <code>amount</code> après confirmation que plus personne ne l'utilise</p>
</blockquote>
<hr />
<h2 id="iii64-structure-de-levenement-et-mapping">III.6.4 Structure de l'Événement et Mapping<a class="headerlink" href="#iii64-structure-de-levenement-et-mapping" title="Permanent link">&para;</a></h2>
<h3 id="anatomie-dun-evenement-bien-concu">Anatomie d'un Événement Bien Conçu<a class="headerlink" href="#anatomie-dun-evenement-bien-concu" title="Permanent link">&para;</a></h3>
<p>Un événement complet comprend plusieurs couches d'information, chacune avec un rôle spécifique.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-21-1" name="__codelineno-21-1" href="#__codelineno-21-1"></a><span class="p">{</span>
<a id="__codelineno-21-2" name="__codelineno-21-2" href="#__codelineno-21-2"></a><span class="w">  </span><span class="nt">&quot;header&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-21-3" name="__codelineno-21-3" href="#__codelineno-21-3"></a><span class="w">    </span><span class="nt">&quot;event_id&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;550e8400-e29b-41d4-a716-446655440000&quot;</span><span class="p">,</span>
<a id="__codelineno-21-4" name="__codelineno-21-4" href="#__codelineno-21-4"></a><span class="w">    </span><span class="nt">&quot;event_type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;com.example.orders.OrderCreated&quot;</span><span class="p">,</span>
<a id="__codelineno-21-5" name="__codelineno-21-5" href="#__codelineno-21-5"></a><span class="w">    </span><span class="nt">&quot;event_version&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;1.2&quot;</span><span class="p">,</span>
<a id="__codelineno-21-6" name="__codelineno-21-6" href="#__codelineno-21-6"></a><span class="w">    </span><span class="nt">&quot;event_time&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;2024-01-15T10:30:00.000Z&quot;</span><span class="p">,</span>
<a id="__codelineno-21-7" name="__codelineno-21-7" href="#__codelineno-21-7"></a><span class="w">    </span><span class="nt">&quot;source&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-21-8" name="__codelineno-21-8" href="#__codelineno-21-8"></a><span class="w">      </span><span class="nt">&quot;system&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;checkout-service&quot;</span><span class="p">,</span>
<a id="__codelineno-21-9" name="__codelineno-21-9" href="#__codelineno-21-9"></a><span class="w">      </span><span class="nt">&quot;instance&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;checkout-prod-3&quot;</span><span class="p">,</span>
<a id="__codelineno-21-10" name="__codelineno-21-10" href="#__codelineno-21-10"></a><span class="w">      </span><span class="nt">&quot;version&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;2.4.1&quot;</span>
<a id="__codelineno-21-11" name="__codelineno-21-11" href="#__codelineno-21-11"></a><span class="w">    </span><span class="p">},</span>
<a id="__codelineno-21-12" name="__codelineno-21-12" href="#__codelineno-21-12"></a><span class="w">    </span><span class="nt">&quot;correlation&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-21-13" name="__codelineno-21-13" href="#__codelineno-21-13"></a><span class="w">      </span><span class="nt">&quot;correlation_id&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;req-abc-123&quot;</span><span class="p">,</span>
<a id="__codelineno-21-14" name="__codelineno-21-14" href="#__codelineno-21-14"></a><span class="w">      </span><span class="nt">&quot;causation_id&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;evt-xyz-789&quot;</span><span class="p">,</span>
<a id="__codelineno-21-15" name="__codelineno-21-15" href="#__codelineno-21-15"></a><span class="w">      </span><span class="nt">&quot;trace_id&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;trace-456&quot;</span>
<a id="__codelineno-21-16" name="__codelineno-21-16" href="#__codelineno-21-16"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-21-17" name="__codelineno-21-17" href="#__codelineno-21-17"></a><span class="w">  </span><span class="p">},</span>
<a id="__codelineno-21-18" name="__codelineno-21-18" href="#__codelineno-21-18"></a><span class="w">  </span><span class="nt">&quot;payload&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-21-19" name="__codelineno-21-19" href="#__codelineno-21-19"></a><span class="w">    </span><span class="nt">&quot;order&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-21-20" name="__codelineno-21-20" href="#__codelineno-21-20"></a><span class="w">      </span><span class="nt">&quot;id&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;ORD-12345&quot;</span><span class="p">,</span>
<a id="__codelineno-21-21" name="__codelineno-21-21" href="#__codelineno-21-21"></a><span class="w">      </span><span class="nt">&quot;status&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;created&quot;</span><span class="p">,</span>
<a id="__codelineno-21-22" name="__codelineno-21-22" href="#__codelineno-21-22"></a><span class="w">      </span><span class="nt">&quot;customer&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-21-23" name="__codelineno-21-23" href="#__codelineno-21-23"></a><span class="w">        </span><span class="nt">&quot;id&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;CUST-67890&quot;</span><span class="p">,</span>
<a id="__codelineno-21-24" name="__codelineno-21-24" href="#__codelineno-21-24"></a><span class="w">        </span><span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Jean Dupont&quot;</span><span class="p">,</span>
<a id="__codelineno-21-25" name="__codelineno-21-25" href="#__codelineno-21-25"></a><span class="w">        </span><span class="nt">&quot;email&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;jean@example.com&quot;</span>
<a id="__codelineno-21-26" name="__codelineno-21-26" href="#__codelineno-21-26"></a><span class="w">      </span><span class="p">},</span>
<a id="__codelineno-21-27" name="__codelineno-21-27" href="#__codelineno-21-27"></a><span class="w">      </span><span class="nt">&quot;items&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<a id="__codelineno-21-28" name="__codelineno-21-28" href="#__codelineno-21-28"></a><span class="w">        </span><span class="p">{</span>
<a id="__codelineno-21-29" name="__codelineno-21-29" href="#__codelineno-21-29"></a><span class="w">          </span><span class="nt">&quot;product_id&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;PROD-111&quot;</span><span class="p">,</span>
<a id="__codelineno-21-30" name="__codelineno-21-30" href="#__codelineno-21-30"></a><span class="w">          </span><span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Widget Pro&quot;</span><span class="p">,</span>
<a id="__codelineno-21-31" name="__codelineno-21-31" href="#__codelineno-21-31"></a><span class="w">          </span><span class="nt">&quot;quantity&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span>
<a id="__codelineno-21-32" name="__codelineno-21-32" href="#__codelineno-21-32"></a><span class="w">          </span><span class="nt">&quot;unit_price_cents&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">5000</span>
<a id="__codelineno-21-33" name="__codelineno-21-33" href="#__codelineno-21-33"></a><span class="w">        </span><span class="p">}</span>
<a id="__codelineno-21-34" name="__codelineno-21-34" href="#__codelineno-21-34"></a><span class="w">      </span><span class="p">],</span>
<a id="__codelineno-21-35" name="__codelineno-21-35" href="#__codelineno-21-35"></a><span class="w">      </span><span class="nt">&quot;totals&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-21-36" name="__codelineno-21-36" href="#__codelineno-21-36"></a><span class="w">        </span><span class="nt">&quot;subtotal_cents&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">10000</span><span class="p">,</span>
<a id="__codelineno-21-37" name="__codelineno-21-37" href="#__codelineno-21-37"></a><span class="w">        </span><span class="nt">&quot;tax_cents&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">1500</span><span class="p">,</span>
<a id="__codelineno-21-38" name="__codelineno-21-38" href="#__codelineno-21-38"></a><span class="w">        </span><span class="nt">&quot;total_cents&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">11500</span>
<a id="__codelineno-21-39" name="__codelineno-21-39" href="#__codelineno-21-39"></a><span class="w">      </span><span class="p">},</span>
<a id="__codelineno-21-40" name="__codelineno-21-40" href="#__codelineno-21-40"></a><span class="w">      </span><span class="nt">&quot;currency&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;CAD&quot;</span>
<a id="__codelineno-21-41" name="__codelineno-21-41" href="#__codelineno-21-41"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-21-42" name="__codelineno-21-42" href="#__codelineno-21-42"></a><span class="w">  </span><span class="p">},</span>
<a id="__codelineno-21-43" name="__codelineno-21-43" href="#__codelineno-21-43"></a><span class="w">  </span><span class="nt">&quot;context&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-21-44" name="__codelineno-21-44" href="#__codelineno-21-44"></a><span class="w">    </span><span class="nt">&quot;tenant_id&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;tenant-acme&quot;</span><span class="p">,</span>
<a id="__codelineno-21-45" name="__codelineno-21-45" href="#__codelineno-21-45"></a><span class="w">    </span><span class="nt">&quot;region&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;ca-central-1&quot;</span><span class="p">,</span>
<a id="__codelineno-21-46" name="__codelineno-21-46" href="#__codelineno-21-46"></a><span class="w">    </span><span class="nt">&quot;environment&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;production&quot;</span>
<a id="__codelineno-21-47" name="__codelineno-21-47" href="#__codelineno-21-47"></a><span class="w">  </span><span class="p">}</span>
<a id="__codelineno-21-48" name="__codelineno-21-48" href="#__codelineno-21-48"></a><span class="p">}</span>
</code></pre></div>
<p><strong>Couche Header (métadonnées techniques) :</strong></p>
<table>
<thead>
<tr>
<th>Champ</th>
<th>Description</th>
<th>Utilité</th>
</tr>
</thead>
<tbody>
<tr>
<td>event_id</td>
<td>Identifiant unique de l'événement (UUID)</td>
<td>Déduplication, traçabilité</td>
</tr>
<tr>
<td>event_type</td>
<td>Type complet de l'événement</td>
<td>Routage, filtrage</td>
</tr>
<tr>
<td>event_version</td>
<td>Version du schéma</td>
<td>Compatibilité</td>
</tr>
<tr>
<td>event_time</td>
<td>Timestamp de l'événement métier</td>
<td>Ordre, fenêtrage</td>
</tr>
<tr>
<td>source</td>
<td>Information sur le producteur</td>
<td>Débogage, audit</td>
</tr>
<tr>
<td>correlation_id</td>
<td>ID de la requête/transaction origine</td>
<td>Traçage distribué</td>
</tr>
<tr>
<td>causation_id</td>
<td>ID de l'événement qui a causé celui-ci</td>
<td>Chaîne causale</td>
</tr>
</tbody>
</table>
<p><strong>Couche Payload (données métier) :</strong></p>
<p>Le payload contient les données métier spécifiques à l'événement. Sa structure dépend du domaine et du type d'événement.</p>
<p><strong>Couche Context (contexte d'exécution) :</strong></p>
<p>Informations sur le contexte dans lequel l'événement a été produit. Utile pour le multi-tenant, le routage régional, ou la segmentation environnementale.</p>
<h3 id="mapping-entre-systemes">Mapping entre Systèmes<a class="headerlink" href="#mapping-entre-systemes" title="Permanent link">&para;</a></h3>
<p>Dans une architecture événementielle, les événements traversent des frontières de systèmes. Le mapping entre les représentations est un défi récurrent.</p>
<p><strong>Mapping de types de données :</strong></p>
<table>
<thead>
<tr>
<th>Concept</th>
<th>Java</th>
<th>Avro</th>
<th>JSON</th>
<th>PostgreSQL</th>
</tr>
</thead>
<tbody>
<tr>
<td>Entier 64 bits</td>
<td>long</td>
<td>long</td>
<td>number</td>
<td>bigint</td>
</tr>
<tr>
<td>Date/heure</td>
<td>Instant</td>
<td>long (timestamp-millis)</td>
<td>string (ISO8601)</td>
<td>timestamp</td>
</tr>
<tr>
<td>Décimal précis</td>
<td>BigDecimal</td>
<td>bytes (decimal)</td>
<td>string</td>
<td>numeric</td>
</tr>
<tr>
<td>UUID</td>
<td>UUID</td>
<td>string</td>
<td>string</td>
<td>uuid</td>
</tr>
<tr>
<td>Énumération</td>
<td>enum</td>
<td>enum</td>
<td>string</td>
<td>enum/varchar</td>
</tr>
</tbody>
</table>
<blockquote>
<p><strong>Anti-patron</strong></p>
<p><em>« Nous utilisons des float pour les montants monétaires. »</em></p>
<p><em>Problème</em> : Les nombres à virgule flottante (float, double) ne peuvent pas représenter précisément les valeurs décimales. 0.1 + 0.2 ≠ 0.3 en virgule flottante.</p>
<p><em>Conséquences</em> : Erreurs d'arrondi dans les calculs financiers, différences entre systèmes, audits qui ne correspondent pas.</p>
<p><em>Solution</em> : Utiliser des entiers en cents (ou millièmes) pour les montants, ou des types décimaux précis (BigDecimal, numeric).</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-22-1" name="__codelineno-22-1" href="#__codelineno-22-1"></a><span class="c1">// ❌ Mauvais</span>
<a id="__codelineno-22-2" name="__codelineno-22-2" href="#__codelineno-22-2"></a><span class="p">{</span><span class="w"> </span><span class="nt">&quot;amount&quot;</span><span class="p">:</span><span class="w"> </span><span class="mf">15.99</span><span class="w"> </span><span class="p">}</span>
<a id="__codelineno-22-3" name="__codelineno-22-3" href="#__codelineno-22-3"></a>
<a id="__codelineno-22-4" name="__codelineno-22-4" href="#__codelineno-22-4"></a><span class="c1">// ✅ Bon</span>
<a id="__codelineno-22-5" name="__codelineno-22-5" href="#__codelineno-22-5"></a><span class="p">{</span><span class="w"> </span><span class="nt">&quot;amount_cents&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">1599</span><span class="w"> </span><span class="p">}</span>
</code></pre></div>
</blockquote>
<p><strong>Mapping d'énumérations :</strong></p>
<p>Les énumérations évoluent (nouveaux statuts, nouvelles catégories). Le mapping doit anticiper cette évolution.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-23-1" name="__codelineno-23-1" href="#__codelineno-23-1"></a>// Schéma Avro avec enum
<a id="__codelineno-23-2" name="__codelineno-23-2" href="#__codelineno-23-2"></a>{
<a id="__codelineno-23-3" name="__codelineno-23-3" href="#__codelineno-23-3"></a>  &quot;type&quot;: &quot;enum&quot;,
<a id="__codelineno-23-4" name="__codelineno-23-4" href="#__codelineno-23-4"></a>  &quot;name&quot;: &quot;OrderStatus&quot;,
<a id="__codelineno-23-5" name="__codelineno-23-5" href="#__codelineno-23-5"></a>  &quot;symbols&quot;: [&quot;CREATED&quot;, &quot;CONFIRMED&quot;, &quot;SHIPPED&quot;, &quot;DELIVERED&quot;, &quot;CANCELLED&quot;],
<a id="__codelineno-23-6" name="__codelineno-23-6" href="#__codelineno-23-6"></a>  &quot;default&quot;: &quot;CREATED&quot;  // Valeur par défaut pour les valeurs inconnues
<a id="__codelineno-23-7" name="__codelineno-23-7" href="#__codelineno-23-7"></a>}
</code></pre></div>
<p><em>Problème</em> : Si le producteur ajoute un nouveau statut <code>RETURNED</code> et que le consommateur ne connaît pas cette valeur, que se passe-t-il ?</p>
<p><em>Solutions</em> :
1. Valeur par défaut : Le consommateur utilise la valeur par défaut
2. String au lieu d'enum : Plus flexible mais moins typé
3. Versioning explicite : Le consommateur traite selon la version</p>
<h3 id="gestion-des-references-et-relations">Gestion des Références et Relations<a class="headerlink" href="#gestion-des-references-et-relations" title="Permanent link">&para;</a></h3>
<p>Les événements contiennent souvent des références à d'autres entités. Comment les représenter ?</p>
<p><strong>Option 1 : Référence par ID uniquement.</strong></p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-24-1" name="__codelineno-24-1" href="#__codelineno-24-1"></a><span class="p">{</span>
<a id="__codelineno-24-2" name="__codelineno-24-2" href="#__codelineno-24-2"></a><span class="w">  </span><span class="nt">&quot;order_id&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;ORD-123&quot;</span><span class="p">,</span>
<a id="__codelineno-24-3" name="__codelineno-24-3" href="#__codelineno-24-3"></a><span class="w">  </span><span class="nt">&quot;customer_id&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;CUST-456&quot;</span><span class="w">  </span><span class="c1">// Référence seule</span>
<a id="__codelineno-24-4" name="__codelineno-24-4" href="#__codelineno-24-4"></a><span class="p">}</span>
</code></pre></div>
<p><em>Avantages</em> : Compact, pas de duplication.</p>
<p><em>Inconvénients</em> : Le consommateur doit faire un lookup pour obtenir les détails.</p>
<p><strong>Option 2 : Objet embarqué (dénormalisé).</strong></p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-25-1" name="__codelineno-25-1" href="#__codelineno-25-1"></a><span class="p">{</span>
<a id="__codelineno-25-2" name="__codelineno-25-2" href="#__codelineno-25-2"></a><span class="w">  </span><span class="nt">&quot;order_id&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;ORD-123&quot;</span><span class="p">,</span>
<a id="__codelineno-25-3" name="__codelineno-25-3" href="#__codelineno-25-3"></a><span class="w">  </span><span class="nt">&quot;customer&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-25-4" name="__codelineno-25-4" href="#__codelineno-25-4"></a><span class="w">    </span><span class="nt">&quot;id&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;CUST-456&quot;</span><span class="p">,</span>
<a id="__codelineno-25-5" name="__codelineno-25-5" href="#__codelineno-25-5"></a><span class="w">    </span><span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Jean Dupont&quot;</span><span class="p">,</span>
<a id="__codelineno-25-6" name="__codelineno-25-6" href="#__codelineno-25-6"></a><span class="w">    </span><span class="nt">&quot;email&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;jean@example.com&quot;</span>
<a id="__codelineno-25-7" name="__codelineno-25-7" href="#__codelineno-25-7"></a><span class="w">  </span><span class="p">}</span>
<a id="__codelineno-25-8" name="__codelineno-25-8" href="#__codelineno-25-8"></a><span class="p">}</span>
</code></pre></div>
<p><em>Avantages</em> : Événement autonome, pas de lookup nécessaire.</p>
<p><em>Inconvénients</em> : Données potentiellement obsolètes si le client change.</p>
<p><strong>Option 3 : Hybride avec snapshot.</strong></p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-26-1" name="__codelineno-26-1" href="#__codelineno-26-1"></a><span class="p">{</span>
<a id="__codelineno-26-2" name="__codelineno-26-2" href="#__codelineno-26-2"></a><span class="w">  </span><span class="nt">&quot;order_id&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;ORD-123&quot;</span><span class="p">,</span>
<a id="__codelineno-26-3" name="__codelineno-26-3" href="#__codelineno-26-3"></a><span class="w">  </span><span class="nt">&quot;customer_id&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;CUST-456&quot;</span><span class="p">,</span>
<a id="__codelineno-26-4" name="__codelineno-26-4" href="#__codelineno-26-4"></a><span class="w">  </span><span class="nt">&quot;customer_snapshot&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-26-5" name="__codelineno-26-5" href="#__codelineno-26-5"></a><span class="w">    </span><span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Jean Dupont&quot;</span><span class="p">,</span>
<a id="__codelineno-26-6" name="__codelineno-26-6" href="#__codelineno-26-6"></a><span class="w">    </span><span class="nt">&quot;email&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;jean@example.com&quot;</span><span class="p">,</span>
<a id="__codelineno-26-7" name="__codelineno-26-7" href="#__codelineno-26-7"></a><span class="w">    </span><span class="nt">&quot;snapshot_time&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;2024-01-15T10:30:00Z&quot;</span>
<a id="__codelineno-26-8" name="__codelineno-26-8" href="#__codelineno-26-8"></a><span class="w">  </span><span class="p">}</span>
<a id="__codelineno-26-9" name="__codelineno-26-9" href="#__codelineno-26-9"></a><span class="p">}</span>
</code></pre></div>
<p><em>Avantages</em> : ID pour les jointures futures, snapshot pour le contexte historique.</p>
<p><em>Inconvénients</em> : Plus verbeux, nécessite de maintenir les snapshots.</p>
<blockquote>
<p><strong>Décision architecturale</strong></p>
<p><em>Contexte</em> : Système de e-commerce avec événements de commande. Les commandes référencent des clients et des produits.</p>
<p><em>Question</em> : Embarquer les détails ou référencer par ID ?</p>
<p><em>Analyse</em> :
- Pour le client : Les données client au moment de la commande sont importantes (adresse de livraison, segment). Embarquer.
- Pour les produits : Les détails produit peuvent changer (prix, description), mais le prix au moment de la commande est fixe. Embarquer le prix et la quantité, référencer le produit par ID.</p>
<p><em>Décision</em> : Hybride — embarquer les données critiques au moment de l'événement, référencer par ID pour les lookups futurs.</p>
</blockquote>
<hr />
<h2 id="iii65-notes-de-terrain-strategies-de-donnees-customer360">III.6.5 Notes de Terrain : Stratégies de Données Customer360<a class="headerlink" href="#iii65-notes-de-terrain-strategies-de-donnees-customer360" title="Permanent link">&para;</a></h2>
<h3 id="le-defi-du-customer-360">Le Défi du Customer 360<a class="headerlink" href="#le-defi-du-customer-360" title="Permanent link">&para;</a></h3>
<p>Le « Customer 360 » est un cas d'usage classique des architectures événementielles : construire une vue unifiée du client à partir de multiples sources de données. Ce cas illustre parfaitement les défis des contrats de données à grande échelle.</p>
<p><strong>Le contexte typique :</strong></p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-27-1" name="__codelineno-27-1" href="#__codelineno-27-1"></a>┌─────────────┐  ┌─────────────┐  ┌─────────────┐  ┌─────────────┐
<a id="__codelineno-27-2" name="__codelineno-27-2" href="#__codelineno-27-2"></a>│   CRM       │  │ E-commerce  │  │   Support   │  │  Marketing  │
<a id="__codelineno-27-3" name="__codelineno-27-3" href="#__codelineno-27-3"></a>│ (Salesforce)│  │  (Magento)  │  │  (Zendesk)  │  │  (HubSpot)  │
<a id="__codelineno-27-4" name="__codelineno-27-4" href="#__codelineno-27-4"></a>└──────┬──────┘  └──────┬──────┘  └──────┬──────┘  └──────┬──────┘
<a id="__codelineno-27-5" name="__codelineno-27-5" href="#__codelineno-27-5"></a>       │                │                │                │
<a id="__codelineno-27-6" name="__codelineno-27-6" href="#__codelineno-27-6"></a>       ▼                ▼                ▼                ▼
<a id="__codelineno-27-7" name="__codelineno-27-7" href="#__codelineno-27-7"></a>┌─────────────────────────────────────────────────────────────────┐
<a id="__codelineno-27-8" name="__codelineno-27-8" href="#__codelineno-27-8"></a>│                         Apache Kafka                            │
<a id="__codelineno-27-9" name="__codelineno-27-9" href="#__codelineno-27-9"></a>│  ┌───────────────┐ ┌───────────────┐ ┌───────────────┐         │
<a id="__codelineno-27-10" name="__codelineno-27-10" href="#__codelineno-27-10"></a>│  │ crm.customers │ │ ecom.orders   │ │ support.tickets│         │
<a id="__codelineno-27-11" name="__codelineno-27-11" href="#__codelineno-27-11"></a>│  └───────────────┘ └───────────────┘ └───────────────┘         │
<a id="__codelineno-27-12" name="__codelineno-27-12" href="#__codelineno-27-12"></a>└─────────────────────────────────────────────────────────────────┘
<a id="__codelineno-27-13" name="__codelineno-27-13" href="#__codelineno-27-13"></a>                              │
<a id="__codelineno-27-14" name="__codelineno-27-14" href="#__codelineno-27-14"></a>                              ▼
<a id="__codelineno-27-15" name="__codelineno-27-15" href="#__codelineno-27-15"></a>                 ┌─────────────────────────┐
<a id="__codelineno-27-16" name="__codelineno-27-16" href="#__codelineno-27-16"></a>                 │   Customer 360 Service  │
<a id="__codelineno-27-17" name="__codelineno-27-17" href="#__codelineno-27-17"></a>                 │   (Kafka Streams)       │
<a id="__codelineno-27-18" name="__codelineno-27-18" href="#__codelineno-27-18"></a>                 └───────────┬─────────────┘
<a id="__codelineno-27-19" name="__codelineno-27-19" href="#__codelineno-27-19"></a>                             │
<a id="__codelineno-27-20" name="__codelineno-27-20" href="#__codelineno-27-20"></a>                             ▼
<a id="__codelineno-27-21" name="__codelineno-27-21" href="#__codelineno-27-21"></a>                 ┌─────────────────────────┐
<a id="__codelineno-27-22" name="__codelineno-27-22" href="#__codelineno-27-22"></a>                 │   Vue Client Unifiée    │
<a id="__codelineno-27-23" name="__codelineno-27-23" href="#__codelineno-27-23"></a>                 │   (Elasticsearch)       │
<a id="__codelineno-27-24" name="__codelineno-27-24" href="#__codelineno-27-24"></a>                 └─────────────────────────┘
</code></pre></div>
<p><strong>Les défis concrets rencontrés :</strong></p>
<h3 id="defi-1-identification-du-client">Défi 1 : Identification du Client<a class="headerlink" href="#defi-1-identification-du-client" title="Permanent link">&para;</a></h3>
<p>Chaque système a sa propre notion d'identifiant client.</p>
<table>
<thead>
<tr>
<th>Système</th>
<th>Identifiant</th>
<th>Format</th>
</tr>
</thead>
<tbody>
<tr>
<td>CRM</td>
<td>Account ID</td>
<td><code>ACC-12345</code></td>
</tr>
<tr>
<td>E-commerce</td>
<td>Customer ID</td>
<td><code>67890</code> (numérique)</td>
</tr>
<tr>
<td>Support</td>
<td>User ID</td>
<td><code>user_abc123</code></td>
</tr>
<tr>
<td>Marketing</td>
<td>Contact ID</td>
<td>UUID</td>
</tr>
</tbody>
</table>
<p><em>Solution mise en place</em> : Table de correspondance (Identity Resolution) et identifiant canonique.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-28-1" name="__codelineno-28-1" href="#__codelineno-28-1"></a><span class="c1">// Événement enrichi avec identifiants multiples</span>
<a id="__codelineno-28-2" name="__codelineno-28-2" href="#__codelineno-28-2"></a><span class="p">{</span>
<a id="__codelineno-28-3" name="__codelineno-28-3" href="#__codelineno-28-3"></a><span class="w">  </span><span class="nt">&quot;event_type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;CustomerProfileUpdated&quot;</span><span class="p">,</span>
<a id="__codelineno-28-4" name="__codelineno-28-4" href="#__codelineno-28-4"></a><span class="w">  </span><span class="nt">&quot;identifiers&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-28-5" name="__codelineno-28-5" href="#__codelineno-28-5"></a><span class="w">    </span><span class="nt">&quot;canonical_id&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;CUST-550e8400-e29b-41d4&quot;</span><span class="p">,</span>
<a id="__codelineno-28-6" name="__codelineno-28-6" href="#__codelineno-28-6"></a><span class="w">    </span><span class="nt">&quot;crm_id&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;ACC-12345&quot;</span><span class="p">,</span>
<a id="__codelineno-28-7" name="__codelineno-28-7" href="#__codelineno-28-7"></a><span class="w">    </span><span class="nt">&quot;ecom_id&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;67890&quot;</span><span class="p">,</span>
<a id="__codelineno-28-8" name="__codelineno-28-8" href="#__codelineno-28-8"></a><span class="w">    </span><span class="nt">&quot;support_id&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;user_abc123&quot;</span><span class="p">,</span>
<a id="__codelineno-28-9" name="__codelineno-28-9" href="#__codelineno-28-9"></a><span class="w">    </span><span class="nt">&quot;marketing_id&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;550e8400-e29b-41d4-a716-446655440000&quot;</span>
<a id="__codelineno-28-10" name="__codelineno-28-10" href="#__codelineno-28-10"></a><span class="w">  </span><span class="p">},</span>
<a id="__codelineno-28-11" name="__codelineno-28-11" href="#__codelineno-28-11"></a><span class="w">  </span><span class="nt">&quot;profile&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="err">...</span><span class="p">}</span>
<a id="__codelineno-28-12" name="__codelineno-28-12" href="#__codelineno-28-12"></a><span class="p">}</span>
</code></pre></div>
<h3 id="defi-2-schemas-heterogenes">Défi 2 : Schémas Hétérogènes<a class="headerlink" href="#defi-2-schemas-heterogenes" title="Permanent link">&para;</a></h3>
<p>Chaque système a sa propre représentation du client avec des champs différents, des types différents, et des sémantiques différentes.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-29-1" name="__codelineno-29-1" href="#__codelineno-29-1"></a><span class="c1">// CRM (Salesforce)</span>
<a id="__codelineno-29-2" name="__codelineno-29-2" href="#__codelineno-29-2"></a><span class="p">{</span>
<a id="__codelineno-29-3" name="__codelineno-29-3" href="#__codelineno-29-3"></a><span class="w">  </span><span class="nt">&quot;AccountId&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;ACC-12345&quot;</span><span class="p">,</span>
<a id="__codelineno-29-4" name="__codelineno-29-4" href="#__codelineno-29-4"></a><span class="w">  </span><span class="nt">&quot;Name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;ACME Corp&quot;</span><span class="p">,</span>
<a id="__codelineno-29-5" name="__codelineno-29-5" href="#__codelineno-29-5"></a><span class="w">  </span><span class="nt">&quot;BillingAddress&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-29-6" name="__codelineno-29-6" href="#__codelineno-29-6"></a><span class="w">    </span><span class="nt">&quot;street&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;123 Main St&quot;</span><span class="p">,</span>
<a id="__codelineno-29-7" name="__codelineno-29-7" href="#__codelineno-29-7"></a><span class="w">    </span><span class="nt">&quot;city&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Montreal&quot;</span><span class="p">,</span>
<a id="__codelineno-29-8" name="__codelineno-29-8" href="#__codelineno-29-8"></a><span class="w">    </span><span class="nt">&quot;state&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;QC&quot;</span>
<a id="__codelineno-29-9" name="__codelineno-29-9" href="#__codelineno-29-9"></a><span class="w">  </span><span class="p">}</span>
<a id="__codelineno-29-10" name="__codelineno-29-10" href="#__codelineno-29-10"></a><span class="p">}</span>
<a id="__codelineno-29-11" name="__codelineno-29-11" href="#__codelineno-29-11"></a>
<a id="__codelineno-29-12" name="__codelineno-29-12" href="#__codelineno-29-12"></a><span class="c1">// E-commerce (Magento)</span>
<a id="__codelineno-29-13" name="__codelineno-29-13" href="#__codelineno-29-13"></a><span class="p">{</span>
<a id="__codelineno-29-14" name="__codelineno-29-14" href="#__codelineno-29-14"></a><span class="w">  </span><span class="nt">&quot;customer_id&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">67890</span><span class="p">,</span>
<a id="__codelineno-29-15" name="__codelineno-29-15" href="#__codelineno-29-15"></a><span class="w">  </span><span class="nt">&quot;firstname&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Jean&quot;</span><span class="p">,</span>
<a id="__codelineno-29-16" name="__codelineno-29-16" href="#__codelineno-29-16"></a><span class="w">  </span><span class="nt">&quot;lastname&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Dupont&quot;</span><span class="p">,</span>
<a id="__codelineno-29-17" name="__codelineno-29-17" href="#__codelineno-29-17"></a><span class="w">  </span><span class="nt">&quot;addresses&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<a id="__codelineno-29-18" name="__codelineno-29-18" href="#__codelineno-29-18"></a><span class="w">    </span><span class="p">{</span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;billing&quot;</span><span class="p">,</span><span class="w"> </span><span class="nt">&quot;street1&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;123 Main St&quot;</span><span class="p">,</span><span class="w"> </span><span class="err">...</span><span class="p">}</span>
<a id="__codelineno-29-19" name="__codelineno-29-19" href="#__codelineno-29-19"></a><span class="w">  </span><span class="p">]</span>
<a id="__codelineno-29-20" name="__codelineno-29-20" href="#__codelineno-29-20"></a><span class="p">}</span>
</code></pre></div>
<p><em>Solution</em> : Schéma canonique avec mapping explicite.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-30-1" name="__codelineno-30-1" href="#__codelineno-30-1"></a>// Schéma canonique Customer360
<a id="__codelineno-30-2" name="__codelineno-30-2" href="#__codelineno-30-2"></a>{
<a id="__codelineno-30-3" name="__codelineno-30-3" href="#__codelineno-30-3"></a>  &quot;type&quot;: &quot;record&quot;,
<a id="__codelineno-30-4" name="__codelineno-30-4" href="#__codelineno-30-4"></a>  &quot;name&quot;: &quot;Customer360&quot;,
<a id="__codelineno-30-5" name="__codelineno-30-5" href="#__codelineno-30-5"></a>  &quot;fields&quot;: [
<a id="__codelineno-30-6" name="__codelineno-30-6" href="#__codelineno-30-6"></a>    {&quot;name&quot;: &quot;canonical_id&quot;, &quot;type&quot;: &quot;string&quot;},
<a id="__codelineno-30-7" name="__codelineno-30-7" href="#__codelineno-30-7"></a>    {&quot;name&quot;: &quot;display_name&quot;, &quot;type&quot;: &quot;string&quot;},
<a id="__codelineno-30-8" name="__codelineno-30-8" href="#__codelineno-30-8"></a>    {&quot;name&quot;: &quot;email&quot;, &quot;type&quot;: [&quot;null&quot;, &quot;string&quot;]},
<a id="__codelineno-30-9" name="__codelineno-30-9" href="#__codelineno-30-9"></a>    {&quot;name&quot;: &quot;addresses&quot;, &quot;type&quot;: {
<a id="__codelineno-30-10" name="__codelineno-30-10" href="#__codelineno-30-10"></a>      &quot;type&quot;: &quot;array&quot;,
<a id="__codelineno-30-11" name="__codelineno-30-11" href="#__codelineno-30-11"></a>      &quot;items&quot;: {
<a id="__codelineno-30-12" name="__codelineno-30-12" href="#__codelineno-30-12"></a>        &quot;type&quot;: &quot;record&quot;,
<a id="__codelineno-30-13" name="__codelineno-30-13" href="#__codelineno-30-13"></a>        &quot;name&quot;: &quot;Address&quot;,
<a id="__codelineno-30-14" name="__codelineno-30-14" href="#__codelineno-30-14"></a>        &quot;fields&quot;: [
<a id="__codelineno-30-15" name="__codelineno-30-15" href="#__codelineno-30-15"></a>          {&quot;name&quot;: &quot;type&quot;, &quot;type&quot;: {&quot;type&quot;: &quot;enum&quot;, &quot;symbols&quot;: [&quot;BILLING&quot;, &quot;SHIPPING&quot;, &quot;OTHER&quot;]}},
<a id="__codelineno-30-16" name="__codelineno-30-16" href="#__codelineno-30-16"></a>          {&quot;name&quot;: &quot;line1&quot;, &quot;type&quot;: &quot;string&quot;},
<a id="__codelineno-30-17" name="__codelineno-30-17" href="#__codelineno-30-17"></a>          {&quot;name&quot;: &quot;line2&quot;, &quot;type&quot;: [&quot;null&quot;, &quot;string&quot;]},
<a id="__codelineno-30-18" name="__codelineno-30-18" href="#__codelineno-30-18"></a>          {&quot;name&quot;: &quot;city&quot;, &quot;type&quot;: &quot;string&quot;},
<a id="__codelineno-30-19" name="__codelineno-30-19" href="#__codelineno-30-19"></a>          {&quot;name&quot;: &quot;region&quot;, &quot;type&quot;: &quot;string&quot;},
<a id="__codelineno-30-20" name="__codelineno-30-20" href="#__codelineno-30-20"></a>          {&quot;name&quot;: &quot;postal_code&quot;, &quot;type&quot;: &quot;string&quot;},
<a id="__codelineno-30-21" name="__codelineno-30-21" href="#__codelineno-30-21"></a>          {&quot;name&quot;: &quot;country&quot;, &quot;type&quot;: &quot;string&quot;}
<a id="__codelineno-30-22" name="__codelineno-30-22" href="#__codelineno-30-22"></a>        ]
<a id="__codelineno-30-23" name="__codelineno-30-23" href="#__codelineno-30-23"></a>      }
<a id="__codelineno-30-24" name="__codelineno-30-24" href="#__codelineno-30-24"></a>    }},
<a id="__codelineno-30-25" name="__codelineno-30-25" href="#__codelineno-30-25"></a>    {&quot;name&quot;: &quot;source_records&quot;, &quot;type&quot;: {
<a id="__codelineno-30-26" name="__codelineno-30-26" href="#__codelineno-30-26"></a>      &quot;type&quot;: &quot;array&quot;,
<a id="__codelineno-30-27" name="__codelineno-30-27" href="#__codelineno-30-27"></a>      &quot;items&quot;: {
<a id="__codelineno-30-28" name="__codelineno-30-28" href="#__codelineno-30-28"></a>        &quot;type&quot;: &quot;record&quot;,
<a id="__codelineno-30-29" name="__codelineno-30-29" href="#__codelineno-30-29"></a>        &quot;name&quot;: &quot;SourceRecord&quot;,
<a id="__codelineno-30-30" name="__codelineno-30-30" href="#__codelineno-30-30"></a>        &quot;fields&quot;: [
<a id="__codelineno-30-31" name="__codelineno-30-31" href="#__codelineno-30-31"></a>          {&quot;name&quot;: &quot;source_system&quot;, &quot;type&quot;: &quot;string&quot;},
<a id="__codelineno-30-32" name="__codelineno-30-32" href="#__codelineno-30-32"></a>          {&quot;name&quot;: &quot;source_id&quot;, &quot;type&quot;: &quot;string&quot;},
<a id="__codelineno-30-33" name="__codelineno-30-33" href="#__codelineno-30-33"></a>          {&quot;name&quot;: &quot;last_updated&quot;, &quot;type&quot;: &quot;long&quot;}
<a id="__codelineno-30-34" name="__codelineno-30-34" href="#__codelineno-30-34"></a>        ]
<a id="__codelineno-30-35" name="__codelineno-30-35" href="#__codelineno-30-35"></a>      }
<a id="__codelineno-30-36" name="__codelineno-30-36" href="#__codelineno-30-36"></a>    }}
<a id="__codelineno-30-37" name="__codelineno-30-37" href="#__codelineno-30-37"></a>  ]
<a id="__codelineno-30-38" name="__codelineno-30-38" href="#__codelineno-30-38"></a>}
</code></pre></div>
<h3 id="defi-3-coherence-temporelle">Défi 3 : Cohérence Temporelle<a class="headerlink" href="#defi-3-coherence-temporelle" title="Permanent link">&para;</a></h3>
<p>Les événements arrivent dans le désordre. Un événement CRM peut arriver avant l'événement e-commerce correspondant, ou vice versa.</p>
<p><em>Problème</em> : Comment fusionner les données si elles arrivent dans le désordre ?</p>
<p><em>Solution</em> : Fenêtrage et timestamps explicites.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-31-1" name="__codelineno-31-1" href="#__codelineno-31-1"></a><span class="c1">// Kafka Streams : Jointure avec fenêtre temporelle</span>
<a id="__codelineno-31-2" name="__codelineno-31-2" href="#__codelineno-31-2"></a><span class="n">KStream</span><span class="o">&lt;</span><span class="n">String</span><span class="p">,</span><span class="w"> </span><span class="n">CrmEvent</span><span class="o">&gt;</span><span class="w"> </span><span class="n">crmStream</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">...;</span>
<a id="__codelineno-31-3" name="__codelineno-31-3" href="#__codelineno-31-3"></a><span class="n">KStream</span><span class="o">&lt;</span><span class="n">String</span><span class="p">,</span><span class="w"> </span><span class="n">EcomEvent</span><span class="o">&gt;</span><span class="w"> </span><span class="n">ecomStream</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">...;</span>
<a id="__codelineno-31-4" name="__codelineno-31-4" href="#__codelineno-31-4"></a>
<a id="__codelineno-31-5" name="__codelineno-31-5" href="#__codelineno-31-5"></a><span class="c1">// Jointure sur une fenêtre de 5 minutes</span>
<a id="__codelineno-31-6" name="__codelineno-31-6" href="#__codelineno-31-6"></a><span class="n">KStream</span><span class="o">&lt;</span><span class="n">String</span><span class="p">,</span><span class="w"> </span><span class="n">Customer360</span><span class="o">&gt;</span><span class="w"> </span><span class="n">joined</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">crmStream</span><span class="p">.</span><span class="na">join</span><span class="p">(</span>
<a id="__codelineno-31-7" name="__codelineno-31-7" href="#__codelineno-31-7"></a><span class="w">    </span><span class="n">ecomStream</span><span class="p">,</span>
<a id="__codelineno-31-8" name="__codelineno-31-8" href="#__codelineno-31-8"></a><span class="w">    </span><span class="p">(</span><span class="n">crm</span><span class="p">,</span><span class="w"> </span><span class="n">ecom</span><span class="p">)</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">merge</span><span class="p">(</span><span class="n">crm</span><span class="p">,</span><span class="w"> </span><span class="n">ecom</span><span class="p">),</span>
<a id="__codelineno-31-9" name="__codelineno-31-9" href="#__codelineno-31-9"></a><span class="w">    </span><span class="n">JoinWindows</span><span class="p">.</span><span class="na">of</span><span class="p">(</span><span class="n">Duration</span><span class="p">.</span><span class="na">ofMinutes</span><span class="p">(</span><span class="mi">5</span><span class="p">)),</span>
<a id="__codelineno-31-10" name="__codelineno-31-10" href="#__codelineno-31-10"></a><span class="w">    </span><span class="n">StreamJoined</span><span class="p">.</span><span class="na">with</span><span class="p">(</span><span class="n">Serdes</span><span class="p">.</span><span class="na">String</span><span class="p">(),</span><span class="w"> </span><span class="n">crmSerde</span><span class="p">,</span><span class="w"> </span><span class="n">ecomSerde</span><span class="p">)</span>
<a id="__codelineno-31-11" name="__codelineno-31-11" href="#__codelineno-31-11"></a><span class="p">);</span>
</code></pre></div>
<h3 id="defi-4-qualite-des-donnees">Défi 4 : Qualité des Données<a class="headerlink" href="#defi-4-qualite-des-donnees" title="Permanent link">&para;</a></h3>
<p>Les données sources contiennent des erreurs, des incohérences, et des doublons. Ce problème est systématiquement sous-estimé lors de la planification des projets d'intégration.</p>
<p><em>Exemples rencontrés en production</em> :
- Emails invalides : <code>"jean@"</code>, <code>"test@test.test"</code>, <code>"N/A"</code>
- Dates impossibles : <code>"2099-13-45"</code>, <code>"0000-00-00"</code>
- Doublons : Même client créé deux fois avec des IDs différents suite à des imports manuels
- Données incohérentes : Adresse de facturation au Canada avec code postal américain
- Champs mal mappés : Numéro de téléphone dans le champ fax
- Encodage incorrect : Caractères accentués corrompus <code>"JÃ©rÃ´me"</code> au lieu de <code>"Jérôme"</code></p>
<p><em>Solution</em> : Pipeline de validation et enrichissement avec plusieurs couches.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-32-1" name="__codelineno-32-1" href="#__codelineno-32-1"></a><span class="c1">// Service de validation et nettoyage des données client</span>
<a id="__codelineno-32-2" name="__codelineno-32-2" href="#__codelineno-32-2"></a><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">CustomerDataValidator</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-32-3" name="__codelineno-32-3" href="#__codelineno-32-3"></a>
<a id="__codelineno-32-4" name="__codelineno-32-4" href="#__codelineno-32-4"></a><span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="kd">final</span><span class="w"> </span><span class="n">EmailValidator</span><span class="w"> </span><span class="n">emailValidator</span><span class="p">;</span>
<a id="__codelineno-32-5" name="__codelineno-32-5" href="#__codelineno-32-5"></a><span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="kd">final</span><span class="w"> </span><span class="n">AddressValidator</span><span class="w"> </span><span class="n">addressValidator</span><span class="p">;</span>
<a id="__codelineno-32-6" name="__codelineno-32-6" href="#__codelineno-32-6"></a><span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="kd">final</span><span class="w"> </span><span class="n">PhoneNormalizer</span><span class="w"> </span><span class="n">phoneNormalizer</span><span class="p">;</span>
<a id="__codelineno-32-7" name="__codelineno-32-7" href="#__codelineno-32-7"></a>
<a id="__codelineno-32-8" name="__codelineno-32-8" href="#__codelineno-32-8"></a><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="n">ValidationResult</span><span class="w"> </span><span class="nf">validate</span><span class="p">(</span><span class="n">RawCustomerEvent</span><span class="w"> </span><span class="n">event</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-32-9" name="__codelineno-32-9" href="#__codelineno-32-9"></a><span class="w">        </span><span class="n">Customer360</span><span class="w"> </span><span class="n">customer</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">map</span><span class="p">(</span><span class="n">event</span><span class="p">);</span>
<a id="__codelineno-32-10" name="__codelineno-32-10" href="#__codelineno-32-10"></a><span class="w">        </span><span class="n">List</span><span class="o">&lt;</span><span class="n">ValidationWarning</span><span class="o">&gt;</span><span class="w"> </span><span class="n">warnings</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">ArrayList</span><span class="o">&lt;&gt;</span><span class="p">();</span>
<a id="__codelineno-32-11" name="__codelineno-32-11" href="#__codelineno-32-11"></a><span class="w">        </span><span class="n">List</span><span class="o">&lt;</span><span class="n">ValidationError</span><span class="o">&gt;</span><span class="w"> </span><span class="n">errors</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">ArrayList</span><span class="o">&lt;&gt;</span><span class="p">();</span>
<a id="__codelineno-32-12" name="__codelineno-32-12" href="#__codelineno-32-12"></a>
<a id="__codelineno-32-13" name="__codelineno-32-13" href="#__codelineno-32-13"></a><span class="w">        </span><span class="c1">// Validation email</span>
<a id="__codelineno-32-14" name="__codelineno-32-14" href="#__codelineno-32-14"></a><span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">customer</span><span class="p">.</span><span class="na">getEmail</span><span class="p">()</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="kc">null</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-32-15" name="__codelineno-32-15" href="#__codelineno-32-15"></a><span class="w">            </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="o">!</span><span class="n">emailValidator</span><span class="p">.</span><span class="na">isValid</span><span class="p">(</span><span class="n">customer</span><span class="p">.</span><span class="na">getEmail</span><span class="p">()))</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-32-16" name="__codelineno-32-16" href="#__codelineno-32-16"></a><span class="w">                </span><span class="n">customer</span><span class="p">.</span><span class="na">setEmail</span><span class="p">(</span><span class="kc">null</span><span class="p">);</span>
<a id="__codelineno-32-17" name="__codelineno-32-17" href="#__codelineno-32-17"></a><span class="w">                </span><span class="n">warnings</span><span class="p">.</span><span class="na">add</span><span class="p">(</span><span class="k">new</span><span class="w"> </span><span class="n">ValidationWarning</span><span class="p">(</span>
<a id="__codelineno-32-18" name="__codelineno-32-18" href="#__codelineno-32-18"></a><span class="w">                    </span><span class="s">&quot;email&quot;</span><span class="p">,</span><span class="w"> </span>
<a id="__codelineno-32-19" name="__codelineno-32-19" href="#__codelineno-32-19"></a><span class="w">                    </span><span class="s">&quot;Invalid email discarded: &quot;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">customer</span><span class="p">.</span><span class="na">getEmail</span><span class="p">(),</span>
<a id="__codelineno-32-20" name="__codelineno-32-20" href="#__codelineno-32-20"></a><span class="w">                    </span><span class="n">Severity</span><span class="p">.</span><span class="na">MEDIUM</span>
<a id="__codelineno-32-21" name="__codelineno-32-21" href="#__codelineno-32-21"></a><span class="w">                </span><span class="p">));</span>
<a id="__codelineno-32-22" name="__codelineno-32-22" href="#__codelineno-32-22"></a><span class="w">            </span><span class="p">}</span>
<a id="__codelineno-32-23" name="__codelineno-32-23" href="#__codelineno-32-23"></a><span class="w">        </span><span class="p">}</span>
<a id="__codelineno-32-24" name="__codelineno-32-24" href="#__codelineno-32-24"></a>
<a id="__codelineno-32-25" name="__codelineno-32-25" href="#__codelineno-32-25"></a><span class="w">        </span><span class="c1">// Validation dates</span>
<a id="__codelineno-32-26" name="__codelineno-32-26" href="#__codelineno-32-26"></a><span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">customer</span><span class="p">.</span><span class="na">getBirthDate</span><span class="p">()</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="kc">null</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-32-27" name="__codelineno-32-27" href="#__codelineno-32-27"></a><span class="w">            </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">customer</span><span class="p">.</span><span class="na">getBirthDate</span><span class="p">().</span><span class="na">isAfter</span><span class="p">(</span><span class="n">LocalDate</span><span class="p">.</span><span class="na">now</span><span class="p">()))</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-32-28" name="__codelineno-32-28" href="#__codelineno-32-28"></a><span class="w">                </span><span class="n">customer</span><span class="p">.</span><span class="na">setBirthDate</span><span class="p">(</span><span class="kc">null</span><span class="p">);</span>
<a id="__codelineno-32-29" name="__codelineno-32-29" href="#__codelineno-32-29"></a><span class="w">                </span><span class="n">warnings</span><span class="p">.</span><span class="na">add</span><span class="p">(</span><span class="k">new</span><span class="w"> </span><span class="n">ValidationWarning</span><span class="p">(</span>
<a id="__codelineno-32-30" name="__codelineno-32-30" href="#__codelineno-32-30"></a><span class="w">                    </span><span class="s">&quot;birth_date&quot;</span><span class="p">,</span>
<a id="__codelineno-32-31" name="__codelineno-32-31" href="#__codelineno-32-31"></a><span class="w">                    </span><span class="s">&quot;Future birth date discarded&quot;</span><span class="p">,</span>
<a id="__codelineno-32-32" name="__codelineno-32-32" href="#__codelineno-32-32"></a><span class="w">                    </span><span class="n">Severity</span><span class="p">.</span><span class="na">LOW</span>
<a id="__codelineno-32-33" name="__codelineno-32-33" href="#__codelineno-32-33"></a><span class="w">                </span><span class="p">));</span>
<a id="__codelineno-32-34" name="__codelineno-32-34" href="#__codelineno-32-34"></a><span class="w">            </span><span class="p">}</span>
<a id="__codelineno-32-35" name="__codelineno-32-35" href="#__codelineno-32-35"></a><span class="w">            </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">customer</span><span class="p">.</span><span class="na">getBirthDate</span><span class="p">().</span><span class="na">isBefore</span><span class="p">(</span><span class="n">LocalDate</span><span class="p">.</span><span class="na">of</span><span class="p">(</span><span class="mi">1900</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">)))</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-32-36" name="__codelineno-32-36" href="#__codelineno-32-36"></a><span class="w">                </span><span class="n">customer</span><span class="p">.</span><span class="na">setBirthDate</span><span class="p">(</span><span class="kc">null</span><span class="p">);</span>
<a id="__codelineno-32-37" name="__codelineno-32-37" href="#__codelineno-32-37"></a><span class="w">                </span><span class="n">warnings</span><span class="p">.</span><span class="na">add</span><span class="p">(</span><span class="k">new</span><span class="w"> </span><span class="n">ValidationWarning</span><span class="p">(</span>
<a id="__codelineno-32-38" name="__codelineno-32-38" href="#__codelineno-32-38"></a><span class="w">                    </span><span class="s">&quot;birth_date&quot;</span><span class="p">,</span>
<a id="__codelineno-32-39" name="__codelineno-32-39" href="#__codelineno-32-39"></a><span class="w">                    </span><span class="s">&quot;Implausible birth date discarded&quot;</span><span class="p">,</span>
<a id="__codelineno-32-40" name="__codelineno-32-40" href="#__codelineno-32-40"></a><span class="w">                    </span><span class="n">Severity</span><span class="p">.</span><span class="na">LOW</span>
<a id="__codelineno-32-41" name="__codelineno-32-41" href="#__codelineno-32-41"></a><span class="w">                </span><span class="p">));</span>
<a id="__codelineno-32-42" name="__codelineno-32-42" href="#__codelineno-32-42"></a><span class="w">            </span><span class="p">}</span>
<a id="__codelineno-32-43" name="__codelineno-32-43" href="#__codelineno-32-43"></a><span class="w">        </span><span class="p">}</span>
<a id="__codelineno-32-44" name="__codelineno-32-44" href="#__codelineno-32-44"></a>
<a id="__codelineno-32-45" name="__codelineno-32-45" href="#__codelineno-32-45"></a><span class="w">        </span><span class="c1">// Normalisation téléphone</span>
<a id="__codelineno-32-46" name="__codelineno-32-46" href="#__codelineno-32-46"></a><span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">customer</span><span class="p">.</span><span class="na">getPhone</span><span class="p">()</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="kc">null</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-32-47" name="__codelineno-32-47" href="#__codelineno-32-47"></a><span class="w">            </span><span class="n">String</span><span class="w"> </span><span class="n">normalized</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">phoneNormalizer</span><span class="p">.</span><span class="na">normalize</span><span class="p">(</span><span class="n">customer</span><span class="p">.</span><span class="na">getPhone</span><span class="p">());</span>
<a id="__codelineno-32-48" name="__codelineno-32-48" href="#__codelineno-32-48"></a><span class="w">            </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">normalized</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="kc">null</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-32-49" name="__codelineno-32-49" href="#__codelineno-32-49"></a><span class="w">                </span><span class="n">warnings</span><span class="p">.</span><span class="na">add</span><span class="p">(</span><span class="k">new</span><span class="w"> </span><span class="n">ValidationWarning</span><span class="p">(</span>
<a id="__codelineno-32-50" name="__codelineno-32-50" href="#__codelineno-32-50"></a><span class="w">                    </span><span class="s">&quot;phone&quot;</span><span class="p">,</span>
<a id="__codelineno-32-51" name="__codelineno-32-51" href="#__codelineno-32-51"></a><span class="w">                    </span><span class="s">&quot;Could not normalize phone: &quot;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">customer</span><span class="p">.</span><span class="na">getPhone</span><span class="p">(),</span>
<a id="__codelineno-32-52" name="__codelineno-32-52" href="#__codelineno-32-52"></a><span class="w">                    </span><span class="n">Severity</span><span class="p">.</span><span class="na">LOW</span>
<a id="__codelineno-32-53" name="__codelineno-32-53" href="#__codelineno-32-53"></a><span class="w">                </span><span class="p">));</span>
<a id="__codelineno-32-54" name="__codelineno-32-54" href="#__codelineno-32-54"></a><span class="w">            </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-32-55" name="__codelineno-32-55" href="#__codelineno-32-55"></a><span class="w">                </span><span class="n">customer</span><span class="p">.</span><span class="na">setPhone</span><span class="p">(</span><span class="n">normalized</span><span class="p">);</span>
<a id="__codelineno-32-56" name="__codelineno-32-56" href="#__codelineno-32-56"></a><span class="w">            </span><span class="p">}</span>
<a id="__codelineno-32-57" name="__codelineno-32-57" href="#__codelineno-32-57"></a><span class="w">        </span><span class="p">}</span>
<a id="__codelineno-32-58" name="__codelineno-32-58" href="#__codelineno-32-58"></a>
<a id="__codelineno-32-59" name="__codelineno-32-59" href="#__codelineno-32-59"></a><span class="w">        </span><span class="c1">// Validation adresse avec enrichissement</span>
<a id="__codelineno-32-60" name="__codelineno-32-60" href="#__codelineno-32-60"></a><span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">customer</span><span class="p">.</span><span class="na">getAddress</span><span class="p">()</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="kc">null</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-32-61" name="__codelineno-32-61" href="#__codelineno-32-61"></a><span class="w">            </span><span class="n">AddressValidationResult</span><span class="w"> </span><span class="n">addrResult</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">addressValidator</span><span class="p">.</span><span class="na">validate</span><span class="p">(</span><span class="n">customer</span><span class="p">.</span><span class="na">getAddress</span><span class="p">());</span>
<a id="__codelineno-32-62" name="__codelineno-32-62" href="#__codelineno-32-62"></a><span class="w">            </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">addrResult</span><span class="p">.</span><span class="na">isValid</span><span class="p">())</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-32-63" name="__codelineno-32-63" href="#__codelineno-32-63"></a><span class="w">                </span><span class="c1">// Enrichir avec les données normalisées (code postal formaté, etc.)</span>
<a id="__codelineno-32-64" name="__codelineno-32-64" href="#__codelineno-32-64"></a><span class="w">                </span><span class="n">customer</span><span class="p">.</span><span class="na">setAddress</span><span class="p">(</span><span class="n">addrResult</span><span class="p">.</span><span class="na">getNormalizedAddress</span><span class="p">());</span>
<a id="__codelineno-32-65" name="__codelineno-32-65" href="#__codelineno-32-65"></a><span class="w">            </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-32-66" name="__codelineno-32-66" href="#__codelineno-32-66"></a><span class="w">                </span><span class="n">warnings</span><span class="p">.</span><span class="na">add</span><span class="p">(</span><span class="k">new</span><span class="w"> </span><span class="n">ValidationWarning</span><span class="p">(</span>
<a id="__codelineno-32-67" name="__codelineno-32-67" href="#__codelineno-32-67"></a><span class="w">                    </span><span class="s">&quot;address&quot;</span><span class="p">,</span>
<a id="__codelineno-32-68" name="__codelineno-32-68" href="#__codelineno-32-68"></a><span class="w">                    </span><span class="s">&quot;Address validation failed: &quot;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">addrResult</span><span class="p">.</span><span class="na">getMessage</span><span class="p">(),</span>
<a id="__codelineno-32-69" name="__codelineno-32-69" href="#__codelineno-32-69"></a><span class="w">                    </span><span class="n">Severity</span><span class="p">.</span><span class="na">MEDIUM</span>
<a id="__codelineno-32-70" name="__codelineno-32-70" href="#__codelineno-32-70"></a><span class="w">                </span><span class="p">));</span>
<a id="__codelineno-32-71" name="__codelineno-32-71" href="#__codelineno-32-71"></a><span class="w">            </span><span class="p">}</span>
<a id="__codelineno-32-72" name="__codelineno-32-72" href="#__codelineno-32-72"></a><span class="w">        </span><span class="p">}</span>
<a id="__codelineno-32-73" name="__codelineno-32-73" href="#__codelineno-32-73"></a>
<a id="__codelineno-32-74" name="__codelineno-32-74" href="#__codelineno-32-74"></a><span class="w">        </span><span class="c1">// Calcul du score de qualité</span>
<a id="__codelineno-32-75" name="__codelineno-32-75" href="#__codelineno-32-75"></a><span class="w">        </span><span class="kt">double</span><span class="w"> </span><span class="n">qualityScore</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">calculateQualityScore</span><span class="p">(</span><span class="n">customer</span><span class="p">,</span><span class="w"> </span><span class="n">warnings</span><span class="p">);</span>
<a id="__codelineno-32-76" name="__codelineno-32-76" href="#__codelineno-32-76"></a><span class="w">        </span><span class="n">customer</span><span class="p">.</span><span class="na">setDataQualityScore</span><span class="p">(</span><span class="n">qualityScore</span><span class="p">);</span>
<a id="__codelineno-32-77" name="__codelineno-32-77" href="#__codelineno-32-77"></a>
<a id="__codelineno-32-78" name="__codelineno-32-78" href="#__codelineno-32-78"></a><span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">ValidationResult</span><span class="p">(</span><span class="n">customer</span><span class="p">,</span><span class="w"> </span><span class="n">warnings</span><span class="p">,</span><span class="w"> </span><span class="n">errors</span><span class="p">,</span><span class="w"> </span><span class="n">qualityScore</span><span class="p">);</span>
<a id="__codelineno-32-79" name="__codelineno-32-79" href="#__codelineno-32-79"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-32-80" name="__codelineno-32-80" href="#__codelineno-32-80"></a>
<a id="__codelineno-32-81" name="__codelineno-32-81" href="#__codelineno-32-81"></a><span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="kt">double</span><span class="w"> </span><span class="nf">calculateQualityScore</span><span class="p">(</span><span class="n">Customer360</span><span class="w"> </span><span class="n">customer</span><span class="p">,</span><span class="w"> </span><span class="n">List</span><span class="o">&lt;</span><span class="n">ValidationWarning</span><span class="o">&gt;</span><span class="w"> </span><span class="n">warnings</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-32-82" name="__codelineno-32-82" href="#__codelineno-32-82"></a><span class="w">        </span><span class="kt">double</span><span class="w"> </span><span class="n">score</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">100.0</span><span class="p">;</span>
<a id="__codelineno-32-83" name="__codelineno-32-83" href="#__codelineno-32-83"></a>
<a id="__codelineno-32-84" name="__codelineno-32-84" href="#__codelineno-32-84"></a><span class="w">        </span><span class="c1">// Pénalités pour champs manquants</span>
<a id="__codelineno-32-85" name="__codelineno-32-85" href="#__codelineno-32-85"></a><span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">customer</span><span class="p">.</span><span class="na">getEmail</span><span class="p">()</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="kc">null</span><span class="p">)</span><span class="w"> </span><span class="n">score</span><span class="w"> </span><span class="o">-=</span><span class="w"> </span><span class="mi">15</span><span class="p">;</span>
<a id="__codelineno-32-86" name="__codelineno-32-86" href="#__codelineno-32-86"></a><span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">customer</span><span class="p">.</span><span class="na">getPhone</span><span class="p">()</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="kc">null</span><span class="p">)</span><span class="w"> </span><span class="n">score</span><span class="w"> </span><span class="o">-=</span><span class="w"> </span><span class="mi">10</span><span class="p">;</span>
<a id="__codelineno-32-87" name="__codelineno-32-87" href="#__codelineno-32-87"></a><span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">customer</span><span class="p">.</span><span class="na">getAddress</span><span class="p">()</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="kc">null</span><span class="p">)</span><span class="w"> </span><span class="n">score</span><span class="w"> </span><span class="o">-=</span><span class="w"> </span><span class="mi">20</span><span class="p">;</span>
<a id="__codelineno-32-88" name="__codelineno-32-88" href="#__codelineno-32-88"></a>
<a id="__codelineno-32-89" name="__codelineno-32-89" href="#__codelineno-32-89"></a><span class="w">        </span><span class="c1">// Pénalités pour warnings</span>
<a id="__codelineno-32-90" name="__codelineno-32-90" href="#__codelineno-32-90"></a><span class="w">        </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="n">ValidationWarning</span><span class="w"> </span><span class="n">warning</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="n">warnings</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-32-91" name="__codelineno-32-91" href="#__codelineno-32-91"></a><span class="w">            </span><span class="k">switch</span><span class="w"> </span><span class="p">(</span><span class="n">warning</span><span class="p">.</span><span class="na">getSeverity</span><span class="p">())</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-32-92" name="__codelineno-32-92" href="#__codelineno-32-92"></a><span class="w">                </span><span class="k">case</span><span class="w"> </span><span class="n">HIGH</span><span class="p">:</span><span class="w"> </span><span class="n">score</span><span class="w"> </span><span class="o">-=</span><span class="w"> </span><span class="mi">10</span><span class="p">;</span><span class="w"> </span><span class="k">break</span><span class="p">;</span>
<a id="__codelineno-32-93" name="__codelineno-32-93" href="#__codelineno-32-93"></a><span class="w">                </span><span class="k">case</span><span class="w"> </span><span class="n">MEDIUM</span><span class="p">:</span><span class="w"> </span><span class="n">score</span><span class="w"> </span><span class="o">-=</span><span class="w"> </span><span class="mi">5</span><span class="p">;</span><span class="w"> </span><span class="k">break</span><span class="p">;</span>
<a id="__codelineno-32-94" name="__codelineno-32-94" href="#__codelineno-32-94"></a><span class="w">                </span><span class="k">case</span><span class="w"> </span><span class="n">LOW</span><span class="p">:</span><span class="w"> </span><span class="n">score</span><span class="w"> </span><span class="o">-=</span><span class="w"> </span><span class="mi">2</span><span class="p">;</span><span class="w"> </span><span class="k">break</span><span class="p">;</span>
<a id="__codelineno-32-95" name="__codelineno-32-95" href="#__codelineno-32-95"></a><span class="w">            </span><span class="p">}</span>
<a id="__codelineno-32-96" name="__codelineno-32-96" href="#__codelineno-32-96"></a><span class="w">        </span><span class="p">}</span>
<a id="__codelineno-32-97" name="__codelineno-32-97" href="#__codelineno-32-97"></a>
<a id="__codelineno-32-98" name="__codelineno-32-98" href="#__codelineno-32-98"></a><span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">Math</span><span class="p">.</span><span class="na">max</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="n">score</span><span class="p">);</span>
<a id="__codelineno-32-99" name="__codelineno-32-99" href="#__codelineno-32-99"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-32-100" name="__codelineno-32-100" href="#__codelineno-32-100"></a><span class="p">}</span>
</code></pre></div>
<p><strong>Métriques de qualité à surveiller :</strong></p>
<table>
<thead>
<tr>
<th>Métrique</th>
<th>Description</th>
<th>Seuil d'alerte</th>
</tr>
</thead>
<tbody>
<tr>
<td>Taux de validation</td>
<td>% d'enregistrements passant la validation</td>
<td>&lt; 85%</td>
</tr>
<tr>
<td>Score qualité moyen</td>
<td>Score de qualité moyen des enregistrements</td>
<td>&lt; 70</td>
</tr>
<tr>
<td>Taux de doublons</td>
<td>% d'enregistrements identifiés comme doublons</td>
<td>&gt; 5%</td>
</tr>
<tr>
<td>Taux d'enrichissement</td>
<td>% d'enregistrements enrichis avec succès</td>
<td>&lt; 90%</td>
</tr>
<tr>
<td>Latence de traitement</td>
<td>Temps de traitement par enregistrement</td>
<td>&gt; 100ms</td>
</tr>
</tbody>
</table>
<blockquote>
<p><strong>Note de terrain</strong></p>
<p><em>Contexte</em> : Implémentation Customer 360 pour un détaillant avec 5 millions de clients et 4 systèmes sources.</p>
<p><em>Durée du projet</em> : 8 mois (initial), 18 mois (avec améliorations itératives)</p>
<p><em>Statistiques de qualité découvertes</em> :
- 15% des enregistrements clients avaient au moins un problème de qualité
- 8% des emails étaient invalides ou fictifs
- 3% des clients existaient en double dans au moins deux systèmes
- 12% des adresses ne pouvaient pas être validées</p>
<p><em>Leçons apprises</em> :</p>
<ol>
<li>
<p><strong>L'identity resolution est le problème le plus difficile.</strong> 40% de l'effort total a été consacré à la résolution d'identité. Investir dans ce domaine dès le début du projet.</p>
</li>
<li>
<p><strong>Les schémas canoniques évoluent.</strong> Prévoir 2-3 itérations majeures du schéma canonique. Utiliser BACKWARD compatibility pour permettre cette évolution.</p>
</li>
<li>
<p><strong>La qualité des données est pire qu'attendu.</strong> Toujours. Construire des pipelines de nettoyage robustes et prévoir du temps pour l'analyse des anomalies.</p>
</li>
<li>
<p><strong>Le temps réel n'est pas toujours nécessaire.</strong> La vue Customer 360 était initialement temps réel (latence &lt; 1 seconde), mais les consommateurs n'avaient besoin que d'une fraîcheur de 15 minutes. Simplifier l'architecture a réduit les coûts de 60%.</p>
</li>
<li>
<p><strong>Documenter les mappings est critique.</strong> Un wiki avec les mappings source → canonique, maintenu à jour, a été essentiel pour l'onboarding des nouveaux développeurs et le débogage en production.</p>
</li>
<li>
<p><strong>Prévoir un mécanisme de replay.</strong> La capacité de rejouer les événements depuis une date donnée a sauvé le projet lors de bugs de mapping découverts après plusieurs semaines.</p>
</li>
</ol>
</blockquote>
<hr />
<h2 id="iii66-schema-registry-dans-lecosysteme-kafka">III.6.6 Schema Registry dans l'Écosystème Kafka<a class="headerlink" href="#iii66-schema-registry-dans-lecosysteme-kafka" title="Permanent link">&para;</a></h2>
<h3 id="architecture-et-fonctionnement">Architecture et Fonctionnement<a class="headerlink" href="#architecture-et-fonctionnement" title="Permanent link">&para;</a></h3>
<p>Le Schema Registry est un composant central de l'écosystème Confluent qui fournit un service de gestion des schémas pour Kafka. Il résout le problème fondamental de l'agnosticité de Kafka envers le contenu des messages en ajoutant une couche de gouvernance des schémas.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-33-1" name="__codelineno-33-1" href="#__codelineno-33-1"></a>┌─────────────────────────────────────────────────────────────────────────┐
<a id="__codelineno-33-2" name="__codelineno-33-2" href="#__codelineno-33-2"></a>│                    Architecture Schema Registry                         │
<a id="__codelineno-33-3" name="__codelineno-33-3" href="#__codelineno-33-3"></a>│                                                                         │
<a id="__codelineno-33-4" name="__codelineno-33-4" href="#__codelineno-33-4"></a>│  ┌─────────────┐                              ┌─────────────────────┐  │
<a id="__codelineno-33-5" name="__codelineno-33-5" href="#__codelineno-33-5"></a>│  │  Producer   │                              │   Schema Registry   │  │
<a id="__codelineno-33-6" name="__codelineno-33-6" href="#__codelineno-33-6"></a>│  │             │  1. Enregistrer schéma       │   (REST API)        │  │
<a id="__codelineno-33-7" name="__codelineno-33-7" href="#__codelineno-33-7"></a>│  │  ┌───────┐  │ ─────────────────────────▶   │                     │  │
<a id="__codelineno-33-8" name="__codelineno-33-8" href="#__codelineno-33-8"></a>│  │  │Avro   │  │                              │  ┌───────────────┐  │  │
<a id="__codelineno-33-9" name="__codelineno-33-9" href="#__codelineno-33-9"></a>│  │  │Serial.│  │  2. Obtenir Schema ID        │  │ Schémas       │  │  │
<a id="__codelineno-33-10" name="__codelineno-33-10" href="#__codelineno-33-10"></a>│  │  └───────┘  │ ◀─────────────────────────   │  │ (Kafka topic) │  │  │
<a id="__codelineno-33-11" name="__codelineno-33-11" href="#__codelineno-33-11"></a>│  └──────┬──────┘                              │  └───────────────┘  │  │
<a id="__codelineno-33-12" name="__codelineno-33-12" href="#__codelineno-33-12"></a>│         │                                      └─────────────────────┘  │
<a id="__codelineno-33-13" name="__codelineno-33-13" href="#__codelineno-33-13"></a>│         │ 3. Publier message                            ▲              │
<a id="__codelineno-33-14" name="__codelineno-33-14" href="#__codelineno-33-14"></a>│         │    [Schema ID | Data]                         │              │
<a id="__codelineno-33-15" name="__codelineno-33-15" href="#__codelineno-33-15"></a>│         ▼                                               │              │
<a id="__codelineno-33-16" name="__codelineno-33-16" href="#__codelineno-33-16"></a>│  ┌─────────────────────────────────────────┐           │              │
<a id="__codelineno-33-17" name="__codelineno-33-17" href="#__codelineno-33-17"></a>│  │              Apache Kafka               │           │              │
<a id="__codelineno-33-18" name="__codelineno-33-18" href="#__codelineno-33-18"></a>│  │  ┌─────────────────────────────────┐   │           │              │
<a id="__codelineno-33-19" name="__codelineno-33-19" href="#__codelineno-33-19"></a>│  │  │ Topic: orders                    │   │           │              │
<a id="__codelineno-33-20" name="__codelineno-33-20" href="#__codelineno-33-20"></a>│  │  │ [5|binary] [5|binary] [5|binary] │   │           │              │
<a id="__codelineno-33-21" name="__codelineno-33-21" href="#__codelineno-33-21"></a>│  │  └─────────────────────────────────┘   │           │              │
<a id="__codelineno-33-22" name="__codelineno-33-22" href="#__codelineno-33-22"></a>│  └──────────────────┬──────────────────────┘           │              │
<a id="__codelineno-33-23" name="__codelineno-33-23" href="#__codelineno-33-23"></a>│                     │                                   │              │
<a id="__codelineno-33-24" name="__codelineno-33-24" href="#__codelineno-33-24"></a>│         ┌───────────┴───────────┐                      │              │
<a id="__codelineno-33-25" name="__codelineno-33-25" href="#__codelineno-33-25"></a>│         ▼                       ▼                      │              │
<a id="__codelineno-33-26" name="__codelineno-33-26" href="#__codelineno-33-26"></a>│  ┌─────────────┐         ┌─────────────┐              │              │
<a id="__codelineno-33-27" name="__codelineno-33-27" href="#__codelineno-33-27"></a>│  │  Consumer A │         │  Consumer B │              │              │
<a id="__codelineno-33-28" name="__codelineno-33-28" href="#__codelineno-33-28"></a>│  │  ┌───────┐  │         │  ┌───────┐  │              │              │
<a id="__codelineno-33-29" name="__codelineno-33-29" href="#__codelineno-33-29"></a>│  │  │Avro   │  │ 4. Récupérer schéma   │              │              │
<a id="__codelineno-33-30" name="__codelineno-33-30" href="#__codelineno-33-30"></a>│  │  │Deser. │──┼─────────┼──│Deser. │──┼──────────────┘              │
<a id="__codelineno-33-31" name="__codelineno-33-31" href="#__codelineno-33-31"></a>│  │  └───────┘  │         │  └───────┘  │                             │
<a id="__codelineno-33-32" name="__codelineno-33-32" href="#__codelineno-33-32"></a>│  └─────────────┘         └─────────────┘                             │
<a id="__codelineno-33-33" name="__codelineno-33-33" href="#__codelineno-33-33"></a>└─────────────────────────────────────────────────────────────────────────┘
</code></pre></div>
<p><strong>Composants du Schema Registry :</strong></p>
<p><em>Service REST</em> : API HTTP pour l'enregistrement, la récupération, et la validation des schémas. Haute disponibilité via clustering.</p>
<p><em>Stockage backend</em> : Les schémas sont stockés dans un topic Kafka interne (<code>_schemas</code>), garantissant la durabilité et la réplication.</p>
<p><em>Cache</em> : Chaque instance maintient un cache en mémoire des schémas pour des performances optimales.</p>
<p><strong>Flux de fonctionnement détaillé :</strong></p>
<ol>
<li><strong>Enregistrement du schéma</strong> : Lors du premier message avec un nouveau schéma (ou schéma modifié), le sérialiseur Avro envoie le schéma au Registry. Le Registry :</li>
<li>Vérifie si le schéma existe déjà (par hash)</li>
<li>Si nouveau, vérifie la compatibilité avec les versions précédentes</li>
<li>Assigne un ID unique global</li>
<li>
<p>Stocke le schéma dans le topic <code>_schemas</code></p>
</li>
<li>
<p><strong>Sérialisation</strong> : Le sérialiseur préfixe le message avec :</p>
</li>
<li>Magic byte (0x00) : Identifie le format Confluent</li>
<li>Schema ID (4 bytes big-endian) : Référence au schéma</li>
<li>
<p>Données binaires Avro</p>
</li>
<li>
<p><strong>Publication</strong> : Le message complet est publié dans Kafka. Kafka ne voit que des bytes.</p>
</li>
<li>
<p><strong>Consommation</strong> : Le désérialiseur :</p>
</li>
<li>Lit le magic byte (validation)</li>
<li>Extrait le Schema ID</li>
<li>Récupère le schéma depuis le cache local ou le Registry</li>
<li>Désérialise les données avec le schéma approprié</li>
</ol>
<h3 id="haute-disponibilite-et-deploiement">Haute Disponibilité et Déploiement<a class="headerlink" href="#haute-disponibilite-et-deploiement" title="Permanent link">&para;</a></h3>
<p>Le Schema Registry supporte le clustering pour la haute disponibilité.</p>
<p><strong>Architecture de déploiement recommandée :</strong></p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-34-1" name="__codelineno-34-1" href="#__codelineno-34-1"></a>┌─────────────────────────────────────────────────────────────────────────┐
<a id="__codelineno-34-2" name="__codelineno-34-2" href="#__codelineno-34-2"></a>│                    Cluster Schema Registry (3 nœuds)                    │
<a id="__codelineno-34-3" name="__codelineno-34-3" href="#__codelineno-34-3"></a>│                                                                         │
<a id="__codelineno-34-4" name="__codelineno-34-4" href="#__codelineno-34-4"></a>│  ┌─────────────┐    ┌─────────────┐    ┌─────────────┐                 │
<a id="__codelineno-34-5" name="__codelineno-34-5" href="#__codelineno-34-5"></a>│  │  Registry 1 │    │  Registry 2 │    │  Registry 3 │                 │
<a id="__codelineno-34-6" name="__codelineno-34-6" href="#__codelineno-34-6"></a>│  │  (Leader)   │    │  (Follower) │    │  (Follower) │                 │
<a id="__codelineno-34-7" name="__codelineno-34-7" href="#__codelineno-34-7"></a>│  └──────┬──────┘    └──────┬──────┘    └──────┬──────┘                 │
<a id="__codelineno-34-8" name="__codelineno-34-8" href="#__codelineno-34-8"></a>│         │                  │                  │                        │
<a id="__codelineno-34-9" name="__codelineno-34-9" href="#__codelineno-34-9"></a>│         └──────────────────┼──────────────────┘                        │
<a id="__codelineno-34-10" name="__codelineno-34-10" href="#__codelineno-34-10"></a>│                            │                                           │
<a id="__codelineno-34-11" name="__codelineno-34-11" href="#__codelineno-34-11"></a>│                            ▼                                           │
<a id="__codelineno-34-12" name="__codelineno-34-12" href="#__codelineno-34-12"></a>│                 ┌─────────────────────┐                                │
<a id="__codelineno-34-13" name="__codelineno-34-13" href="#__codelineno-34-13"></a>│                 │   Load Balancer     │                                │
<a id="__codelineno-34-14" name="__codelineno-34-14" href="#__codelineno-34-14"></a>│                 └──────────┬──────────┘                                │
<a id="__codelineno-34-15" name="__codelineno-34-15" href="#__codelineno-34-15"></a>│                            │                                           │
<a id="__codelineno-34-16" name="__codelineno-34-16" href="#__codelineno-34-16"></a>│         ┌──────────────────┼──────────────────┐                        │
<a id="__codelineno-34-17" name="__codelineno-34-17" href="#__codelineno-34-17"></a>│         ▼                  ▼                  ▼                        │
<a id="__codelineno-34-18" name="__codelineno-34-18" href="#__codelineno-34-18"></a>│  ┌─────────────┐    ┌─────────────┐    ┌─────────────┐                 │
<a id="__codelineno-34-19" name="__codelineno-34-19" href="#__codelineno-34-19"></a>│  │ Producer A  │    │ Consumer B  │    │ Consumer C  │                 │
<a id="__codelineno-34-20" name="__codelineno-34-20" href="#__codelineno-34-20"></a>│  └─────────────┘    └─────────────┘    └─────────────┘                 │
<a id="__codelineno-34-21" name="__codelineno-34-21" href="#__codelineno-34-21"></a>└─────────────────────────────────────────────────────────────────────────┘
</code></pre></div>
<p><em>Mode Leader-Follower</em> : Un seul nœud (leader) accepte les écritures. Les followers répondent aux lectures. En cas de défaillance du leader, un follower est élu.</p>
<p><em>Facteur de réplication</em> : Le topic <code>_schemas</code> doit avoir un facteur de réplication ≥ 3 pour la durabilité.</p>
<h3 id="configuration-et-utilisation">Configuration et Utilisation<a class="headerlink" href="#configuration-et-utilisation" title="Permanent link">&para;</a></h3>
<p><strong>Configuration du producteur Avro :</strong></p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-35-1" name="__codelineno-35-1" href="#__codelineno-35-1"></a><span class="n">Properties</span><span class="w"> </span><span class="n">props</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Properties</span><span class="p">();</span>
<a id="__codelineno-35-2" name="__codelineno-35-2" href="#__codelineno-35-2"></a><span class="n">props</span><span class="p">.</span><span class="na">put</span><span class="p">(</span><span class="s">&quot;bootstrap.servers&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;kafka:9092&quot;</span><span class="p">);</span>
<a id="__codelineno-35-3" name="__codelineno-35-3" href="#__codelineno-35-3"></a><span class="n">props</span><span class="p">.</span><span class="na">put</span><span class="p">(</span><span class="s">&quot;key.serializer&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;io.confluent.kafka.serializers.KafkaAvroSerializer&quot;</span><span class="p">);</span>
<a id="__codelineno-35-4" name="__codelineno-35-4" href="#__codelineno-35-4"></a><span class="n">props</span><span class="p">.</span><span class="na">put</span><span class="p">(</span><span class="s">&quot;value.serializer&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;io.confluent.kafka.serializers.KafkaAvroSerializer&quot;</span><span class="p">);</span>
<a id="__codelineno-35-5" name="__codelineno-35-5" href="#__codelineno-35-5"></a><span class="n">props</span><span class="p">.</span><span class="na">put</span><span class="p">(</span><span class="s">&quot;schema.registry.url&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;http://schema-registry:8081&quot;</span><span class="p">);</span>
<a id="__codelineno-35-6" name="__codelineno-35-6" href="#__codelineno-35-6"></a>
<a id="__codelineno-35-7" name="__codelineno-35-7" href="#__codelineno-35-7"></a><span class="c1">// Options de comportement</span>
<a id="__codelineno-35-8" name="__codelineno-35-8" href="#__codelineno-35-8"></a><span class="n">props</span><span class="p">.</span><span class="na">put</span><span class="p">(</span><span class="s">&quot;auto.register.schemas&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;true&quot;</span><span class="p">);</span><span class="w">   </span><span class="c1">// Auto-enregistrement (dev)</span>
<a id="__codelineno-35-9" name="__codelineno-35-9" href="#__codelineno-35-9"></a><span class="n">props</span><span class="p">.</span><span class="na">put</span><span class="p">(</span><span class="s">&quot;use.latest.version&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;false&quot;</span><span class="p">);</span><span class="w">     </span><span class="c1">// Utiliser le schéma du producteur</span>
<a id="__codelineno-35-10" name="__codelineno-35-10" href="#__codelineno-35-10"></a><span class="n">props</span><span class="p">.</span><span class="na">put</span><span class="p">(</span><span class="s">&quot;avro.remove.java.properties&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;true&quot;</span><span class="p">);</span><span class="w">  </span><span class="c1">// Nettoyer les propriétés Java</span>
<a id="__codelineno-35-11" name="__codelineno-35-11" href="#__codelineno-35-11"></a>
<a id="__codelineno-35-12" name="__codelineno-35-12" href="#__codelineno-35-12"></a><span class="c1">// Options de sécurité (si Schema Registry sécurisé)</span>
<a id="__codelineno-35-13" name="__codelineno-35-13" href="#__codelineno-35-13"></a><span class="n">props</span><span class="p">.</span><span class="na">put</span><span class="p">(</span><span class="s">&quot;basic.auth.credentials.source&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;USER_INFO&quot;</span><span class="p">);</span>
<a id="__codelineno-35-14" name="__codelineno-35-14" href="#__codelineno-35-14"></a><span class="n">props</span><span class="p">.</span><span class="na">put</span><span class="p">(</span><span class="s">&quot;basic.auth.user.info&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;user:password&quot;</span><span class="p">);</span>
<a id="__codelineno-35-15" name="__codelineno-35-15" href="#__codelineno-35-15"></a>
<a id="__codelineno-35-16" name="__codelineno-35-16" href="#__codelineno-35-16"></a><span class="c1">// Configuration TLS</span>
<a id="__codelineno-35-17" name="__codelineno-35-17" href="#__codelineno-35-17"></a><span class="n">props</span><span class="p">.</span><span class="na">put</span><span class="p">(</span><span class="s">&quot;schema.registry.ssl.truststore.location&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;/path/to/truststore.jks&quot;</span><span class="p">);</span>
<a id="__codelineno-35-18" name="__codelineno-35-18" href="#__codelineno-35-18"></a><span class="n">props</span><span class="p">.</span><span class="na">put</span><span class="p">(</span><span class="s">&quot;schema.registry.ssl.truststore.password&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;changeit&quot;</span><span class="p">);</span>
<a id="__codelineno-35-19" name="__codelineno-35-19" href="#__codelineno-35-19"></a>
<a id="__codelineno-35-20" name="__codelineno-35-20" href="#__codelineno-35-20"></a><span class="n">KafkaProducer</span><span class="o">&lt;</span><span class="n">String</span><span class="p">,</span><span class="w"> </span><span class="n">OrderCreated</span><span class="o">&gt;</span><span class="w"> </span><span class="n">producer</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">KafkaProducer</span><span class="o">&lt;&gt;</span><span class="p">(</span><span class="n">props</span><span class="p">);</span>
</code></pre></div>
<p><strong>Configuration du consommateur Avro :</strong></p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-36-1" name="__codelineno-36-1" href="#__codelineno-36-1"></a><span class="n">Properties</span><span class="w"> </span><span class="n">props</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Properties</span><span class="p">();</span>
<a id="__codelineno-36-2" name="__codelineno-36-2" href="#__codelineno-36-2"></a><span class="n">props</span><span class="p">.</span><span class="na">put</span><span class="p">(</span><span class="s">&quot;bootstrap.servers&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;kafka:9092&quot;</span><span class="p">);</span>
<a id="__codelineno-36-3" name="__codelineno-36-3" href="#__codelineno-36-3"></a><span class="n">props</span><span class="p">.</span><span class="na">put</span><span class="p">(</span><span class="s">&quot;group.id&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;order-processor&quot;</span><span class="p">);</span>
<a id="__codelineno-36-4" name="__codelineno-36-4" href="#__codelineno-36-4"></a><span class="n">props</span><span class="p">.</span><span class="na">put</span><span class="p">(</span><span class="s">&quot;key.deserializer&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;io.confluent.kafka.serializers.KafkaAvroDeserializer&quot;</span><span class="p">);</span>
<a id="__codelineno-36-5" name="__codelineno-36-5" href="#__codelineno-36-5"></a><span class="n">props</span><span class="p">.</span><span class="na">put</span><span class="p">(</span><span class="s">&quot;value.deserializer&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;io.confluent.kafka.serializers.KafkaAvroDeserializer&quot;</span><span class="p">);</span>
<a id="__codelineno-36-6" name="__codelineno-36-6" href="#__codelineno-36-6"></a><span class="n">props</span><span class="p">.</span><span class="na">put</span><span class="p">(</span><span class="s">&quot;schema.registry.url&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;http://schema-registry:8081&quot;</span><span class="p">);</span>
<a id="__codelineno-36-7" name="__codelineno-36-7" href="#__codelineno-36-7"></a>
<a id="__codelineno-36-8" name="__codelineno-36-8" href="#__codelineno-36-8"></a><span class="c1">// Options de lecture</span>
<a id="__codelineno-36-9" name="__codelineno-36-9" href="#__codelineno-36-9"></a><span class="n">props</span><span class="p">.</span><span class="na">put</span><span class="p">(</span><span class="s">&quot;specific.avro.reader&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;true&quot;</span><span class="p">);</span><span class="w">   </span><span class="c1">// Classes générées (vs. GenericRecord)</span>
<a id="__codelineno-36-10" name="__codelineno-36-10" href="#__codelineno-36-10"></a><span class="n">props</span><span class="p">.</span><span class="na">put</span><span class="p">(</span><span class="s">&quot;avro.use.logical.type.converters&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;true&quot;</span><span class="p">);</span><span class="w">  </span><span class="c1">// Support des types logiques</span>
<a id="__codelineno-36-11" name="__codelineno-36-11" href="#__codelineno-36-11"></a>
<a id="__codelineno-36-12" name="__codelineno-36-12" href="#__codelineno-36-12"></a><span class="c1">// Gestion des schémas inconnus</span>
<a id="__codelineno-36-13" name="__codelineno-36-13" href="#__codelineno-36-13"></a><span class="n">props</span><span class="p">.</span><span class="na">put</span><span class="p">(</span><span class="s">&quot;schema.reflection.fallback&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;false&quot;</span><span class="p">);</span><span class="w">  </span><span class="c1">// Erreur si schéma inconnu</span>
<a id="__codelineno-36-14" name="__codelineno-36-14" href="#__codelineno-36-14"></a>
<a id="__codelineno-36-15" name="__codelineno-36-15" href="#__codelineno-36-15"></a><span class="n">KafkaConsumer</span><span class="o">&lt;</span><span class="n">String</span><span class="p">,</span><span class="w"> </span><span class="n">OrderCreated</span><span class="o">&gt;</span><span class="w"> </span><span class="n">consumer</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">KafkaConsumer</span><span class="o">&lt;&gt;</span><span class="p">(</span><span class="n">props</span><span class="p">);</span>
</code></pre></div>
<p><strong>Différence entre GenericRecord et SpecificRecord :</strong></p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-37-1" name="__codelineno-37-1" href="#__codelineno-37-1"></a><span class="c1">// GenericRecord : Pas de classe générée, accès par nom de champ</span>
<a id="__codelineno-37-2" name="__codelineno-37-2" href="#__codelineno-37-2"></a><span class="n">GenericRecord</span><span class="w"> </span><span class="n">record</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="n">GenericRecord</span><span class="p">)</span><span class="w"> </span><span class="n">consumer</span><span class="p">.</span><span class="na">poll</span><span class="p">(...).</span><span class="na">value</span><span class="p">();</span>
<a id="__codelineno-37-3" name="__codelineno-37-3" href="#__codelineno-37-3"></a><span class="n">String</span><span class="w"> </span><span class="n">orderId</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">record</span><span class="p">.</span><span class="na">get</span><span class="p">(</span><span class="s">&quot;order_id&quot;</span><span class="p">).</span><span class="na">toString</span><span class="p">();</span>
<a id="__codelineno-37-4" name="__codelineno-37-4" href="#__codelineno-37-4"></a><span class="n">Long</span><span class="w"> </span><span class="n">total</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="n">Long</span><span class="p">)</span><span class="w"> </span><span class="n">record</span><span class="p">.</span><span class="na">get</span><span class="p">(</span><span class="s">&quot;total_amount&quot;</span><span class="p">);</span>
<a id="__codelineno-37-5" name="__codelineno-37-5" href="#__codelineno-37-5"></a>
<a id="__codelineno-37-6" name="__codelineno-37-6" href="#__codelineno-37-6"></a><span class="c1">// SpecificRecord : Classe générée depuis le schéma Avro</span>
<a id="__codelineno-37-7" name="__codelineno-37-7" href="#__codelineno-37-7"></a><span class="n">OrderCreated</span><span class="w"> </span><span class="n">order</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">consumer</span><span class="p">.</span><span class="na">poll</span><span class="p">(...).</span><span class="na">value</span><span class="p">();</span>
<a id="__codelineno-37-8" name="__codelineno-37-8" href="#__codelineno-37-8"></a><span class="n">String</span><span class="w"> </span><span class="n">orderId</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">order</span><span class="p">.</span><span class="na">getOrderId</span><span class="p">();</span><span class="w">    </span><span class="c1">// Typage fort</span>
<a id="__codelineno-37-9" name="__codelineno-37-9" href="#__codelineno-37-9"></a><span class="kt">long</span><span class="w"> </span><span class="n">total</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">order</span><span class="p">.</span><span class="na">getTotalAmount</span><span class="p">();</span><span class="w">    </span><span class="c1">// Pas de cast</span>
</code></pre></div>
<p><em>Recommandation</em> : Utiliser SpecificRecord en production pour le typage fort et la détection d'erreurs à la compilation.</p>
<h3 id="api-rest-du-schema-registry">API REST du Schema Registry<a class="headerlink" href="#api-rest-du-schema-registry" title="Permanent link">&para;</a></h3>
<p>Le Schema Registry expose une API REST complète pour la gestion des schémas.</p>
<p><strong>Opérations de lecture :</strong></p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-38-1" name="__codelineno-38-1" href="#__codelineno-38-1"></a><span class="c1"># Lister tous les sujets (subjects)</span>
<a id="__codelineno-38-2" name="__codelineno-38-2" href="#__codelineno-38-2"></a>curl<span class="w"> </span>http://schema-registry:8081/subjects
<a id="__codelineno-38-3" name="__codelineno-38-3" href="#__codelineno-38-3"></a><span class="c1"># Réponse: [&quot;orders-key&quot;, &quot;orders-value&quot;, &quot;customers-value&quot;]</span>
<a id="__codelineno-38-4" name="__codelineno-38-4" href="#__codelineno-38-4"></a>
<a id="__codelineno-38-5" name="__codelineno-38-5" href="#__codelineno-38-5"></a><span class="c1"># Obtenir les versions d&#39;un sujet</span>
<a id="__codelineno-38-6" name="__codelineno-38-6" href="#__codelineno-38-6"></a>curl<span class="w"> </span>http://schema-registry:8081/subjects/orders-value/versions
<a id="__codelineno-38-7" name="__codelineno-38-7" href="#__codelineno-38-7"></a><span class="c1"># Réponse: [1, 2, 3]</span>
<a id="__codelineno-38-8" name="__codelineno-38-8" href="#__codelineno-38-8"></a>
<a id="__codelineno-38-9" name="__codelineno-38-9" href="#__codelineno-38-9"></a><span class="c1"># Obtenir un schéma par sujet et version</span>
<a id="__codelineno-38-10" name="__codelineno-38-10" href="#__codelineno-38-10"></a>curl<span class="w"> </span>http://schema-registry:8081/subjects/orders-value/versions/2
<a id="__codelineno-38-11" name="__codelineno-38-11" href="#__codelineno-38-11"></a><span class="c1"># Réponse: {&quot;subject&quot;:&quot;orders-value&quot;,&quot;version&quot;:2,&quot;id&quot;:5,&quot;schema&quot;:&quot;{...}&quot;}</span>
<a id="__codelineno-38-12" name="__codelineno-38-12" href="#__codelineno-38-12"></a>
<a id="__codelineno-38-13" name="__codelineno-38-13" href="#__codelineno-38-13"></a><span class="c1"># Obtenir le dernier schéma</span>
<a id="__codelineno-38-14" name="__codelineno-38-14" href="#__codelineno-38-14"></a>curl<span class="w"> </span>http://schema-registry:8081/subjects/orders-value/versions/latest
<a id="__codelineno-38-15" name="__codelineno-38-15" href="#__codelineno-38-15"></a>
<a id="__codelineno-38-16" name="__codelineno-38-16" href="#__codelineno-38-16"></a><span class="c1"># Obtenir un schéma par ID global</span>
<a id="__codelineno-38-17" name="__codelineno-38-17" href="#__codelineno-38-17"></a>curl<span class="w"> </span>http://schema-registry:8081/schemas/ids/5
<a id="__codelineno-38-18" name="__codelineno-38-18" href="#__codelineno-38-18"></a><span class="c1"># Réponse: {&quot;schema&quot;:&quot;{...}&quot;}</span>
</code></pre></div>
<p><strong>Opérations d'écriture :</strong></p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-39-1" name="__codelineno-39-1" href="#__codelineno-39-1"></a><span class="c1"># Enregistrer un nouveau schéma</span>
<a id="__codelineno-39-2" name="__codelineno-39-2" href="#__codelineno-39-2"></a>curl<span class="w"> </span>-X<span class="w"> </span>POST<span class="w"> </span>-H<span class="w"> </span><span class="s2">&quot;Content-Type: application/vnd.schemaregistry.v1+json&quot;</span><span class="w"> </span><span class="se">\</span>
<a id="__codelineno-39-3" name="__codelineno-39-3" href="#__codelineno-39-3"></a><span class="w">  </span>--data<span class="w"> </span><span class="s1">&#39;{&quot;schema&quot;: &quot;{\&quot;type\&quot;:\&quot;record\&quot;,\&quot;name\&quot;:\&quot;Order\&quot;,\&quot;fields\&quot;:[...]}&quot;}&#39;</span><span class="w"> </span><span class="se">\</span>
<a id="__codelineno-39-4" name="__codelineno-39-4" href="#__codelineno-39-4"></a><span class="w">  </span>http://schema-registry:8081/subjects/orders-value/versions
<a id="__codelineno-39-5" name="__codelineno-39-5" href="#__codelineno-39-5"></a><span class="c1"># Réponse: {&quot;id&quot;:6}</span>
<a id="__codelineno-39-6" name="__codelineno-39-6" href="#__codelineno-39-6"></a>
<a id="__codelineno-39-7" name="__codelineno-39-7" href="#__codelineno-39-7"></a><span class="c1"># Vérifier la compatibilité avant enregistrement</span>
<a id="__codelineno-39-8" name="__codelineno-39-8" href="#__codelineno-39-8"></a>curl<span class="w"> </span>-X<span class="w"> </span>POST<span class="w"> </span>-H<span class="w"> </span><span class="s2">&quot;Content-Type: application/vnd.schemaregistry.v1+json&quot;</span><span class="w"> </span><span class="se">\</span>
<a id="__codelineno-39-9" name="__codelineno-39-9" href="#__codelineno-39-9"></a><span class="w">  </span>--data<span class="w"> </span><span class="s1">&#39;{&quot;schema&quot;: &quot;{...}&quot;}&#39;</span><span class="w"> </span><span class="se">\</span>
<a id="__codelineno-39-10" name="__codelineno-39-10" href="#__codelineno-39-10"></a><span class="w">  </span>http://schema-registry:8081/compatibility/subjects/orders-value/versions/latest
<a id="__codelineno-39-11" name="__codelineno-39-11" href="#__codelineno-39-11"></a><span class="c1"># Réponse: {&quot;is_compatible&quot;:true} ou {&quot;is_compatible&quot;:false}</span>
</code></pre></div>
<p><strong>Configuration de compatibilité :</strong></p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-40-1" name="__codelineno-40-1" href="#__codelineno-40-1"></a><span class="c1"># Obtenir la configuration globale</span>
<a id="__codelineno-40-2" name="__codelineno-40-2" href="#__codelineno-40-2"></a>curl<span class="w"> </span>http://schema-registry:8081/config
<a id="__codelineno-40-3" name="__codelineno-40-3" href="#__codelineno-40-3"></a><span class="c1"># Réponse: {&quot;compatibilityLevel&quot;:&quot;BACKWARD&quot;}</span>
<a id="__codelineno-40-4" name="__codelineno-40-4" href="#__codelineno-40-4"></a>
<a id="__codelineno-40-5" name="__codelineno-40-5" href="#__codelineno-40-5"></a><span class="c1"># Configurer la compatibilité globale</span>
<a id="__codelineno-40-6" name="__codelineno-40-6" href="#__codelineno-40-6"></a>curl<span class="w"> </span>-X<span class="w"> </span>PUT<span class="w"> </span>-H<span class="w"> </span><span class="s2">&quot;Content-Type: application/vnd.schemaregistry.v1+json&quot;</span><span class="w"> </span><span class="se">\</span>
<a id="__codelineno-40-7" name="__codelineno-40-7" href="#__codelineno-40-7"></a><span class="w">  </span>--data<span class="w"> </span><span class="s1">&#39;{&quot;compatibility&quot;: &quot;FULL&quot;}&#39;</span><span class="w"> </span><span class="se">\</span>
<a id="__codelineno-40-8" name="__codelineno-40-8" href="#__codelineno-40-8"></a><span class="w">  </span>http://schema-registry:8081/config
<a id="__codelineno-40-9" name="__codelineno-40-9" href="#__codelineno-40-9"></a>
<a id="__codelineno-40-10" name="__codelineno-40-10" href="#__codelineno-40-10"></a><span class="c1"># Configurer la compatibilité par sujet</span>
<a id="__codelineno-40-11" name="__codelineno-40-11" href="#__codelineno-40-11"></a>curl<span class="w"> </span>-X<span class="w"> </span>PUT<span class="w"> </span>-H<span class="w"> </span><span class="s2">&quot;Content-Type: application/vnd.schemaregistry.v1+json&quot;</span><span class="w"> </span><span class="se">\</span>
<a id="__codelineno-40-12" name="__codelineno-40-12" href="#__codelineno-40-12"></a><span class="w">  </span>--data<span class="w"> </span><span class="s1">&#39;{&quot;compatibility&quot;: &quot;BACKWARD_TRANSITIVE&quot;}&#39;</span><span class="w"> </span><span class="se">\</span>
<a id="__codelineno-40-13" name="__codelineno-40-13" href="#__codelineno-40-13"></a><span class="w">  </span>http://schema-registry:8081/config/orders-value
<a id="__codelineno-40-14" name="__codelineno-40-14" href="#__codelineno-40-14"></a>
<a id="__codelineno-40-15" name="__codelineno-40-15" href="#__codelineno-40-15"></a><span class="c1"># Obtenir la configuration d&#39;un sujet</span>
<a id="__codelineno-40-16" name="__codelineno-40-16" href="#__codelineno-40-16"></a>curl<span class="w"> </span>http://schema-registry:8081/config/orders-value
</code></pre></div>
<p><strong>Opérations de suppression (avec précaution) :</strong></p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-41-1" name="__codelineno-41-1" href="#__codelineno-41-1"></a><span class="c1"># Supprimer une version (soft delete)</span>
<a id="__codelineno-41-2" name="__codelineno-41-2" href="#__codelineno-41-2"></a>curl<span class="w"> </span>-X<span class="w"> </span>DELETE<span class="w"> </span>http://schema-registry:8081/subjects/orders-value/versions/1
<a id="__codelineno-41-3" name="__codelineno-41-3" href="#__codelineno-41-3"></a>
<a id="__codelineno-41-4" name="__codelineno-41-4" href="#__codelineno-41-4"></a><span class="c1"># Supprimer un sujet complet (soft delete)</span>
<a id="__codelineno-41-5" name="__codelineno-41-5" href="#__codelineno-41-5"></a>curl<span class="w"> </span>-X<span class="w"> </span>DELETE<span class="w"> </span>http://schema-registry:8081/subjects/orders-value
<a id="__codelineno-41-6" name="__codelineno-41-6" href="#__codelineno-41-6"></a>
<a id="__codelineno-41-7" name="__codelineno-41-7" href="#__codelineno-41-7"></a><span class="c1"># Suppression permanente (hard delete) - DANGER</span>
<a id="__codelineno-41-8" name="__codelineno-41-8" href="#__codelineno-41-8"></a>curl<span class="w"> </span>-X<span class="w"> </span>DELETE<span class="w"> </span>http://schema-registry:8081/subjects/orders-value?permanent<span class="o">=</span><span class="nb">true</span>
</code></pre></div>
<h3 id="conventions-de-nommage-des-sujets">Conventions de Nommage des Sujets<a class="headerlink" href="#conventions-de-nommage-des-sujets" title="Permanent link">&para;</a></h3>
<p>Le Schema Registry organise les schémas par « sujets » (subjects). La stratégie de nommage détermine la correspondance entre topics Kafka et sujets Schema Registry.</p>
<p><strong>TopicNameStrategy (par défaut) :</strong></p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-42-1" name="__codelineno-42-1" href="#__codelineno-42-1"></a>Topic: orders
<a id="__codelineno-42-2" name="__codelineno-42-2" href="#__codelineno-42-2"></a>  → Sujet clé: orders-key
<a id="__codelineno-42-3" name="__codelineno-42-3" href="#__codelineno-42-3"></a>  → Sujet valeur: orders-value
</code></pre></div>
<p><em>Configuration</em> : Aucune (comportement par défaut)</p>
<p><em>Avantage</em> : Simple, un schéma par topic. La compatibilité est garantie au niveau du topic.</p>
<p><em>Inconvénient</em> : Un topic ne peut contenir qu'un seul type de message.</p>
<p><strong>RecordNameStrategy :</strong></p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-43-1" name="__codelineno-43-1" href="#__codelineno-43-1"></a>Topic: orders (peut contenir plusieurs types)
<a id="__codelineno-43-2" name="__codelineno-43-2" href="#__codelineno-43-2"></a>  → Sujet: com.example.OrderCreated
<a id="__codelineno-43-3" name="__codelineno-43-3" href="#__codelineno-43-3"></a>  → Sujet: com.example.OrderUpdated
<a id="__codelineno-43-4" name="__codelineno-43-4" href="#__codelineno-43-4"></a>  → Sujet: com.example.OrderCancelled
</code></pre></div>
<p><em>Configuration</em> :
<div class="highlight"><pre><span></span><code><a id="__codelineno-44-1" name="__codelineno-44-1" href="#__codelineno-44-1"></a><span class="n">props</span><span class="p">.</span><span class="na">put</span><span class="p">(</span><span class="s">&quot;value.subject.name.strategy&quot;</span><span class="p">,</span><span class="w"> </span>
<a id="__codelineno-44-2" name="__codelineno-44-2" href="#__codelineno-44-2"></a><span class="w">    </span><span class="s">&quot;io.confluent.kafka.serializers.subject.RecordNameStrategy&quot;</span><span class="p">);</span>
</code></pre></div></p>
<p><em>Avantage</em> : Plusieurs types d'événements dans un même topic, schémas organisés par type.</p>
<p><em>Inconvénient</em> : Pas de garantie de compatibilité inter-types dans le même topic.</p>
<p><strong>TopicRecordNameStrategy :</strong></p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-45-1" name="__codelineno-45-1" href="#__codelineno-45-1"></a>Topic: orders
<a id="__codelineno-45-2" name="__codelineno-45-2" href="#__codelineno-45-2"></a>  → Sujet: orders-com.example.OrderCreated
<a id="__codelineno-45-3" name="__codelineno-45-3" href="#__codelineno-45-3"></a>  → Sujet: orders-com.example.OrderUpdated
</code></pre></div>
<p><em>Configuration</em> :
<div class="highlight"><pre><span></span><code><a id="__codelineno-46-1" name="__codelineno-46-1" href="#__codelineno-46-1"></a><span class="n">props</span><span class="p">.</span><span class="na">put</span><span class="p">(</span><span class="s">&quot;value.subject.name.strategy&quot;</span><span class="p">,</span><span class="w"> </span>
<a id="__codelineno-46-2" name="__codelineno-46-2" href="#__codelineno-46-2"></a><span class="w">    </span><span class="s">&quot;io.confluent.kafka.serializers.subject.TopicRecordNameStrategy&quot;</span><span class="p">);</span>
</code></pre></div></p>
<p><em>Avantage</em> : Combinaison des deux — isolation par topic ET par type.</p>
<p><em>Cas d'usage</em> : Topics multi-types où chaque type évolue indépendamment.</p>
<blockquote>
<p><strong>Décision architecturale</strong></p>
<p><em>Contexte</em> : Architecture avec des topics par domaine contenant plusieurs types d'événements.</p>
<p><em>Question</em> : Quelle stratégie de nommage ?</p>
<p><em>Analyse</em> :
- TopicNameStrategy : Trop restrictif (un type par topic)
- RecordNameStrategy : Risque de confusion si le même type existe dans plusieurs topics
- TopicRecordNameStrategy : Meilleur compromis</p>
<p><em>Décision</em> : TopicRecordNameStrategy pour les topics multi-types, TopicNameStrategy pour les topics mono-type.</p>
<p><em>Documentation</em> : Documenter la stratégie dans les guidelines de l'équipe.</p>
</blockquote>
<hr />
<h2 id="iii67-problemes-courants-dans-la-gestion-des-contrats">III.6.7 Problèmes Courants dans la Gestion des Contrats<a class="headerlink" href="#iii67-problemes-courants-dans-la-gestion-des-contrats" title="Permanent link">&para;</a></h2>
<p>L'expérience collective des implémentations Kafka à grande échelle révèle des problèmes récurrents dans la gestion des contrats de données. Cette section documente ces problèmes et leurs solutions éprouvées.</p>
<h3 id="probleme-1-schema-drift-derive-de-schema">Problème 1 : Schéma Drift (Dérive de Schéma)<a class="headerlink" href="#probleme-1-schema-drift-derive-de-schema" title="Permanent link">&para;</a></h3>
<p><strong>Symptôme</strong> : Les producteurs et consommateurs utilisent des versions de schéma différentes non compatibles, causant des erreurs de désérialisation en production.</p>
<p><strong>Manifestations courantes</strong> :
- Exceptions <code>SerializationException</code> ou <code>AvroRuntimeException</code> dans les logs
- Messages non traités s'accumulant dans les topics
- Consommateurs qui crashent au démarrage après un déploiement</p>
<p><strong>Causes racines</strong> :
- Déploiements non coordonnés entre équipes
- <code>auto.register.schemas=true</code> en production permettant des schémas non validés
- Compatibilité désactivée ou mal configurée
- Absence de validation dans la CI/CD
- Tests insuffisants avant déploiement</p>
<p><strong>Solutions :</strong></p>
<p><em>Solution 1 : Désactiver l'auto-registration en production</em></p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-47-1" name="__codelineno-47-1" href="#__codelineno-47-1"></a><span class="c1">// Configuration producteur en PRODUCTION</span>
<a id="__codelineno-47-2" name="__codelineno-47-2" href="#__codelineno-47-2"></a><span class="n">props</span><span class="p">.</span><span class="na">put</span><span class="p">(</span><span class="s">&quot;auto.register.schemas&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;false&quot;</span><span class="p">);</span><span class="w">  </span><span class="c1">// OBLIGATOIRE</span>
<a id="__codelineno-47-3" name="__codelineno-47-3" href="#__codelineno-47-3"></a><span class="n">props</span><span class="p">.</span><span class="na">put</span><span class="p">(</span><span class="s">&quot;use.latest.version&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;true&quot;</span><span class="p">);</span><span class="w">      </span><span class="c1">// Utiliser le dernier schéma enregistré</span>
</code></pre></div>
<p>Les schémas doivent être enregistrés explicitement via la CI/CD, pas automatiquement au runtime.</p>
<p><em>Solution 2 : Pipeline CI/CD avec validation</em></p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-48-1" name="__codelineno-48-1" href="#__codelineno-48-1"></a><span class="c1"># GitLab CI : Validation et enregistrement de schéma</span>
<a id="__codelineno-48-2" name="__codelineno-48-2" href="#__codelineno-48-2"></a><span class="nt">stages</span><span class="p">:</span>
<a id="__codelineno-48-3" name="__codelineno-48-3" href="#__codelineno-48-3"></a><span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">validate</span>
<a id="__codelineno-48-4" name="__codelineno-48-4" href="#__codelineno-48-4"></a><span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">register</span>
<a id="__codelineno-48-5" name="__codelineno-48-5" href="#__codelineno-48-5"></a><span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">deploy</span>
<a id="__codelineno-48-6" name="__codelineno-48-6" href="#__codelineno-48-6"></a>
<a id="__codelineno-48-7" name="__codelineno-48-7" href="#__codelineno-48-7"></a><span class="nt">validate-schema</span><span class="p">:</span>
<a id="__codelineno-48-8" name="__codelineno-48-8" href="#__codelineno-48-8"></a><span class="w">  </span><span class="nt">stage</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">validate</span>
<a id="__codelineno-48-9" name="__codelineno-48-9" href="#__codelineno-48-9"></a><span class="w">  </span><span class="nt">script</span><span class="p">:</span>
<a id="__codelineno-48-10" name="__codelineno-48-10" href="#__codelineno-48-10"></a><span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="p p-Indicator">|</span>
<a id="__codelineno-48-11" name="__codelineno-48-11" href="#__codelineno-48-11"></a><span class="w">      </span><span class="no"># Lire le schéma</span>
<a id="__codelineno-48-12" name="__codelineno-48-12" href="#__codelineno-48-12"></a><span class="w">      </span><span class="no">SCHEMA=$(cat schemas/order-created.avsc | jq -c &#39;.&#39;)</span>
<a id="__codelineno-48-13" name="__codelineno-48-13" href="#__codelineno-48-13"></a>
<a id="__codelineno-48-14" name="__codelineno-48-14" href="#__codelineno-48-14"></a><span class="w">      </span><span class="no"># Vérifier la compatibilité</span>
<a id="__codelineno-48-15" name="__codelineno-48-15" href="#__codelineno-48-15"></a><span class="w">      </span><span class="no">RESULT=$(curl -s -X POST \</span>
<a id="__codelineno-48-16" name="__codelineno-48-16" href="#__codelineno-48-16"></a><span class="w">        </span><span class="no">-H &quot;Content-Type: application/vnd.schemaregistry.v1+json&quot; \</span>
<a id="__codelineno-48-17" name="__codelineno-48-17" href="#__codelineno-48-17"></a><span class="w">        </span><span class="no">-d &quot;{\&quot;schema\&quot;: \&quot;$SCHEMA\&quot;}&quot; \</span>
<a id="__codelineno-48-18" name="__codelineno-48-18" href="#__codelineno-48-18"></a><span class="w">        </span><span class="no">&quot;$SCHEMA_REGISTRY_URL/compatibility/subjects/orders-value/versions/latest&quot;)</span>
<a id="__codelineno-48-19" name="__codelineno-48-19" href="#__codelineno-48-19"></a>
<a id="__codelineno-48-20" name="__codelineno-48-20" href="#__codelineno-48-20"></a><span class="w">      </span><span class="no">IS_COMPATIBLE=$(echo $RESULT | jq -r &#39;.is_compatible&#39;)</span>
<a id="__codelineno-48-21" name="__codelineno-48-21" href="#__codelineno-48-21"></a>
<a id="__codelineno-48-22" name="__codelineno-48-22" href="#__codelineno-48-22"></a><span class="w">      </span><span class="no">if [ &quot;$IS_COMPATIBLE&quot; != &quot;true&quot; ]; then</span>
<a id="__codelineno-48-23" name="__codelineno-48-23" href="#__codelineno-48-23"></a><span class="w">        </span><span class="no">echo &quot;❌ ERREUR: Schéma incompatible!&quot;</span>
<a id="__codelineno-48-24" name="__codelineno-48-24" href="#__codelineno-48-24"></a><span class="w">        </span><span class="no">echo &quot;Détails: $RESULT&quot;</span>
<a id="__codelineno-48-25" name="__codelineno-48-25" href="#__codelineno-48-25"></a><span class="w">        </span><span class="no">exit 1</span>
<a id="__codelineno-48-26" name="__codelineno-48-26" href="#__codelineno-48-26"></a><span class="w">      </span><span class="no">fi</span>
<a id="__codelineno-48-27" name="__codelineno-48-27" href="#__codelineno-48-27"></a>
<a id="__codelineno-48-28" name="__codelineno-48-28" href="#__codelineno-48-28"></a><span class="w">      </span><span class="no">echo &quot;✅ Schéma compatible&quot;</span>
<a id="__codelineno-48-29" name="__codelineno-48-29" href="#__codelineno-48-29"></a>
<a id="__codelineno-48-30" name="__codelineno-48-30" href="#__codelineno-48-30"></a><span class="nt">register-schema</span><span class="p">:</span>
<a id="__codelineno-48-31" name="__codelineno-48-31" href="#__codelineno-48-31"></a><span class="w">  </span><span class="nt">stage</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">register</span>
<a id="__codelineno-48-32" name="__codelineno-48-32" href="#__codelineno-48-32"></a><span class="w">  </span><span class="nt">only</span><span class="p">:</span>
<a id="__codelineno-48-33" name="__codelineno-48-33" href="#__codelineno-48-33"></a><span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">main</span>
<a id="__codelineno-48-34" name="__codelineno-48-34" href="#__codelineno-48-34"></a><span class="w">  </span><span class="nt">script</span><span class="p">:</span>
<a id="__codelineno-48-35" name="__codelineno-48-35" href="#__codelineno-48-35"></a><span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="p p-Indicator">|</span>
<a id="__codelineno-48-36" name="__codelineno-48-36" href="#__codelineno-48-36"></a><span class="w">      </span><span class="no">SCHEMA=$(cat schemas/order-created.avsc | jq -c &#39;.&#39;)</span>
<a id="__codelineno-48-37" name="__codelineno-48-37" href="#__codelineno-48-37"></a>
<a id="__codelineno-48-38" name="__codelineno-48-38" href="#__codelineno-48-38"></a><span class="w">      </span><span class="no">curl -X POST \</span>
<a id="__codelineno-48-39" name="__codelineno-48-39" href="#__codelineno-48-39"></a><span class="w">        </span><span class="no">-H &quot;Content-Type: application/vnd.schemaregistry.v1+json&quot; \</span>
<a id="__codelineno-48-40" name="__codelineno-48-40" href="#__codelineno-48-40"></a><span class="w">        </span><span class="no">-d &quot;{\&quot;schema\&quot;: \&quot;$SCHEMA\&quot;}&quot; \</span>
<a id="__codelineno-48-41" name="__codelineno-48-41" href="#__codelineno-48-41"></a><span class="w">        </span><span class="no">&quot;$SCHEMA_REGISTRY_URL/subjects/orders-value/versions&quot;</span>
<a id="__codelineno-48-42" name="__codelineno-48-42" href="#__codelineno-48-42"></a>
<a id="__codelineno-48-43" name="__codelineno-48-43" href="#__codelineno-48-43"></a><span class="w">      </span><span class="no">echo &quot;✅ Schéma enregistré&quot;</span>
</code></pre></div>
<p><em>Solution 3 : Tests d'intégration avec schémas réels</em></p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-49-1" name="__codelineno-49-1" href="#__codelineno-49-1"></a><span class="nd">@Test</span>
<a id="__codelineno-49-2" name="__codelineno-49-2" href="#__codelineno-49-2"></a><span class="kt">void</span><span class="w"> </span><span class="nf">shouldDeserializeWithRegisteredSchema</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-49-3" name="__codelineno-49-3" href="#__codelineno-49-3"></a><span class="w">    </span><span class="c1">// Utiliser le Schema Registry de test</span>
<a id="__codelineno-49-4" name="__codelineno-49-4" href="#__codelineno-49-4"></a><span class="w">    </span><span class="n">Properties</span><span class="w"> </span><span class="n">props</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Properties</span><span class="p">();</span>
<a id="__codelineno-49-5" name="__codelineno-49-5" href="#__codelineno-49-5"></a><span class="w">    </span><span class="n">props</span><span class="p">.</span><span class="na">put</span><span class="p">(</span><span class="s">&quot;schema.registry.url&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">testSchemaRegistryUrl</span><span class="p">);</span>
<a id="__codelineno-49-6" name="__codelineno-49-6" href="#__codelineno-49-6"></a>
<a id="__codelineno-49-7" name="__codelineno-49-7" href="#__codelineno-49-7"></a><span class="w">    </span><span class="c1">// Produire un message avec le nouveau schéma</span>
<a id="__codelineno-49-8" name="__codelineno-49-8" href="#__codelineno-49-8"></a><span class="w">    </span><span class="n">producer</span><span class="p">.</span><span class="na">send</span><span class="p">(</span><span class="k">new</span><span class="w"> </span><span class="n">ProducerRecord</span><span class="o">&lt;&gt;</span><span class="p">(</span><span class="s">&quot;orders&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">key</span><span class="p">,</span><span class="w"> </span><span class="n">newOrderEvent</span><span class="p">));</span>
<a id="__codelineno-49-9" name="__codelineno-49-9" href="#__codelineno-49-9"></a>
<a id="__codelineno-49-10" name="__codelineno-49-10" href="#__codelineno-49-10"></a><span class="w">    </span><span class="c1">// Consommer avec l&#39;ancien code</span>
<a id="__codelineno-49-11" name="__codelineno-49-11" href="#__codelineno-49-11"></a><span class="w">    </span><span class="n">ConsumerRecord</span><span class="o">&lt;</span><span class="n">String</span><span class="p">,</span><span class="w"> </span><span class="n">GenericRecord</span><span class="o">&gt;</span><span class="w"> </span><span class="n">record</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">consumer</span><span class="p">.</span><span class="na">poll</span><span class="p">(...);</span>
<a id="__codelineno-49-12" name="__codelineno-49-12" href="#__codelineno-49-12"></a>
<a id="__codelineno-49-13" name="__codelineno-49-13" href="#__codelineno-49-13"></a><span class="w">    </span><span class="c1">// Vérifier que la désérialisation fonctionne</span>
<a id="__codelineno-49-14" name="__codelineno-49-14" href="#__codelineno-49-14"></a><span class="w">    </span><span class="n">assertNotNull</span><span class="p">(</span><span class="n">record</span><span class="p">.</span><span class="na">value</span><span class="p">().</span><span class="na">get</span><span class="p">(</span><span class="s">&quot;order_id&quot;</span><span class="p">));</span>
<a id="__codelineno-49-15" name="__codelineno-49-15" href="#__codelineno-49-15"></a><span class="p">}</span>
</code></pre></div>
<h3 id="probleme-2-schemas-non-documentes">Problème 2 : Schémas Non Documentés<a class="headerlink" href="#probleme-2-schemas-non-documentes" title="Permanent link">&para;</a></h3>
<p><strong>Symptôme</strong> : Les développeurs ne comprennent pas la signification des champs, les unités utilisées, ou les valeurs attendues. Les questions récurrentes sont : « C'est quoi ce champ <code>amount</code> ? C'est en dollars ou en cents ? »</p>
<p><strong>Causes</strong> :
- Documentation dans le schéma absente ou minimale
- Documentation externe (wiki, confluence) désynchronisée du schéma
- Nommage ambigu des champs (<code>id</code>, <code>value</code>, <code>data</code>)
- Pas de processus de revue des schémas</p>
<p><strong>Solutions :</strong></p>
<p><em>Solution 1 : Documentation inline obligatoire</em></p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-50-1" name="__codelineno-50-1" href="#__codelineno-50-1"></a>{
<a id="__codelineno-50-2" name="__codelineno-50-2" href="#__codelineno-50-2"></a>  &quot;type&quot;: &quot;record&quot;,
<a id="__codelineno-50-3" name="__codelineno-50-3" href="#__codelineno-50-3"></a>  &quot;name&quot;: &quot;OrderCreated&quot;,
<a id="__codelineno-50-4" name="__codelineno-50-4" href="#__codelineno-50-4"></a>  &quot;namespace&quot;: &quot;com.example.orders.events&quot;,
<a id="__codelineno-50-5" name="__codelineno-50-5" href="#__codelineno-50-5"></a>  &quot;doc&quot;: &quot;Événement émis lors de la création d&#39;une nouvelle commande. Publié dans le topic &#39;orders-events&#39;. Propriétaire: équipe checkout.&quot;,
<a id="__codelineno-50-6" name="__codelineno-50-6" href="#__codelineno-50-6"></a>  &quot;fields&quot;: [
<a id="__codelineno-50-7" name="__codelineno-50-7" href="#__codelineno-50-7"></a>    {
<a id="__codelineno-50-8" name="__codelineno-50-8" href="#__codelineno-50-8"></a>      &quot;name&quot;: &quot;order_id&quot;,
<a id="__codelineno-50-9" name="__codelineno-50-9" href="#__codelineno-50-9"></a>      &quot;type&quot;: &quot;string&quot;,
<a id="__codelineno-50-10" name="__codelineno-50-10" href="#__codelineno-50-10"></a>      &quot;doc&quot;: &quot;Identifiant unique de la commande. Format: ORD-{UUID-v4}. Exemple: ORD-550e8400-e29b-41d4-a716-446655440000&quot;
<a id="__codelineno-50-11" name="__codelineno-50-11" href="#__codelineno-50-11"></a>    },
<a id="__codelineno-50-12" name="__codelineno-50-12" href="#__codelineno-50-12"></a>    {
<a id="__codelineno-50-13" name="__codelineno-50-13" href="#__codelineno-50-13"></a>      &quot;name&quot;: &quot;customer_id&quot;,
<a id="__codelineno-50-14" name="__codelineno-50-14" href="#__codelineno-50-14"></a>      &quot;type&quot;: &quot;string&quot;,
<a id="__codelineno-50-15" name="__codelineno-50-15" href="#__codelineno-50-15"></a>      &quot;doc&quot;: &quot;Identifiant du client. Référence vers le domaine &#39;customers&#39;. Format: CUST-{UUID-v4}&quot;
<a id="__codelineno-50-16" name="__codelineno-50-16" href="#__codelineno-50-16"></a>    },
<a id="__codelineno-50-17" name="__codelineno-50-17" href="#__codelineno-50-17"></a>    {
<a id="__codelineno-50-18" name="__codelineno-50-18" href="#__codelineno-50-18"></a>      &quot;name&quot;: &quot;total_amount_cents&quot;,
<a id="__codelineno-50-19" name="__codelineno-50-19" href="#__codelineno-50-19"></a>      &quot;type&quot;: &quot;long&quot;,
<a id="__codelineno-50-20" name="__codelineno-50-20" href="#__codelineno-50-20"></a>      &quot;doc&quot;: &quot;Montant total de la commande en CENTIMES (pas en dollars). Exemple: 1599 représente 15.99 CAD. Toujours positif.&quot;
<a id="__codelineno-50-21" name="__codelineno-50-21" href="#__codelineno-50-21"></a>    },
<a id="__codelineno-50-22" name="__codelineno-50-22" href="#__codelineno-50-22"></a>    {
<a id="__codelineno-50-23" name="__codelineno-50-23" href="#__codelineno-50-23"></a>      &quot;name&quot;: &quot;currency&quot;,
<a id="__codelineno-50-24" name="__codelineno-50-24" href="#__codelineno-50-24"></a>      &quot;type&quot;: &quot;string&quot;,
<a id="__codelineno-50-25" name="__codelineno-50-25" href="#__codelineno-50-25"></a>      &quot;default&quot;: &quot;CAD&quot;,
<a id="__codelineno-50-26" name="__codelineno-50-26" href="#__codelineno-50-26"></a>      &quot;doc&quot;: &quot;Code devise ISO 4217. Valeurs supportées: CAD, USD, EUR. Défaut: CAD&quot;
<a id="__codelineno-50-27" name="__codelineno-50-27" href="#__codelineno-50-27"></a>    },
<a id="__codelineno-50-28" name="__codelineno-50-28" href="#__codelineno-50-28"></a>    {
<a id="__codelineno-50-29" name="__codelineno-50-29" href="#__codelineno-50-29"></a>      &quot;name&quot;: &quot;created_at&quot;,
<a id="__codelineno-50-30" name="__codelineno-50-30" href="#__codelineno-50-30"></a>      &quot;type&quot;: {
<a id="__codelineno-50-31" name="__codelineno-50-31" href="#__codelineno-50-31"></a>        &quot;type&quot;: &quot;long&quot;,
<a id="__codelineno-50-32" name="__codelineno-50-32" href="#__codelineno-50-32"></a>        &quot;logicalType&quot;: &quot;timestamp-millis&quot;
<a id="__codelineno-50-33" name="__codelineno-50-33" href="#__codelineno-50-33"></a>      },
<a id="__codelineno-50-34" name="__codelineno-50-34" href="#__codelineno-50-34"></a>      &quot;doc&quot;: &quot;Timestamp de création en millisecondes depuis epoch UTC. Représente le moment où la commande a été soumise par le client.&quot;
<a id="__codelineno-50-35" name="__codelineno-50-35" href="#__codelineno-50-35"></a>    },
<a id="__codelineno-50-36" name="__codelineno-50-36" href="#__codelineno-50-36"></a>    {
<a id="__codelineno-50-37" name="__codelineno-50-37" href="#__codelineno-50-37"></a>      &quot;name&quot;: &quot;items&quot;,
<a id="__codelineno-50-38" name="__codelineno-50-38" href="#__codelineno-50-38"></a>      &quot;type&quot;: {
<a id="__codelineno-50-39" name="__codelineno-50-39" href="#__codelineno-50-39"></a>        &quot;type&quot;: &quot;array&quot;,
<a id="__codelineno-50-40" name="__codelineno-50-40" href="#__codelineno-50-40"></a>        &quot;items&quot;: &quot;OrderItem&quot;
<a id="__codelineno-50-41" name="__codelineno-50-41" href="#__codelineno-50-41"></a>      },
<a id="__codelineno-50-42" name="__codelineno-50-42" href="#__codelineno-50-42"></a>      &quot;doc&quot;: &quot;Liste des articles de la commande. Ne peut pas être vide. Maximum 100 items par commande.&quot;
<a id="__codelineno-50-43" name="__codelineno-50-43" href="#__codelineno-50-43"></a>    }
<a id="__codelineno-50-44" name="__codelineno-50-44" href="#__codelineno-50-44"></a>  ]
<a id="__codelineno-50-45" name="__codelineno-50-45" href="#__codelineno-50-45"></a>}
</code></pre></div>
<p><em>Solution 2 : Conventions de nommage explicites</em></p>
<table>
<thead>
<tr>
<th>Convention</th>
<th>Exemple</th>
<th>Signification</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>*_cents</code></td>
<td><code>amount_cents</code></td>
<td>Montant en centimes</td>
</tr>
<tr>
<td><code>*_at</code></td>
<td><code>created_at</code></td>
<td>Timestamp</td>
</tr>
<tr>
<td><code>*_id</code></td>
<td><code>customer_id</code></td>
<td>Identifiant/référence</td>
</tr>
<tr>
<td><code>*_count</code></td>
<td><code>item_count</code></td>
<td>Compteur entier</td>
</tr>
<tr>
<td><code>*_seconds</code></td>
<td><code>duration_seconds</code></td>
<td>Durée en secondes</td>
</tr>
<tr>
<td><code>*_millis</code></td>
<td><code>latency_millis</code></td>
<td>Durée en millisecondes</td>
</tr>
<tr>
<td><code>is_*</code></td>
<td><code>is_active</code></td>
<td>Booléen</td>
</tr>
<tr>
<td><code>has_*</code></td>
<td><code>has_items</code></td>
<td>Booléen</td>
</tr>
</tbody>
</table>
<p><em>Solution 3 : Génération automatique de documentation</em></p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-51-1" name="__codelineno-51-1" href="#__codelineno-51-1"></a><span class="c1"># Génération de documentation HTML depuis les schémas Avro</span>
<a id="__codelineno-51-2" name="__codelineno-51-2" href="#__codelineno-51-2"></a><span class="c1"># Utilisation de avro-tools ou plugins Maven/Gradle</span>
<a id="__codelineno-51-3" name="__codelineno-51-3" href="#__codelineno-51-3"></a>
<a id="__codelineno-51-4" name="__codelineno-51-4" href="#__codelineno-51-4"></a><span class="c1"># Avec avrodoc (outil open source)</span>
<a id="__codelineno-51-5" name="__codelineno-51-5" href="#__codelineno-51-5"></a>avrodoc<span class="w"> </span>schemas/<span class="w"> </span>--output<span class="w"> </span>docs/schemas/
<a id="__codelineno-51-6" name="__codelineno-51-6" href="#__codelineno-51-6"></a>
<a id="__codelineno-51-7" name="__codelineno-51-7" href="#__codelineno-51-7"></a><span class="c1"># Intégration dans la CI pour publication automatique</span>
</code></pre></div>
<p><em>Solution 4 : Processus de revue obligatoire</em></p>
<p>Tout nouveau schéma ou modification doit être revu par :
1. Un membre de l'équipe Data/Architecture
2. Au moins un consommateur du schéma
3. Vérification de la documentation et des conventions</p>
<h3 id="probleme-3-breaking-changes-accidentels">Problème 3 : Breaking Changes Accidentels<a class="headerlink" href="#probleme-3-breaking-changes-accidentels" title="Permanent link">&para;</a></h3>
<p><strong>Symptôme</strong> : Un déploiement « anodin » casse les consommateurs existants. L'équipe découvre le problème en production.</p>
<p><strong>Exemples de breaking changes subtils</strong> :</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-52-1" name="__codelineno-52-1" href="#__codelineno-52-1"></a>// ❌ Breaking: Changement de type (même si logiquement équivalent)
<a id="__codelineno-52-2" name="__codelineno-52-2" href="#__codelineno-52-2"></a>// Avant: {&quot;name&quot;: &quot;status&quot;, &quot;type&quot;: &quot;string&quot;}
<a id="__codelineno-52-3" name="__codelineno-52-3" href="#__codelineno-52-3"></a>// Après: {&quot;name&quot;: &quot;status&quot;, &quot;type&quot;: {&quot;type&quot;: &quot;enum&quot;, &quot;symbols&quot;: [&quot;CREATED&quot;, &quot;SHIPPED&quot;]}}
<a id="__codelineno-52-4" name="__codelineno-52-4" href="#__codelineno-52-4"></a>
<a id="__codelineno-52-5" name="__codelineno-52-5" href="#__codelineno-52-5"></a>// ❌ Breaking: Suppression d&#39;un champ utilisé par les consommateurs
<a id="__codelineno-52-6" name="__codelineno-52-6" href="#__codelineno-52-6"></a>// Avant: {&quot;name&quot;: &quot;legacy_id&quot;, &quot;type&quot;: [&quot;null&quot;, &quot;string&quot;]}
<a id="__codelineno-52-7" name="__codelineno-52-7" href="#__codelineno-52-7"></a>// Après: (champ supprimé)
<a id="__codelineno-52-8" name="__codelineno-52-8" href="#__codelineno-52-8"></a>
<a id="__codelineno-52-9" name="__codelineno-52-9" href="#__codelineno-52-9"></a>// ❌ Breaking: Ajout d&#39;un champ obligatoire
<a id="__codelineno-52-10" name="__codelineno-52-10" href="#__codelineno-52-10"></a>// Avant: (pas de champ shipping_address)
<a id="__codelineno-52-11" name="__codelineno-52-11" href="#__codelineno-52-11"></a>// Après: {&quot;name&quot;: &quot;shipping_address&quot;, &quot;type&quot;: &quot;Address&quot;}  // pas de défaut!
<a id="__codelineno-52-12" name="__codelineno-52-12" href="#__codelineno-52-12"></a>
<a id="__codelineno-52-13" name="__codelineno-52-13" href="#__codelineno-52-13"></a>// ❌ Breaking: Réduction de la plage d&#39;un type numérique
<a id="__codelineno-52-14" name="__codelineno-52-14" href="#__codelineno-52-14"></a>// Avant: {&quot;name&quot;: &quot;quantity&quot;, &quot;type&quot;: &quot;long&quot;}
<a id="__codelineno-52-15" name="__codelineno-52-15" href="#__codelineno-52-15"></a>// Après: {&quot;name&quot;: &quot;quantity&quot;, &quot;type&quot;: &quot;int&quot;}  // peut tronquer les valeurs
</code></pre></div>
<p><strong>Solutions :</strong></p>
<p><em>Solution 1 : Mode de compatibilité strict</em></p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-53-1" name="__codelineno-53-1" href="#__codelineno-53-1"></a><span class="c1"># Configurer BACKWARD_TRANSITIVE pour les topics critiques</span>
<a id="__codelineno-53-2" name="__codelineno-53-2" href="#__codelineno-53-2"></a>curl<span class="w"> </span>-X<span class="w"> </span>PUT<span class="w"> </span>-H<span class="w"> </span><span class="s2">&quot;Content-Type: application/vnd.schemaregistry.v1+json&quot;</span><span class="w"> </span><span class="se">\</span>
<a id="__codelineno-53-3" name="__codelineno-53-3" href="#__codelineno-53-3"></a><span class="w">  </span>--data<span class="w"> </span><span class="s1">&#39;{&quot;compatibility&quot;: &quot;BACKWARD_TRANSITIVE&quot;}&#39;</span><span class="w"> </span><span class="se">\</span>
<a id="__codelineno-53-4" name="__codelineno-53-4" href="#__codelineno-53-4"></a><span class="w">  </span>http://schema-registry:8081/config/orders-value
</code></pre></div>
<p><em>Solution 2 : Hook pre-commit pour validation locale</em></p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-54-1" name="__codelineno-54-1" href="#__codelineno-54-1"></a><span class="ch">#!/bin/bash</span>
<a id="__codelineno-54-2" name="__codelineno-54-2" href="#__codelineno-54-2"></a><span class="c1"># .git/hooks/pre-commit</span>
<a id="__codelineno-54-3" name="__codelineno-54-3" href="#__codelineno-54-3"></a>
<a id="__codelineno-54-4" name="__codelineno-54-4" href="#__codelineno-54-4"></a><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;🔍 Validation des schémas Avro...&quot;</span>
<a id="__codelineno-54-5" name="__codelineno-54-5" href="#__codelineno-54-5"></a>
<a id="__codelineno-54-6" name="__codelineno-54-6" href="#__codelineno-54-6"></a><span class="k">for</span><span class="w"> </span>schema_file<span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="k">$(</span>git<span class="w"> </span>diff<span class="w"> </span>--cached<span class="w"> </span>--name-only<span class="w"> </span><span class="p">|</span><span class="w"> </span>grep<span class="w"> </span><span class="s1">&#39;\.avsc$&#39;</span><span class="k">)</span><span class="p">;</span><span class="w"> </span><span class="k">do</span>
<a id="__codelineno-54-7" name="__codelineno-54-7" href="#__codelineno-54-7"></a><span class="w">    </span><span class="nv">subject</span><span class="o">=</span><span class="k">$(</span>basename<span class="w"> </span><span class="s2">&quot;</span><span class="nv">$schema_file</span><span class="s2">&quot;</span><span class="w"> </span>.avsc<span class="k">)</span>-value
<a id="__codelineno-54-8" name="__codelineno-54-8" href="#__codelineno-54-8"></a>
<a id="__codelineno-54-9" name="__codelineno-54-9" href="#__codelineno-54-9"></a><span class="w">    </span><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;Vérification de </span><span class="nv">$schema_file</span><span class="s2"> → </span><span class="nv">$subject</span><span class="s2">&quot;</span>
<a id="__codelineno-54-10" name="__codelineno-54-10" href="#__codelineno-54-10"></a>
<a id="__codelineno-54-11" name="__codelineno-54-11" href="#__codelineno-54-11"></a><span class="w">    </span><span class="c1"># Vérifier la syntaxe Avro</span>
<a id="__codelineno-54-12" name="__codelineno-54-12" href="#__codelineno-54-12"></a><span class="w">    </span><span class="k">if</span><span class="w"> </span>!<span class="w"> </span>avro-tools<span class="w"> </span>idl2schemata<span class="w"> </span><span class="s2">&quot;</span><span class="nv">$schema_file</span><span class="s2">&quot;</span><span class="w"> </span>&gt;<span class="w"> </span>/dev/null<span class="w"> </span><span class="m">2</span>&gt;<span class="p">&amp;</span><span class="m">1</span><span class="p">;</span><span class="w"> </span><span class="k">then</span>
<a id="__codelineno-54-13" name="__codelineno-54-13" href="#__codelineno-54-13"></a><span class="w">        </span><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;❌ Erreur de syntaxe dans </span><span class="nv">$schema_file</span><span class="s2">&quot;</span>
<a id="__codelineno-54-14" name="__codelineno-54-14" href="#__codelineno-54-14"></a><span class="w">        </span><span class="nb">exit</span><span class="w"> </span><span class="m">1</span>
<a id="__codelineno-54-15" name="__codelineno-54-15" href="#__codelineno-54-15"></a><span class="w">    </span><span class="k">fi</span>
<a id="__codelineno-54-16" name="__codelineno-54-16" href="#__codelineno-54-16"></a>
<a id="__codelineno-54-17" name="__codelineno-54-17" href="#__codelineno-54-17"></a><span class="w">    </span><span class="c1"># Vérifier la compatibilité (si le Schema Registry est accessible)</span>
<a id="__codelineno-54-18" name="__codelineno-54-18" href="#__codelineno-54-18"></a><span class="w">    </span><span class="k">if</span><span class="w"> </span>curl<span class="w"> </span>-s<span class="w"> </span><span class="s2">&quot;</span><span class="nv">$SCHEMA_REGISTRY_URL</span><span class="s2">/subjects&quot;</span><span class="w"> </span>&gt;<span class="w"> </span>/dev/null<span class="w"> </span><span class="m">2</span>&gt;<span class="p">&amp;</span><span class="m">1</span><span class="p">;</span><span class="w"> </span><span class="k">then</span>
<a id="__codelineno-54-19" name="__codelineno-54-19" href="#__codelineno-54-19"></a><span class="w">        </span><span class="nv">SCHEMA</span><span class="o">=</span><span class="k">$(</span>cat<span class="w"> </span><span class="s2">&quot;</span><span class="nv">$schema_file</span><span class="s2">&quot;</span><span class="w"> </span><span class="p">|</span><span class="w"> </span>jq<span class="w"> </span>-c<span class="w"> </span><span class="s1">&#39;.&#39;</span><span class="k">)</span>
<a id="__codelineno-54-20" name="__codelineno-54-20" href="#__codelineno-54-20"></a><span class="w">        </span><span class="nv">RESULT</span><span class="o">=</span><span class="k">$(</span>curl<span class="w"> </span>-s<span class="w"> </span>-X<span class="w"> </span>POST<span class="w"> </span><span class="se">\</span>
<a id="__codelineno-54-21" name="__codelineno-54-21" href="#__codelineno-54-21"></a><span class="w">            </span>-H<span class="w"> </span><span class="s2">&quot;Content-Type: application/vnd.schemaregistry.v1+json&quot;</span><span class="w"> </span><span class="se">\</span>
<a id="__codelineno-54-22" name="__codelineno-54-22" href="#__codelineno-54-22"></a><span class="w">            </span>-d<span class="w"> </span><span class="s2">&quot;{\&quot;schema\&quot;: \&quot;</span><span class="k">$(</span><span class="nb">echo</span><span class="w"> </span><span class="nv">$SCHEMA</span><span class="w"> </span><span class="p">|</span><span class="w"> </span>sed<span class="w"> </span><span class="s1">&#39;s/&quot;/\\&quot;/g&#39;</span><span class="k">)</span><span class="s2">\&quot;}&quot;</span><span class="w"> </span><span class="se">\</span>
<a id="__codelineno-54-23" name="__codelineno-54-23" href="#__codelineno-54-23"></a><span class="w">            </span><span class="s2">&quot;</span><span class="nv">$SCHEMA_REGISTRY_URL</span><span class="s2">/compatibility/subjects/</span><span class="nv">$subject</span><span class="s2">/versions/latest&quot;</span><span class="k">)</span>
<a id="__codelineno-54-24" name="__codelineno-54-24" href="#__codelineno-54-24"></a>
<a id="__codelineno-54-25" name="__codelineno-54-25" href="#__codelineno-54-25"></a><span class="w">        </span><span class="nv">IS_COMPATIBLE</span><span class="o">=</span><span class="k">$(</span><span class="nb">echo</span><span class="w"> </span><span class="nv">$RESULT</span><span class="w"> </span><span class="p">|</span><span class="w"> </span>jq<span class="w"> </span>-r<span class="w"> </span><span class="s1">&#39;.is_compatible // &quot;true&quot;&#39;</span><span class="k">)</span>
<a id="__codelineno-54-26" name="__codelineno-54-26" href="#__codelineno-54-26"></a>
<a id="__codelineno-54-27" name="__codelineno-54-27" href="#__codelineno-54-27"></a><span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="o">[</span><span class="w"> </span><span class="s2">&quot;</span><span class="nv">$IS_COMPATIBLE</span><span class="s2">&quot;</span><span class="w"> </span>!<span class="o">=</span><span class="w"> </span><span class="s2">&quot;true&quot;</span><span class="w"> </span><span class="o">]</span><span class="p">;</span><span class="w"> </span><span class="k">then</span>
<a id="__codelineno-54-28" name="__codelineno-54-28" href="#__codelineno-54-28"></a><span class="w">            </span><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;❌ </span><span class="nv">$schema_file</span><span class="s2"> incompatible avec la version actuelle&quot;</span>
<a id="__codelineno-54-29" name="__codelineno-54-29" href="#__codelineno-54-29"></a><span class="w">            </span><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;Détails: </span><span class="nv">$RESULT</span><span class="s2">&quot;</span>
<a id="__codelineno-54-30" name="__codelineno-54-30" href="#__codelineno-54-30"></a><span class="w">            </span><span class="nb">exit</span><span class="w"> </span><span class="m">1</span>
<a id="__codelineno-54-31" name="__codelineno-54-31" href="#__codelineno-54-31"></a><span class="w">        </span><span class="k">fi</span>
<a id="__codelineno-54-32" name="__codelineno-54-32" href="#__codelineno-54-32"></a><span class="w">    </span><span class="k">fi</span>
<a id="__codelineno-54-33" name="__codelineno-54-33" href="#__codelineno-54-33"></a><span class="k">done</span>
<a id="__codelineno-54-34" name="__codelineno-54-34" href="#__codelineno-54-34"></a>
<a id="__codelineno-54-35" name="__codelineno-54-35" href="#__codelineno-54-35"></a><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;✅ Tous les schémas sont valides&quot;</span>
</code></pre></div>
<p><em>Solution 3 : Tests de régression de schéma</em></p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-55-1" name="__codelineno-55-1" href="#__codelineno-55-1"></a><span class="nd">@Test</span>
<a id="__codelineno-55-2" name="__codelineno-55-2" href="#__codelineno-55-2"></a><span class="kt">void</span><span class="w"> </span><span class="nf">schemaEvolutionShouldBeBackwardCompatible</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-55-3" name="__codelineno-55-3" href="#__codelineno-55-3"></a><span class="w">    </span><span class="c1">// Charger le schéma actuel depuis le Schema Registry</span>
<a id="__codelineno-55-4" name="__codelineno-55-4" href="#__codelineno-55-4"></a><span class="w">    </span><span class="n">Schema</span><span class="w"> </span><span class="n">currentSchema</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">schemaRegistry</span><span class="p">.</span><span class="na">getLatestSchema</span><span class="p">(</span><span class="s">&quot;orders-value&quot;</span><span class="p">);</span>
<a id="__codelineno-55-5" name="__codelineno-55-5" href="#__codelineno-55-5"></a>
<a id="__codelineno-55-6" name="__codelineno-55-6" href="#__codelineno-55-6"></a><span class="w">    </span><span class="c1">// Charger le nouveau schéma depuis les fichiers</span>
<a id="__codelineno-55-7" name="__codelineno-55-7" href="#__codelineno-55-7"></a><span class="w">    </span><span class="n">Schema</span><span class="w"> </span><span class="n">newSchema</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Schema</span><span class="p">.</span><span class="na">Parser</span><span class="p">().</span><span class="na">parse</span><span class="p">(</span><span class="k">new</span><span class="w"> </span><span class="n">File</span><span class="p">(</span><span class="s">&quot;schemas/order.avsc&quot;</span><span class="p">));</span>
<a id="__codelineno-55-8" name="__codelineno-55-8" href="#__codelineno-55-8"></a>
<a id="__codelineno-55-9" name="__codelineno-55-9" href="#__codelineno-55-9"></a><span class="w">    </span><span class="c1">// Vérifier la compatibilité</span>
<a id="__codelineno-55-10" name="__codelineno-55-10" href="#__codelineno-55-10"></a><span class="w">    </span><span class="n">SchemaCompatibility</span><span class="p">.</span><span class="na">SchemaPairCompatibility</span><span class="w"> </span><span class="n">compatibility</span><span class="w"> </span><span class="o">=</span><span class="w"> </span>
<a id="__codelineno-55-11" name="__codelineno-55-11" href="#__codelineno-55-11"></a><span class="w">        </span><span class="n">SchemaCompatibility</span><span class="p">.</span><span class="na">checkReaderWriterCompatibility</span><span class="p">(</span><span class="n">currentSchema</span><span class="p">,</span><span class="w"> </span><span class="n">newSchema</span><span class="p">);</span>
<a id="__codelineno-55-12" name="__codelineno-55-12" href="#__codelineno-55-12"></a>
<a id="__codelineno-55-13" name="__codelineno-55-13" href="#__codelineno-55-13"></a><span class="w">    </span><span class="n">assertEquals</span><span class="p">(</span>
<a id="__codelineno-55-14" name="__codelineno-55-14" href="#__codelineno-55-14"></a><span class="w">        </span><span class="n">SchemaCompatibility</span><span class="p">.</span><span class="na">SchemaCompatibilityType</span><span class="p">.</span><span class="na">COMPATIBLE</span><span class="p">,</span>
<a id="__codelineno-55-15" name="__codelineno-55-15" href="#__codelineno-55-15"></a><span class="w">        </span><span class="n">compatibility</span><span class="p">.</span><span class="na">getType</span><span class="p">(),</span>
<a id="__codelineno-55-16" name="__codelineno-55-16" href="#__codelineno-55-16"></a><span class="w">        </span><span class="s">&quot;Le nouveau schéma doit être backward compatible&quot;</span>
<a id="__codelineno-55-17" name="__codelineno-55-17" href="#__codelineno-55-17"></a><span class="w">    </span><span class="p">);</span>
<a id="__codelineno-55-18" name="__codelineno-55-18" href="#__codelineno-55-18"></a><span class="p">}</span>
</code></pre></div>
<h3 id="probleme-4-proliferation-de-schemas">Problème 4 : Prolifération de Schémas<a class="headerlink" href="#probleme-4-proliferation-de-schemas" title="Permanent link">&para;</a></h3>
<p><strong>Symptôme</strong> : Des centaines de schémas avec des doublons, des versions abandonnées, et pas de propriétaire identifié. Personne ne sait quel schéma est utilisé où.</p>
<p><strong>Indicateurs du problème</strong> :
- &gt; 500 sujets dans le Schema Registry
- Nombreux schémas avec une seule version (jamais mis à jour = probablement abandonnés)
- Conventions de nommage incohérentes
- Questions fréquentes « Qui utilise ce schéma ? »</p>
<p><strong>Solutions :</strong></p>
<p><em>Solution 1 : Catalogue centralisé avec métadonnées</em></p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-56-1" name="__codelineno-56-1" href="#__codelineno-56-1"></a><span class="c1"># catalog/orders-value.yaml</span>
<a id="__codelineno-56-2" name="__codelineno-56-2" href="#__codelineno-56-2"></a><span class="nt">subject</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">orders-value</span>
<a id="__codelineno-56-3" name="__codelineno-56-3" href="#__codelineno-56-3"></a><span class="nt">topic</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">orders-events</span>
<a id="__codelineno-56-4" name="__codelineno-56-4" href="#__codelineno-56-4"></a><span class="nt">owner</span><span class="p">:</span>
<a id="__codelineno-56-5" name="__codelineno-56-5" href="#__codelineno-56-5"></a><span class="w">  </span><span class="nt">team</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">checkout</span>
<a id="__codelineno-56-6" name="__codelineno-56-6" href="#__codelineno-56-6"></a><span class="w">  </span><span class="nt">slack</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;#checkout-team&quot;</span>
<a id="__codelineno-56-7" name="__codelineno-56-7" href="#__codelineno-56-7"></a><span class="w">  </span><span class="nt">oncall</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;checkout-oncall@example.com&quot;</span>
<a id="__codelineno-56-8" name="__codelineno-56-8" href="#__codelineno-56-8"></a><span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">|</span>
<a id="__codelineno-56-9" name="__codelineno-56-9" href="#__codelineno-56-9"></a><span class="w">  </span><span class="no">Événements du cycle de vie des commandes.</span>
<a id="__codelineno-56-10" name="__codelineno-56-10" href="#__codelineno-56-10"></a><span class="w">  </span><span class="no">Publié par le service checkout.</span>
<a id="__codelineno-56-11" name="__codelineno-56-11" href="#__codelineno-56-11"></a><span class="nt">consumers</span><span class="p">:</span>
<a id="__codelineno-56-12" name="__codelineno-56-12" href="#__codelineno-56-12"></a><span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">service</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">inventory-service</span>
<a id="__codelineno-56-13" name="__codelineno-56-13" href="#__codelineno-56-13"></a><span class="w">    </span><span class="nt">team</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">logistics</span>
<a id="__codelineno-56-14" name="__codelineno-56-14" href="#__codelineno-56-14"></a><span class="w">    </span><span class="nt">usage</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;Mise</span><span class="nv"> </span><span class="s">à</span><span class="nv"> </span><span class="s">jour</span><span class="nv"> </span><span class="s">du</span><span class="nv"> </span><span class="s">stock&quot;</span>
<a id="__codelineno-56-15" name="__codelineno-56-15" href="#__codelineno-56-15"></a><span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">service</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">notification-service</span>
<a id="__codelineno-56-16" name="__codelineno-56-16" href="#__codelineno-56-16"></a><span class="w">    </span><span class="nt">team</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">platform</span>
<a id="__codelineno-56-17" name="__codelineno-56-17" href="#__codelineno-56-17"></a><span class="w">    </span><span class="nt">usage</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;Emails</span><span class="nv"> </span><span class="s">de</span><span class="nv"> </span><span class="s">confirmation&quot;</span>
<a id="__codelineno-56-18" name="__codelineno-56-18" href="#__codelineno-56-18"></a><span class="nt">created</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">2023-06-15</span>
<a id="__codelineno-56-19" name="__codelineno-56-19" href="#__codelineno-56-19"></a><span class="nt">last_reviewed</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">2024-01-10</span>
<a id="__codelineno-56-20" name="__codelineno-56-20" href="#__codelineno-56-20"></a><span class="nt">retention</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">30d</span>
<a id="__codelineno-56-21" name="__codelineno-56-21" href="#__codelineno-56-21"></a><span class="nt">compatibility</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">BACKWARD</span>
<a id="__codelineno-56-22" name="__codelineno-56-22" href="#__codelineno-56-22"></a><span class="nt">sla</span><span class="p">:</span>
<a id="__codelineno-56-23" name="__codelineno-56-23" href="#__codelineno-56-23"></a><span class="w">  </span><span class="nt">latency_p99</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">500ms</span>
<a id="__codelineno-56-24" name="__codelineno-56-24" href="#__codelineno-56-24"></a><span class="w">  </span><span class="nt">availability</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">99.9%</span>
</code></pre></div>
<p><em>Solution 2 : Processus de création avec approbation</em></p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-57-1" name="__codelineno-57-1" href="#__codelineno-57-1"></a>┌─────────────────────────────────────────────────────────────────────────┐
<a id="__codelineno-57-2" name="__codelineno-57-2" href="#__codelineno-57-2"></a>│                    Processus de Gestion des Schémas                     │
<a id="__codelineno-57-3" name="__codelineno-57-3" href="#__codelineno-57-3"></a>│                                                                         │
<a id="__codelineno-57-4" name="__codelineno-57-4" href="#__codelineno-57-4"></a>│  ┌─────────────┐                                                       │
<a id="__codelineno-57-5" name="__codelineno-57-5" href="#__codelineno-57-5"></a>│  │ Développeur │                                                       │
<a id="__codelineno-57-6" name="__codelineno-57-6" href="#__codelineno-57-6"></a>│  │ crée/modifie│                                                       │
<a id="__codelineno-57-7" name="__codelineno-57-7" href="#__codelineno-57-7"></a>│  │ schéma      │                                                       │
<a id="__codelineno-57-8" name="__codelineno-57-8" href="#__codelineno-57-8"></a>│  └──────┬──────┘                                                       │
<a id="__codelineno-57-9" name="__codelineno-57-9" href="#__codelineno-57-9"></a>│         │                                                              │
<a id="__codelineno-57-10" name="__codelineno-57-10" href="#__codelineno-57-10"></a>│         ▼                                                              │
<a id="__codelineno-57-11" name="__codelineno-57-11" href="#__codelineno-57-11"></a>│  ┌─────────────────────────────────────────────────────────────────┐  │
<a id="__codelineno-57-12" name="__codelineno-57-12" href="#__codelineno-57-12"></a>│  │ Pull Request                                                     │  │
<a id="__codelineno-57-13" name="__codelineno-57-13" href="#__codelineno-57-13"></a>│  │ - Fichier .avsc dans /schemas                                   │  │
<a id="__codelineno-57-14" name="__codelineno-57-14" href="#__codelineno-57-14"></a>│  │ - Métadonnées dans /catalog                                     │  │
<a id="__codelineno-57-15" name="__codelineno-57-15" href="#__codelineno-57-15"></a>│  │ - Documentation mise à jour                                      │  │
<a id="__codelineno-57-16" name="__codelineno-57-16" href="#__codelineno-57-16"></a>│  └──────────────────────────┬──────────────────────────────────────┘  │
<a id="__codelineno-57-17" name="__codelineno-57-17" href="#__codelineno-57-17"></a>│                             │                                          │
<a id="__codelineno-57-18" name="__codelineno-57-18" href="#__codelineno-57-18"></a>│         ┌───────────────────┼───────────────────┐                     │
<a id="__codelineno-57-19" name="__codelineno-57-19" href="#__codelineno-57-19"></a>│         ▼                   ▼                   ▼                     │
<a id="__codelineno-57-20" name="__codelineno-57-20" href="#__codelineno-57-20"></a>│  ┌─────────────┐    ┌─────────────┐    ┌─────────────┐               │
<a id="__codelineno-57-21" name="__codelineno-57-21" href="#__codelineno-57-21"></a>│  │   CI/CD     │    │  Revue par  │    │  Revue par  │               │
<a id="__codelineno-57-22" name="__codelineno-57-22" href="#__codelineno-57-22"></a>│  │ Validation  │    │  Data Team  │    │ Consommateur│               │
<a id="__codelineno-57-23" name="__codelineno-57-23" href="#__codelineno-57-23"></a>│  │ automatique │    │             │    │  (si modif) │               │
<a id="__codelineno-57-24" name="__codelineno-57-24" href="#__codelineno-57-24"></a>│  └──────┬──────┘    └──────┬──────┘    └──────┬──────┘               │
<a id="__codelineno-57-25" name="__codelineno-57-25" href="#__codelineno-57-25"></a>│         │                  │                  │                       │
<a id="__codelineno-57-26" name="__codelineno-57-26" href="#__codelineno-57-26"></a>│         └──────────────────┼──────────────────┘                       │
<a id="__codelineno-57-27" name="__codelineno-57-27" href="#__codelineno-57-27"></a>│                            │                                          │
<a id="__codelineno-57-28" name="__codelineno-57-28" href="#__codelineno-57-28"></a>│                            ▼                                          │
<a id="__codelineno-57-29" name="__codelineno-57-29" href="#__codelineno-57-29"></a>│                 ┌─────────────────────┐                               │
<a id="__codelineno-57-30" name="__codelineno-57-30" href="#__codelineno-57-30"></a>│                 │ Merge → Déploiement │                               │
<a id="__codelineno-57-31" name="__codelineno-57-31" href="#__codelineno-57-31"></a>│                 │ → Enregistrement    │                               │
<a id="__codelineno-57-32" name="__codelineno-57-32" href="#__codelineno-57-32"></a>│                 └─────────────────────┘                               │
<a id="__codelineno-57-33" name="__codelineno-57-33" href="#__codelineno-57-33"></a>└─────────────────────────────────────────────────────────────────────────┘
</code></pre></div>
<p><em>Solution 3 : Nettoyage régulier</em></p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-58-1" name="__codelineno-58-1" href="#__codelineno-58-1"></a><span class="ch">#!/bin/bash</span>
<a id="__codelineno-58-2" name="__codelineno-58-2" href="#__codelineno-58-2"></a><span class="c1"># Script de nettoyage mensuel des schémas obsolètes</span>
<a id="__codelineno-58-3" name="__codelineno-58-3" href="#__codelineno-58-3"></a>
<a id="__codelineno-58-4" name="__codelineno-58-4" href="#__codelineno-58-4"></a><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;📊 Analyse des schémas...&quot;</span>
<a id="__codelineno-58-5" name="__codelineno-58-5" href="#__codelineno-58-5"></a>
<a id="__codelineno-58-6" name="__codelineno-58-6" href="#__codelineno-58-6"></a><span class="c1"># Lister tous les sujets</span>
<a id="__codelineno-58-7" name="__codelineno-58-7" href="#__codelineno-58-7"></a><span class="nv">SUBJECTS</span><span class="o">=</span><span class="k">$(</span>curl<span class="w"> </span>-s<span class="w"> </span><span class="nv">$SCHEMA_REGISTRY_URL</span>/subjects<span class="k">)</span>
<a id="__codelineno-58-8" name="__codelineno-58-8" href="#__codelineno-58-8"></a>
<a id="__codelineno-58-9" name="__codelineno-58-9" href="#__codelineno-58-9"></a><span class="k">for</span><span class="w"> </span>subject<span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="k">$(</span><span class="nb">echo</span><span class="w"> </span><span class="nv">$SUBJECTS</span><span class="w"> </span><span class="p">|</span><span class="w"> </span>jq<span class="w"> </span>-r<span class="w"> </span><span class="s1">&#39;.[]&#39;</span><span class="k">)</span><span class="p">;</span><span class="w"> </span><span class="k">do</span>
<a id="__codelineno-58-10" name="__codelineno-58-10" href="#__codelineno-58-10"></a><span class="w">    </span><span class="c1"># Obtenir le nombre de versions</span>
<a id="__codelineno-58-11" name="__codelineno-58-11" href="#__codelineno-58-11"></a><span class="w">    </span><span class="nv">VERSIONS</span><span class="o">=</span><span class="k">$(</span>curl<span class="w"> </span>-s<span class="w"> </span><span class="s2">&quot;</span><span class="nv">$SCHEMA_REGISTRY_URL</span><span class="s2">/subjects/</span><span class="nv">$subject</span><span class="s2">/versions&quot;</span><span class="w"> </span><span class="p">|</span><span class="w"> </span>jq<span class="w"> </span><span class="s1">&#39;. | length&#39;</span><span class="k">)</span>
<a id="__codelineno-58-12" name="__codelineno-58-12" href="#__codelineno-58-12"></a>
<a id="__codelineno-58-13" name="__codelineno-58-13" href="#__codelineno-58-13"></a><span class="w">    </span><span class="c1"># Obtenir la date de dernière modification (approximation via metadata)</span>
<a id="__codelineno-58-14" name="__codelineno-58-14" href="#__codelineno-58-14"></a><span class="w">    </span><span class="nv">LATEST</span><span class="o">=</span><span class="k">$(</span>curl<span class="w"> </span>-s<span class="w"> </span><span class="s2">&quot;</span><span class="nv">$SCHEMA_REGISTRY_URL</span><span class="s2">/subjects/</span><span class="nv">$subject</span><span class="s2">/versions/latest&quot;</span><span class="k">)</span>
<a id="__codelineno-58-15" name="__codelineno-58-15" href="#__codelineno-58-15"></a>
<a id="__codelineno-58-16" name="__codelineno-58-16" href="#__codelineno-58-16"></a><span class="w">    </span><span class="c1"># Vérifier si le topic existe et a du trafic</span>
<a id="__codelineno-58-17" name="__codelineno-58-17" href="#__codelineno-58-17"></a><span class="w">    </span><span class="c1"># ... (intégration avec monitoring)</span>
<a id="__codelineno-58-18" name="__codelineno-58-18" href="#__codelineno-58-18"></a>
<a id="__codelineno-58-19" name="__codelineno-58-19" href="#__codelineno-58-19"></a><span class="w">    </span><span class="c1"># Alerter si le schéma semble abandonné</span>
<a id="__codelineno-58-20" name="__codelineno-58-20" href="#__codelineno-58-20"></a><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="o">[</span><span class="w"> </span><span class="s2">&quot;</span><span class="nv">$VERSIONS</span><span class="s2">&quot;</span><span class="w"> </span>-eq<span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="o">]</span><span class="p">;</span><span class="w"> </span><span class="k">then</span>
<a id="__codelineno-58-21" name="__codelineno-58-21" href="#__codelineno-58-21"></a><span class="w">        </span><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;⚠️  </span><span class="nv">$subject</span><span class="s2">: Une seule version, potentiellement abandonné&quot;</span>
<a id="__codelineno-58-22" name="__codelineno-58-22" href="#__codelineno-58-22"></a><span class="w">    </span><span class="k">fi</span>
<a id="__codelineno-58-23" name="__codelineno-58-23" href="#__codelineno-58-23"></a><span class="k">done</span>
</code></pre></div>
<h3 id="probleme-5-performance-du-schema-registry">Problème 5 : Performance du Schema Registry<a class="headerlink" href="#probleme-5-performance-du-schema-registry" title="Permanent link">&para;</a></h3>
<p><strong>Symptôme</strong> : Latence élevée lors de la sérialisation/désérialisation, surtout au démarrage des applications ou lors des pics de trafic.</p>
<p><strong>Causes</strong> :
- Cache client mal configuré ou désactivé
- Schema Registry sous-dimensionné
- Réseau lent entre les clients et le Registry
- Trop de requêtes au Registry (pas de mise en cache)</p>
<p><strong>Solutions :</strong></p>
<p><em>Solution 1 : Configuration optimale du cache client</em></p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-59-1" name="__codelineno-59-1" href="#__codelineno-59-1"></a><span class="c1">// Configuration du cache côté client</span>
<a id="__codelineno-59-2" name="__codelineno-59-2" href="#__codelineno-59-2"></a><span class="n">props</span><span class="p">.</span><span class="na">put</span><span class="p">(</span><span class="s">&quot;schema.registry.cache.capacity&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;1000&quot;</span><span class="p">);</span><span class="w">  </span><span class="c1">// Nombre de schémas en cache</span>
<a id="__codelineno-59-3" name="__codelineno-59-3" href="#__codelineno-59-3"></a>
<a id="__codelineno-59-4" name="__codelineno-59-4" href="#__codelineno-59-4"></a><span class="c1">// Le cache est activé par défaut, mais vérifier qu&#39;il n&#39;est pas désactivé</span>
<a id="__codelineno-59-5" name="__codelineno-59-5" href="#__codelineno-59-5"></a><span class="c1">// La première requête pour un schéma va au Registry, les suivantes utilisent le cache</span>
</code></pre></div>
<p><em>Solution 2 : Pré-chargement au démarrage</em></p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-60-1" name="__codelineno-60-1" href="#__codelineno-60-1"></a><span class="nd">@Component</span>
<a id="__codelineno-60-2" name="__codelineno-60-2" href="#__codelineno-60-2"></a><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">SchemaPreloader</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-60-3" name="__codelineno-60-3" href="#__codelineno-60-3"></a>
<a id="__codelineno-60-4" name="__codelineno-60-4" href="#__codelineno-60-4"></a><span class="w">    </span><span class="nd">@Autowired</span>
<a id="__codelineno-60-5" name="__codelineno-60-5" href="#__codelineno-60-5"></a><span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">SchemaRegistryClient</span><span class="w"> </span><span class="n">schemaRegistry</span><span class="p">;</span>
<a id="__codelineno-60-6" name="__codelineno-60-6" href="#__codelineno-60-6"></a>
<a id="__codelineno-60-7" name="__codelineno-60-7" href="#__codelineno-60-7"></a><span class="w">    </span><span class="nd">@PostConstruct</span>
<a id="__codelineno-60-8" name="__codelineno-60-8" href="#__codelineno-60-8"></a><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">preloadSchemas</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-60-9" name="__codelineno-60-9" href="#__codelineno-60-9"></a><span class="w">        </span><span class="n">log</span><span class="p">.</span><span class="na">info</span><span class="p">(</span><span class="s">&quot;Pré-chargement des schémas...&quot;</span><span class="p">);</span>
<a id="__codelineno-60-10" name="__codelineno-60-10" href="#__codelineno-60-10"></a>
<a id="__codelineno-60-11" name="__codelineno-60-11" href="#__codelineno-60-11"></a><span class="w">        </span><span class="n">List</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span><span class="w"> </span><span class="n">criticalSubjects</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Arrays</span><span class="p">.</span><span class="na">asList</span><span class="p">(</span>
<a id="__codelineno-60-12" name="__codelineno-60-12" href="#__codelineno-60-12"></a><span class="w">            </span><span class="s">&quot;orders-value&quot;</span><span class="p">,</span>
<a id="__codelineno-60-13" name="__codelineno-60-13" href="#__codelineno-60-13"></a><span class="w">            </span><span class="s">&quot;customers-value&quot;</span><span class="p">,</span>
<a id="__codelineno-60-14" name="__codelineno-60-14" href="#__codelineno-60-14"></a><span class="w">            </span><span class="s">&quot;payments-value&quot;</span>
<a id="__codelineno-60-15" name="__codelineno-60-15" href="#__codelineno-60-15"></a><span class="w">        </span><span class="p">);</span>
<a id="__codelineno-60-16" name="__codelineno-60-16" href="#__codelineno-60-16"></a>
<a id="__codelineno-60-17" name="__codelineno-60-17" href="#__codelineno-60-17"></a><span class="w">        </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="n">String</span><span class="w"> </span><span class="n">subject</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="n">criticalSubjects</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-60-18" name="__codelineno-60-18" href="#__codelineno-60-18"></a><span class="w">            </span><span class="k">try</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-60-19" name="__codelineno-60-19" href="#__codelineno-60-19"></a><span class="w">                </span><span class="n">schemaRegistry</span><span class="p">.</span><span class="na">getLatestSchemaMetadata</span><span class="p">(</span><span class="n">subject</span><span class="p">);</span>
<a id="__codelineno-60-20" name="__codelineno-60-20" href="#__codelineno-60-20"></a><span class="w">                </span><span class="n">log</span><span class="p">.</span><span class="na">info</span><span class="p">(</span><span class="s">&quot;Schéma {} chargé&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">subject</span><span class="p">);</span>
<a id="__codelineno-60-21" name="__codelineno-60-21" href="#__codelineno-60-21"></a><span class="w">            </span><span class="p">}</span><span class="w"> </span><span class="k">catch</span><span class="w"> </span><span class="p">(</span><span class="n">Exception</span><span class="w"> </span><span class="n">e</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-60-22" name="__codelineno-60-22" href="#__codelineno-60-22"></a><span class="w">                </span><span class="n">log</span><span class="p">.</span><span class="na">warn</span><span class="p">(</span><span class="s">&quot;Impossible de charger {}: {}&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">subject</span><span class="p">,</span><span class="w"> </span><span class="n">e</span><span class="p">.</span><span class="na">getMessage</span><span class="p">());</span>
<a id="__codelineno-60-23" name="__codelineno-60-23" href="#__codelineno-60-23"></a><span class="w">            </span><span class="p">}</span>
<a id="__codelineno-60-24" name="__codelineno-60-24" href="#__codelineno-60-24"></a><span class="w">        </span><span class="p">}</span>
<a id="__codelineno-60-25" name="__codelineno-60-25" href="#__codelineno-60-25"></a>
<a id="__codelineno-60-26" name="__codelineno-60-26" href="#__codelineno-60-26"></a><span class="w">        </span><span class="n">log</span><span class="p">.</span><span class="na">info</span><span class="p">(</span><span class="s">&quot;Pré-chargement terminé&quot;</span><span class="p">);</span>
<a id="__codelineno-60-27" name="__codelineno-60-27" href="#__codelineno-60-27"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-60-28" name="__codelineno-60-28" href="#__codelineno-60-28"></a><span class="p">}</span>
</code></pre></div>
<p><em>Solution 3 : Schema Registry en haute disponibilité</em></p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-61-1" name="__codelineno-61-1" href="#__codelineno-61-1"></a><span class="c1"># docker-compose.yml pour Schema Registry HA</span>
<a id="__codelineno-61-2" name="__codelineno-61-2" href="#__codelineno-61-2"></a><span class="nt">services</span><span class="p">:</span>
<a id="__codelineno-61-3" name="__codelineno-61-3" href="#__codelineno-61-3"></a><span class="w">  </span><span class="nt">schema-registry-1</span><span class="p">:</span>
<a id="__codelineno-61-4" name="__codelineno-61-4" href="#__codelineno-61-4"></a><span class="w">    </span><span class="nt">image</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">confluentinc/cp-schema-registry:7.5.0</span>
<a id="__codelineno-61-5" name="__codelineno-61-5" href="#__codelineno-61-5"></a><span class="w">    </span><span class="nt">environment</span><span class="p">:</span>
<a id="__codelineno-61-6" name="__codelineno-61-6" href="#__codelineno-61-6"></a><span class="w">      </span><span class="nt">SCHEMA_REGISTRY_HOST_NAME</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">schema-registry-1</span>
<a id="__codelineno-61-7" name="__codelineno-61-7" href="#__codelineno-61-7"></a><span class="w">      </span><span class="nt">SCHEMA_REGISTRY_KAFKASTORE_BOOTSTRAP_SERVERS</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">kafka:9092</span>
<a id="__codelineno-61-8" name="__codelineno-61-8" href="#__codelineno-61-8"></a><span class="w">      </span><span class="nt">SCHEMA_REGISTRY_LEADER_ELIGIBILITY</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;true&quot;</span>
<a id="__codelineno-61-9" name="__codelineno-61-9" href="#__codelineno-61-9"></a><span class="w">      </span><span class="nt">SCHEMA_REGISTRY_HEAP_OPTS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;-Xms1g</span><span class="nv"> </span><span class="s">-Xmx2g&quot;</span>
<a id="__codelineno-61-10" name="__codelineno-61-10" href="#__codelineno-61-10"></a>
<a id="__codelineno-61-11" name="__codelineno-61-11" href="#__codelineno-61-11"></a><span class="w">  </span><span class="nt">schema-registry-2</span><span class="p">:</span>
<a id="__codelineno-61-12" name="__codelineno-61-12" href="#__codelineno-61-12"></a><span class="w">    </span><span class="nt">image</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">confluentinc/cp-schema-registry:7.5.0</span>
<a id="__codelineno-61-13" name="__codelineno-61-13" href="#__codelineno-61-13"></a><span class="w">    </span><span class="nt">environment</span><span class="p">:</span>
<a id="__codelineno-61-14" name="__codelineno-61-14" href="#__codelineno-61-14"></a><span class="w">      </span><span class="nt">SCHEMA_REGISTRY_HOST_NAME</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">schema-registry-2</span>
<a id="__codelineno-61-15" name="__codelineno-61-15" href="#__codelineno-61-15"></a><span class="w">      </span><span class="nt">SCHEMA_REGISTRY_KAFKASTORE_BOOTSTRAP_SERVERS</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">kafka:9092</span>
<a id="__codelineno-61-16" name="__codelineno-61-16" href="#__codelineno-61-16"></a><span class="w">      </span><span class="nt">SCHEMA_REGISTRY_LEADER_ELIGIBILITY</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;true&quot;</span>
<a id="__codelineno-61-17" name="__codelineno-61-17" href="#__codelineno-61-17"></a><span class="w">      </span><span class="nt">SCHEMA_REGISTRY_HEAP_OPTS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;-Xms1g</span><span class="nv"> </span><span class="s">-Xmx2g&quot;</span>
<a id="__codelineno-61-18" name="__codelineno-61-18" href="#__codelineno-61-18"></a>
<a id="__codelineno-61-19" name="__codelineno-61-19" href="#__codelineno-61-19"></a><span class="w">  </span><span class="nt">schema-registry-lb</span><span class="p">:</span>
<a id="__codelineno-61-20" name="__codelineno-61-20" href="#__codelineno-61-20"></a><span class="w">    </span><span class="nt">image</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">nginx:alpine</span>
<a id="__codelineno-61-21" name="__codelineno-61-21" href="#__codelineno-61-21"></a><span class="w">    </span><span class="nt">ports</span><span class="p">:</span>
<a id="__codelineno-61-22" name="__codelineno-61-22" href="#__codelineno-61-22"></a><span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="s">&quot;8081:80&quot;</span>
<a id="__codelineno-61-23" name="__codelineno-61-23" href="#__codelineno-61-23"></a><span class="w">    </span><span class="nt">volumes</span><span class="p">:</span>
<a id="__codelineno-61-24" name="__codelineno-61-24" href="#__codelineno-61-24"></a><span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">./nginx.conf:/etc/nginx/nginx.conf</span>
</code></pre></div>
<p><em>Solution 4 : Monitoring des performances</em></p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-62-1" name="__codelineno-62-1" href="#__codelineno-62-1"></a><span class="c1">// Métriques à surveiller</span>
<a id="__codelineno-62-2" name="__codelineno-62-2" href="#__codelineno-62-2"></a><span class="c1">// - schema.registry.client.cache.hits : Taux de hit du cache</span>
<a id="__codelineno-62-3" name="__codelineno-62-3" href="#__codelineno-62-3"></a><span class="c1">// - schema.registry.client.cache.misses : Requêtes au Registry</span>
<a id="__codelineno-62-4" name="__codelineno-62-4" href="#__codelineno-62-4"></a><span class="c1">// - schema.registry.client.request.latency : Latence des requêtes</span>
<a id="__codelineno-62-5" name="__codelineno-62-5" href="#__codelineno-62-5"></a>
<a id="__codelineno-62-6" name="__codelineno-62-6" href="#__codelineno-62-6"></a><span class="c1">// Alerte si le taux de cache miss est élevé</span>
<a id="__codelineno-62-7" name="__codelineno-62-7" href="#__codelineno-62-7"></a><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">cacheHitRate</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="mf">0.95</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-62-8" name="__codelineno-62-8" href="#__codelineno-62-8"></a><span class="w">    </span><span class="n">alert</span><span class="p">(</span><span class="s">&quot;Schema Registry cache hit rate below 95%&quot;</span><span class="p">);</span>
<a id="__codelineno-62-9" name="__codelineno-62-9" href="#__codelineno-62-9"></a><span class="p">}</span>
</code></pre></div>
<hr />
<h2 id="iii68-resume">III.6.8 Résumé<a class="headerlink" href="#iii68-resume" title="Permanent link">&para;</a></h2>
<p>Ce chapitre a exploré les contrats de données comme fondement de toute architecture événementielle Kafka réussie. Les contrats définissent l'accord entre producteurs et consommateurs sur la structure, le format, la sémantique, et les règles d'évolution des messages échangés. Sans cette fondation, même l'architecture technique la plus élégante s'effondre sous le poids des incompatibilités et des erreurs de communication.</p>
<h3 id="traduire-les-besoins-metier-en-schemas">Traduire les Besoins Métier en Schémas<a class="headerlink" href="#traduire-les-besoins-metier-en-schemas" title="Permanent link">&para;</a></h3>
<p>La conception des schémas commence par la compréhension du domaine métier, pas par les considérations techniques. L'erreur classique de modéliser les événements d'après les structures de bases de données existantes mène à des schémas inadaptés à l'architecture événementielle.</p>
<p><strong>L'approche Domain-Driven Design (DDD)</strong> et les ateliers <strong>Event Storming</strong> permettent d'identifier les événements métier significatifs — des faits immuables qui se sont produits dans le domaine. Ces événements guident directement la conception des topics et des schémas.</p>
<p><strong>Principes de conception retenus :</strong></p>
<p><em>Autonomie des événements</em> : Chaque événement contient toutes les informations nécessaires pour être compris et traité indépendamment. Le consommateur ne doit pas faire de lookups externes pour comprendre l'événement. Ce principe réduit le couplage au prix d'événements plus volumineux.</p>
<p><em>Nommage explicite et cohérent</em> : Les conventions de nommage (événements au passé, champs avec unités explicites, types différenciés) éliminent l'ambiguïté et facilitent la compréhension à travers les équipes.</p>
<p><em>Versioning dès le début</em> : Tout schéma évoluera. Intégrer la notion de version dès la conception initiale, même avec une seule version, prépare l'évolution future.</p>
<p><em>Séparation métadonnées/payload</em> : Les métadonnées techniques (timestamps, IDs de corrélation, source) séparées des données métier permettent une évolution indépendante et un traitement standardisé.</p>
<p><em>Granularité appropriée</em> : L'approche hybride — événements fins pour l'audit et le replay détaillé, événements agrégés pour la consommation simple — offre le meilleur des deux mondes.</p>
<h3 id="kafka-et-la-structure-des-evenements">Kafka et la Structure des Événements<a class="headerlink" href="#kafka-et-la-structure-des-evenements" title="Permanent link">&para;</a></h3>
<p><strong>Kafka est agnostique au contenu des messages</strong> — il transporte des bytes sans validation, parsing, ou transformation. Cette flexibilité est à la fois une force (tout format possible) et un risque (aucune protection native contre les schémas incompatibles).</p>
<p><strong>Choix du format de sérialisation — critères de décision :</strong></p>
<p><em>JSON</em> : Lisible par les humains, universellement supporté, flexible. Mais verbeux, non typé, et sans validation native. Approprié pour le prototypage, les faibles volumes, et l'intégration avec des systèmes legacy.</p>
<p><em>Avro</em> : Format binaire compact avec schéma intégré ou référencé, évolution native avec règles de compatibilité, performance excellente. Recommandé pour les environnements de production avec Schema Registry.</p>
<p><em>Protobuf</em> : Très compact, performant, génération de code dans de nombreux langages. Approprié pour les environnements polyglotes et l'intégration avec gRPC.</p>
<p>Le choix dépend des exigences spécifiques. Pour la majorité des architectures événementielles d'entreprise, <strong>Avro avec Schema Registry</strong> offre le meilleur équilibre entre performance, sécurité, et gouvernance.</p>
<h3 id="defis-de-levolution-des-schemas">Défis de l'Évolution des Schémas<a class="headerlink" href="#defis-de-levolution-des-schemas" title="Permanent link">&para;</a></h3>
<p>Les schémas évoluent inévitablement — nouveaux champs, champs obsolètes, changements de types. Le défi est de gérer cette évolution sans briser les consommateurs existants ni interrompre le service.</p>
<p><strong>L'analyse d'impact</strong> avant toute modification est critique : identifier les consommateurs, évaluer la nature du changement, déterminer l'ordre de déploiement, planifier la migration, et tester la compatibilité.</p>
<p><strong>Stratégies de compatibilité — choix et implications :</strong></p>
<p><em>BACKWARD (recommandé par défaut)</em> : Les nouveaux schémas lisent les anciennes données. Les consommateurs sont mis à jour avant les producteurs. Protège contre les ruptures pour les messages en rétention.</p>
<p><em>FORWARD</em> : Les anciens schémas lisent les nouvelles données. Les producteurs sont mis à jour avant les consommateurs. Utile quand le contrôle sur les consommateurs est limité.</p>
<p><em>FULL</em> : Compatibilité dans les deux sens. Plus restrictif mais plus sûr pour les environnements avec déploiements non coordonnés.</p>
<p><em>BACKWARD_TRANSITIVE / FULL_TRANSITIVE</em> : Vérifie la compatibilité avec TOUTES les versions précédentes. Essentiel pour les topics avec longue rétention.</p>
<p><strong>Patterns d'évolution éprouvés :</strong>
- Ajout de champ avec valeur par défaut
- Dépréciation progressive avec période de transition
- Nouveau topic pour les breaking changes majeurs
- Versioning explicite dans le header pour la traçabilité</p>
<h3 id="structure-et-mapping-des-evenements">Structure et Mapping des Événements<a class="headerlink" href="#structure-et-mapping-des-evenements" title="Permanent link">&para;</a></h3>
<p>Un événement bien conçu comprend des couches distinctes avec des responsabilités claires :</p>
<p><em>Header (métadonnées techniques)</em> : event_id, event_type, event_version, event_time, source, correlation_id, causation_id. Ces champs permettent la traçabilité, la déduplication, et le débogage distribué.</p>
<p><em>Payload (données métier)</em> : Les données spécifiques à l'événement, structurées selon le domaine.</p>
<p><em>Context (contexte d'exécution)</em> : tenant_id, region, environment. Informations sur le contexte de production.</p>
<p><strong>Le mapping entre systèmes</strong> pose des défis récurrents : types de données (décimaux précis pour les montants, pas de float), énumérations évolutives, références vs. objets embarqués. L'approche hybride (ID pour les jointures futures + snapshot pour le contexte historique) offre souvent le meilleur compromis.</p>
<h3 id="le-cas-customer-360">Le Cas Customer 360<a class="headerlink" href="#le-cas-customer-360" title="Permanent link">&para;</a></h3>
<p>L'étude de cas Customer 360 illustre les défis réels des contrats de données à grande échelle dans un contexte d'intégration multi-sources.</p>
<p><strong>Défis documentés :</strong>
- <em>Résolution d'identité</em> : Chaque système a sa propre notion d'identifiant client. La création d'une table de correspondance et d'un identifiant canonique est essentielle.
- <em>Schémas hétérogènes</em> : Les sources ont des représentations différentes. Le schéma canonique avec mapping explicite permet l'unification.
- <em>Cohérence temporelle</em> : Les événements arrivent dans le désordre. Le fenêtrage et les timestamps explicites gèrent cette complexité.
- <em>Qualité des données</em> : Les données sources contiennent des erreurs. La validation et l'enrichissement dans le pipeline sont nécessaires.</p>
<p><strong>Leçons clés du terrain :</strong>
1. L'identity resolution consomme 40% de l'effort — investir dès le début
2. Les schémas canoniques évoluent — prévoir 2-3 itérations
3. La qualité des données est pire qu'attendu — construire des pipelines de nettoyage robustes
4. Le temps réel n'est pas toujours nécessaire — simplifier si une latence de minutes est acceptable
5. Documenter les mappings est critique pour l'onboarding et le débogage</p>
<h3 id="schema-registry-gouvernance-des-schemas">Schema Registry — Gouvernance des Schémas<a class="headerlink" href="#schema-registry-gouvernance-des-schemas" title="Permanent link">&para;</a></h3>
<p>Le Schema Registry Confluent est le composant central pour la gestion des schémas dans l'écosystème Kafka. Il résout le problème de l'agnosticité de Kafka envers le contenu en ajoutant une couche de gouvernance.</p>
<p><strong>Fonctionnalités clés :</strong>
- Stockage centralisé et versionné des schémas
- Validation automatique de compatibilité avant enregistrement
- IDs de schéma pour la sérialisation efficace (pas de schéma dans chaque message)
- API REST pour l'intégration CI/CD
- Haute disponibilité via clustering</p>
<p><strong>Stratégies de nommage des sujets :</strong>
- <em>TopicNameStrategy</em> (défaut) : Un schéma par topic, simple mais restrictif
- <em>RecordNameStrategy</em> : Plusieurs types par topic, organisés par nom de record
- <em>TopicRecordNameStrategy</em> : Combinaison des deux, isolation par topic ET par type</p>
<p>Le choix de la stratégie détermine les possibilités d'organisation des schémas et doit être cohérent à travers l'organisation.</p>
<h3 id="problemes-courants-et-solutions-eprouvees">Problèmes Courants et Solutions Éprouvées<a class="headerlink" href="#problemes-courants-et-solutions-eprouvees" title="Permanent link">&para;</a></h3>
<p>L'expérience collective des implémentations Kafka révèle des problèmes récurrents :</p>
<p><strong>Schema drift</strong> : Les producteurs et consommateurs utilisent des versions incompatibles. <em>Solutions</em> : Désactiver l'auto-registration en production, validation CI/CD obligatoire, tests d'intégration avec le Schema Registry.</p>
<p><strong>Documentation insuffisante</strong> : Les développeurs ne comprennent pas les schémas. <em>Solutions</em> : Documentation inline avec le champ <code>doc</code>, conventions de nommage explicites, génération automatique de documentation.</p>
<p><strong>Breaking changes accidentels</strong> : Des modifications « anodines » cassent les consommateurs. <em>Solutions</em> : Compatibilité stricte (BACKWARD ou FULL), hooks pre-commit, tests de régression de schéma.</p>
<p><strong>Prolifération de schémas</strong> : Des centaines de schémas sans gouvernance. <em>Solutions</em> : Catalogue centralisé avec métadonnées et propriétaires, processus de création avec approbation, nettoyage régulier.</p>
<p><strong>Performance du Schema Registry</strong> : Latence élevée au démarrage ou sous charge. <em>Solutions</em> : Configuration optimale du cache client, pré-chargement des schémas, haute disponibilité du Registry.</p>
<h3 id="principes-directeurs-pour-larchitecte">Principes Directeurs pour l'Architecte<a class="headerlink" href="#principes-directeurs-pour-larchitecte" title="Permanent link">&para;</a></h3>
<ol>
<li>
<p><strong>Les contrats sont des accords, pas des fichiers techniques.</strong> Ils engagent producteurs et consommateurs sur la structure ET la sémantique des données. Un changement de schéma est un changement de contrat qui doit être traité avec la rigueur correspondante.</p>
</li>
<li>
<p><strong>La compatibilité est non négociable en production.</strong> Les breaking changes doivent être exceptionnels, planifiés, et coordonnés. Le mode BACKWARD avec validation CI/CD est le minimum acceptable.</p>
</li>
<li>
<p><strong>Documenter est aussi important que définir.</strong> Un schéma sans documentation est une dette technique. Les champs <code>doc</code> dans Avro, les conventions de nommage, et les catalogues de schémas sont des investissements essentiels.</p>
</li>
<li>
<p><strong>La gouvernance précède l'échelle.</strong> Établir les processus, les conventions, et les responsabilités avant la prolifération des schémas. Corriger une gouvernance défaillante après coup est exponentiellement plus difficile.</p>
</li>
<li>
<p><strong>Automatiser la validation.</strong> Les humains font des erreurs. La CI/CD détecte les incompatibilités. Les hooks pre-commit empêchent les erreurs d'atteindre le repository. L'automatisation est la seule approche scalable.</p>
</li>
<li>
<p><strong>Le Schema Registry est critique.</strong> Il n'est pas optionnel pour les déploiements production d'entreprise. Sans lui, la gestion des schémas devient manuelle, fragile, et source d'incidents.</p>
</li>
</ol>
<hr />
<h3 id="vers-le-chapitre-suivant">Vers le Chapitre Suivant<a class="headerlink" href="#vers-le-chapitre-suivant" title="Permanent link">&para;</a></h3>
<p>Les contrats de données définissent la structure des messages échangés. Le chapitre suivant, « Patrons d'Interaction Kafka », explorera les patterns architecturaux qui utilisent ces messages : intégration par événements, data mesh, garanties de livraison, et coordination entre services dans les architectures distribuées.</p>
<hr />
<p><em>Volume III : Apache Kafka - Guide de l'Architecte</em></p>
<p><em>Chapitre III.6 — Contrats de Données</em></p>
<p><em>Monographie « L'Entreprise Agentique »</em></p>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg>
  Retour en haut de la page
</button>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
        
<div class="md-social">
  
    
    
    
    
      
      
    
    <a href="https://github.com/agbruneau/CorpusInformatique" target="_blank" rel="noopener" title="github.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M173.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M252.8 8C114.1 8 8 113.3 8 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C436.2 457.8 504 362.9 504 252 504 113.3 391.5 8 252.8 8M105.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg>
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      
      <script id="__config" type="application/json">{"annotate": null, "base": "../../..", "features": ["navigation.tabs", "navigation.sections", "navigation.expand", "navigation.top", "navigation.indexes", "toc.integrate", "search.suggest", "search.highlight", "content.code.copy"], "search": "../../../assets/javascripts/workers/search.2c215733.min.js", "tags": null, "translations": {"clipboard.copied": "Copi\u00e9 dans le presse-papier", "clipboard.copy": "Copier dans le presse-papier", "search.result.more.one": "1 de plus sur cette page", "search.result.more.other": "# de plus sur cette page", "search.result.none": "Aucun document trouv\u00e9", "search.result.one": "1 document trouv\u00e9", "search.result.other": "# documents trouv\u00e9s", "search.result.placeholder": "Taper pour d\u00e9marrer la recherche", "search.result.term.missing": "Non trouv\u00e9", "select.version": "S\u00e9lectionner la version"}, "version": null}</script>
    
    
      <script src="../../../assets/javascripts/bundle.79ae519e.min.js"></script>
      
        <script src="https://unpkg.com/mathjax@3/es5/tex-mml-chtml.js"></script>
      
    
  </body>
</html>